<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/applications/[id]/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/applications/[id]/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useParams, useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Badge } from '@/components/ui/badge'&#10;import { Label } from '@/components/ui/label'&#10;import { Textarea } from '@/components/ui/textarea'&#10;import { ArrowLeft, CheckCircle, XCircle, User, Building, MapPin, Phone, Mail, Calendar } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;&#10;interface Application {&#10;  id: string&#10;  userId: string&#10;  businessName: string&#10;  businessDescription: string&#10;  businessAddress: string&#10;  businessPhone: string&#10;  businessEmail: string&#10;  category: string&#10;  additionalNotes?: string&#10;  status: string&#10;  applicationDate: string&#10;  reviewedBy?: string&#10;  reviewedAt?: string&#10;  rejectionReason?: string&#10;  user: {&#10;    firstName: string&#10;    lastName: string&#10;  }&#10;}&#10;&#10;export default function ApplicationDetailPage() {&#10;  const params = useParams()&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [application, setApplication] = useState&lt;Application | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [actionLoading, setActionLoading] = useState(false)&#10;  const [rejectDialogOpen, setRejectDialogOpen] = useState(false)&#10;  const [rejectionReason, setRejectionReason] = useState('')&#10;&#10;  useEffect(() =&gt; {&#10;    fetchApplication()&#10;  }, [params.id])&#10;&#10;  const fetchApplication = async () =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;Application&gt;(`/admin/applications/${params.id}`)&#10;      setApplication(data)&#10;    } catch (error: any) {&#10;      console.error('Error fetching application:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load application',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleApprove = async () =&gt; {&#10;    if (!confirm('Are you sure you want to approve this application? This will create a restaurant and grant the user Restaurant Owner role.')) return&#10;&#10;    setActionLoading(true)&#10;    try {&#10;      await api.post(`/admin/applications/${params.id}/approve`, {})&#10;      toast({&#10;        title: 'Success',&#10;        description: 'Application approved successfully',&#10;      })&#10;      router.push('/admin/applications')&#10;    } catch (error: any) {&#10;      console.error('Error approving application:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to approve application',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setActionLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleReject = async () =&gt; {&#10;    if (!rejectionReason.trim()) {&#10;      toast({&#10;        title: 'Error',&#10;        description: 'Please provide a rejection reason',&#10;        variant: 'destructive',&#10;      })&#10;      return&#10;    }&#10;&#10;    setActionLoading(true)&#10;    try {&#10;      await api.post(`/admin/applications/${params.id}/reject`, { reason: rejectionReason })&#10;      toast({&#10;        title: 'Success',&#10;        description: 'Application rejected successfully',&#10;      })&#10;      setRejectDialogOpen(false)&#10;      router.push('/admin/applications')&#10;    } catch (error: any) {&#10;      console.error('Error rejecting application:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to reject application',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setActionLoading(false)&#10;    }&#10;  }&#10;&#10;  const getStatusBadge = (status: string) =&gt; {&#10;    switch (status.toLowerCase()) {&#10;      case 'pending':&#10;        return &lt;Badge variant=&quot;outline&quot; className=&quot;bg-yellow-100&quot;&gt;Pending&lt;/Badge&gt;&#10;      case 'approved':&#10;        return &lt;Badge variant=&quot;default&quot; className=&quot;bg-green-600&quot;&gt;Approved&lt;/Badge&gt;&#10;      case 'rejected':&#10;        return &lt;Badge variant=&quot;destructive&quot;&gt;Rejected&lt;/Badge&gt;&#10;      default:&#10;        return &lt;Badge variant=&quot;outline&quot;&gt;{status}&lt;/Badge&gt;&#10;    }&#10;  }&#10;&#10;  if (loading) {&#10;    return (&#10;      &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;        &lt;div className=&quot;text-center py-8&quot;&gt;Loading application details...&lt;/div&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (!application) {&#10;    return (&#10;      &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle&gt;Application Not Found&lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-4xl&quot;&gt;&#10;      &lt;Button&#10;        variant=&quot;ghost&quot;&#10;        onClick={() =&gt; router.push('/admin/applications')}&#10;        className=&quot;mb-4&quot;&#10;      &gt;&#10;        &lt;ArrowLeft className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;        Back to Applications&#10;      &lt;/Button&gt;&#10;&#10;      &lt;div className=&quot;space-y-6&quot;&gt;&#10;        {/* Header Card */}&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;CardTitle className=&quot;text-2xl&quot;&gt;Restaurant Ownership Application&lt;/CardTitle&gt;&#10;                &lt;CardDescription&gt;Application ID: {application.id}&lt;/CardDescription&gt;&#10;              &lt;/div&gt;&#10;              {getStatusBadge(application.status)}&#10;            &lt;/div&gt;&#10;          &lt;/CardHeader&gt;&#10;        &lt;/Card&gt;&#10;&#10;        {/* Applicant Information */}&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;              &lt;User className=&quot;w-5 h-5&quot; /&gt;&#10;              Applicant Information&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-3&quot;&gt;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground&quot;&gt;Name&lt;/Label&gt;&#10;                &lt;p className=&quot;font-medium&quot;&gt;{application.user.firstName} {application.user.lastName}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground&quot;&gt;Application Date&lt;/Label&gt;&#10;                &lt;p className=&quot;font-medium flex items-center gap-1&quot;&gt;&#10;                  &lt;Calendar className=&quot;w-4 h-4&quot; /&gt;&#10;                  {new Date(application.applicationDate).toLocaleDateString()}&#10;                &lt;/p&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;&#10;        {/* Business Information */}&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;              &lt;Building className=&quot;w-5 h-5&quot; /&gt;&#10;              Business Information&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;Label className=&quot;text-muted-foreground&quot;&gt;Business Name&lt;/Label&gt;&#10;              &lt;p className=&quot;font-medium text-lg&quot;&gt;{application.businessName}&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;Label className=&quot;text-muted-foreground&quot;&gt;Category&lt;/Label&gt;&#10;              &lt;div className=&quot;mt-1&quot;&gt;&#10;                &lt;Badge variant=&quot;outline&quot;&gt;{application.category}&lt;/Badge&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;Label className=&quot;text-muted-foreground&quot;&gt;Description&lt;/Label&gt;&#10;              &lt;p className=&quot;text-sm&quot;&gt;{application.businessDescription}&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground flex items-center gap-1&quot;&gt;&#10;                  &lt;MapPin className=&quot;w-4 h-4&quot; /&gt;&#10;                  Address&#10;                &lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.businessAddress}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground flex items-center gap-1&quot;&gt;&#10;                  &lt;Phone className=&quot;w-4 h-4&quot; /&gt;&#10;                  Phone&#10;                &lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.businessPhone}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            {application.businessEmail &amp;&amp; (&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground flex items-center gap-1&quot;&gt;&#10;                  &lt;Mail className=&quot;w-4 h-4&quot; /&gt;&#10;                  Email&#10;                &lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.businessEmail}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;            )}&#10;            {application.additionalNotes &amp;&amp; (&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground&quot;&gt;Additional Notes&lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.additionalNotes}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;            )}&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;&#10;        {/* Review Information */}&#10;        {(application.reviewedAt || application.rejectionReason) &amp;&amp; (&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Review Information&lt;/CardTitle&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent className=&quot;space-y-3&quot;&gt;&#10;              {application.reviewedAt &amp;&amp; (&#10;                &lt;div&gt;&#10;                  &lt;Label className=&quot;text-muted-foreground&quot;&gt;Reviewed At&lt;/Label&gt;&#10;                  &lt;p className=&quot;text-sm&quot;&gt;{new Date(application.reviewedAt).toLocaleString()}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;              {application.rejectionReason &amp;&amp; (&#10;                &lt;div&gt;&#10;                  &lt;Label className=&quot;text-muted-foreground&quot;&gt;Rejection Reason&lt;/Label&gt;&#10;                  &lt;p className=&quot;text-sm&quot;&gt;{application.rejectionReason}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        )}&#10;&#10;        {/* Actions */}&#10;        {application.status.toLowerCase() === 'pending' &amp;&amp; (&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Actions&lt;/CardTitle&gt;&#10;              &lt;CardDescription&gt;Review and make a decision on this application&lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;div className=&quot;flex gap-4&quot;&gt;&#10;                &lt;Button&#10;                  onClick={handleApprove}&#10;                  disabled={actionLoading}&#10;                  className=&quot;flex-1&quot;&#10;                &gt;&#10;                  &lt;CheckCircle className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;                  Approve Application&#10;                &lt;/Button&gt;&#10;                &lt;Button&#10;                  variant=&quot;destructive&quot;&#10;                  onClick={() =&gt; setRejectDialogOpen(true)}&#10;                  disabled={actionLoading}&#10;                  className=&quot;flex-1&quot;&#10;                &gt;&#10;                  &lt;XCircle className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;                  Reject Application&#10;                &lt;/Button&gt;&#10;              &lt;/div&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        )}&#10;      &lt;/div&gt;&#10;&#10;      {/* Reject Dialog */}&#10;      &lt;Dialog open={rejectDialogOpen} onOpenChange={setRejectDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Reject Application&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Please provide a reason for rejecting this application. This will be visible to the applicant.&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          &lt;div className=&quot;py-4&quot;&gt;&#10;            &lt;Textarea&#10;              placeholder=&quot;Enter rejection reason...&quot;&#10;              value={rejectionReason}&#10;              onChange={(e) =&gt; setRejectionReason(e.target.value)}&#10;              rows={4}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button&#10;              variant=&quot;outline&quot;&#10;              onClick={() =&gt; setRejectDialogOpen(false)}&#10;              disabled={actionLoading}&#10;            &gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button&#10;              variant=&quot;destructive&quot;&#10;              onClick={handleReject}&#10;              disabled={actionLoading || !rejectionReason.trim()}&#10;            &gt;&#10;              {actionLoading ? 'Rejecting...' : 'Reject Application'}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/loyalty/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/loyalty/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Input } from '@/components/ui/input'&#10;import { Label } from '@/components/ui/label'&#10;import { Textarea } from '@/components/ui/textarea'&#10;import { Badge } from '@/components/ui/badge'&#10;import { useToast } from '@/hooks/use-toast'&#10;import { loyaltyApi } from '@/lib/api'&#10;import { Gift, Copy, CheckCircle, XCircle } from 'lucide-react'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;&#10;interface LoyaltyCode {&#10;  id: string&#10;  code: string&#10;  pointValue: number&#10;  description?: string&#10;  isActive: boolean&#10;  maxUses?: number&#10;  currentUses: number&#10;  createdAt: string&#10;  expiryDate?: string&#10;  isUsed: boolean&#10;}&#10;&#10;const POINT_PRESETS = [200, 500, 1000, 2000, 5000]&#10;&#10;export default function AdminLoyaltyPage() {&#10;  const { toast } = useToast()&#10;  const [codes, setCodes] = useState&lt;LoyaltyCode[]&gt;([])&#10;  const [loading, setLoading] = useState(false)&#10;  const [dialogOpen, setDialogOpen] = useState(false)&#10;  const [generatedCode, setGeneratedCode] = useState&lt;any&gt;(null)&#10;  &#10;  const [formData, setFormData] = useState({&#10;    pointValue: 500,&#10;    description: '',&#10;    maxUses: 1,&#10;    expiryDate: '',&#10;  })&#10;&#10;  useEffect(() =&gt; {&#10;    fetchCodes()&#10;  }, [])&#10;&#10;  const fetchCodes = async () =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await loyaltyApi.admin.getAllCodes()&#10;      setCodes(data)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleGenerateCode = async () =&gt; {&#10;    if (!formData.pointValue || formData.pointValue &lt; 1) {&#10;      toast({&#10;        title: 'Error',&#10;        description: 'Please enter a valid point value',&#10;        variant: 'destructive',&#10;      })&#10;      return&#10;    }&#10;&#10;    setLoading(true)&#10;    try {&#10;      const result = await loyaltyApi.admin.generateCode({&#10;        pointValue: formData.pointValue,&#10;        description: formData.description || undefined,&#10;        maxUses: formData.maxUses || undefined,&#10;        expiryDate: formData.expiryDate || undefined,&#10;      })&#10;      &#10;      setGeneratedCode(result)&#10;      setDialogOpen(true)&#10;      fetchCodes()&#10;      &#10;      // Reset form&#10;      setFormData({&#10;        pointValue: 500,&#10;        description: '',&#10;        maxUses: 1,&#10;        expiryDate: '',&#10;      })&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleDeactivate = async (codeId: string) =&gt; {&#10;    if (!confirm('Are you sure you want to deactivate this code?')) return&#10;&#10;    try {&#10;      await loyaltyApi.admin.deactivateCode(codeId)&#10;      toast({&#10;        title: 'Success',&#10;        description: 'Code deactivated successfully',&#10;      })&#10;      fetchCodes()&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    }&#10;  }&#10;&#10;  const copyToClipboard = (text: string) =&gt; {&#10;    navigator.clipboard.writeText(text)&#10;    toast({&#10;      title: 'Copied!',&#10;      description: 'Code copied to clipboard',&#10;    })&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-6xl&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Loyalty Point Management&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Generate and manage loyalty point codes&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Generate Code Form */}&#10;      &lt;Card className=&quot;mb-6&quot;&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;            &lt;Gift className=&quot;w-5 h-5&quot; /&gt;&#10;            Generate New Loyalty Code&#10;          &lt;/CardTitle&gt;&#10;          &lt;CardDescription&gt;Create a new code that customers can redeem for loyalty points&lt;/CardDescription&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          &lt;div className=&quot;space-y-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Point Value&lt;/Label&gt;&#10;              &lt;div className=&quot;flex gap-2 mt-2&quot;&gt;&#10;                {POINT_PRESETS.map((preset) =&gt; (&#10;                  &lt;Button&#10;                    key={preset}&#10;                    variant={formData.pointValue === preset ? 'default' : 'outline'}&#10;                    onClick={() =&gt; setFormData({ ...formData, pointValue: preset })}&#10;                  &gt;&#10;                    {preset}&#10;                  &lt;/Button&gt;&#10;                ))}&#10;              &lt;/div&gt;&#10;              &lt;Input&#10;                type=&quot;number&quot;&#10;                value={formData.pointValue}&#10;                onChange={(e) =&gt; setFormData({ ...formData, pointValue: parseInt(e.target.value) || 0 })}&#10;                className=&quot;mt-2&quot;&#10;                placeholder=&quot;Or enter custom value&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Description (Optional)&lt;/Label&gt;&#10;              &lt;Textarea&#10;                value={formData.description}&#10;                onChange={(e) =&gt; setFormData({ ...formData, description: e.target.value })}&#10;                placeholder=&quot;e.g., New Year Special, Summer Bonus&quot;&#10;                rows={2}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;Max Uses (Optional)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;number&quot;&#10;                  value={formData.maxUses}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, maxUses: parseInt(e.target.value) || undefined })}&#10;                  placeholder=&quot;Leave empty for unlimited&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;Expiry Date (Optional)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;datetime-local&quot;&#10;                  value={formData.expiryDate}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, expiryDate: e.target.value })}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;Button onClick={handleGenerateCode} disabled={loading} className=&quot;w-full&quot;&gt;&#10;              {loading ? 'Generating...' : 'Generate Code'}&#10;            &lt;/Button&gt;&#10;          &lt;/div&gt;&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {/* Codes List */}&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;Generated Codes&lt;/CardTitle&gt;&#10;          &lt;CardDescription&gt;All loyalty codes created by admin&lt;/CardDescription&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading &amp;&amp; codes.length === 0 ? (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;Loading...&lt;/div&gt;&#10;          ) : codes.length === 0 ? (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;No codes generated yet&lt;/div&gt;&#10;          ) : (&#10;            &lt;div className=&quot;space-y-3&quot;&gt;&#10;              {codes.map((code) =&gt; (&#10;                &lt;div key={code.id} className=&quot;border rounded-lg p-4&quot;&gt;&#10;                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                    &lt;div className=&quot;flex-1&quot;&gt;&#10;                      &lt;div className=&quot;flex items-center gap-3 mb-2&quot;&gt;&#10;                        &lt;code className=&quot;text-lg font-mono font-bold bg-muted px-3 py-1 rounded&quot;&gt;&#10;                          {code.code}&#10;                        &lt;/code&gt;&#10;                        &lt;Button&#10;                          variant=&quot;ghost&quot;&#10;                          size=&quot;sm&quot;&#10;                          onClick={() =&gt; copyToClipboard(code.code)}&#10;                        &gt;&#10;                          &lt;Copy className=&quot;w-4 h-4&quot; /&gt;&#10;                        &lt;/Button&gt;&#10;                        &lt;Badge variant={code.isActive ? 'default' : 'secondary'}&gt;&#10;                          {code.isActive ? 'Active' : 'Inactive'}&#10;                        &lt;/Badge&gt;&#10;                        &lt;Badge variant=&quot;outline&quot;&gt;{code.pointValue} Points&lt;/Badge&gt;&#10;                      &lt;/div&gt;&#10;                      {code.description &amp;&amp; (&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-2&quot;&gt;{code.description}&lt;/p&gt;&#10;                      )}&#10;                      &lt;div className=&quot;flex gap-4 text-sm text-muted-foreground&quot;&gt;&#10;                        &lt;span&gt;Uses: {code.currentUses}{code.maxUses ? `/${code.maxUses}` : ''}&lt;/span&gt;&#10;                        &lt;span&gt;Created: {new Date(code.createdAt).toLocaleDateString()}&lt;/span&gt;&#10;                        {code.expiryDate &amp;&amp; (&#10;                          &lt;span&gt;Expires: {new Date(code.expiryDate).toLocaleDateString()}&lt;/span&gt;&#10;                        )}&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    {code.isActive &amp;&amp; (&#10;                      &lt;Button&#10;                        variant=&quot;destructive&quot;&#10;                        size=&quot;sm&quot;&#10;                        onClick={() =&gt; handleDeactivate(code.id)}&#10;                      &gt;&#10;                        &lt;XCircle className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;                        Deactivate&#10;                      &lt;/Button&gt;&#10;                    )}&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              ))}&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {/* Success Dialog */}&#10;      &lt;Dialog open={dialogOpen} onOpenChange={setDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;              &lt;CheckCircle className=&quot;w-5 h-5 text-green-600&quot; /&gt;&#10;              Code Generated Successfully!&#10;            &lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Share this code with customers to let them redeem loyalty points&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          {generatedCode &amp;&amp; (&#10;            &lt;div className=&quot;py-4&quot;&gt;&#10;              &lt;div className=&quot;bg-muted p-4 rounded-lg text-center&quot;&gt;&#10;                &lt;code className=&quot;text-2xl font-mono font-bold&quot;&gt;{generatedCode.code}&lt;/code&gt;&#10;                &lt;Button&#10;                  variant=&quot;ghost&quot;&#10;                  size=&quot;sm&quot;&#10;                  onClick={() =&gt; copyToClipboard(generatedCode.code)}&#10;                  className=&quot;ml-2&quot;&#10;                &gt;&#10;                  &lt;Copy className=&quot;w-4 h-4&quot; /&gt;&#10;                &lt;/Button&gt;&#10;              &lt;/div&gt;&#10;              &lt;div className=&quot;mt-4 space-y-2 text-sm&quot;&gt;&#10;                &lt;p&gt;&lt;strong&gt;Point Value:&lt;/strong&gt; {generatedCode.pointValue}&lt;/p&gt;&#10;                {generatedCode.description &amp;&amp; (&#10;                  &lt;p&gt;&lt;strong&gt;Description:&lt;/strong&gt; {generatedCode.description}&lt;/p&gt;&#10;                )}&#10;                {generatedCode.expiryDate &amp;&amp; (&#10;                  &lt;p&gt;&lt;strong&gt;Expires:&lt;/strong&gt; {new Date(generatedCode.expiryDate).toLocaleDateString()}&lt;/p&gt;&#10;                )}&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          )}&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button onClick={() =&gt; setDialogOpen(false)}&gt;Close&lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/restaurants/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/restaurants/page.tsx" />
              <option name="originalContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'&#10;import { Badge } from '@/components/ui/badge'&#10;import { ChevronLeft, ChevronRight, MapPin, User, Store, StoreIcon } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;&#10;interface Restaurant {&#10;  id: string&#10;  name: string&#10;  address: string&#10;  phoneNumber: string&#10;  category: string&#10;  ownerName: string&#10;  ownerEmail: string&#10;  isActive: boolean&#10;  createdAt: string&#10;}&#10;&#10;interface PaginatedResult {&#10;  items: Restaurant[]&#10;  totalCount: number&#10;  pageNumber: number&#10;  pageSize: number&#10;}&#10;&#10;export default function AdminRestaurantsPage() {&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [restaurants, setRestaurants] = useState&lt;PaginatedResult | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [currentPage, setCurrentPage] = useState(1)&#10;  const [toggleLoading, setToggleLoading] = useState&lt;string | null&gt;(null)&#10;  const pageSize = 10&#10;&#10;  useEffect(() =&gt; {&#10;    fetchRestaurants(currentPage)&#10;  }, [currentPage])&#10;&#10;  const fetchRestaurants = async (page: number) =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;PaginatedResult&gt;(`/admin/restaurants?pageNumber=${page}&amp;pageSize=${pageSize}`)&#10;      console.log('Restaurants data:', data)&#10;      setRestaurants(data)&#10;    } catch (error: any) {&#10;      console.error('Error fetching restaurants:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load restaurants',&#10;        variant: 'destructive',&#10;      })&#10;      if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {&#10;        router.push('/login')&#10;      }&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleToggleRestaurantStatus = async (restaurantId: string, currentStatus: boolean) =&gt; {&#10;    setToggleLoading(restaurantId)&#10;    try {&#10;      await api.post(`/admin/restaurants/${restaurantId}/toggle-status`, {})&#10;&#10;      toast({&#10;        title: 'Success',&#10;        description: `Restaurant ${currentStatus ? 'deactivated' : 'activated'} successfully`,&#10;      })&#10;&#10;      // Sayfayı yenile&#10;      await fetchRestaurants(currentPage)&#10;    } catch (error: any) {&#10;      console.error('Error toggling restaurant status:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to update restaurant status',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setToggleLoading(null)&#10;    }&#10;  }&#10;&#10;  const totalPages = restaurants ? Math.ceil(restaurants.totalCount / pageSize) : 0&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Restaurant Management&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Manage all restaurants in the system&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;All Restaurants ({restaurants?.totalCount || 0})&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading ? (&#10;            &lt;div className=&quot;text-center py-8&quot;&gt;Loading...&lt;/div&gt;&#10;          ) : restaurants &amp;&amp; restaurants.items.length &gt; 0 ? (&#10;            &lt;&gt;&#10;              &lt;Table&gt;&#10;                &lt;TableHeader&gt;&#10;                  &lt;TableRow&gt;&#10;                    &lt;TableHead&gt;Restaurant Name&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Category&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Owner&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Contact&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Status&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Created&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Actions&lt;/TableHead&gt;&#10;                  &lt;/TableRow&gt;&#10;                &lt;/TableHeader&gt;&#10;                &lt;TableBody&gt;&#10;                  {restaurants.items.map((restaurant) =&gt; (&#10;                    &lt;TableRow key={restaurant.id}&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;font-medium&quot;&gt;{restaurant.name}&lt;/div&gt;&#10;                        &lt;div className=&quot;text-sm text-muted-foreground flex items-center gap-1 mt-1&quot;&gt;&#10;                          &lt;MapPin className=&quot;w-3 h-3&quot; /&gt;&#10;                          {restaurant.address}&#10;                        &lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Badge variant=&quot;outline&quot;&gt;{restaurant.category}&lt;/Badge&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                          &lt;User className=&quot;w-3 h-3&quot; /&gt;&#10;                          {restaurant.ownerName}&#10;                        &lt;/div&gt;&#10;                        &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;{restaurant.ownerEmail}&lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;{restaurant.phoneNumber}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        {restaurant.isActive ? (&#10;                          &lt;Badge variant=&quot;default&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;Store className=&quot;w-3 h-3&quot; /&gt;&#10;                            Active&#10;                          &lt;/Badge&gt;&#10;                        ) : (&#10;                          &lt;Badge variant=&quot;destructive&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;StoreIcon className=&quot;w-3 h-3&quot; /&gt;&#10;                            Inactive&#10;                          &lt;/Badge&gt;&#10;                        )}&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                        {new Date(restaurant.createdAt).toLocaleDateString()}&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Button&#10;                          variant={restaurant.isActive ? 'destructive' : 'default'}&#10;                          size=&quot;sm&quot;&#10;                          onClick={() =&gt; handleToggleRestaurantStatus(restaurant.id, restaurant.isActive)}&#10;                          disabled={toggleLoading === restaurant.id}&#10;                        &gt;&#10;                          {toggleLoading === restaurant.id ? (&#10;                            'Loading...'&#10;                          ) : restaurant.isActive ? (&#10;                            &lt;&gt;&#10;                              &lt;StoreIcon className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                              Deactivate&#10;                            &lt;/&gt;&#10;                          ) : (&#10;                            &lt;&gt;&#10;                              &lt;Store className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                              Activate&#10;                            &lt;/&gt;&#10;                          )}&#10;                        &lt;/Button&gt;&#10;                      &lt;/TableCell&gt;&#10;                    &lt;/TableRow&gt;&#10;                  ))}&#10;                &lt;/TableBody&gt;&#10;              &lt;/Table&gt;&#10;&#10;              {totalPages &gt; 1 &amp;&amp; (&#10;                &lt;div className=&quot;flex items-center justify-between mt-4&quot;&gt;&#10;                  &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                    Page {currentPage} of {totalPages}&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.max(1, prev - 1))}&#10;                      disabled={currentPage === 1}&#10;                    &gt;&#10;                      &lt;ChevronLeft className=&quot;w-4 h-4&quot; /&gt;&#10;                      Previous&#10;                    &lt;/Button&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.min(totalPages, prev + 1))}&#10;                      disabled={currentPage === totalPages}&#10;                    &gt;&#10;                      Next&#10;                      &lt;ChevronRight className=&quot;w-4 h-4&quot; /&gt;&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/&gt;&#10;          ) : (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;No restaurants found&lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'&#10;import { Badge } from '@/components/ui/badge'&#10;import { ChevronLeft, ChevronRight, MapPin, User, Store, StoreIcon, Loader2, Tag } from 'lucide-react'&#10;import { adminApi } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogHeader,&#10;  DialogTitle,&#10;  DialogFooter,&#10;} from '@/components/ui/dialog'&#10;import {&#10;  Select,&#10;  SelectContent,&#10;  SelectItem,&#10;  SelectTrigger,&#10;  SelectValue,&#10;} from '@/components/ui/select'&#10;&#10;interface Restaurant {&#10;  id: string&#10;  name: string&#10;  address: string&#10;  phoneNumber: string&#10;  category: string&#10;  ownerName: string&#10;  ownerEmail: string&#10;  isActive: boolean&#10;  createdAt: string&#10;}&#10;&#10;interface PaginatedResult {&#10;  items: Restaurant[]&#10;  totalCount: number&#10;  pageNumber: number&#10;  pageSize: number&#10;  totalPages: number&#10;  hasPreviousPage: boolean&#10;  hasNextPage: boolean&#10;}&#10;&#10;export default function AdminRestaurantsPage() {&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [restaurants, setRestaurants] = useState&lt;PaginatedResult | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [currentPage, setCurrentPage] = useState(1)&#10;  const [pageSize, setPageSize] = useState(10)&#10;  const [toggleLoading, setToggleLoading] = useState&lt;string | null&gt;(null)&#10;  &#10;  // Category management states&#10;  const [showCategoryDialog, setShowCategoryDialog] = useState(false)&#10;  const [selectedRestaurant, setSelectedRestaurant] = useState&lt;Restaurant | null&gt;(null)&#10;  const [availableCategories, setAvailableCategories] = useState&lt;Array&lt;{ id: number; name: string }&gt;&gt;([])&#10;  const [selectedCategory, setSelectedCategory] = useState&lt;string&gt;('')&#10;  const [categoryLoading, setCategoryLoading] = useState(false)&#10;&#10;  useEffect(() =&gt; {&#10;    fetchRestaurants(currentPage)&#10;    fetchAvailableCategories()&#10;  }, [currentPage, pageSize])&#10;&#10;  const fetchRestaurants = async (page: number) =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await adminApi.getRestaurants(page, pageSize)&#10;      setRestaurants(data)&#10;    } catch (error: any) {&#10;      console.error('Error fetching restaurants:', error)&#10;      toast({&#10;        title: 'Hata',&#10;        description: error.message || 'Restoranlar yüklenirken bir hata oluştu',&#10;        variant: 'destructive',&#10;      })&#10;      if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {&#10;        router.push('/login')&#10;      }&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const fetchAvailableCategories = async () =&gt; {&#10;    try {&#10;      const data = await adminApi.getAllRestaurantCategories()&#10;      // Backend'den &quot;1:Turkish&quot; formatında geliyor&#10;      const categories = data.categories.map((cat: string) =&gt; {&#10;        const [id, name] = cat.split(':')&#10;        return { id: parseInt(id), name }&#10;      })&#10;      setAvailableCategories(categories)&#10;    } catch (error: any) {&#10;      console.error('Error fetching categories:', error)&#10;    }&#10;  }&#10;&#10;  const handleToggleRestaurantStatus = async (restaurantId: string, currentStatus: boolean) =&gt; {&#10;    setToggleLoading(restaurantId)&#10;    try {&#10;      await adminApi.toggleRestaurantStatus(restaurantId)&#10;&#10;      toast({&#10;        title: 'Başarılı',&#10;        description: `Restoran ${currentStatus ? 'deaktif edildi' : 'aktif edildi'}`,&#10;      })&#10;&#10;      await fetchRestaurants(currentPage)&#10;    } catch (error: any) {&#10;      console.error('Error toggling restaurant status:', error)&#10;      toast({&#10;        title: 'Hata',&#10;        description: error.message || 'Restoran durumu güncellenirken bir hata oluştu',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setToggleLoading(null)&#10;    }&#10;  }&#10;&#10;  const handleOpenCategoryDialog = (restaurant: Restaurant) =&gt; {&#10;    setSelectedRestaurant(restaurant)&#10;    setSelectedCategory('')&#10;    setShowCategoryDialog(true)&#10;  }&#10;&#10;  const handleUpdateCategory = async () =&gt; {&#10;    if (!selectedRestaurant || !selectedCategory) return&#10;&#10;    setCategoryLoading(true)&#10;    try {&#10;      await adminApi.updateRestaurantCategory(selectedRestaurant.id, parseInt(selectedCategory))&#10;      toast({&#10;        title: 'Başarılı',&#10;        description: 'Restoran kategorisi başarıyla güncellendi',&#10;      })&#10;      setShowCategoryDialog(false)&#10;      setSelectedCategory('')&#10;      setSelectedRestaurant(null)&#10;      await fetchRestaurants(currentPage)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Hata',&#10;        description: error.message || 'Kategori güncellenirken bir hata oluştu',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setCategoryLoading(false)&#10;    }&#10;  }&#10;&#10;  const handlePageChange = (newPage: number) =&gt; {&#10;    if (newPage &gt;= 1 &amp;&amp; newPage &lt;= (restaurants?.totalPages || 1)) {&#10;      setCurrentPage(newPage)&#10;    }&#10;  }&#10;&#10;  const getCategoryBadgeColor = (category: string) =&gt; {&#10;    if (!category) return 'bg-gray-100 text-gray-800 border-gray-200'&#10;    &#10;    const lowerCategory = category.toLowerCase()&#10;    if (lowerCategory.includes('turkish')) return 'bg-red-100 text-red-800 border-red-200'&#10;    if (lowerCategory.includes('italian')) return 'bg-green-100 text-green-800 border-green-200'&#10;    if (lowerCategory.includes('japanese')) return 'bg-pink-100 text-pink-800 border-pink-200'&#10;    if (lowerCategory.includes('chinese')) return 'bg-yellow-100 text-yellow-800 border-yellow-200'&#10;    if (lowerCategory.includes('mexican')) return 'bg-orange-100 text-orange-800 border-orange-200'&#10;    if (lowerCategory.includes('fast')) return 'bg-blue-100 text-blue-800 border-blue-200'&#10;    return 'bg-purple-100 text-purple-800 border-purple-200'&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Restoran Yönetimi&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground mt-2&quot;&gt;Sistemdeki tüm restoranları yönetin&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;Card&gt;&#10;        &lt;CardHeader className=&quot;flex flex-row items-center justify-between&quot;&gt;&#10;          &lt;CardTitle&gt;Tüm Restoranlar ({restaurants?.totalCount || 0})&lt;/CardTitle&gt;&#10;          &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;            &lt;span className=&quot;text-sm text-muted-foreground&quot;&gt;Göster:&lt;/span&gt;&#10;            &lt;select&#10;              value={pageSize}&#10;              onChange={(e) =&gt; {&#10;                setPageSize(Number(e.target.value))&#10;                setCurrentPage(1)&#10;              }}&#10;              className=&quot;border rounded-md px-2 py-1 text-sm&quot;&#10;            &gt;&#10;              &lt;option value={5}&gt;5&lt;/option&gt;&#10;              &lt;option value={10}&gt;10&lt;/option&gt;&#10;              &lt;option value={20}&gt;20&lt;/option&gt;&#10;              &lt;option value={50}&gt;50&lt;/option&gt;&#10;            &lt;/select&gt;&#10;          &lt;/div&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading ? (&#10;            &lt;div className=&quot;text-center py-12&quot;&gt;&#10;              &lt;Loader2 className=&quot;w-8 h-8 animate-spin mx-auto mb-4&quot; /&gt;&#10;              &lt;p className=&quot;text-muted-foreground&quot;&gt;Restoranlar yükleniyor...&lt;/p&gt;&#10;            &lt;/div&gt;&#10;          ) : restaurants &amp;&amp; restaurants.items.length &gt; 0 ? (&#10;            &lt;&gt;&#10;              &lt;div className=&quot;rounded-md border&quot;&gt;&#10;                &lt;Table&gt;&#10;                  &lt;TableHeader&gt;&#10;                    &lt;TableRow&gt;&#10;                      &lt;TableHead className=&quot;w-[200px]&quot;&gt;Restoran Adı&lt;/TableHead&gt;&#10;                      &lt;TableHead&gt;Adres&lt;/TableHead&gt;&#10;                      &lt;TableHead className=&quot;w-[150px]&quot;&gt;Kategori&lt;/TableHead&gt;&#10;                      &lt;TableHead className=&quot;w-[180px]&quot;&gt;Sahip&lt;/TableHead&gt;&#10;                      &lt;TableHead className=&quot;w-[100px]&quot;&gt;Durum&lt;/TableHead&gt;&#10;                      &lt;TableHead className=&quot;w-[200px] text-right&quot;&gt;İşlemler&lt;/TableHead&gt;&#10;                    &lt;/TableRow&gt;&#10;                  &lt;/TableHeader&gt;&#10;                  &lt;TableBody&gt;&#10;                    {restaurants.items.map((restaurant) =&gt; (&#10;                      &lt;TableRow key={restaurant.id}&gt;&#10;                        &lt;TableCell className=&quot;font-medium&quot;&gt;&#10;                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                            &lt;Store className=&quot;w-4 h-4 text-muted-foreground&quot; /&gt;&#10;                            {restaurant.name}&#10;                          &lt;/div&gt;&#10;                        &lt;/TableCell&gt;&#10;                        &lt;TableCell&gt;&#10;                          &lt;div className=&quot;flex items-center gap-1 text-sm text-muted-foreground&quot;&gt;&#10;                            &lt;MapPin className=&quot;w-3 h-3&quot; /&gt;&#10;                            {restaurant.address}&#10;                          &lt;/div&gt;&#10;                        &lt;/TableCell&gt;&#10;                        &lt;TableCell&gt;&#10;                          {restaurant.category ? (&#10;                            &lt;Badge variant=&quot;outline&quot; className={getCategoryBadgeColor(restaurant.category)}&gt;&#10;                              {restaurant.category}&#10;                            &lt;/Badge&gt;&#10;                          ) : (&#10;                            &lt;span className=&quot;text-sm text-muted-foreground&quot;&gt;Belirtilmemiş&lt;/span&gt;&#10;                          )}&#10;                        &lt;/TableCell&gt;&#10;                        &lt;TableCell&gt;&#10;                          &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                            &lt;User className=&quot;w-3 h-3 text-muted-foreground&quot; /&gt;&#10;                            &lt;div className=&quot;text-sm&quot;&gt;&#10;                              &lt;p className=&quot;font-medium&quot;&gt;{restaurant.ownerName}&lt;/p&gt;&#10;                              &lt;p className=&quot;text-muted-foreground text-xs&quot;&gt;{restaurant.ownerEmail}&lt;/p&gt;&#10;                            &lt;/div&gt;&#10;                          &lt;/div&gt;&#10;                        &lt;/TableCell&gt;&#10;                        &lt;TableCell&gt;&#10;                          {restaurant.isActive ? (&#10;                            &lt;Badge variant=&quot;default&quot; className=&quot;bg-green-600&quot;&gt;Aktif&lt;/Badge&gt;&#10;                          ) : (&#10;                            &lt;Badge variant=&quot;destructive&quot;&gt;Pasif&lt;/Badge&gt;&#10;                          )}&#10;                        &lt;/TableCell&gt;&#10;                        &lt;TableCell className=&quot;text-right&quot;&gt;&#10;                          &lt;div className=&quot;flex items-center justify-end gap-2&quot;&gt;&#10;                            &lt;Button&#10;                              size=&quot;sm&quot;&#10;                              variant=&quot;outline&quot;&#10;                              onClick={() =&gt; handleOpenCategoryDialog(restaurant)}&#10;                            &gt;&#10;                              &lt;Tag className=&quot;w-3 h-3 mr-1&quot; /&gt;&#10;                              Kategori&#10;                            &lt;/Button&gt;&#10;                            &lt;Button&#10;                              size=&quot;sm&quot;&#10;                              variant={restaurant.isActive ? &quot;destructive&quot; : &quot;default&quot;}&#10;                              onClick={() =&gt; handleToggleRestaurantStatus(restaurant.id, restaurant.isActive)}&#10;                              disabled={toggleLoading === restaurant.id}&#10;                            &gt;&#10;                              {toggleLoading === restaurant.id ? (&#10;                                &lt;&gt;&#10;                                  &lt;Loader2 className=&quot;w-3 h-3 mr-1 animate-spin&quot; /&gt;&#10;                                  İşleniyor...&#10;                                &lt;/&gt;&#10;                              ) : restaurant.isActive ? (&#10;                                'Deaktif Et'&#10;                              ) : (&#10;                                'Aktif Et'&#10;                              )}&#10;                            &lt;/Button&gt;&#10;                          &lt;/div&gt;&#10;                        &lt;/TableCell&gt;&#10;                      &lt;/TableRow&gt;&#10;                    ))}&#10;                  &lt;/TableBody&gt;&#10;                &lt;/Table&gt;&#10;              &lt;/div&gt;&#10;&#10;              {/* Pagination */}&#10;              &lt;div className=&quot;flex items-center justify-between mt-4&quot;&gt;&#10;                &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                  {((restaurants.pageNumber - 1) * restaurants.pageSize) + 1} - {Math.min(restaurants.pageNumber * restaurants.pageSize, restaurants.totalCount)} arası gösteriliyor (Toplam: {restaurants.totalCount})&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                  &lt;Button&#10;                    size=&quot;sm&quot;&#10;                    variant=&quot;outline&quot;&#10;                    onClick={() =&gt; handlePageChange(currentPage - 1)}&#10;                    disabled={!restaurants.hasPreviousPage}&#10;                  &gt;&#10;                    &lt;ChevronLeft className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                    Önceki&#10;                  &lt;/Button&gt;&#10;                  &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                    {Array.from({ length: Math.min(5, restaurants.totalPages) }, (_, i) =&gt; {&#10;                      let pageNum&#10;                      if (restaurants.totalPages &lt;= 5) {&#10;                        pageNum = i + 1&#10;                      } else if (currentPage &lt;= 3) {&#10;                        pageNum = i + 1&#10;                      } else if (currentPage &gt;= restaurants.totalPages - 2) {&#10;                        pageNum = restaurants.totalPages - 4 + i&#10;                      } else {&#10;                        pageNum = currentPage - 2 + i&#10;                      }&#10;                      &#10;                      return (&#10;                        &lt;Button&#10;                          key={pageNum}&#10;                          size=&quot;sm&quot;&#10;                          variant={currentPage === pageNum ? &quot;default&quot; : &quot;outline&quot;}&#10;                          onClick={() =&gt; handlePageChange(pageNum)}&#10;                        &gt;&#10;                          {pageNum}&#10;                        &lt;/Button&gt;&#10;                      )&#10;                    })}&#10;                  &lt;/div&gt;&#10;                  &lt;Button&#10;                    size=&quot;sm&quot;&#10;                    variant=&quot;outline&quot;&#10;                    onClick={() =&gt; handlePageChange(currentPage + 1)}&#10;                    disabled={!restaurants.hasNextPage}&#10;                  &gt;&#10;                    Sonraki&#10;                    &lt;ChevronRight className=&quot;w-4 h-4 ml-1&quot; /&gt;&#10;                  &lt;/Button&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            &lt;/&gt;&#10;          ) : (&#10;            &lt;div className=&quot;text-center py-12&quot;&gt;&#10;              &lt;StoreIcon className=&quot;w-12 h-12 mx-auto mb-4 text-muted-foreground&quot; /&gt;&#10;              &lt;p className=&quot;text-muted-foreground&quot;&gt;Restoran bulunamadı&lt;/p&gt;&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {/* Category Management Dialog */}&#10;      &lt;Dialog open={showCategoryDialog} onOpenChange={setShowCategoryDialog}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Kategori Güncelle&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              {selectedRestaurant?.name} restoranının kategorisini güncelleyin&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          &#10;          &lt;div className=&quot;space-y-4&quot;&gt;&#10;            {selectedRestaurant?.category &amp;&amp; (&#10;              &lt;div&gt;&#10;                &lt;h4 className=&quot;text-sm font-medium mb-2&quot;&gt;Mevcut Kategori&lt;/h4&gt;&#10;                &lt;Badge variant=&quot;outline&quot; className={getCategoryBadgeColor(selectedRestaurant.category)}&gt;&#10;                  {selectedRestaurant.category}&#10;                &lt;/Badge&gt;&#10;              &lt;/div&gt;&#10;            )}&#10;&#10;            &lt;div&gt;&#10;              &lt;h4 className=&quot;text-sm font-medium mb-3&quot;&gt;Yeni Kategori Seç&lt;/h4&gt;&#10;              &lt;Select value={selectedCategory} onValueChange={setSelectedCategory}&gt;&#10;                &lt;SelectTrigger&gt;&#10;                  &lt;SelectValue placeholder=&quot;Kategori seçin&quot; /&gt;&#10;                &lt;/SelectTrigger&gt;&#10;                &lt;SelectContent&gt;&#10;                  {availableCategories.map((category) =&gt; (&#10;                    &lt;SelectItem key={category.id} value={category.id.toString()}&gt;&#10;                      {category.name}&#10;                    &lt;/SelectItem&gt;&#10;                  ))}&#10;                &lt;/SelectContent&gt;&#10;              &lt;/Select&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button variant=&quot;outline&quot; onClick={() =&gt; setShowCategoryDialog(false)}&gt;&#10;              İptal&#10;            &lt;/Button&gt;&#10;            &lt;Button&#10;              onClick={handleUpdateCategory}&#10;              disabled={!selectedCategory || categoryLoading}&#10;            &gt;&#10;              {categoryLoading ? (&#10;                &lt;&gt;&#10;                  &lt;Loader2 className=&quot;w-4 h-4 mr-1 animate-spin&quot; /&gt;&#10;                  Güncelleniyor...&#10;                &lt;/&gt;&#10;              ) : (&#10;                'Güncelle'&#10;              )}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/customer/loyalty/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/customer/loyalty/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { customerApi } from '@/lib/customer-api'&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Button } from '@/components/ui/button'&#10;import { Badge } from '@/components/ui/badge'&#10;import { Award, Gift, Star, TrendingUp, Check } from 'lucide-react'&#10;import { useToast } from '@/hooks/use-toast'&#10;import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'&#10;&#10;export default function CustomerLoyaltyPage() {&#10;  const [restaurants, setRestaurants] = useState&lt;any[]&gt;([])&#10;  const [selectedRestaurant, setSelectedRestaurant] = useState&lt;string | null&gt;(null)&#10;  const [loyaltyPoints, setLoyaltyPoints] = useState&lt;number&gt;(0)&#10;  const [rewards, setRewards] = useState&lt;any[]&gt;([])&#10;  const [loading, setLoading] = useState(true)&#10;  const { toast } = useToast()&#10;&#10;  useEffect(() =&gt; {&#10;    loadRestaurants()&#10;  }, [])&#10;&#10;  useEffect(() =&gt; {&#10;    if (selectedRestaurant) {&#10;      loadLoyaltyData(selectedRestaurant)&#10;    }&#10;  }, [selectedRestaurant])&#10;&#10;  const loadRestaurants = async () =&gt; {&#10;    try {&#10;      const favorites = await customerApi.favorites.getAll()&#10;      setRestaurants(favorites)&#10;      if (favorites.length &gt; 0) {&#10;        setSelectedRestaurant(favorites[0].id)&#10;      }&#10;    } catch (error) {&#10;      console.error('Error loading restaurants:', error)&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const loadLoyaltyData = async (restaurantId: string) =&gt; {&#10;    try {&#10;      const [pointsData, rewardsData] = await Promise.all([&#10;        customerApi.loyalty.getPoints(restaurantId),&#10;        customerApi.loyalty.getRewards(restaurantId),&#10;      ])&#10;      setLoyaltyPoints(pointsData.points)&#10;      setRewards(rewardsData)&#10;    } catch (error) {&#10;      console.error('Error loading loyalty data:', error)&#10;      toast({&#10;        title: 'Hata',&#10;        description: 'Sadakat verileri yüklenirken bir hata oluştu',&#10;        variant: 'destructive',&#10;      })&#10;    }&#10;  }&#10;&#10;  const handleRedeemReward = async (rewardId: string) =&gt; {&#10;    if (!confirm('Bu ödülü kullanmak istediğinize emin misiniz?')) return&#10;&#10;    try {&#10;      await customerApi.loyalty.redeemReward(rewardId)&#10;      toast({&#10;        title: 'Başarılı!',&#10;        description: 'Ödül başarıyla kullanıldı',&#10;      })&#10;      if (selectedRestaurant) {&#10;        loadLoyaltyData(selectedRestaurant)&#10;      }&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Hata',&#10;        description: error.message || 'Ödül kullanılırken bir hata oluştu',&#10;        variant: 'destructive',&#10;      })&#10;    }&#10;  }&#10;&#10;  if (loading) {&#10;    return (&#10;      &lt;div className=&quot;flex items-center justify-center min-h-screen&quot;&gt;&#10;        &lt;div className=&quot;animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900&quot;&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (restaurants.length === 0) {&#10;    return (&#10;      &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardContent className=&quot;py-12 text-center&quot;&gt;&#10;            &lt;Award className=&quot;h-12 w-12 mx-auto text-muted-foreground mb-4&quot; /&gt;&#10;            &lt;p className=&quot;text-muted-foreground mb-4&quot;&gt;&#10;              Sadakat programından faydalanmak için favori restoranlarınızı ekleyin&#10;            &lt;/p&gt;&#10;            &lt;Button asChild&gt;&#10;              &lt;a href=&quot;/restaurants&quot;&gt;Restoranları Keşfet&lt;/a&gt;&#10;            &lt;/Button&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  const selectedRestaurantData = restaurants.find(r =&gt; r.id === selectedRestaurant)&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 space-y-6&quot;&gt;&#10;      &lt;div&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold flex items-center gap-2&quot;&gt;&#10;          &lt;Award className=&quot;h-8 w-8 text-yellow-500&quot; /&gt;&#10;          Sadakat Programı &amp; Ödüller&#10;        &lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Puanlarınızı biriktirin, ödüllerden yararlanın&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Restaurant Selector */}&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;Restoran Seçin&lt;/CardTitle&gt;&#10;          &lt;CardDescription&gt;Sadakat puanlarını ve ödüllerini görmek için bir restoran seçin&lt;/CardDescription&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          &lt;div className=&quot;flex flex-wrap gap-2&quot;&gt;&#10;            {restaurants.map((restaurant) =&gt; (&#10;              &lt;Button&#10;                key={restaurant.id}&#10;                variant={selectedRestaurant === restaurant.id ? 'default' : 'outline'}&#10;                onClick={() =&gt; setSelectedRestaurant(restaurant.id)}&#10;              &gt;&#10;                {restaurant.name}&#10;              &lt;/Button&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {selectedRestaurant &amp;&amp; (&#10;        &lt;&gt;&#10;          {/* Loyalty Points Card */}&#10;          &lt;Card className=&quot;bg-gradient-to-r from-yellow-400 to-orange-500 text-white&quot;&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle className=&quot;text-2xl flex items-center gap-2&quot;&gt;&#10;                &lt;Star className=&quot;h-6 w-6 fill-white&quot; /&gt;&#10;                {selectedRestaurantData?.name}&#10;              &lt;/CardTitle&gt;&#10;              &lt;CardDescription className=&quot;text-white/90&quot;&gt;&#10;                Mevcut Sadakat Puanlarınız&#10;              &lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;div className=&quot;text-5xl font-bold&quot;&gt;{loyaltyPoints}&lt;/div&gt;&#10;              &lt;p className=&quot;text-white/90 mt-2&quot;&gt;Puan&lt;/p&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;&#10;          {/* Rewards Section */}&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;                &lt;Gift className=&quot;h-5 w-5&quot; /&gt;&#10;                Mevcut Ödüller&#10;              &lt;/CardTitle&gt;&#10;              &lt;CardDescription&gt;&#10;                Puanlarınızı kullanarak bu ödüllerden yararlanabilirsiniz&#10;              &lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              {rewards.length === 0 ? (&#10;                &lt;div className=&quot;text-center py-8&quot;&gt;&#10;                  &lt;Gift className=&quot;h-12 w-12 mx-auto text-muted-foreground mb-4&quot; /&gt;&#10;                  &lt;p className=&quot;text-muted-foreground&quot;&gt;&#10;                    Bu restoran için henüz ödül bulunmuyor&#10;                  &lt;/p&gt;&#10;                &lt;/div&gt;&#10;              ) : (&#10;                &lt;div className=&quot;grid gap-4 md:grid-cols-2&quot;&gt;&#10;                  {rewards.map((reward) =&gt; (&#10;                    &lt;Card key={reward.id} className={reward.canRedeem ? 'border-yellow-500' : ''}&gt;&#10;                      &lt;CardHeader&gt;&#10;                        &lt;div className=&quot;flex justify-between items-start&quot;&gt;&#10;                          &lt;div&gt;&#10;                            &lt;CardTitle className=&quot;text-lg&quot;&gt;{reward.name}&lt;/CardTitle&gt;&#10;                            &lt;CardDescription&gt;{reward.description}&lt;/CardDescription&gt;&#10;                          &lt;/div&gt;&#10;                          {reward.canRedeem &amp;&amp; (&#10;                            &lt;Badge className=&quot;bg-yellow-500&quot;&gt;Kullanılabilir&lt;/Badge&gt;&#10;                          )}&#10;                        &lt;/div&gt;&#10;                      &lt;/CardHeader&gt;&#10;                      &lt;CardContent&gt;&#10;                        &lt;div className=&quot;space-y-4&quot;&gt;&#10;                          {/* Reward Details */}&#10;                          &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                            &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                              &lt;TrendingUp className=&quot;h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                              &lt;span className=&quot;text-sm font-medium&quot;&gt;&#10;                                {reward.pointsRequired} Puan Gerekli&#10;                              &lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            {reward.discountAmount &amp;&amp; (&#10;                              &lt;Badge variant=&quot;secondary&quot;&gt;&#10;                                ₺{reward.discountAmount} İndirim&#10;                              &lt;/Badge&gt;&#10;                            )}&#10;                            {reward.discountPercentage &amp;&amp; (&#10;                              &lt;Badge variant=&quot;secondary&quot;&gt;&#10;                                %{reward.discountPercentage} İndirim&#10;                              &lt;/Badge&gt;&#10;                            )}&#10;                          &lt;/div&gt;&#10;&#10;                          {/* Progress Bar */}&#10;                          &lt;div className=&quot;space-y-2&quot;&gt;&#10;                            &lt;div className=&quot;w-full bg-gray-200 rounded-full h-2&quot;&gt;&#10;                              &lt;div&#10;                                className=&quot;bg-yellow-500 h-2 rounded-full transition-all&quot;&#10;                                style={{&#10;                                  width: `${Math.min((loyaltyPoints / reward.pointsRequired) * 100, 100)}%`,&#10;                                }}&#10;                              /&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;p className=&quot;text-xs text-muted-foreground text-center&quot;&gt;&#10;                              {loyaltyPoints} / {reward.pointsRequired} Puan&#10;                            &lt;/p&gt;&#10;                          &lt;/div&gt;&#10;&#10;                          {/* Redeem Button */}&#10;                          &lt;Button&#10;                            className=&quot;w-full&quot;&#10;                            disabled={!reward.canRedeem}&#10;                            onClick={() =&gt; handleRedeemReward(reward.id)}&#10;                          &gt;&#10;                            {reward.canRedeem ? (&#10;                              &lt;&gt;&#10;                                &lt;Check className=&quot;h-4 w-4 mr-2&quot; /&gt;&#10;                                Ödülü Kullan&#10;                              &lt;/&gt;&#10;                            ) : (&#10;                              `${reward.pointsRequired - loyaltyPoints} Puan Daha Gerekli`&#10;                            )}&#10;                          &lt;/Button&gt;&#10;&#10;                          {/* Expiry Info */}&#10;                          {reward.endDate &amp;&amp; (&#10;                            &lt;p className=&quot;text-xs text-muted-foreground text-center&quot;&gt;&#10;                              Son Kullanma: {new Date(reward.endDate).toLocaleDateString('tr-TR')}&#10;                            &lt;/p&gt;&#10;                          )}&#10;                        &lt;/div&gt;&#10;                      &lt;/CardContent&gt;&#10;                    &lt;/Card&gt;&#10;                  ))}&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;&#10;          {/* How it Works */}&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Nasıl Çalışır?&lt;/CardTitle&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;div className=&quot;space-y-3&quot;&gt;&#10;                &lt;div className=&quot;flex items-start gap-3&quot;&gt;&#10;                  &lt;div className=&quot;flex h-6 w-6 items-center justify-center rounded-full bg-yellow-500 text-white text-sm font-bold&quot;&gt;&#10;                    1&#10;                  &lt;/div&gt;&#10;                  &lt;div&gt;&#10;                    &lt;p className=&quot;font-medium&quot;&gt;Sipariş Verin&lt;/p&gt;&#10;                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                      Her siparişinizde otomatik olarak puan kazanırsınız&#10;                    &lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;flex items-start gap-3&quot;&gt;&#10;                  &lt;div className=&quot;flex h-6 w-6 items-center justify-center rounded-full bg-yellow-500 text-white text-sm font-bold&quot;&gt;&#10;                    2&#10;                  &lt;/div&gt;&#10;                  &lt;div&gt;&#10;                    &lt;p className=&quot;font-medium&quot;&gt;Puan Biriktirin&lt;/p&gt;&#10;                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                      Puanlarınız hesabınızda birikir&#10;                    &lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;flex items-start gap-3&quot;&gt;&#10;                  &lt;div className=&quot;flex h-6 w-6 items-center justify-center rounded-full bg-yellow-500 text-white text-sm font-bold&quot;&gt;&#10;                    3&#10;                  &lt;/div&gt;&#10;                  &lt;div&gt;&#10;                    &lt;p className=&quot;font-medium&quot;&gt;Ödül Kazanın&lt;/p&gt;&#10;                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                      Yeterli puan topladığınızda ödüllerden yararlanın&#10;                    &lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        &lt;/&gt;&#10;      )}&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/owner/rewards/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/owner/rewards/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Input } from '@/components/ui/input'&#10;import { Label } from '@/components/ui/label'&#10;import { Textarea } from '@/components/ui/textarea'&#10;import { Badge } from '@/components/ui/badge'&#10;import { useToast } from '@/hooks/use-toast'&#10;import { loyaltyApi } from '@/lib/api'&#10;import { useAuth } from '@/contexts/auth-context'&#10;import { Gift, Plus, Edit, Trash2 } from 'lucide-react'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;import {&#10;  Select,&#10;  SelectContent,&#10;  SelectItem,&#10;  SelectTrigger,&#10;  SelectValue,&#10;} from '@/components/ui/select'&#10;&#10;interface Reward {&#10;  id: string&#10;  restaurantId: string&#10;  restaurantName: string&#10;  name: string&#10;  description: string&#10;  pointsRequired: number&#10;  discountAmount?: number&#10;  discountPercentage?: number&#10;  imageUrl?: string&#10;  isActive: boolean&#10;  startDate?: string&#10;  endDate?: string&#10;  maxRedemptions?: number&#10;  currentRedemptions: number&#10;}&#10;&#10;export default function OwnerRewardsPage() {&#10;  const { toast } = useToast()&#10;  const { user } = useAuth()&#10;  const [rewards, setRewards] = useState&lt;Reward[]&gt;([])&#10;  const [restaurants, setRestaurants] = useState&lt;any[]&gt;([])&#10;  const [loading, setLoading] = useState(false)&#10;  const [dialogOpen, setDialogOpen] = useState(false)&#10;  const [editingReward, setEditingReward] = useState&lt;Reward | null&gt;(null)&#10;  &#10;  const [formData, setFormData] = useState({&#10;    restaurantId: '',&#10;    name: '',&#10;    description: '',&#10;    pointsRequired: 1000,&#10;    discountAmount: '',&#10;    discountPercentage: '',&#10;    imageUrl: '',&#10;    startDate: '',&#10;    endDate: '',&#10;    maxRedemptions: '',&#10;  })&#10;&#10;  useEffect(() =&gt; {&#10;    fetchRestaurants()&#10;  }, [])&#10;&#10;  useEffect(() =&gt; {&#10;    if (formData.restaurantId) {&#10;      fetchRewards()&#10;    }&#10;  }, [formData.restaurantId])&#10;&#10;  const fetchRestaurants = async () =&gt; {&#10;    try {&#10;      const data = await loyaltyApi.admin.getAllCodes() // Use owner API in real implementation&#10;      // In real implementation, fetch owner's restaurants&#10;      // For now, we'll set a placeholder&#10;    } catch (error: any) {&#10;      console.error(error)&#10;    }&#10;  }&#10;&#10;  const fetchRewards = async () =&gt; {&#10;    if (!formData.restaurantId) return&#10;    &#10;    setLoading(true)&#10;    try {&#10;      const data = await loyaltyApi.getRestaurantRewards(formData.restaurantId)&#10;      setRewards(data)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleSubmit = async () =&gt; {&#10;    if (!formData.name || !formData.description || !formData.pointsRequired) {&#10;      toast({&#10;        title: 'Error',&#10;        description: 'Please fill in all required fields',&#10;        variant: 'destructive',&#10;      })&#10;      return&#10;    }&#10;&#10;    setLoading(true)&#10;    try {&#10;      const data = {&#10;        restaurantId: formData.restaurantId,&#10;        name: formData.name,&#10;        description: formData.description,&#10;        pointsRequired: formData.pointsRequired,&#10;        discountAmount: formData.discountAmount ? parseFloat(formData.discountAmount) : undefined,&#10;        discountPercentage: formData.discountPercentage ? parseInt(formData.discountPercentage) : undefined,&#10;        imageUrl: formData.imageUrl || undefined,&#10;        startDate: formData.startDate || undefined,&#10;        endDate: formData.endDate || undefined,&#10;        maxRedemptions: formData.maxRedemptions ? parseInt(formData.maxRedemptions) : undefined,&#10;      }&#10;&#10;      if (editingReward) {&#10;        await loyaltyApi.owner.updateReward(editingReward.id, { ...data, isActive: editingReward.isActive })&#10;        toast({&#10;          title: 'Success',&#10;          description: 'Reward updated successfully',&#10;        })&#10;      } else {&#10;        await loyaltyApi.owner.createReward(data)&#10;        toast({&#10;          title: 'Success',&#10;          description: 'Reward created successfully',&#10;        })&#10;      }&#10;&#10;      setDialogOpen(false)&#10;      resetForm()&#10;      fetchRewards()&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleDelete = async (rewardId: string) =&gt; {&#10;    if (!confirm('Are you sure you want to delete this reward?')) return&#10;&#10;    try {&#10;      await loyaltyApi.owner.deleteReward(rewardId)&#10;      toast({&#10;        title: 'Success',&#10;        description: 'Reward deleted successfully',&#10;      })&#10;      fetchRewards()&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    }&#10;  }&#10;&#10;  const handleEdit = (reward: Reward) =&gt; {&#10;    setEditingReward(reward)&#10;    setFormData({&#10;      restaurantId: reward.restaurantId,&#10;      name: reward.name,&#10;      description: reward.description,&#10;      pointsRequired: reward.pointsRequired,&#10;      discountAmount: reward.discountAmount?.toString() || '',&#10;      discountPercentage: reward.discountPercentage?.toString() || '',&#10;      imageUrl: reward.imageUrl || '',&#10;      startDate: reward.startDate ? new Date(reward.startDate).toISOString().slice(0, 16) : '',&#10;      endDate: reward.endDate ? new Date(reward.endDate).toISOString().slice(0, 16) : '',&#10;      maxRedemptions: reward.maxRedemptions?.toString() || '',&#10;    })&#10;    setDialogOpen(true)&#10;  }&#10;&#10;  const resetForm = () =&gt; {&#10;    setEditingReward(null)&#10;    setFormData({&#10;      ...formData,&#10;      name: '',&#10;      description: '',&#10;      pointsRequired: 1000,&#10;      discountAmount: '',&#10;      discountPercentage: '',&#10;      imageUrl: '',&#10;      startDate: '',&#10;      endDate: '',&#10;      maxRedemptions: '',&#10;    })&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-6xl&quot;&gt;&#10;      &lt;div className=&quot;flex items-center justify-between mb-6&quot;&gt;&#10;        &lt;div&gt;&#10;          &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Rewards Management&lt;/h1&gt;&#10;          &lt;p className=&quot;text-muted-foreground&quot;&gt;Create and manage loyalty rewards for your customers&lt;/p&gt;&#10;        &lt;/div&gt;&#10;        &lt;Button onClick={() =&gt; setDialogOpen(true)}&gt;&#10;          &lt;Plus className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;          Create Reward&#10;        &lt;/Button&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Restaurant Selector */}&#10;      &lt;Card className=&quot;mb-6&quot;&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;Select Restaurant&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          &lt;Input&#10;            placeholder=&quot;Enter Restaurant ID&quot;&#10;            value={formData.restaurantId}&#10;            onChange={(e) =&gt; setFormData({ ...formData, restaurantId: e.target.value })}&#10;          /&gt;&#10;          &lt;p className=&quot;text-sm text-muted-foreground mt-2&quot;&gt;&#10;            Enter your restaurant ID to manage its rewards&#10;          &lt;/p&gt;&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {/* Rewards List */}&#10;      {formData.restaurantId &amp;&amp; (&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle&gt;Rewards&lt;/CardTitle&gt;&#10;            &lt;CardDescription&gt;Manage your restaurant's loyalty rewards&lt;/CardDescription&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            {loading ? (&#10;              &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;Loading...&lt;/div&gt;&#10;            ) : rewards.length === 0 ? (&#10;              &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;&#10;                No rewards created yet. Create your first reward!&#10;              &lt;/div&gt;&#10;            ) : (&#10;              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-4&quot;&gt;&#10;                {rewards.map((reward) =&gt; (&#10;                  &lt;Card key={reward.id}&gt;&#10;                    &lt;CardHeader&gt;&#10;                      &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                        &lt;div className=&quot;flex-1&quot;&gt;&#10;                          &lt;CardTitle className=&quot;text-lg&quot;&gt;{reward.name}&lt;/CardTitle&gt;&#10;                          &lt;div className=&quot;flex gap-2 mt-2&quot;&gt;&#10;                            &lt;Badge variant={reward.isActive ? 'default' : 'secondary'}&gt;&#10;                              {reward.isActive ? 'Active' : 'Inactive'}&#10;                            &lt;/Badge&gt;&#10;                            &lt;Badge variant=&quot;outline&quot;&gt;{reward.pointsRequired} pts&lt;/Badge&gt;&#10;                          &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                          &lt;Button variant=&quot;ghost&quot; size=&quot;sm&quot; onClick={() =&gt; handleEdit(reward)}&gt;&#10;                            &lt;Edit className=&quot;w-4 h-4&quot; /&gt;&#10;                          &lt;/Button&gt;&#10;                          &lt;Button variant=&quot;ghost&quot; size=&quot;sm&quot; onClick={() =&gt; handleDelete(reward.id)}&gt;&#10;                            &lt;Trash2 className=&quot;w-4 h-4&quot; /&gt;&#10;                          &lt;/Button&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    &lt;/CardHeader&gt;&#10;                    &lt;CardContent&gt;&#10;                      &lt;p className=&quot;text-sm text-muted-foreground mb-3&quot;&gt;{reward.description}&lt;/p&gt;&#10;                      {(reward.discountAmount || reward.discountPercentage) &amp;&amp; (&#10;                        &lt;div className=&quot;text-sm mb-2&quot;&gt;&#10;                          &lt;strong&gt;Discount: &lt;/strong&gt;&#10;                          {reward.discountAmount &amp;&amp; `$${reward.discountAmount}`}&#10;                          {reward.discountPercentage &amp;&amp; `${reward.discountPercentage}%`}&#10;                        &lt;/div&gt;&#10;                      )}&#10;                      &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                        Redeemed: {reward.currentRedemptions}&#10;                        {reward.maxRedemptions &amp;&amp; `/${reward.maxRedemptions}`}&#10;                      &lt;/div&gt;&#10;                    &lt;/CardContent&gt;&#10;                  &lt;/Card&gt;&#10;                ))}&#10;              &lt;/div&gt;&#10;            )}&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      )}&#10;&#10;      {/* Create/Edit Dialog */}&#10;      &lt;Dialog open={dialogOpen} onOpenChange={(open) =&gt; {&#10;        setDialogOpen(open)&#10;        if (!open) resetForm()&#10;      }}&gt;&#10;        &lt;DialogContent className=&quot;max-w-2xl max-h-[90vh] overflow-y-auto&quot;&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;&#10;              {editingReward ? 'Edit Reward' : 'Create New Reward'}&#10;            &lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Configure the reward details and requirements&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          &lt;div className=&quot;space-y-4 py-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Reward Name *&lt;/Label&gt;&#10;              &lt;Input&#10;                value={formData.name}&#10;                onChange={(e) =&gt; setFormData({ ...formData, name: e.target.value })}&#10;                placeholder=&quot;e.g., Free Appetizer, 20% Off&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Description *&lt;/Label&gt;&#10;              &lt;Textarea&#10;                value={formData.description}&#10;                onChange={(e) =&gt; setFormData({ ...formData, description: e.target.value })}&#10;                placeholder=&quot;Describe what the customer gets&quot;&#10;                rows={3}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Points Required *&lt;/Label&gt;&#10;              &lt;Input&#10;                type=&quot;number&quot;&#10;                value={formData.pointsRequired}&#10;                onChange={(e) =&gt; setFormData({ ...formData, pointsRequired: parseInt(e.target.value) || 0 })}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;Discount Amount ($)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;number&quot;&#10;                  step=&quot;0.01&quot;&#10;                  value={formData.discountAmount}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, discountAmount: e.target.value })}&#10;                  placeholder=&quot;10.00&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;Discount Percentage (%)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;number&quot;&#10;                  value={formData.discountPercentage}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, discountPercentage: e.target.value })}&#10;                  placeholder=&quot;20&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Image URL (Optional)&lt;/Label&gt;&#10;              &lt;Input&#10;                value={formData.imageUrl}&#10;                onChange={(e) =&gt; setFormData({ ...formData, imageUrl: e.target.value })}&#10;                placeholder=&quot;https://...&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;Start Date (Optional)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;datetime-local&quot;&#10;                  value={formData.startDate}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, startDate: e.target.value })}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;End Date (Optional)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;datetime-local&quot;&#10;                  value={formData.endDate}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, endDate: e.target.value })}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Max Redemptions (Optional)&lt;/Label&gt;&#10;              &lt;Input&#10;                type=&quot;number&quot;&#10;                value={formData.maxRedemptions}&#10;                onChange={(e) =&gt; setFormData({ ...formData, maxRedemptions: e.target.value })}&#10;                placeholder=&quot;Leave empty for unlimited&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button variant=&quot;outline&quot; onClick={() =&gt; {&#10;              setDialogOpen(false)&#10;              resetForm()&#10;            }}&gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button onClick={handleSubmit} disabled={loading}&gt;&#10;              {loading ? 'Saving...' : (editingReward ? 'Update' : 'Create')}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/restaurants/[id]/rewards/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/restaurants/[id]/rewards/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useParams, useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Badge } from '@/components/ui/badge'&#10;import { useToast } from '@/hooks/use-toast'&#10;import { loyaltyApi } from '@/lib/api'&#10;import { ArrowLeft, Gift, Star, Clock, Users } from 'lucide-react'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;&#10;interface Reward {&#10;  id: string&#10;  restaurantId: string&#10;  restaurantName: string&#10;  name: string&#10;  description: string&#10;  pointsRequired: number&#10;  discountAmount?: number&#10;  discountPercentage?: number&#10;  imageUrl?: string&#10;  isActive: boolean&#10;  startDate?: string&#10;  endDate?: string&#10;  maxRedemptions?: number&#10;  currentRedemptions: number&#10;  canRedeem: boolean&#10;}&#10;&#10;export default function RestaurantRewardsPage() {&#10;  const params = useParams()&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [rewards, setRewards] = useState&lt;Reward[]&gt;([])&#10;  const [loading, setLoading] = useState(false)&#10;  const [selectedReward, setSelectedReward] = useState&lt;Reward | null&gt;(null)&#10;  const [confirmDialogOpen, setConfirmDialogOpen] = useState(false)&#10;  const [userPoints, setUserPoints] = useState(0)&#10;  &#10;  const restaurantId = params.id as string&#10;&#10;  useEffect(() =&gt; {&#10;    fetchRewards()&#10;    fetchUserPoints()&#10;  }, [restaurantId])&#10;&#10;  const fetchRewards = async () =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await loyaltyApi.getRestaurantRewards(restaurantId)&#10;      setRewards(data)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const fetchUserPoints = async () =&gt; {&#10;    try {&#10;      const balances = await loyaltyApi.customer.getBalance()&#10;      const balance = balances.find((b: any) =&gt; b.restaurantId === restaurantId)&#10;      setUserPoints(balance?.availablePoints || 0)&#10;    } catch (error: any) {&#10;      console.error(error)&#10;    }&#10;  }&#10;&#10;  const handleRedeemClick = (reward: Reward) =&gt; {&#10;    setSelectedReward(reward)&#10;    setConfirmDialogOpen(true)&#10;  }&#10;&#10;  const handleConfirmRedeem = async () =&gt; {&#10;    if (!selectedReward) return&#10;&#10;    setLoading(true)&#10;    try {&#10;      const redemption = await loyaltyApi.customer.redeemReward(selectedReward.id)&#10;      toast({&#10;        title: 'Success!',&#10;        description: `Reward redeemed! Your coupon code: ${redemption.couponCode}`,&#10;      })&#10;      setConfirmDialogOpen(false)&#10;      fetchRewards()&#10;      fetchUserPoints()&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-6xl&quot;&gt;&#10;      &lt;Button variant=&quot;ghost&quot; onClick={() =&gt; router.back()} className=&quot;mb-4&quot;&gt;&#10;        &lt;ArrowLeft className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;        Back&#10;      &lt;/Button&gt;&#10;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Loyalty Rewards&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Redeem your points for exclusive rewards&lt;/p&gt;&#10;        &lt;div className=&quot;mt-2&quot;&gt;&#10;          &lt;Badge variant=&quot;outline&quot; className=&quot;text-lg px-4 py-2&quot;&gt;&#10;            &lt;Star className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;            Your Points: {userPoints}&#10;          &lt;/Badge&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      {loading &amp;&amp; rewards.length === 0 ? (&#10;        &lt;div className=&quot;text-center py-12 text-muted-foreground&quot;&gt;Loading rewards...&lt;/div&gt;&#10;      ) : rewards.length === 0 ? (&#10;        &lt;Card&gt;&#10;          &lt;CardContent className=&quot;py-12 text-center text-muted-foreground&quot;&gt;&#10;            &lt;Gift className=&quot;w-16 h-16 mx-auto mb-4 opacity-20&quot; /&gt;&#10;            &lt;p&gt;No rewards available at this restaurant yet.&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      ) : (&#10;        &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;&#10;          {rewards.map((reward) =&gt; {&#10;            const isAvailable = reward.isActive &amp;&amp; &#10;                               (!reward.maxRedemptions || reward.currentRedemptions &lt; reward.maxRedemptions) &amp;&amp;&#10;                               (!reward.endDate || new Date(reward.endDate) &gt; new Date())&#10;            const hasEnoughPoints = userPoints &gt;= reward.pointsRequired&#10;&#10;            return (&#10;              &lt;Card key={reward.id} className={!isAvailable ? 'opacity-60' : ''}&gt;&#10;                {reward.imageUrl &amp;&amp; (&#10;                  &lt;div className=&quot;aspect-video w-full overflow-hidden rounded-t-lg&quot;&gt;&#10;                    &lt;img &#10;                      src={reward.imageUrl} &#10;                      alt={reward.name}&#10;                      className=&quot;w-full h-full object-cover&quot;&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                )}&#10;                &lt;CardHeader&gt;&#10;                  &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                    &lt;CardTitle className=&quot;text-lg&quot;&gt;{reward.name}&lt;/CardTitle&gt;&#10;                    {!isAvailable &amp;&amp; (&#10;                      &lt;Badge variant=&quot;secondary&quot;&gt;Unavailable&lt;/Badge&gt;&#10;                    )}&#10;                  &lt;/div&gt;&#10;                  &lt;CardDescription className=&quot;mt-2&quot;&gt;{reward.description}&lt;/CardDescription&gt;&#10;                &lt;/CardHeader&gt;&#10;                &lt;CardContent&gt;&#10;                  &lt;div className=&quot;space-y-3&quot;&gt;&#10;                    {/* Discount Info */}&#10;                    {(reward.discountAmount || reward.discountPercentage) &amp;&amp; (&#10;                      &lt;div className=&quot;bg-primary/10 p-3 rounded-lg text-center&quot;&gt;&#10;                        &lt;div className=&quot;text-2xl font-bold text-primary&quot;&gt;&#10;                          {reward.discountAmount &amp;&amp; `$${reward.discountAmount} OFF`}&#10;                          {reward.discountPercentage &amp;&amp; `${reward.discountPercentage}% OFF`}&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    )}&#10;&#10;                    {/* Points Required */}&#10;                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                      &lt;span className=&quot;text-sm text-muted-foreground&quot;&gt;Points Required&lt;/span&gt;&#10;                      &lt;Badge variant={hasEnoughPoints ? 'default' : 'secondary'} className=&quot;text-base px-3 py-1&quot;&gt;&#10;                        &lt;Star className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                        {reward.pointsRequired}&#10;                      &lt;/Badge&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    {/* Additional Info */}&#10;                    &lt;div className=&quot;space-y-1 text-xs text-muted-foreground&quot;&gt;&#10;                      {reward.maxRedemptions &amp;&amp; (&#10;                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                          &lt;Users className=&quot;w-3 h-3&quot; /&gt;&#10;                          &lt;span&gt;&#10;                            {reward.currentRedemptions}/{reward.maxRedemptions} redeemed&#10;                          &lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      )}&#10;                      {reward.endDate &amp;&amp; (&#10;                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                          &lt;Clock className=&quot;w-3 h-3&quot; /&gt;&#10;                          &lt;span&gt;&#10;                            Valid until {new Date(reward.endDate).toLocaleDateString()}&#10;                          &lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      )}&#10;                    &lt;/div&gt;&#10;&#10;                    {/* Redeem Button */}&#10;                    &lt;Button&#10;                      onClick={() =&gt; handleRedeemClick(reward)}&#10;                      disabled={!isAvailable || !hasEnoughPoints}&#10;                      className=&quot;w-full&quot;&#10;                    &gt;&#10;                      {!hasEnoughPoints &#10;                        ? `Need ${reward.pointsRequired - userPoints} more points`&#10;                        : 'Redeem Now'&#10;                      }&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/CardContent&gt;&#10;              &lt;/Card&gt;&#10;            )&#10;          })}&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {/* Confirm Redemption Dialog */}&#10;      &lt;Dialog open={confirmDialogOpen} onOpenChange={setConfirmDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Confirm Redemption&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Are you sure you want to redeem this reward?&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          {selectedReward &amp;&amp; (&#10;            &lt;div className=&quot;py-4&quot;&gt;&#10;              &lt;div className=&quot;space-y-3&quot;&gt;&#10;                &lt;div&gt;&#10;                  &lt;h4 className=&quot;font-semibold&quot;&gt;{selectedReward.name}&lt;/h4&gt;&#10;                  &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{selectedReward.description}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;bg-muted p-3 rounded-lg&quot;&gt;&#10;                  &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;&#10;                    &lt;span className=&quot;text-sm&quot;&gt;Points to Spend&lt;/span&gt;&#10;                    &lt;span className=&quot;font-bold&quot;&gt;-{selectedReward.pointsRequired}&lt;/span&gt;&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                    &lt;span className=&quot;text-sm&quot;&gt;Remaining Balance&lt;/span&gt;&#10;                    &lt;span className=&quot;font-bold&quot;&gt;{userPoints - selectedReward.pointsRequired}&lt;/span&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;p className=&quot;text-xs text-muted-foreground&quot;&gt;&#10;                  You'll receive a coupon code that can be used at this restaurant.&#10;                &lt;/p&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          )}&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button&#10;              variant=&quot;outline&quot;&#10;              onClick={() =&gt; {&#10;                setConfirmDialogOpen(false)&#10;                setSelectedReward(null)&#10;              }}&#10;            &gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button onClick={handleConfirmRedeem} disabled={loading}&gt;&#10;              {loading ? 'Redeeming...' : 'Confirm Redeem'}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/lib/api.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/lib/api.ts" />
              <option name="originalContent" value="import { AuthService } from &quot;./auth&quot;&#10;&#10;const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || &quot;http://localhost:5000/api&quot;&#10;&#10;export class ApiClient {&#10;  private static getHeaders(): HeadersInit {&#10;    const token = AuthService.getToken()&#10;    return {&#10;      &quot;Content-Type&quot;: &quot;application/json&quot;,&#10;      ...(token &amp;&amp; { Authorization: `Bearer ${token}` }),&#10;    }&#10;  }&#10;&#10;  private static async handleResponse&lt;T&gt;(response: Response): Promise&lt;T&gt; {&#10;    if (!response.ok) {&#10;      const errorData = await response.json().catch(() =&gt; ({ message: response.statusText }))&#10;&#10;      // Backend ModelState hatalarını handle et&#10;      if (errorData.errors) {&#10;        const errorMessages = Object.entries(errorData.errors)&#10;          .map(([field, messages]: [string, any]) =&gt; {&#10;            const msgArray = Array.isArray(messages) ? messages : [messages]&#10;            return `${field}: ${msgArray.join(&quot;, &quot;)}`&#10;          })&#10;          .join(&quot;\n&quot;)&#10;        throw new Error(errorMessages)&#10;      }&#10;&#10;      throw new Error(errorData.message || errorData.Message || `API Error: ${response.statusText}`)&#10;    }&#10;&#10;    // 204 No Content durumu için boş obje döndür&#10;    if (response.status === 204) {&#10;      return {} as T&#10;    }&#10;&#10;    return response.json()&#10;  }&#10;&#10;  static async get&lt;T&gt;(endpoint: string): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;GET&quot;,&#10;      headers: this.getHeaders(),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async post&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;POST&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async put&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;PUT&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async patch&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;PATCH&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async delete&lt;T&gt;(endpoint: string): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;DELETE&quot;,&#10;      headers: this.getHeaders(),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;}&#10;&#10;// Restaurant API&#10;export const restaurantApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Restaurant&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Restaurant/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Restaurant&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Restaurant/${id}`, data),&#10;  delete: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Restaurant/${id}`),&#10;}&#10;&#10;// Menu API&#10;export const menuApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Menu/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Menu/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Menu&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Menu/${id}`, data),&#10;  delete: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Menu/${id}`),&#10;}&#10;&#10;// Order API&#10;export const orderApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Order&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Order/${id}`),&#10;  getByCustomer: (customerId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Order/customer/${customerId}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Order&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Order/${id}`, data),&#10;  updateStatus: (id: string, status: string) =&gt; ApiClient.patch&lt;any&gt;(`/Order/${id}/status`, { status }),&#10;}&#10;&#10;// Reservation API&#10;export const reservationApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Reservation&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Reservation/${id}`),&#10;  getByCustomer: (customerId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Reservation/customer/${customerId}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Reservation&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Reservation/${id}`, data),&#10;  cancel: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Reservation/${id}`),&#10;}&#10;&#10;// Employee API&#10;export const employeeApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Restaurant/${restaurantId}/employees`),&#10;  create: (restaurantId: string, data: any) =&gt; ApiClient.post&lt;any&gt;(`/Restaurant/${restaurantId}/employees`, data),&#10;  update: (restaurantId: string, employeeId: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Restaurant/${restaurantId}/employees/${employeeId}`, data),&#10;  delete: (restaurantId: string, employeeId: string) =&gt; ApiClient.delete&lt;any&gt;(`/Restaurant/${restaurantId}/employees/${employeeId}`),&#10;}&#10;&#10;// Job Application API&#10;export const jobApplicationApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/JobApplication/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/JobApplication/${id}`),&#10;  accept: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/JobApplication/${id}/accept`, {}),&#10;  reject: (id: string, reason?: string) =&gt; ApiClient.patch&lt;any&gt;(`/JobApplication/${id}/reject`, { reason }),&#10;}&#10;&#10;// Review API&#10;export const reviewApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Review/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Review/${id}`),&#10;  approve: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/approve`, {}),&#10;  reject: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/reject`, {}),&#10;  respond: (id: string, response: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/respond`, { response }),&#10;&#10;  // Admin endpoints&#10;  admin: {&#10;    getAll: (pageNumber: number = 1, pageSize: number = 10) =&gt;&#10;      ApiClient.get&lt;any&gt;(`/Admin/reviews?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`),&#10;    getPending: (pageNumber: number = 1, pageSize: number = 10) =&gt;&#10;      ApiClient.get&lt;any&gt;(`/Admin/reviews/pending?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`),&#10;    getReported: (pageNumber: number = 1, pageSize: number = 10) =&gt;&#10;      ApiClient.get&lt;any&gt;(`/Admin/reviews/reported?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`),&#10;    getById: (reviewId: string) =&gt; ApiClient.get&lt;any&gt;(`/Admin/reviews/${reviewId}`),&#10;    approve: (reviewId: string) =&gt; ApiClient.post&lt;any&gt;(`/Admin/reviews/${reviewId}/approve`, {}),&#10;    reject: (reviewId: string, reason?: string) =&gt; ApiClient.post&lt;any&gt;(`/Admin/reviews/${reviewId}/reject`, { reason }),&#10;    delete: (reviewId: string) =&gt; ApiClient.delete&lt;any&gt;(`/Admin/reviews/${reviewId}`),&#10;  },&#10;}&#10;&#10;// Table API&#10;export const tableApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Table/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Table/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Table&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Table/${id}`, data),&#10;}&#10;&#10;// Loyalty API&#10;export const loyaltyApi = {&#10;  // Admin endpoints&#10;  admin: {&#10;    generateCode: (data: { pointValue: number; description?: string; maxUses?: number; expiryDate?: string; restaurantId?: string }) =&gt;&#10;      ApiClient.post&lt;any&gt;('/Loyalty/admin/codes', data),&#10;    getAllCodes: () =&gt; ApiClient.get&lt;any[]&gt;('/Loyalty/admin/codes'),&#10;    getCodeById: (codeId: string) =&gt; ApiClient.get&lt;any&gt;(`/Loyalty/admin/codes/${codeId}`),&#10;    deactivateCode: (codeId: string) =&gt; ApiClient.patch&lt;any&gt;(`/Loyalty/admin/codes/${codeId}/deactivate`, {}),&#10;  },&#10;  // Customer endpoints&#10;  customer: {&#10;    redeemCode: (code: string) =&gt; ApiClient.post&lt;any&gt;('/Loyalty/customer/redeem-code', { code }),&#10;    getBalance: () =&gt; ApiClient.get&lt;any[]&gt;('/Loyalty/customer/balance'),&#10;    getHistory: (restaurantId?: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Loyalty/customer/history${restaurantId ? `?restaurantId=${restaurantId}` : ''}`),&#10;    redeemReward: (rewardId: string) =&gt; ApiClient.post&lt;any&gt;('/Loyalty/customer/redeem-reward', { rewardId }),&#10;    getRedemptions: () =&gt; ApiClient.get&lt;any[]&gt;('/Loyalty/customer/redemptions'),&#10;    getRedemptionById: (redemptionId: string) =&gt; ApiClient.get&lt;any&gt;(`/Loyalty/customer/redemptions/${redemptionId}`),&#10;  },&#10;  // Owner endpoints&#10;  owner: {&#10;    createReward: (data: any) =&gt; ApiClient.post&lt;any&gt;('/Loyalty/owner/rewards', data),&#10;    updateReward: (rewardId: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Loyalty/owner/rewards/${rewardId}`, data),&#10;    deleteReward: (rewardId: string) =&gt; ApiClient.delete&lt;any&gt;(`/Loyalty/owner/rewards/${rewardId}`),&#10;  },&#10;  // Public endpoints&#10;  getRestaurantRewards: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Loyalty/restaurants/${restaurantId}/rewards`),&#10;  getRewardById: (rewardId: string) =&gt; ApiClient.get&lt;any&gt;(`/Loyalty/rewards/${rewardId}`),&#10;}&#10;&#10;// Default export of ApiClient as 'api' for convenience&#10;export const api = ApiClient&#10;&#10;// Admin API&#10;export const adminApi = {&#10;  // User Management&#10;  getUsers: (pageNumber: number = 1, pageSize: number = 10) =&gt;&#10;    ApiClient.get&lt;any&gt;(`/Admin/users?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`),&#10;  toggleUserStatus: (userId: string) =&gt;&#10;    ApiClient.post&lt;any&gt;(`/Admin/users/${userId}/toggle-status`, {}),&#10;  getUserRoles: (userId: string) =&gt;&#10;    ApiClient.get&lt;{ roles: string[] }&gt;(`/Admin/users/${userId}/roles`),&#10;  getAllRoles: () =&gt;&#10;    ApiClient.get&lt;{ roles: string[] }&gt;(`/Admin/roles`),&#10;  addRoleToUser: (userId: string, role: string) =&gt;&#10;    ApiClient.post&lt;any&gt;(`/Admin/users/${userId}/roles`, { role }),&#10;  removeRoleFromUser: (userId: string, role: string) =&gt;&#10;    ApiClient.delete&lt;any&gt;(`/Admin/users/${userId}/roles/${role}`),&#10;}&#10;" />
              <option name="updatedContent" value="import { AuthService } from &quot;./auth&quot;&#10;&#10;const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || &quot;http://localhost:5000/api&quot;&#10;&#10;export class ApiClient {&#10;  private static getHeaders(): HeadersInit {&#10;    const token = AuthService.getToken()&#10;    return {&#10;      &quot;Content-Type&quot;: &quot;application/json&quot;,&#10;      ...(token &amp;&amp; { Authorization: `Bearer ${token}` }),&#10;    }&#10;  }&#10;&#10;  private static async handleResponse&lt;T&gt;(response: Response): Promise&lt;T&gt; {&#10;    if (!response.ok) {&#10;      const errorData = await response.json().catch(() =&gt; ({ message: response.statusText }))&#10;&#10;      // Backend ModelState hatalarını handle et&#10;      if (errorData.errors) {&#10;        const errorMessages = Object.entries(errorData.errors)&#10;          .map(([field, messages]: [string, any]) =&gt; {&#10;            const msgArray = Array.isArray(messages) ? messages : [messages]&#10;            return `${field}: ${msgArray.join(&quot;, &quot;)}`&#10;          })&#10;          .join(&quot;\n&quot;)&#10;        throw new Error(errorMessages)&#10;      }&#10;&#10;      throw new Error(errorData.message || errorData.Message || `API Error: ${response.statusText}`)&#10;    }&#10;&#10;    // 204 No Content durumu için boş obje döndür&#10;    if (response.status === 204) {&#10;      return {} as T&#10;    }&#10;&#10;    return response.json()&#10;  }&#10;&#10;  static async get&lt;T&gt;(endpoint: string): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;GET&quot;,&#10;      headers: this.getHeaders(),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async post&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;POST&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async put&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;PUT&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async patch&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;PATCH&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async delete&lt;T&gt;(endpoint: string): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;DELETE&quot;,&#10;      headers: this.getHeaders(),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;}&#10;&#10;// Restaurant API&#10;export const restaurantApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Restaurant&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Restaurant/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Restaurant&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Restaurant/${id}`, data),&#10;  delete: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Restaurant/${id}`),&#10;}&#10;&#10;// Menu API&#10;export const menuApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Menu/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Menu/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Menu&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Menu/${id}`, data),&#10;  delete: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Menu/${id}`),&#10;}&#10;&#10;// Order API&#10;export const orderApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Order&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Order/${id}`),&#10;  getByCustomer: (customerId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Order/customer/${customerId}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Order&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Order/${id}`, data),&#10;  updateStatus: (id: string, status: string) =&gt; ApiClient.patch&lt;any&gt;(`/Order/${id}/status`, { status }),&#10;}&#10;&#10;// Reservation API&#10;export const reservationApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Reservation&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Reservation/${id}`),&#10;  getByCustomer: (customerId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Reservation/customer/${customerId}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Reservation&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Reservation/${id}`, data),&#10;  cancel: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Reservation/${id}`),&#10;}&#10;&#10;// Employee API&#10;export const employeeApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Restaurant/${restaurantId}/employees`),&#10;  create: (restaurantId: string, data: any) =&gt; ApiClient.post&lt;any&gt;(`/Restaurant/${restaurantId}/employees`, data),&#10;  update: (restaurantId: string, employeeId: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Restaurant/${restaurantId}/employees/${employeeId}`, data),&#10;  delete: (restaurantId: string, employeeId: string) =&gt; ApiClient.delete&lt;any&gt;(`/Restaurant/${restaurantId}/employees/${employeeId}`),&#10;}&#10;&#10;// Job Application API&#10;export const jobApplicationApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/JobApplication/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/JobApplication/${id}`),&#10;  accept: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/JobApplication/${id}/accept`, {}),&#10;  reject: (id: string, reason?: string) =&gt; ApiClient.patch&lt;any&gt;(`/JobApplication/${id}/reject`, { reason }),&#10;}&#10;&#10;// Review API&#10;export const reviewApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Review/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Review/${id}`),&#10;  approve: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/approve`, {}),&#10;  reject: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/reject`, {}),&#10;  respond: (id: string, response: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/respond`, { response }),&#10;&#10;  // Admin endpoints&#10;  admin: {&#10;    getAll: (pageNumber: number = 1, pageSize: number = 10) =&gt;&#10;      ApiClient.get&lt;any&gt;(`/Admin/reviews?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`),&#10;    getPending: (pageNumber: number = 1, pageSize: number = 10) =&gt;&#10;      ApiClient.get&lt;any&gt;(`/Admin/reviews/pending?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`),&#10;    getReported: (pageNumber: number = 1, pageSize: number = 10) =&gt;&#10;      ApiClient.get&lt;any&gt;(`/Admin/reviews/reported?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`),&#10;    getById: (reviewId: string) =&gt; ApiClient.get&lt;any&gt;(`/Admin/reviews/${reviewId}`),&#10;    approve: (reviewId: string) =&gt; ApiClient.post&lt;any&gt;(`/Admin/reviews/${reviewId}/approve`, {}),&#10;    reject: (reviewId: string, reason?: string) =&gt; ApiClient.post&lt;any&gt;(`/Admin/reviews/${reviewId}/reject`, { reason }),&#10;    delete: (reviewId: string) =&gt; ApiClient.delete&lt;any&gt;(`/Admin/reviews/${reviewId}`),&#10;  },&#10;}&#10;&#10;// Table API&#10;export const tableApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Table/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Table/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Table&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Table/${id}`, data),&#10;}&#10;&#10;// Loyalty API&#10;export const loyaltyApi = {&#10;  // Admin endpoints&#10;  admin: {&#10;    generateCode: (data: { pointValue: number; description?: string; maxUses?: number; expiryDate?: string; restaurantId?: string }) =&gt;&#10;      ApiClient.post&lt;any&gt;('/Loyalty/admin/codes', data),&#10;    getAllCodes: () =&gt; ApiClient.get&lt;any[]&gt;('/Loyalty/admin/codes'),&#10;    getCodeById: (codeId: string) =&gt; ApiClient.get&lt;any&gt;(`/Loyalty/admin/codes/${codeId}`),&#10;    deactivateCode: (codeId: string) =&gt; ApiClient.patch&lt;any&gt;(`/Loyalty/admin/codes/${codeId}/deactivate`, {}),&#10;  },&#10;  // Customer endpoints&#10;  customer: {&#10;    redeemCode: (code: string) =&gt; ApiClient.post&lt;any&gt;('/Loyalty/customer/redeem-code', { code }),&#10;    getBalance: () =&gt; ApiClient.get&lt;any[]&gt;('/Loyalty/customer/balance'),&#10;    getHistory: (restaurantId?: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Loyalty/customer/history${restaurantId ? `?restaurantId=${restaurantId}` : ''}`),&#10;    redeemReward: (rewardId: string) =&gt; ApiClient.post&lt;any&gt;('/Loyalty/customer/redeem-reward', { rewardId }),&#10;    getRedemptions: () =&gt; ApiClient.get&lt;any[]&gt;('/Loyalty/customer/redemptions'),&#10;    getRedemptionById: (redemptionId: string) =&gt; ApiClient.get&lt;any&gt;(`/Loyalty/customer/redemptions/${redemptionId}`),&#10;  },&#10;  // Owner endpoints&#10;  owner: {&#10;    createReward: (data: any) =&gt; ApiClient.post&lt;any&gt;('/Loyalty/owner/rewards', data),&#10;    updateReward: (rewardId: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Loyalty/owner/rewards/${rewardId}`, data),&#10;    deleteReward: (rewardId: string) =&gt; ApiClient.delete&lt;any&gt;(`/Loyalty/owner/rewards/${rewardId}`),&#10;  },&#10;  // Public endpoints&#10;  getRestaurantRewards: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Loyalty/restaurants/${restaurantId}/rewards`),&#10;  getRewardById: (rewardId: string) =&gt; ApiClient.get&lt;any&gt;(`/Loyalty/rewards/${rewardId}`),&#10;}&#10;&#10;// Default export of ApiClient as 'api' for convenience&#10;export const api = ApiClient&#10;&#10;// Admin API&#10;export const adminApi = {&#10;  // User Management&#10;  getUsers: (pageNumber: number = 1, pageSize: number = 10) =&gt;&#10;    ApiClient.get&lt;any&gt;(`/Admin/users?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`),&#10;  toggleUserStatus: (userId: string) =&gt;&#10;    ApiClient.post&lt;any&gt;(`/Admin/users/${userId}/toggle-status`, {}),&#10;  getUserRoles: (userId: string) =&gt;&#10;    ApiClient.get&lt;{ roles: string[] }&gt;(`/Admin/users/${userId}/roles`),&#10;  getAllRoles: () =&gt;&#10;    ApiClient.get&lt;{ roles: string[] }&gt;(`/Admin/roles`),&#10;  addRoleToUser: (userId: string, role: string) =&gt;&#10;    ApiClient.post&lt;any&gt;(`/Admin/users/${userId}/roles`, { role }),&#10;  removeRoleFromUser: (userId: string, role: string) =&gt;&#10;    ApiClient.delete&lt;any&gt;(`/Admin/users/${userId}/roles/${role}`),&#10;  &#10;  // Restaurant Management&#10;  getRestaurants: (pageNumber: number = 1, pageSize: number = 10) =&gt;&#10;    ApiClient.get&lt;any&gt;(`/Admin/restaurants?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`),&#10;  toggleRestaurantStatus: (restaurantId: string) =&gt;&#10;    ApiClient.post&lt;any&gt;(`/Admin/restaurants/${restaurantId}/toggle-status`, {}),&#10;  getAllRestaurantCategories: () =&gt;&#10;    ApiClient.get&lt;{ categories: string[] }&gt;(`/Admin/restaurants/categories`),&#10;  updateRestaurantCategory: (restaurantId: string, categoryId: number) =&gt;&#10;    ApiClient.post&lt;any&gt;(`/Admin/restaurants/${restaurantId}/category`, { categoryId }),&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Loyalty/LoyaltyPointDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Loyalty/LoyaltyPointDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Application.Common.DTOs.Loyalty;&#10;&#10;public class LoyaltyPointDto&#10;{&#10;    public string Id { get; set; } = string.Empty;&#10;    public string CustomerId { get; set; } = string.Empty;&#10;    public string RestaurantId { get; set; } = string.Empty;&#10;    public string RestaurantName { get; set; } = string.Empty;&#10;    public int Points { get; set; }&#10;    public string? Description { get; set; }&#10;    public string Type { get; set; } = string.Empty;&#10;    public DateTime EarnedAt { get; set; }&#10;    public DateTime? ExpiryDate { get; set; }&#10;    public bool IsRedeemed { get; set; }&#10;}&#10;&#10;public class CustomerLoyaltyBalanceDto&#10;{&#10;    public string CustomerId { get; set; } = string.Empty;&#10;    public string RestaurantId { get; set; } = string.Empty;&#10;    public string RestaurantName { get; set; } = string.Empty;&#10;    public int TotalPoints { get; set; }&#10;    public int AvailablePoints { get; set; }&#10;    public int RedeemedPoints { get; set; }&#10;    public List&lt;LoyaltyPointDto&gt; RecentTransactions { get; set; } = new();&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Loyalty/RewardDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Loyalty/RewardDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Application.Common.DTOs.Loyalty;&#10;&#10;public class RewardDto&#10;{&#10;    public string Id { get; set; } = string.Empty;&#10;    public string RestaurantId { get; set; } = string.Empty;&#10;    public string RestaurantName { get; set; } = string.Empty;&#10;    public string Name { get; set; } = string.Empty;&#10;    public string Description { get; set; } = string.Empty;&#10;    public int PointsRequired { get; set; }&#10;    public decimal? DiscountAmount { get; set; }&#10;    public int? DiscountPercentage { get; set; }&#10;    public string? ImageUrl { get; set; }&#10;    public bool IsActive { get; set; }&#10;    public DateTime? StartDate { get; set; }&#10;    public DateTime? EndDate { get; set; }&#10;    public int? MaxRedemptions { get; set; }&#10;    public int CurrentRedemptions { get; set; }&#10;    public bool CanRedeem { get; set; }&#10;}&#10;&#10;public class CreateRewardDto&#10;{&#10;    public string RestaurantId { get; set; } = string.Empty;&#10;    public string Name { get; set; } = string.Empty;&#10;    public string Description { get; set; } = string.Empty;&#10;    public int PointsRequired { get; set; }&#10;    public decimal? DiscountAmount { get; set; }&#10;    public int? DiscountPercentage { get; set; }&#10;    public string? ImageUrl { get; set; }&#10;    public DateTime? StartDate { get; set; }&#10;    public DateTime? EndDate { get; set; }&#10;    public int? MaxRedemptions { get; set; }&#10;}&#10;&#10;public class UpdateRewardDto&#10;{&#10;    public string Name { get; set; } = string.Empty;&#10;    public string Description { get; set; } = string.Empty;&#10;    public int PointsRequired { get; set; }&#10;    public decimal? DiscountAmount { get; set; }&#10;    public int? DiscountPercentage { get; set; }&#10;    public string? ImageUrl { get; set; }&#10;    public bool IsActive { get; set; }&#10;    public DateTime? StartDate { get; set; }&#10;    public DateTime? EndDate { get; set; }&#10;    public int? MaxRedemptions { get; set; }&#10;}&#10;&#10;public class RedeemRewardDto&#10;{&#10;    public string RewardId { get; set; } = string.Empty;&#10;}&#10;&#10;public class RewardRedemptionDto&#10;{&#10;    public string Id { get; set; } = string.Empty;&#10;    public string RewardName { get; set; } = string.Empty;&#10;    public string RestaurantName { get; set; } = string.Empty;&#10;    public int PointsSpent { get; set; }&#10;    public string? CouponCode { get; set; }&#10;    public DateTime RedeemedAt { get; set; }&#10;    public bool IsUsed { get; set; }&#10;    public DateTime? UsedAt { get; set; }&#10;    public DateTime? ExpiryDate { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/IAdminService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/IAdminService.cs" />
              <option name="originalContent" value="using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.DTOs.Review;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface IAdminService&#10;{&#10;    Task&lt;OwnershipApplicationResponseDto?&gt; GetApplicationByIdAsync(string id);&#10;    Task&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt; GetPendingApplicationsAsync();&#10;    Task&lt;IEnumerable&lt;OwnershipApplication&gt;&gt; GetApplicationsByUserIdAsync(string userId);&#10;    Task ApproveApplicationAsync(string applicationId, string reviewerId);&#10;    Task RejectApplicationAsync(string applicationId, string reviewerId, string reason);&#10;   &#10;    Task&lt;AdminDashboardDto&gt; GetAdminDashboardDataAsync();&#10;    &#10;    Task&lt;PaginatedResult&lt;UserAdminShowDto&gt;&gt; GetUsersAsync(int pageNumber = 1, int pageSize = 5);&#10;    Task&lt;PaginatedResult&lt;RestaurantAdminListDto&gt;&gt; GetRestaurantsAsync(int pageNumber = 1, int pageSize = 5);&#10;    Task&lt;PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&gt; GetOwnershipApplicationsAsync(int pageNumber = 1, int pageSize = 5);&#10;    &#10;    Task ToggleUserActiveStatusAsync(string userId);&#10;    Task&lt;List&lt;string&gt;&gt; GetUserRolesAsync(string userId);&#10;    Task AddRoleToUserAsync(string userId, string role);&#10;    Task RemoveRoleFromUserAsync(string userId, string role);&#10;    Task&lt;List&lt;string&gt;&gt; GetAllRolesAsync();&#10;&#10;    Task ToggleRestaurantActiveStatusAsync(string restaurantId);&#10;    &#10;  &#10;    Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetAllReviewsAsync(int pageNumber = 1, int pageSize = 10);&#10;    Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetPendingReviewsAsync(int pageNumber = 1, int pageSize = 10);&#10;    Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetReportedReviewsAsync(int pageNumber = 1, int pageSize = 10);&#10;    Task&lt;ReviewDto?&gt; GetReviewByIdAsync(string reviewId);&#10;    Task ApproveReviewAsync(string reviewId);&#10;    Task RejectReviewAsync(string reviewId, string? reason = null);&#10;    Task DeleteReviewAsync(string reviewId);&#10;}&#10;" />
              <option name="updatedContent" value="using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.DTOs.Review;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface IAdminService&#10;{&#10;    Task&lt;OwnershipApplicationResponseDto?&gt; GetApplicationByIdAsync(string id);&#10;    Task&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt; GetPendingApplicationsAsync();&#10;    Task&lt;IEnumerable&lt;OwnershipApplication&gt;&gt; GetApplicationsByUserIdAsync(string userId);&#10;    Task ApproveApplicationAsync(string applicationId, string reviewerId);&#10;    Task RejectApplicationAsync(string applicationId, string reviewerId, string reason);&#10;   &#10;    Task&lt;AdminDashboardDto&gt; GetAdminDashboardDataAsync();&#10;    &#10;    Task&lt;PaginatedResult&lt;UserAdminShowDto&gt;&gt; GetUsersAsync(int pageNumber = 1, int pageSize = 5);&#10;    Task&lt;PaginatedResult&lt;RestaurantAdminListDto&gt;&gt; GetRestaurantsAsync(int pageNumber = 1, int pageSize = 5);&#10;    Task&lt;PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&gt; GetOwnershipApplicationsAsync(int pageNumber = 1, int pageSize = 5);&#10;    &#10;    Task ToggleUserActiveStatusAsync(string userId);&#10;    Task&lt;List&lt;string&gt;&gt; GetUserRolesAsync(string userId);&#10;    Task AddRoleToUserAsync(string userId, string role);&#10;    Task RemoveRoleFromUserAsync(string userId, string role);&#10;    Task&lt;List&lt;string&gt;&gt; GetAllRolesAsync();&#10;&#10;    Task ToggleRestaurantActiveStatusAsync(string restaurantId);&#10;    &#10;    // Restaurant Category Management&#10;    Task UpdateRestaurantCategoryAsync(string restaurantId, int categoryId);&#10;    Task&lt;List&lt;string&gt;&gt; GetAllRestaurantCategoriesAsync();&#10;    &#10;    // Review Management&#10;    Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetAllReviewsAsync(int pageNumber = 1, int pageSize = 10);&#10;    Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetPendingReviewsAsync(int pageNumber = 1, int pageSize = 10);&#10;    Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetReportedReviewsAsync(int pageNumber = 1, int pageSize = 10);&#10;    Task&lt;ReviewDto?&gt; GetReviewByIdAsync(string reviewId);&#10;    Task ApproveReviewAsync(string reviewId);&#10;    Task RejectReviewAsync(string reviewId, string? reason = null);&#10;    Task DeleteReviewAsync(string reviewId);&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/IAppDbContext.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/IAppDbContext.cs" />
              <option name="originalContent" value="using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface IAppDbContext&#10;{&#10;    public new DbSet&lt;AppUser&gt; Users { get; set; }&#10;    public DbSet&lt;Restaurant&gt; Restaurants { get; set; }&#10;    public DbSet&lt;Menu&gt; Menus { get; set; }&#10;    public DbSet&lt;MenuItem&gt; MenuItems { get; set; }&#10;    public DbSet&lt;Table&gt; Tables { get; set; }&#10;    public DbSet&lt;Reservation&gt; Reservations { get; set; }&#10;    public DbSet&lt;Order&gt; Orders { get; set; }&#10;    public DbSet&lt;OrderItem&gt; OrderItems { get; set; }&#10;    public DbSet&lt;JobPosting&gt; JobPostings { get; set; }&#10;    public DbSet&lt;JobApplication&gt; JobApplications { get; set; }&#10;    public DbSet&lt;OwnershipApplication&gt; OwnershipApplications { get; set; }&#10;    public DbSet&lt;Review&gt; Reviews { get; set; }&#10;    public DbSet&lt;FavoriteRestaurant&gt; FavoriteRestaurants { get; set; }&#10;    public DbSet&lt;LoyaltyPoint&gt; LoyaltyPoints { get; set; }&#10;    public DbSet&lt;Reward&gt; Rewards { get; set; }&#10;    public DbSet&lt;RewardRedemption&gt; RewardRedemptions { get; set; }&#10;    &#10;    Task&lt;int&gt; SaveChangesAsync(CancellationToken cancellationToken = default);&#10;}" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface IAppDbContext&#10;{&#10;    public new DbSet&lt;AppUser&gt; Users { get; set; }&#10;    public DbSet&lt;Restaurant&gt; Restaurants { get; set; }&#10;    public DbSet&lt;Menu&gt; Menus { get; set; }&#10;    public DbSet&lt;MenuItem&gt; MenuItems { get; set; }&#10;    public DbSet&lt;Table&gt; Tables { get; set; }&#10;    public DbSet&lt;Reservation&gt; Reservations { get; set; }&#10;    public DbSet&lt;Order&gt; Orders { get; set; }&#10;    public DbSet&lt;OrderItem&gt; OrderItems { get; set; }&#10;    public DbSet&lt;JobPosting&gt; JobPostings { get; set; }&#10;    public DbSet&lt;JobApplication&gt; JobApplications { get; set; }&#10;    public DbSet&lt;OwnershipApplication&gt; OwnershipApplications { get; set; }&#10;    public DbSet&lt;Review&gt; Reviews { get; set; }&#10;    public DbSet&lt;FavoriteRestaurant&gt; FavoriteRestaurants { get; set; }&#10;    public DbSet&lt;LoyaltyPoint&gt; LoyaltyPoints { get; set; }&#10;    public DbSet&lt;Reward&gt; Rewards { get; set; }&#10;    public DbSet&lt;RewardRedemption&gt; RewardRedemptions { get; set; }&#10;    public DbSet&lt;LoyaltyCode&gt; LoyaltyCodes { get; set; }&#10;    &#10;    Task&lt;int&gt; SaveChangesAsync(CancellationToken cancellationToken = default);&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/ILoyaltyService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/ILoyaltyService.cs" />
              <option name="updatedContent" value="using RestaurantManagment.Application.Common.DTOs.Loyalty;&#10;&#10;namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface ILoyaltyService&#10;{&#10;    // Admin - Loyalty Code Management&#10;    Task&lt;LoyaltyCodeResponseDto&gt; GenerateLoyaltyCodeAsync(CreateLoyaltyCodeDto dto, string adminId);&#10;    Task&lt;List&lt;LoyaltyCodeDto&gt;&gt; GetAllLoyaltyCodesAsync();&#10;    Task&lt;LoyaltyCodeDto?&gt; GetLoyaltyCodeByIdAsync(string codeId);&#10;    Task&lt;bool&gt; DeactivateLoyaltyCodeAsync(string codeId);&#10;&#10;    // Customer - Redeem Loyalty Code&#10;    Task&lt;LoyaltyPointDto&gt; RedeemLoyaltyCodeAsync(string code, string customerId);&#10;    Task&lt;List&lt;CustomerLoyaltyBalanceDto&gt;&gt; GetCustomerLoyaltyBalanceAsync(string customerId);&#10;    Task&lt;List&lt;LoyaltyPointDto&gt;&gt; GetCustomerPointHistoryAsync(string customerId, string? restaurantId = null);&#10;&#10;    // Owner - Reward Management&#10;    Task&lt;RewardDto&gt; CreateRewardAsync(CreateRewardDto dto, string ownerId);&#10;    Task&lt;RewardDto&gt; UpdateRewardAsync(string rewardId, UpdateRewardDto dto, string ownerId);&#10;    Task&lt;bool&gt; DeleteRewardAsync(string rewardId, string ownerId);&#10;    Task&lt;List&lt;RewardDto&gt;&gt; GetRestaurantRewardsAsync(string restaurantId, string? customerId = null);&#10;    Task&lt;RewardDto?&gt; GetRewardByIdAsync(string rewardId, string? customerId = null);&#10;&#10;    // Customer - Reward Redemption&#10;    Task&lt;RewardRedemptionDto&gt; RedeemRewardAsync(string rewardId, string customerId);&#10;    Task&lt;List&lt;RewardRedemptionDto&gt;&gt; GetCustomerRedemptionsAsync(string customerId);&#10;    Task&lt;RewardRedemptionDto?&gt; GetRedemptionByIdAsync(string redemptionId, string customerId);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Domain.Models.Common;&#10;&#10;public class TopSellingItemDto&#10;{&#10;    public string MenuItemId { get; set; } = string.Empty;&#10;    public string MenuItemName { get; set; } = string.Empty;&#10;    public int QuantitySold { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/LoyaltyCode.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/LoyaltyCode.cs" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="using System.ComponentModel.DataAnnotations;&#10;using RestaurantManagment.Domain.Models.Common;&#10;&#10;namespace RestaurantManagment.Domain.Models;&#10;&#10;public class LoyaltyCode : BaseEntity&#10;{&#10;    [Required]&#10;    [MaxLength(50)]&#10;    public string Code { get; set; } = string.Empty;&#10;&#10;    [Required]&#10;    public int PointValue { get; set; }&#10;&#10;    [MaxLength(500)]&#10;    public string? Description { get; set; }&#10;&#10;    [Required]&#10;    public string CreatedByAdminId { get; set; } = string.Empty;&#10;    public AppUser CreatedByAdmin { get; set; } = null!;&#10;&#10;    public bool IsActive { get; set; } = true;&#10;&#10;    public int? MaxUses { get; set; }&#10;&#10;    public int CurrentUses { get; set; } = 0;&#10;&#10;    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;&#10;&#10;    public DateTime? ExpiryDate { get; set; }&#10;&#10;    public bool IsUsed { get; set; } = false;&#10;&#10;    public string? UsedByCustomerId { get; set; }&#10;    public AppUser? UsedByCustomer { get; set; }&#10;&#10;    public DateTime? UsedAt { get; set; }&#10;&#10;    public string? RestaurantId { get; set; }&#10;    public Restaurant? Restaurant { get; set; }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/AdminService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/AdminService.cs" />
              <option name="originalContent" value="using Microsoft.AspNetCore.Identity;&#10;using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using AutoMapper;&#10;using AutoMapper.QueryableExtensions;&#10;using RestaurantManagment.Application.Common.DTOs.Review;&#10;&#10;namespace RestaurantManagment.Infrastructure.Services;&#10;&#10;public class AdminService(IAppDbContext _context,UserManager&lt;AppUser&gt; _userManager, RoleManager&lt;IdentityRole&gt; _roleManager, IMapper _mapper) : IAdminService&#10;{&#10;    &#10;    public async Task&lt;OwnershipApplicationResponseDto?&gt; GetApplicationByIdAsync(string id)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; a.Id == id &amp;&amp; !a.IsDeleted)&#10;            .FirstOrDefaultAsync();&#10;&#10;        if (application == null)&#10;            return null;&#10;&#10;        return new OwnershipApplicationResponseDto&#10;        {&#10;            Id = application.Id,&#10;            UserId = application.UserId,&#10;            BusinessName = application.BusinessName,&#10;            BusinessDescription = application.BusinessDescription,&#10;            BusinessAddress = application.BusinessAddress,&#10;            BusinessPhone = application.BusinessPhone,&#10;            BusinessEmail = application.BusinessEmail,&#10;            Category = application.Category,&#10;            AdditionalNotes = application.AdditionalNotes,&#10;            Status = application.Status.ToString(),&#10;            ApplicationDate = application.ApplicationDate,&#10;            ReviewedBy = application.ReviewedBy,&#10;            ReviewedAt = application.ReviewedAt,&#10;            RejectionReason = application.RejectionReason,&#10;            CreatedAt = application.CreatedAt,&#10;            CreatedBy = application.CreatedBy,&#10;            UpdatedAt = application.UpdatedAt,&#10;            UpdatedBy = application.UpdatedBy,&#10;            User = new UserBasicInfoDto&#10;            {&#10;                FirstName = application.User.FirstName,&#10;                LastName = application.User.LastName&#10;            }&#10;        };&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt; GetPendingApplicationsAsync()&#10;    {&#10;        var applications = await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .OrderBy(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;&#10;        var result = applications.Select(a =&gt; new OwnershipApplicationResponseDto&#10;        {&#10;            Id = a.Id,&#10;            UserId = a.UserId,&#10;            BusinessName = a.BusinessName,&#10;            BusinessDescription = a.BusinessDescription,&#10;            BusinessAddress = a.BusinessAddress,&#10;            BusinessPhone = a.BusinessPhone,&#10;            BusinessEmail = a.BusinessEmail,&#10;            Category = a.Category,&#10;            AdditionalNotes = a.AdditionalNotes,&#10;            Status = a.Status.ToString(),&#10;            ApplicationDate = a.ApplicationDate,&#10;            ReviewedBy = a.ReviewedBy,&#10;            ReviewedAt = a.ReviewedAt,&#10;            RejectionReason = a.RejectionReason,&#10;            CreatedAt = a.CreatedAt,&#10;            CreatedBy = a.CreatedBy,&#10;            UpdatedAt = a.UpdatedAt,&#10;            UpdatedBy = a.UpdatedBy,&#10;            User = new UserBasicInfoDto&#10;            {&#10;                FirstName = a.User.FirstName,&#10;                LastName = a.User.LastName&#10;            }&#10;        }).ToList();&#10;&#10;        return result;&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplication&gt;&gt; GetApplicationsByUserIdAsync(string userId)&#10;    {&#10;        return await _context.OwnershipApplications&#10;            .Where(a =&gt; a.UserId == userId &amp;&amp; !a.IsDeleted)&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;    }&#10;&#10;    public async Task ApproveApplicationAsync(string applicationId, string reviewerId)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == applicationId &amp;&amp; !a.IsDeleted);&#10;        &#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Approved;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;&#10;        &#10;        var user = await _userManager.FindByIdAsync(application.UserId);&#10;        &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;        &#10;        var currentRoles = await _userManager.GetRolesAsync(user);&#10;        &#10;      &#10;        if (currentRoles.Any())&#10;        {&#10;            var removeResult = await _userManager.RemoveFromRolesAsync(user, currentRoles);&#10;            if (!removeResult.Succeeded)&#10;            {&#10;                var errors = string.Join(&quot;, &quot;, removeResult.Errors.Select(e =&gt; e.Description));&#10;                throw new Exception($&quot;Failed to remove existing roles: {errors}&quot;);&#10;            }&#10;        }&#10;        &#10;       &#10;        var addResult = await _userManager.AddToRoleAsync(user, &quot;RestaurantOwner&quot;);&#10;        if (!addResult.Succeeded)&#10;        {&#10;            var errors = string.Join(&quot;, &quot;, addResult.Errors.Select(e =&gt; e.Description));&#10;            throw new Exception($&quot;Failed to add RestaurantOwner role: {errors}&quot;);&#10;        }&#10;        &#10;        var restaurant = new Restaurant&#10;        {&#10;            Name = application.BusinessName,&#10;            Description = application.BusinessDescription,&#10;            Address = application.BusinessAddress,&#10;            PhoneNumber = application.BusinessPhone,&#10;            Email = application.BusinessEmail,&#10;            OwnerId = application.UserId,&#10;            Rate = 0,&#10;            CreatedAt = DateTime.UtcNow&#10;        };&#10;&#10;        _context.Restaurants.Add(restaurant);&#10;        &#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectApplicationAsync(string applicationId, string reviewerId, string reason)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == applicationId &amp;&amp; !a.IsDeleted);&#10;        &#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Rejected;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;        application.RejectionReason = reason;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;AdminDashboardDto&gt; GetAdminDashboardDataAsync()&#10;    {&#10;        var dashboard = new AdminDashboardDto();&#10;&#10;     &#10;        dashboard.TotalUsers = await _userManager.Users&#10;            .Where(u =&gt; !u.IsDeleted)&#10;            .CountAsync();&#10;&#10;        &#10;        dashboard.TotalRestaurants = await _context.Restaurants&#10;            .Where(r =&gt; !r.IsDeleted)&#10;            .CountAsync();&#10;&#10;         &#10;        var restaurantOwnerRole = &quot;RestaurantOwner&quot;;&#10;        var ownersQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allOwners = await ownersQuery.ToListAsync();&#10;        var owners = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allOwners)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(restaurantOwnerRole))&#10;            {&#10;                owners.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalRestaurantOwners = owners.Count;&#10;&#10;        var employeeRole = &quot;Employee&quot;;&#10;        var employeesQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allEmployees = await employeesQuery.ToListAsync();&#10;        var employees = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allEmployees)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(employeeRole))&#10;            {&#10;                employees.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalEmployees = employees.Count;&#10;&#10;        dashboard.TotalPendingApplications = await _context.OwnershipApplications&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .CountAsync();&#10;&#10;        return dashboard;&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;UserAdminShowDto&gt;&gt; GetUsersAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;       &#10;        var query = _context.Users.IgnoreQueryFilters().AsQueryable();&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var users = await query&#10;            .OrderByDescending(u =&gt; u.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var userDtos = new List&lt;UserAdminShowDto&gt;();&#10;        foreach (var user in users)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            userDtos.Add(new UserAdminShowDto&#10;            {&#10;                Id = user.Id,&#10;                UserName = user.UserName ?? string.Empty,&#10;                Email = user.Email ?? string.Empty,&#10;                IsActive = !user.IsDeleted,&#10;                Role = roles.FirstOrDefault() ?? &quot;User&quot;&#10;            });&#10;        }&#10;&#10;        return new PaginatedResult&lt;UserAdminShowDto&gt;&#10;        {&#10;            Items = userDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;RestaurantAdminListDto&gt;&gt; GetRestaurantsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.Restaurants&#10;            .IgnoreQueryFilters()&#10;            .Include(r =&gt; r.Owner);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var restaurants = await query&#10;            .OrderByDescending(r =&gt; r.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var restaurantDtos = _mapper.Map&lt;List&lt;RestaurantAdminListDto&gt;&gt;(restaurants);&#10;&#10;        return new PaginatedResult&lt;RestaurantAdminListDto&gt;&#10;        {&#10;            Items = restaurantDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&gt; GetOwnershipApplicationsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; !a.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var applications = await query&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var applicationDtos = _mapper.Map&lt;List&lt;OwnershipApplicationAdminDto&gt;&gt;(applications);&#10;&#10;        return new PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&#10;        {&#10;            Items = applicationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task ToggleUserActiveStatusAsync(string userId)&#10;    {&#10;      &#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;    &#10;        user.IsDeleted = !user.IsDeleted;&#10;        &#10;        if (user.IsDeleted)&#10;        {&#10;            user.DeletedAt = DateTime.UtcNow;&#10;        }&#10;        else&#10;        {&#10;            user.DeletedAt = null;&#10;        }&#10;        _context.Users.Update(user);&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;List&lt;string&gt;&gt; GetUserRolesAsync(string userId)&#10;    {&#10;     &#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        var roles = await _userManager.GetRolesAsync(user);&#10;        return roles.ToList();&#10;    }&#10;&#10;    public async Task AddRoleToUserAsync(string userId, string role)&#10;    {&#10;        &#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        var roleExists = await _roleManager.RoleExistsAsync(role);&#10;        if (!roleExists)&#10;            throw new Exception($&quot;Role '{role}' does not exist&quot;);&#10;&#10;        var isInRole = await _userManager.IsInRoleAsync(user, role);&#10;        if (isInRole)&#10;            throw new Exception($&quot;User already has the '{role}' role&quot;);&#10;&#10;        var result = await _userManager.AddToRoleAsync(user, role);&#10;        if (!result.Succeeded)&#10;            throw new Exception($&quot;Failed to add role: {string.Join(&quot;, &quot;, result.Errors.Select(e =&gt; e.Description))}&quot;);&#10;    }&#10;&#10;    public async Task RemoveRoleFromUserAsync(string userId, string role)&#10;    {&#10;     &#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        var isInRole = await _userManager.IsInRoleAsync(user, role);&#10;        if (!isInRole)&#10;            throw new Exception($&quot;User does not have the '{role}' role&quot;);&#10;&#10;        var result = await _userManager.RemoveFromRoleAsync(user, role);&#10;        if (!result.Succeeded)&#10;            throw new Exception($&quot;Failed to remove role: {string.Join(&quot;, &quot;, result.Errors.Select(e =&gt; e.Description))}&quot;);&#10;    }&#10;&#10;    public async Task&lt;List&lt;string&gt;&gt; GetAllRolesAsync()&#10;    {&#10;        var roles = await _roleManager.Roles.Select(r =&gt; r.Name).ToListAsync();&#10;        return roles.Where(r =&gt; r != null).Cast&lt;string&gt;().ToList();&#10;    }&#10;&#10;    public async Task ToggleRestaurantActiveStatusAsync(string restaurantId)&#10;    {&#10;&#10;        var restaurant = await _context.Restaurants.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId);&#10;            &#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found&quot;);&#10;&#10;&#10;        restaurant.IsDeleted = !restaurant.IsDeleted;&#10;        &#10;        if (restaurant.IsDeleted)&#10;        {&#10;            restaurant.DeletedAt = DateTime.UtcNow;&#10;        }&#10;        else&#10;        {&#10;            restaurant.DeletedAt = null;&#10;        }&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    // Review Management Methods&#10;    public async Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetAllReviewsAsync(int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        var query = _context.Reviews&#10;            .Include(r =&gt; r.Customer)&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Where(r =&gt; !r.IsDeleted)&#10;            .OrderByDescending(r =&gt; r.CreatedAt);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var reviews = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reviewDtos = _mapper.Map&lt;List&lt;ReviewDto&gt;&gt;(reviews);&#10;&#10;        return new PaginatedResult&lt;ReviewDto&gt;&#10;        {&#10;            Items = reviewDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetPendingReviewsAsync(int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        var query = _context.Reviews&#10;            .Include(r =&gt; r.Customer)&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Where(r =&gt; !r.IsDeleted &amp;&amp; r.Status == &quot;Pending&quot;)&#10;            .OrderByDescending(r =&gt; r.CreatedAt);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var reviews = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reviewDtos = _mapper.Map&lt;List&lt;ReviewDto&gt;&gt;(reviews);&#10;&#10;        return new PaginatedResult&lt;ReviewDto&gt;&#10;        {&#10;            Items = reviewDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetReportedReviewsAsync(int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        var query = _context.Reviews&#10;            .Include(r =&gt; r.Customer)&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Where(r =&gt; !r.IsDeleted &amp;&amp; r.IsReported)&#10;            .OrderByDescending(r =&gt; r.ReportedAt);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var reviews = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reviewDtos = _mapper.Map&lt;List&lt;ReviewDto&gt;&gt;(reviews);&#10;&#10;        return new PaginatedResult&lt;ReviewDto&gt;&#10;        {&#10;            Items = reviewDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;ReviewDto?&gt; GetReviewByIdAsync(string reviewId)&#10;    {&#10;        var review = await _context.Reviews&#10;            .Include(r =&gt; r.Customer)&#10;            .Include(r =&gt; r.Restaurant)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            return null;&#10;&#10;        return _mapper.Map&lt;ReviewDto&gt;(review);&#10;    }&#10;&#10;    public async Task ApproveReviewAsync(string reviewId)&#10;    {&#10;        var review = await _context.Reviews&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found&quot;);&#10;&#10;        review.Status = &quot;Approved&quot;;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectReviewAsync(string reviewId, string? reason = null)&#10;    {&#10;        var review = await _context.Reviews&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found&quot;);&#10;&#10;        review.Status = &quot;Rejected&quot;;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;        &#10;        if (!string.IsNullOrEmpty(reason))&#10;        {&#10;            review.OwnerResponse = $&quot;[Rejected by Admin: {reason}]&quot;;&#10;        }&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task DeleteReviewAsync(string reviewId)&#10;    {&#10;        var review = await _context.Reviews&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found&quot;);&#10;&#10;        review.IsDeleted = true;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Identity;&#10;using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using AutoMapper;&#10;using AutoMapper.QueryableExtensions;&#10;using RestaurantManagment.Application.Common.DTOs.Review;&#10;using RestaurantManagment.Domain.Enums;&#10;&#10;namespace RestaurantManagment.Infrastructure.Services;&#10;&#10;public class AdminService(IAppDbContext _context,UserManager&lt;AppUser&gt; _userManager, RoleManager&lt;IdentityRole&gt; _roleManager, IMapper _mapper) : IAdminService&#10;{&#10;    &#10;    public async Task&lt;OwnershipApplicationResponseDto?&gt; GetApplicationByIdAsync(string id)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; a.Id == id &amp;&amp; !a.IsDeleted)&#10;            .FirstOrDefaultAsync();&#10;&#10;        if (application == null)&#10;            return null;&#10;&#10;        return new OwnershipApplicationResponseDto&#10;        {&#10;            Id = application.Id,&#10;            UserId = application.UserId,&#10;            BusinessName = application.BusinessName,&#10;            BusinessDescription = application.BusinessDescription,&#10;            BusinessAddress = application.BusinessAddress,&#10;            BusinessPhone = application.BusinessPhone,&#10;            BusinessEmail = application.BusinessEmail,&#10;            Category = application.Category,&#10;            AdditionalNotes = application.AdditionalNotes,&#10;            Status = application.Status.ToString(),&#10;            ApplicationDate = application.ApplicationDate,&#10;            ReviewedBy = application.ReviewedBy,&#10;            ReviewedAt = application.ReviewedAt,&#10;            RejectionReason = application.RejectionReason,&#10;            CreatedAt = application.CreatedAt,&#10;            CreatedBy = application.CreatedBy,&#10;            UpdatedAt = application.UpdatedAt,&#10;            UpdatedBy = application.UpdatedBy,&#10;            User = new UserBasicInfoDto&#10;            {&#10;                FirstName = application.User.FirstName,&#10;                LastName = application.User.LastName&#10;            }&#10;        };&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt; GetPendingApplicationsAsync()&#10;    {&#10;        var applications = await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .OrderBy(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;&#10;        var result = applications.Select(a =&gt; new OwnershipApplicationResponseDto&#10;        {&#10;            Id = a.Id,&#10;            UserId = a.UserId,&#10;            BusinessName = a.BusinessName,&#10;            BusinessDescription = a.BusinessDescription,&#10;            BusinessAddress = a.BusinessAddress,&#10;            BusinessPhone = a.BusinessPhone,&#10;            BusinessEmail = a.BusinessEmail,&#10;            Category = a.Category,&#10;            AdditionalNotes = a.AdditionalNotes,&#10;            Status = a.Status.ToString(),&#10;            ApplicationDate = a.ApplicationDate,&#10;            ReviewedBy = a.ReviewedBy,&#10;            ReviewedAt = a.ReviewedAt,&#10;            RejectionReason = a.RejectionReason,&#10;            CreatedAt = a.CreatedAt,&#10;            CreatedBy = a.CreatedBy,&#10;            UpdatedAt = a.UpdatedAt,&#10;            UpdatedBy = a.UpdatedBy,&#10;            User = new UserBasicInfoDto&#10;            {&#10;                FirstName = a.User.FirstName,&#10;                LastName = a.User.LastName&#10;            }&#10;        }).ToList();&#10;&#10;        return result;&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplication&gt;&gt; GetApplicationsByUserIdAsync(string userId)&#10;    {&#10;        return await _context.OwnershipApplications&#10;            .Where(a =&gt; a.UserId == userId &amp;&amp; !a.IsDeleted)&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;    }&#10;&#10;    public async Task ApproveApplicationAsync(string applicationId, string reviewerId)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == applicationId &amp;&amp; !a.IsDeleted);&#10;        &#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Approved;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;&#10;        &#10;        var user = await _userManager.FindByIdAsync(application.UserId);&#10;        &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;        &#10;        var currentRoles = await _userManager.GetRolesAsync(user);&#10;        &#10;      &#10;        if (currentRoles.Any())&#10;        {&#10;            var removeResult = await _userManager.RemoveFromRolesAsync(user, currentRoles);&#10;            if (!removeResult.Succeeded)&#10;            {&#10;                var errors = string.Join(&quot;, &quot;, removeResult.Errors.Select(e =&gt; e.Description));&#10;                throw new Exception($&quot;Failed to remove existing roles: {errors}&quot;);&#10;            }&#10;        }&#10;        &#10;       &#10;        var addResult = await _userManager.AddToRoleAsync(user, &quot;RestaurantOwner&quot;);&#10;        if (!addResult.Succeeded)&#10;        {&#10;            var errors = string.Join(&quot;, &quot;, addResult.Errors.Select(e =&gt; e.Description));&#10;            throw new Exception($&quot;Failed to add RestaurantOwner role: {errors}&quot;);&#10;        }&#10;        &#10;        var restaurant = new Restaurant&#10;        {&#10;            Name = application.BusinessName,&#10;            Description = application.BusinessDescription,&#10;            Address = application.BusinessAddress,&#10;            PhoneNumber = application.BusinessPhone,&#10;            Email = application.BusinessEmail,&#10;            OwnerId = application.UserId,&#10;            Rate = 0,&#10;            CreatedAt = DateTime.UtcNow&#10;        };&#10;&#10;        _context.Restaurants.Add(restaurant);&#10;        &#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectApplicationAsync(string applicationId, string reviewerId, string reason)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == applicationId &amp;&amp; !a.IsDeleted);&#10;        &#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Rejected;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;        application.RejectionReason = reason;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;AdminDashboardDto&gt; GetAdminDashboardDataAsync()&#10;    {&#10;        var dashboard = new AdminDashboardDto();&#10;&#10;     &#10;        dashboard.TotalUsers = await _userManager.Users&#10;            .Where(u =&gt; !u.IsDeleted)&#10;            .CountAsync();&#10;&#10;        &#10;        dashboard.TotalRestaurants = await _context.Restaurants&#10;            .Where(r =&gt; !r.IsDeleted)&#10;            .CountAsync();&#10;&#10;         &#10;        var restaurantOwnerRole = &quot;RestaurantOwner&quot;;&#10;        var ownersQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allOwners = await ownersQuery.ToListAsync();&#10;        var owners = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allOwners)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(restaurantOwnerRole))&#10;            {&#10;                owners.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalRestaurantOwners = owners.Count;&#10;&#10;        var employeeRole = &quot;Employee&quot;;&#10;        var employeesQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allEmployees = await employeesQuery.ToListAsync();&#10;        var employees = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allEmployees)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(employeeRole))&#10;            {&#10;                employees.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalEmployees = employees.Count;&#10;&#10;        dashboard.TotalPendingApplications = await _context.OwnershipApplications&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .CountAsync();&#10;&#10;        return dashboard;&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;UserAdminShowDto&gt;&gt; GetUsersAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;       &#10;        var query = _context.Users.IgnoreQueryFilters().AsQueryable();&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var users = await query&#10;            .OrderByDescending(u =&gt; u.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var userDtos = new List&lt;UserAdminShowDto&gt;();&#10;        foreach (var user in users)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            userDtos.Add(new UserAdminShowDto&#10;            {&#10;                Id = user.Id,&#10;                UserName = user.UserName ?? string.Empty,&#10;                Email = user.Email ?? string.Empty,&#10;                IsActive = !user.IsDeleted,&#10;                Role = roles.FirstOrDefault() ?? &quot;User&quot;&#10;            });&#10;        }&#10;&#10;        return new PaginatedResult&lt;UserAdminShowDto&gt;&#10;        {&#10;            Items = userDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;RestaurantAdminListDto&gt;&gt; GetRestaurantsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.Restaurants&#10;            .IgnoreQueryFilters()&#10;            .Include(r =&gt; r.Owner);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var restaurants = await query&#10;            .OrderByDescending(r =&gt; r.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var restaurantDtos = _mapper.Map&lt;List&lt;RestaurantAdminListDto&gt;&gt;(restaurants);&#10;&#10;        return new PaginatedResult&lt;RestaurantAdminListDto&gt;&#10;        {&#10;            Items = restaurantDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&gt; GetOwnershipApplicationsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; !a.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var applications = await query&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var applicationDtos = _mapper.Map&lt;List&lt;OwnershipApplicationAdminDto&gt;&gt;(applications);&#10;&#10;        return new PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&#10;        {&#10;            Items = applicationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task ToggleUserActiveStatusAsync(string userId)&#10;    {&#10;      &#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;    &#10;        user.IsDeleted = !user.IsDeleted;&#10;        &#10;        if (user.IsDeleted)&#10;        {&#10;            user.DeletedAt = DateTime.UtcNow;&#10;        }&#10;        else&#10;        {&#10;            user.DeletedAt = null;&#10;        }&#10;        _context.Users.Update(user);&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;List&lt;string&gt;&gt; GetUserRolesAsync(string userId)&#10;    {&#10;     &#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        var roles = await _userManager.GetRolesAsync(user);&#10;        return roles.ToList();&#10;    }&#10;&#10;    public async Task AddRoleToUserAsync(string userId, string role)&#10;    {&#10;        &#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        var roleExists = await _roleManager.RoleExistsAsync(role);&#10;        if (!roleExists)&#10;            throw new Exception($&quot;Role '{role}' does not exist&quot;);&#10;&#10;        var isInRole = await _userManager.IsInRoleAsync(user, role);&#10;        if (isInRole)&#10;            throw new Exception($&quot;User already has the '{role}' role&quot;);&#10;&#10;        var result = await _userManager.AddToRoleAsync(user, role);&#10;        if (!result.Succeeded)&#10;            throw new Exception($&quot;Failed to add role: {string.Join(&quot;, &quot;, result.Errors.Select(e =&gt; e.Description))}&quot;);&#10;    }&#10;&#10;    public async Task RemoveRoleFromUserAsync(string userId, string role)&#10;    {&#10;     &#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        var isInRole = await _userManager.IsInRoleAsync(user, role);&#10;        if (!isInRole)&#10;            throw new Exception($&quot;User does not have the '{role}' role&quot;);&#10;&#10;        var result = await _userManager.RemoveFromRoleAsync(user, role);&#10;        if (!result.Succeeded)&#10;            throw new Exception($&quot;Failed to remove role: {string.Join(&quot;, &quot;, result.Errors.Select(e =&gt; e.Description))}&quot;);&#10;    }&#10;&#10;    public async Task&lt;List&lt;string&gt;&gt; GetAllRolesAsync()&#10;    {&#10;        var roles = await _roleManager.Roles.Select(r =&gt; r.Name).ToListAsync();&#10;        return roles.Where(r =&gt; r != null).Cast&lt;string&gt;().ToList();&#10;    }&#10;&#10;    public async Task ToggleRestaurantActiveStatusAsync(string restaurantId)&#10;    {&#10;&#10;        var restaurant = await _context.Restaurants.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId);&#10;            &#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found&quot;);&#10;&#10;&#10;        restaurant.IsDeleted = !restaurant.IsDeleted;&#10;        &#10;        if (restaurant.IsDeleted)&#10;        {&#10;            restaurant.DeletedAt = DateTime.UtcNow;&#10;        }&#10;        else&#10;        {&#10;            restaurant.DeletedAt = null;&#10;        }&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    // Restaurant Category Management&#10;    public async Task UpdateRestaurantCategoryAsync(string restaurantId, int categoryId)&#10;    {&#10;        var restaurant = await _context.Restaurants.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId);&#10;            &#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found&quot;);&#10;&#10;        if (!Enum.IsDefined(typeof(RestaurantCategory), categoryId))&#10;            throw new Exception(&quot;Invalid category&quot;);&#10;&#10;        restaurant.Category = (RestaurantCategory)categoryId;&#10;        restaurant.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;List&lt;string&gt;&gt; GetAllRestaurantCategoriesAsync()&#10;    {&#10;        var categories = Enum.GetValues(typeof(RestaurantCategory))&#10;            .Cast&lt;RestaurantCategory&gt;()&#10;            .Select(c =&gt; new { Id = (int)c, Name = c.ToString() })&#10;            .Select(c =&gt; $&quot;{c.Id}:{c.Name}&quot;)&#10;            .ToList();&#10;            &#10;        return await Task.FromResult(categories);&#10;    }&#10;&#10;    // Review Management Methods&#10;    public async Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetAllReviewsAsync(int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        var query = _context.Reviews&#10;            .Include(r =&gt; r.Customer)&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Where(r =&gt; !r.IsDeleted)&#10;            .OrderByDescending(r =&gt; r.CreatedAt);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var reviews = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reviewDtos = _mapper.Map&lt;List&lt;ReviewDto&gt;&gt;(reviews);&#10;&#10;        return new PaginatedResult&lt;ReviewDto&gt;&#10;        {&#10;            Items = reviewDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetPendingReviewsAsync(int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        var query = _context.Reviews&#10;            .Include(r =&gt; r.Customer)&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Where(r =&gt; !r.IsDeleted &amp;&amp; r.Status == &quot;Pending&quot;)&#10;            .OrderByDescending(r =&gt; r.CreatedAt);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var reviews = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reviewDtos = _mapper.Map&lt;List&lt;ReviewDto&gt;&gt;(reviews);&#10;&#10;        return new PaginatedResult&lt;ReviewDto&gt;&#10;        {&#10;            Items = reviewDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetReportedReviewsAsync(int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        var query = _context.Reviews&#10;            .Include(r =&gt; r.Customer)&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Where(r =&gt; !r.IsDeleted &amp;&amp; r.IsReported)&#10;            .OrderByDescending(r =&gt; r.ReportedAt);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var reviews = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reviewDtos = _mapper.Map&lt;List&lt;ReviewDto&gt;&gt;(reviews);&#10;&#10;        return new PaginatedResult&lt;ReviewDto&gt;&#10;        {&#10;            Items = reviewDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;ReviewDto?&gt; GetReviewByIdAsync(string reviewId)&#10;    {&#10;        var review = await _context.Reviews&#10;            .Include(r =&gt; r.Customer)&#10;            .Include(r =&gt; r.Restaurant)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            return null;&#10;&#10;        return _mapper.Map&lt;ReviewDto&gt;(review);&#10;    }&#10;&#10;    public async Task ApproveReviewAsync(string reviewId)&#10;    {&#10;        var review = await _context.Reviews&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found&quot;);&#10;&#10;        review.Status = &quot;Approved&quot;;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectReviewAsync(string reviewId, string? reason = null)&#10;    {&#10;        var review = await _context.Reviews&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found&quot;);&#10;&#10;        review.Status = &quot;Rejected&quot;;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;        &#10;        if (!string.IsNullOrEmpty(reason))&#10;        {&#10;            review.OwnerResponse = $&quot;[Rejected by Admin: {reason}]&quot;;&#10;        }&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task DeleteReviewAsync(string reviewId)&#10;    {&#10;        var review = await _context.Reviews&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found&quot;);&#10;&#10;        review.IsDeleted = true;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.Metadata.Builders;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Persistance.Configurations;&#10;&#10;public class JobPostingConfiguration : IEntityTypeConfiguration&lt;JobPosting&gt;&#10;{&#10;    public void Configure(EntityTypeBuilder&lt;JobPosting&gt; builder)&#10;    {&#10;        builder.HasKey(j =&gt; j.Id);&#10;&#10;        builder.Property(j =&gt; j.Title)&#10;            .IsRequired()&#10;            .HasMaxLength(200);&#10;&#10;        builder.Property(j =&gt; j.Description)&#10;            .IsRequired()&#10;            .HasMaxLength(2000);&#10;&#10;        builder.Property(j =&gt; j.Requirements)&#10;            .IsRequired()&#10;            .HasMaxLength(1000);&#10;&#10;        builder.Property(j =&gt; j.Position)&#10;            .IsRequired()&#10;            .HasMaxLength(100);&#10;&#10;        builder.Property(j =&gt; j.EmploymentType)&#10;            .IsRequired()&#10;            .HasMaxLength(50);&#10;&#10;        // Relationships&#10;        builder.HasOne(j =&gt; j.Restaurant)&#10;            .WithMany(r =&gt; r.JobPostings)&#10;            .HasForeignKey(j =&gt; j.RestaurantId)&#10;            .OnDelete(DeleteBehavior.Cascade);&#10;&#10;        // Indexes&#10;        builder.HasIndex(j =&gt; j.RestaurantId);&#10;        builder.HasIndex(j =&gt; j.IsActive);&#10;&#10;        // Soft Delete Query Filter&#10;        builder.HasQueryFilter(j =&gt; !j.IsDeleted);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/AdminController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/AdminController.cs" />
              <option name="originalContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers&#10;{&#10;    [Route(&quot;api/[controller]&quot;)]&#10;    [ApiController]&#10;    [Authorize(Roles = &quot;Admin&quot;)] &#10;    public class AdminController : ControllerBase&#10;    {&#10;        private readonly IAdminService _adminService;&#10;&#10;        public AdminController(IAdminService adminService)&#10;        {&#10;            _adminService = adminService;&#10;        }&#10;&#10;       &#10;        [HttpGet(&quot;dashboard&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetDashboard()&#10;        {&#10;            try&#10;            {&#10;                var dashboardData = await _adminService.GetAdminDashboardDataAsync();&#10;                return Ok(dashboardData);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the dashboard data.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;users&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetUsers([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetUsersAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the users.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;restaurants&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetRestaurants([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetRestaurantsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the restaurants.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplications([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetOwnershipApplicationsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications/pending&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetPendingApplications()&#10;        {&#10;            try&#10;            {&#10;                var applications = await _adminService.GetPendingApplicationsAsync();&#10;                return Ok(applications);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }  &#10;        }&#10;&#10;     &#10;        [HttpGet(&quot;applications/{id}&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplication(string id)&#10;        {&#10;            try&#10;            {&#10;                var application = await _adminService.GetApplicationByIdAsync(id);&#10;                if (application == null)&#10;                    return NotFound(new { message = &quot;Application not found.&quot; });&#10;&#10;                return Ok(application);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/approve&quot;)]&#10;        public async Task&lt;IActionResult&gt; ApproveApplication(string id)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                await _adminService.ApproveApplicationAsync(id, userId);&#10;                return Ok(new { message = &quot;Application approved.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while approving the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/reject&quot;)]&#10;        public async Task&lt;IActionResult&gt; RejectApplication(string id, [FromBody] RejectApplicationRequest request)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                if (string.IsNullOrEmpty(request.Reason))&#10;                    return BadRequest(new { message = &quot;Rejection reason must be specified.&quot; });&#10;&#10;                await _adminService.RejectApplicationAsync(id, userId, request.Reason);&#10;                return Ok(new { message = &quot;Application rejected.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while rejecting the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;        &#10;        [HttpPost(&quot;users/{userId}/toggle-status&quot;)]&#10;        public async Task&lt;IActionResult&gt; ToggleUserStatus(string userId)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.ToggleUserActiveStatusAsync(userId);&#10;                return Ok(new { message = &quot;User status updated successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while updating user status.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;users/{userId}/roles&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetUserRoles(string userId)&#10;        {&#10;            try&#10;            {&#10;                var roles = await _adminService.GetUserRolesAsync(userId);&#10;                return Ok(new { roles });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while fetching user roles.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;roles&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetAllRoles()&#10;        {&#10;            try&#10;            {&#10;                var roles = await _adminService.GetAllRolesAsync();&#10;                return Ok(new { roles });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while fetching roles.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;users/{userId}/roles&quot;)]&#10;        public async Task&lt;IActionResult&gt; AddRoleToUser(string userId, [FromBody] RoleRequest request)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.AddRoleToUserAsync(userId, request.Role);&#10;                return Ok(new { message = $&quot;Role '{request.Role}' added successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while adding role.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpDelete(&quot;users/{userId}/roles/{role}&quot;)]&#10;        public async Task&lt;IActionResult&gt; RemoveRoleFromUser(string userId, string role)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.RemoveRoleFromUserAsync(userId, role);&#10;                return Ok(new { message = $&quot;Role '{role}' removed successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while removing role.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;        &#10;        [HttpPost(&quot;restaurants/{restaurantId}/toggle-status&quot;)]&#10;        public async Task&lt;IActionResult&gt; ToggleRestaurantStatus(string restaurantId)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.ToggleRestaurantActiveStatusAsync(restaurantId);&#10;                return Ok(new { message = &quot;Restaurant status updated successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while updating restaurant status.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        // Review Management&#10;        [HttpGet(&quot;reviews&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetAllReviews([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 10)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetAllReviewsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading reviews.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;reviews/pending&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetPendingReviews([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 10)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetPendingReviewsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading pending reviews.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;reviews/reported&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetReportedReviews([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 10)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetReportedReviewsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading reported reviews.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;reviews/{reviewId}&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetReviewById(string reviewId)&#10;        {&#10;            try&#10;            {&#10;                var review = await _adminService.GetReviewByIdAsync(reviewId);&#10;                if (review == null)&#10;                    return NotFound(new { message = &quot;Review not found.&quot; });&#10;&#10;                return Ok(review);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the review.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;reviews/{reviewId}/approve&quot;)]&#10;        public async Task&lt;IActionResult&gt; ApproveReview(string reviewId)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.ApproveReviewAsync(reviewId);&#10;                return Ok(new { message = &quot;Review approved successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while approving the review.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;reviews/{reviewId}/reject&quot;)]&#10;        public async Task&lt;IActionResult&gt; RejectReview(string reviewId, [FromBody] RejectReviewRequest request)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.RejectReviewAsync(reviewId, request.Reason);&#10;                return Ok(new { message = &quot;Review rejected successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while rejecting the review.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpDelete(&quot;reviews/{reviewId}&quot;)]&#10;        public async Task&lt;IActionResult&gt; DeleteReview(string reviewId)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.DeleteReviewAsync(reviewId);&#10;                return Ok(new { message = &quot;Review deleted successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while deleting the review.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;    }&#10;&#10;    public class RejectApplicationRequest&#10;    {&#10;        public string Reason { get; set; } = string.Empty;&#10;    }&#10;&#10;    public class RoleRequest&#10;    {&#10;        public string Role { get; set; } = string.Empty;&#10;    }&#10;&#10;    public class RejectReviewRequest&#10;    {&#10;        public string Reason { get; set; } = string.Empty;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers&#10;{&#10;    [Route(&quot;api/[controller]&quot;)]&#10;    [ApiController]&#10;    [Authorize(Roles = &quot;Admin&quot;)] &#10;    public class AdminController : ControllerBase&#10;    {&#10;        private readonly IAdminService _adminService;&#10;&#10;        public AdminController(IAdminService adminService)&#10;        {&#10;            _adminService = adminService;&#10;        }&#10;&#10;       &#10;        [HttpGet(&quot;dashboard&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetDashboard()&#10;        {&#10;            try&#10;            {&#10;                var dashboardData = await _adminService.GetAdminDashboardDataAsync();&#10;                return Ok(dashboardData);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the dashboard data.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;users&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetUsers([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetUsersAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the users.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;restaurants&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetRestaurants([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetRestaurantsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the restaurants.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplications([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetOwnershipApplicationsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications/pending&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetPendingApplications()&#10;        {&#10;            try&#10;            {&#10;                var applications = await _adminService.GetPendingApplicationsAsync();&#10;                return Ok(applications);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }  &#10;        }&#10;&#10;     &#10;        [HttpGet(&quot;applications/{id}&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplication(string id)&#10;        {&#10;            try&#10;            {&#10;                var application = await _adminService.GetApplicationByIdAsync(id);&#10;                if (application == null)&#10;                    return NotFound(new { message = &quot;Application not found.&quot; });&#10;&#10;                return Ok(application);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/approve&quot;)]&#10;        public async Task&lt;IActionResult&gt; ApproveApplication(string id)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                await _adminService.ApproveApplicationAsync(id, userId);&#10;                return Ok(new { message = &quot;Application approved.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while approving the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/reject&quot;)]&#10;        public async Task&lt;IActionResult&gt; RejectApplication(string id, [FromBody] RejectApplicationRequest request)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                if (string.IsNullOrEmpty(request.Reason))&#10;                    return BadRequest(new { message = &quot;Rejection reason must be specified.&quot; });&#10;&#10;                await _adminService.RejectApplicationAsync(id, userId, request.Reason);&#10;                return Ok(new { message = &quot;Application rejected.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while rejecting the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;        &#10;        [HttpPost(&quot;users/{userId}/toggle-status&quot;)]&#10;        public async Task&lt;IActionResult&gt; ToggleUserStatus(string userId)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.ToggleUserActiveStatusAsync(userId);&#10;                return Ok(new { message = &quot;User status updated successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while updating user status.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;users/{userId}/roles&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetUserRoles(string userId)&#10;        {&#10;            try&#10;            {&#10;                var roles = await _adminService.GetUserRolesAsync(userId);&#10;                return Ok(new { roles });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while fetching user roles.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;roles&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetAllRoles()&#10;        {&#10;            try&#10;            {&#10;                var roles = await _adminService.GetAllRolesAsync();&#10;                return Ok(new { roles });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while fetching roles.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;users/{userId}/roles&quot;)]&#10;        public async Task&lt;IActionResult&gt; AddRoleToUser(string userId, [FromBody] RoleRequest request)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.AddRoleToUserAsync(userId, request.Role);&#10;                return Ok(new { message = $&quot;Role '{request.Role}' added successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while adding role.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpDelete(&quot;users/{userId}/roles/{role}&quot;)]&#10;        public async Task&lt;IActionResult&gt; RemoveRoleFromUser(string userId, string role)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.RemoveRoleFromUserAsync(userId, role);&#10;                return Ok(new { message = $&quot;Role '{role}' removed successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while removing role.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;        &#10;        [HttpPost(&quot;restaurants/{restaurantId}/toggle-status&quot;)]&#10;        public async Task&lt;IActionResult&gt; ToggleRestaurantStatus(string restaurantId)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.ToggleRestaurantActiveStatusAsync(restaurantId);&#10;                return Ok(new { message = &quot;Restaurant status updated successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while updating restaurant status.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;restaurants/categories&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetAllRestaurantCategories()&#10;        {&#10;            try&#10;            {&#10;                var categories = await _adminService.GetAllRestaurantCategoriesAsync();&#10;                return Ok(new { categories });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while fetching categories.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;restaurants/{restaurantId}/category&quot;)]&#10;        public async Task&lt;IActionResult&gt; UpdateRestaurantCategory(string restaurantId, [FromBody] UpdateCategoryRequest request)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.UpdateRestaurantCategoryAsync(restaurantId, request.CategoryId);&#10;                return Ok(new { message = &quot;Restaurant category updated successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while updating restaurant category.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        // Review Management&#10;        [HttpGet(&quot;reviews&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetAllReviews([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 10)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetAllReviewsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading reviews.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;reviews/pending&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetPendingReviews([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 10)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetPendingReviewsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading pending reviews.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;reviews/reported&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetReportedReviews([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 10)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetReportedReviewsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading reported reviews.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;reviews/{reviewId}&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetReviewById(string reviewId)&#10;        {&#10;            try&#10;            {&#10;                var review = await _adminService.GetReviewByIdAsync(reviewId);&#10;                if (review == null)&#10;                    return NotFound(new { message = &quot;Review not found.&quot; });&#10;&#10;                return Ok(review);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the review.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;reviews/{reviewId}/approve&quot;)]&#10;        public async Task&lt;IActionResult&gt; ApproveReview(string reviewId)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.ApproveReviewAsync(reviewId);&#10;                return Ok(new { message = &quot;Review approved successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while approving the review.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;reviews/{reviewId}/reject&quot;)]&#10;        public async Task&lt;IActionResult&gt; RejectReview(string reviewId, [FromBody] RejectReviewRequest request)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.RejectReviewAsync(reviewId, request.Reason);&#10;                return Ok(new { message = &quot;Review rejected successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while rejecting the review.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpDelete(&quot;reviews/{reviewId}&quot;)]&#10;        public async Task&lt;IActionResult&gt; DeleteReview(string reviewId)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.DeleteReviewAsync(reviewId);&#10;                return Ok(new { message = &quot;Review deleted successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while deleting the review.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;    }&#10;&#10;    public class RejectApplicationRequest&#10;    {&#10;        public string Reason { get; set; } = string.Empty;&#10;    }&#10;&#10;    public class RoleRequest&#10;    {&#10;        public string Role { get; set; } = string.Empty;&#10;    }&#10;&#10;    public class RejectReviewRequest&#10;    {&#10;        public string Reason { get; set; } = string.Empty;&#10;    }&#10;&#10;    public class UpdateCategoryRequest&#10;    {&#10;        public int CategoryId { get; set; }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/FileController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/FileController.cs" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;public class FileController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public FileController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload profile image for user&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/profile/{userId}&quot;)]&#10;    [Authorize]&#10;    public async Task&lt;IActionResult&gt; UploadProfileImage(string userId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadProfileImageAsync(file, userId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Profil resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload menu item image&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/menuitem/{menuItemId}&quot;)]&#10;    [Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadMenuItemImage(string menuItemId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadMenuItemImageAsync(file, menuItemId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Menü öğesi resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload reward image&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/reward/{rewardId}&quot;)]&#10;    [Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRewardImage(string rewardId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRewardImageAsync(file, rewardId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Ödül resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload restaurant image&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/restaurant/{restaurantId}&quot;)]&#10;    [Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRestaurantImage(string restaurantId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRestaurantImageAsync(file, restaurantId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Restoran resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete a file&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete(&quot;delete&quot;)]&#10;    [Authorize]&#10;    public async Task&lt;IActionResult&gt; DeleteFile([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Dosya başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Dosya bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Check if file exists&#10;    /// &lt;/summary&gt;&#10;    [HttpGet(&quot;exists&quot;)]&#10;    public async Task&lt;IActionResult&gt; FileExists([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var exists = await _fileService.FileExistsAsync(fileUrl);&#10;            return Ok(new { exists });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya kontrol edilirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/LoyaltyController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/LoyaltyController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.DTOs.Loyalty;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using System.Security.Claims;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[Route(&quot;api/[controller]&quot;)]&#10;[ApiController]&#10;public class LoyaltyController : ControllerBase&#10;{&#10;    private readonly ILoyaltyService _loyaltyService;&#10;&#10;    public LoyaltyController(ILoyaltyService loyaltyService)&#10;    {&#10;        _loyaltyService = loyaltyService;&#10;    }&#10;&#10;    // ADMIN ENDPOINTS - Generate Loyalty Codes&#10;    [HttpPost(&quot;admin/codes&quot;)]&#10;    [Authorize(Roles = &quot;Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; GenerateLoyaltyCode([FromBody] CreateLoyaltyCodeDto dto)&#10;    {&#10;        try&#10;        {&#10;            var adminId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(adminId))&#10;                return Unauthorized();&#10;&#10;            var code = await _loyaltyService.GenerateLoyaltyCodeAsync(dto, adminId);&#10;            return Ok(code);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;admin/codes&quot;)]&#10;    [Authorize(Roles = &quot;Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetAllLoyaltyCodes()&#10;    {&#10;        try&#10;        {&#10;            var codes = await _loyaltyService.GetAllLoyaltyCodesAsync();&#10;            return Ok(codes);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;admin/codes/{codeId}&quot;)]&#10;    [Authorize(Roles = &quot;Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetLoyaltyCodeById(string codeId)&#10;    {&#10;        try&#10;        {&#10;            var code = await _loyaltyService.GetLoyaltyCodeByIdAsync(codeId);&#10;            if (code == null)&#10;                return NotFound(new { message = &quot;Code not found&quot; });&#10;&#10;            return Ok(code);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpPatch(&quot;admin/codes/{codeId}/deactivate&quot;)]&#10;    [Authorize(Roles = &quot;Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; DeactivateLoyaltyCode(string codeId)&#10;    {&#10;        try&#10;        {&#10;            var result = await _loyaltyService.DeactivateLoyaltyCodeAsync(codeId);&#10;            if (!result)&#10;                return NotFound(new { message = &quot;Code not found&quot; });&#10;&#10;            return Ok(new { message = &quot;Code deactivated successfully&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    // CUSTOMER ENDPOINTS - Redeem Codes and Points&#10;    [HttpPost(&quot;customer/redeem-code&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; RedeemLoyaltyCode([FromBody] RedeemLoyaltyCodeDto dto)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var point = await _loyaltyService.RedeemLoyaltyCodeAsync(dto.Code, customerId);&#10;            return Ok(point);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;customer/balance&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetCustomerLoyaltyBalance()&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var balance = await _loyaltyService.GetCustomerLoyaltyBalanceAsync(customerId);&#10;            return Ok(balance);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;customer/history&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetCustomerPointHistory([FromQuery] string? restaurantId = null)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var history = await _loyaltyService.GetCustomerPointHistoryAsync(customerId, restaurantId);&#10;            return Ok(history);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    // OWNER ENDPOINTS - Reward Management&#10;    [HttpPost(&quot;owner/rewards&quot;)]&#10;    [Authorize(Roles = &quot;RestaurantOwner&quot;)]&#10;    public async Task&lt;IActionResult&gt; CreateReward([FromBody] CreateRewardDto dto)&#10;    {&#10;        try&#10;        {&#10;            var ownerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(ownerId))&#10;                return Unauthorized();&#10;&#10;            var reward = await _loyaltyService.CreateRewardAsync(dto, ownerId);&#10;            return Ok(reward);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpPut(&quot;owner/rewards/{rewardId}&quot;)]&#10;    [Authorize(Roles = &quot;RestaurantOwner&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateReward(string rewardId, [FromBody] UpdateRewardDto dto)&#10;    {&#10;        try&#10;        {&#10;            var ownerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(ownerId))&#10;                return Unauthorized();&#10;&#10;            var reward = await _loyaltyService.UpdateRewardAsync(rewardId, dto, ownerId);&#10;            return Ok(reward);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpDelete(&quot;owner/rewards/{rewardId}&quot;)]&#10;    [Authorize(Roles = &quot;RestaurantOwner&quot;)]&#10;    public async Task&lt;IActionResult&gt; DeleteReward(string rewardId)&#10;    {&#10;        try&#10;        {&#10;            var ownerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(ownerId))&#10;                return Unauthorized();&#10;&#10;            var result = await _loyaltyService.DeleteRewardAsync(rewardId, ownerId);&#10;            if (!result)&#10;                return NotFound(new { message = &quot;Reward not found&quot; });&#10;&#10;            return Ok(new { message = &quot;Reward deleted successfully&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    // PUBLIC/CUSTOMER ENDPOINTS - View Rewards&#10;    [HttpGet(&quot;restaurants/{restaurantId}/rewards&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetRestaurantRewards(string restaurantId)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            var rewards = await _loyaltyService.GetRestaurantRewardsAsync(restaurantId, customerId);&#10;            return Ok(rewards);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;rewards/{rewardId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetRewardById(string rewardId)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            var reward = await _loyaltyService.GetRewardByIdAsync(rewardId, customerId);&#10;            if (reward == null)&#10;                return NotFound(new { message = &quot;Reward not found&quot; });&#10;&#10;            return Ok(reward);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    // CUSTOMER ENDPOINTS - Redeem Rewards&#10;    [HttpPost(&quot;customer/redeem-reward&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; RedeemReward([FromBody] RedeemRewardDto dto)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var redemption = await _loyaltyService.RedeemRewardAsync(dto.RewardId, customerId);&#10;            return Ok(redemption);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;customer/redemptions&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetCustomerRedemptions()&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var redemptions = await _loyaltyService.GetCustomerRedemptionsAsync(customerId);&#10;            return Ok(redemptions);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;customer/redemptions/{redemptionId}&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetRedemptionById(string redemptionId)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var redemption = await _loyaltyService.GetRedemptionByIdAsync(redemptionId, customerId);&#10;            if (redemption == null)&#10;                return NotFound(new { message = &quot;Redemption not found&quot; });&#10;&#10;            return Ok(redemption);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/MenuItemImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/MenuItemImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;public class MenuItemImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public MenuItemImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload menu item image (Required when creating menu item)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{menuItemId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadMenuItemImage(string menuItemId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Menü öğesi resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadMenuItemImageAsync(file, menuItemId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Menü öğesi resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Menü öğesi resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update menu item image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{menuItemId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateMenuItemImage(string menuItemId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Menü öğesi resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadMenuItemImageAsync(file, menuItemId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Menü öğesi resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Menü öğesi resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete menu item image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteMenuItemImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Menü öğesi resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Menü öğesi resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Menü öğesi resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/ProfileImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/ProfileImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize]&#10;public class ProfileImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public ProfileImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload profile image (Optional for customer)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{userId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadProfileImage(string userId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Profil resmi seçilmedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadProfileImageAsync(file, userId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Profil resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Profil resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update profile image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{userId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateProfileImage(string userId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Profil resmi seçilmedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadProfileImageAsync(file, userId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Profil resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Profil resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete profile image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteProfileImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Profil resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Profil resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Profil resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RestaurantImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RestaurantImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;public class RestaurantImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public RestaurantImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload restaurant image (Required when creating restaurant)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{restaurantId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRestaurantImage(string restaurantId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Restoran resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRestaurantImageAsync(file, restaurantId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Restoran resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Restoran resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update restaurant image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{restaurantId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateRestaurantImage(string restaurantId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Restoran resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRestaurantImageAsync(file, restaurantId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Restoran resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Restoran resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete restaurant image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteRestaurantImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Restoran resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Restoran resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Restoran resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RewardImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RewardImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;public class RewardImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public RewardImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload reward image (Required when creating reward)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{rewardId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRewardImage(string rewardId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Ödül resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRewardImageAsync(file, rewardId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Ödül resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Ödül resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update reward image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{rewardId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateRewardImage(string rewardId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Ödül resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRewardImageAsync(file, rewardId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Ödül resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Ödül resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete reward image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteRewardImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Ödül resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Ödül resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Ödül resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.AspNetCore.Identity;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.WebAPI;&#10;&#10;public static class OwnerIdFixer&#10;{&#10;    public static async Task FixRestaurantOwnerIds(IServiceProvider services)&#10;    {&#10;        using var scope = services.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var logger = scope.ServiceProvider.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();&#10;        &#10;        try&#10;        {&#10;            // Owner kullanıcısını bul&#10;            var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;            if (owner == null)&#10;            {&#10;                logger.LogWarning(&quot;owner@gmail.com kullanıcısı bulunamadı!&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;Owner bulundu: {owner.Email} (ID: {owner.Id})&quot;);&#10;            &#10;            // Tüm aktif restoranları bul&#10;            var restaurants = await context.Restaurants&#10;                .Where(r =&gt; !r.IsDeleted)&#10;                .ToListAsync();&#10;            &#10;            if (restaurants.Count == 0)&#10;            {&#10;                logger.LogInformation(&quot;Veritabanında restoran bulunamadı.&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;{restaurants.Count} restoran bulundu, owner ID'leri güncelleniyor...&quot;);&#10;            &#10;            // Her restoranın owner ID'sini güncelle&#10;            foreach (var restaurant in restaurants)&#10;            {&#10;                restaurant.OwnerId = owner.Id;&#10;                logger.LogInformation($&quot;✓ {restaurant.Name} -&gt; Owner ID güncellendi&quot;);&#10;            }&#10;            &#10;            await context.SaveChangesAsync();&#10;            logger.LogInformation($&quot;✅ {restaurants.Count} restoranın owner ID'si başarıyla güncellendi!&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            logger.LogError(ex, &quot;Owner ID güncellenirken hata oluştu!&quot;);&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>