<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Employee/EmployeeDtos.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Employee/EmployeeDtos.cs" />
              <option name="originalContent" value="namespace RestaurantManagment.Application.Common.DTOs.Employee;&#10;&#10;public class EmployeeDto&#10;{&#10;    public string Id { get; set; } = string.Empty;&#10;    public string FullName { get; set; } = string.Empty;&#10;    public string Email { get; set; } = string.Empty;&#10;    public string? PhoneNumber { get; set; }&#10;    public string? Address { get; set; }&#10;    public string? ProfileImageUrl { get; set; }&#10;    public int? EmployerRestaurantId { get; set; }&#10;    public DateTime CreatedAt { get; set; }&#10;    public DateTime HireDate { get; set; }&#10;    public bool IsActive { get; set; }&#10;    public List&lt;string&gt; Roles { get; set; } = new();&#10;}&#10;&#10;public class CreateEmployeeDto&#10;{&#10;    public string FullName { get; set; } = string.Empty;&#10;    public string Email { get; set; } = string.Empty;&#10;    public string Password { get; set; } = string.Empty;&#10;    public string? PhoneNumber { get; set; }&#10;    public string? Address { get; set; }&#10;    public string? ProfileImageUrl { get; set; }&#10;}&#10;&#10;public class UpdateEmployeeDto&#10;{&#10;    public string FullName { get; set; } = string.Empty;&#10;    public string Email { get; set; } = string.Empty;&#10;    public string? PhoneNumber { get; set; }&#10;    public string? Address { get; set; }&#10;    public string? ProfileImageUrl { get; set; }&#10;    public string? Password { get; set; }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="namespace RestaurantManagment.Application.Common.DTOs.Employee;&#13;&#10;&#13;&#10;public class EmployeeDto&#13;&#10;{&#13;&#10;    public string Id { get; set; } = string.Empty;&#13;&#10;    public string FullName { get; set; } = string.Empty;&#13;&#10;    public string Email { get; set; } = string.Empty;&#13;&#10;    public string? PhoneNumber { get; set; }&#13;&#10;    public string? Address { get; set; }&#13;&#10;    public string? ProfileImageUrl { get; set; }&#13;&#10;    public int? EmployerRestaurantId { get; set; }&#13;&#10;    public string? RestaurantName { get; set; }&#13;&#10;    public DateTime CreatedAt { get; set; }&#13;&#10;    public DateTime HireDate { get; set; }&#13;&#10;    public bool IsActive { get; set; }&#13;&#10;    public List&lt;string&gt; Roles { get; set; } = new();&#13;&#10;}&#13;&#10;&#13;&#10;public class CreateEmployeeDto&#13;&#10;{&#13;&#10;    public string FullName { get; set; } = string.Empty;&#13;&#10;    public string Email { get; set; } = string.Empty;&#13;&#10;    public string Password { get; set; } = string.Empty;&#13;&#10;    public string? PhoneNumber { get; set; }&#13;&#10;    public string? Address { get; set; }&#13;&#10;    public string? ProfileImageUrl { get; set; }&#13;&#10;}&#13;&#10;&#13;&#10;public class UpdateEmployeeDto&#13;&#10;{&#13;&#10;    public string FullName { get; set; } = string.Empty;&#13;&#10;    public string Email { get; set; } = string.Empty;&#13;&#10;    public string? PhoneNumber { get; set; }&#13;&#10;    public string? Address { get; set; }&#13;&#10;    public string? ProfileImageUrl { get; set; }&#13;&#10;    public string? Password { get; set; }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Mappings/MappingProfile.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Mappings/MappingProfile.cs" />
              <option name="originalContent" value="using AutoMapper;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Employee;&#10;using RestaurantManagment.Application.Common.DTOs.JobApplication;&#10;using RestaurantManagment.Application.Common.DTOs.MenuItem;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Order;&#10;using RestaurantManagment.Application.Common.DTOs.Owner;&#10;using RestaurantManagment.Application.Common.DTOs.Review;&#10;using RestaurantManagment.Application.DTOs.Menu;&#10;using RestaurantManagment.Application.DTOs.MenuItem;&#10;using RestaurantManagment.Application.DTOs.Order;&#10;using RestaurantManagment.Application.DTOs.Reservation;&#10;using RestaurantManagment.Domain.Models;&#10;using CreateOrderDto = RestaurantManagment.Application.DTOs.Order.CreateOrderDto;&#10;using CreateOrderItemDto = RestaurantManagment.Application.DTOs.Order.CreateOrderItemDto;&#10;using CreateRestaurantDto = RestaurantManagment.Application.Common.DTOs.Restaurant.CreateRestaurantDto;&#10;using UpdateRestaurantDto = RestaurantManagment.Application.Common.DTOs.Restaurant.UpdateRestaurantDto;&#10;using RestaurantResponseDto = RestaurantManagment.Application.DTOs.Restaurant.RestaurantResponseDto;&#10;using UpdateOrderDto = RestaurantManagment.Application.DTOs.Order.UpdateOrderDto;&#10;&#10;namespace RestaurantManagment.Application.Mappings;&#10;&#10;public class MappingProfile : Profile&#10;{&#10;    public MappingProfile()&#10;    {&#10;      &#10;        CreateMap&lt;Restaurant, RestaurantResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.OwnerName, opt =&gt; opt.MapFrom(src =&gt; src.Owner.FullName));&#10;        CreateMap&lt;Restaurant, RestaurantAdminListDto&gt;()&#10;            .ForMember(dest =&gt; dest.OwnerName, opt =&gt; opt.MapFrom(src =&gt; src.Owner.FullName))&#10;            .ForMember(dest =&gt; dest.OwnerEmail, opt =&gt; opt.MapFrom(src =&gt; src.Owner.Email ?? string.Empty));&#10;        CreateMap&lt;CreateRestaurantDto, Restaurant&gt;();&#10;        CreateMap&lt;UpdateRestaurantDto, Restaurant&gt;();&#10;&#10;     &#10;        CreateMap&lt;Menu, MenuResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name));&#10;        CreateMap&lt;CreateMenuDto, Menu&gt;();&#10;        CreateMap&lt;UpdateMenuDto, Menu&gt;();&#10;&#10;  &#10;        CreateMap&lt;MenuItem, MenuItemResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuName, opt =&gt; opt.MapFrom(src =&gt; src.Menu.Name));&#10;        CreateMap&lt;MenuItem, RestaurantManagment.Application.Common.DTOs.MenuItem.MenuItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.Id, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.MenuId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.MenuId)))&#10;            .ForMember(dest =&gt; dest.MenuName, opt =&gt; opt.MapFrom(src =&gt; src.Menu.Name));&#10;        &#10;        CreateMap&lt;CreateMenuItemDto, MenuItem&gt;();&#10;        CreateMap&lt;UpdateMenuItemDto, MenuItem&gt;();&#10;&#10;    &#10;        CreateMap&lt;Order, OrderResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table != null ? src.Table.TableNumber : (int?)null))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : null))&#10;            .ForMember(dest =&gt; dest.DeliveryPersonName, opt =&gt; opt.MapFrom(src =&gt; src.DeliveryPerson != null ? src.DeliveryPerson.FullName : null))&#10;            .ForMember(dest =&gt; dest.Items, opt =&gt; opt.MapFrom(src =&gt; src.OrderItems));&#10;        &#10;        CreateMap&lt;CreateOrderDto, Order&gt;()&#10;            .ForMember(dest =&gt; dest.OrderItems, opt =&gt; opt.Ignore());&#10;        &#10;        CreateMap&lt;UpdateOrderDto, Order&gt;()&#10;            .ForAllMembers(opts =&gt; opts.Condition((src, dest, srcMember) =&gt; srcMember != null));&#10;&#10;        CreateMap&lt;OrderItem, OrderItemResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.MenuItem.Name));&#10;        &#10;        CreateMap&lt;CreateOrderItemDto, OrderItem&gt;();&#10;&#10;   &#10;        CreateMap&lt;Reservation, ReservationResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table.TableNumber));&#10;        &#10;        CreateMap&lt;Reservation, RestaurantManagment.Application.Common.DTOs.Reservation.ReservationDto&gt;()&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.RestaurantId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.RestaurantId)))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.TableId)))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table.TableNumber));&#10;        &#10;        CreateMap&lt;CreateReservationDto, Reservation&gt;();&#10;        CreateMap&lt;UpdateReservationDto, Reservation&gt;()&#10;            .ForAllMembers(opts =&gt; opts.Condition((src, dest, srcMember) =&gt; srcMember != null));&#10;        &#10;       &#10;        CreateMap&lt;UserRegisterDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Username))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.MapFrom(src =&gt; src.FirstName))&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.MapFrom(src =&gt; src.LastName))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FirstName + &quot; &quot; + src.LastName))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email));&#10;        CreateMap&lt;UserLoginDto, AppUser&gt;();&#10;        &#10;&#10;        CreateMap&lt;OwnershipApplication, OwnershipApplicationAdminDto&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.User.UserName ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.UserEmail, opt =&gt; opt.MapFrom(src =&gt; src.User.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()));&#10;&#10;      &#10;        CreateMap&lt;AppUser, EmployeeDto&gt;()&#10;            .ForMember(dest =&gt; dest.EmployerRestaurantId, opt =&gt; opt.MapFrom(src =&gt; &#10;                src.EmployerRestaurantId != null ? int.Parse(src.EmployerRestaurantId) : (int?)null))&#10;            .ForMember(dest =&gt; dest.HireDate, opt =&gt; opt.MapFrom(src =&gt; src.CreatedAt))&#10;            .ForMember(dest =&gt; dest.IsActive, opt =&gt; opt.MapFrom(src =&gt; !src.IsDeleted))&#10;            .ForMember(dest =&gt; dest.Roles, opt =&gt; opt.Ignore());&#10;&#10;        CreateMap&lt;CreateEmployeeDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FullName))&#10;            .ForMember(dest =&gt; dest.PhoneNumber, opt =&gt; opt.MapFrom(src =&gt; src.PhoneNumber))&#10;            .ForMember(dest =&gt; dest.Address, opt =&gt; opt.MapFrom(src =&gt; src.Address))&#10;            .ForMember(dest =&gt; dest.EmailConfirmed, opt =&gt; opt.MapFrom(src =&gt; true))&#10;            .ForMember(dest =&gt; dest.IsDeleted, opt =&gt; opt.MapFrom(src =&gt; false))&#10;            .ForMember(dest =&gt; dest.CreatedAt, opt =&gt; opt.MapFrom(src =&gt; DateTime.UtcNow))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.Ignore());&#10;&#10;        CreateMap&lt;UpdateEmployeeDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FullName))&#10;            .ForMember(dest =&gt; dest.PhoneNumber, opt =&gt; opt.MapFrom(src =&gt; src.PhoneNumber))&#10;            .ForMember(dest =&gt; dest.Address, opt =&gt; opt.MapFrom(src =&gt; src.Address))&#10;            .ForMember(dest =&gt; dest.UpdatedAt, opt =&gt; opt.MapFrom(src =&gt; DateTime.UtcNow))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.Ignore())&#10;            .ForAllMembers(opts =&gt; opts.Condition((_, _, srcMember) =&gt; srcMember != null));&#10;&#10;   &#10;        CreateMap&lt;JobApplication, JobApplicationDto&gt;()&#10;            .ForMember(dest =&gt; dest.JobTitle, opt =&gt; opt.MapFrom(src =&gt; src.JobPosting.Title))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.JobPosting.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.ApplicantName, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.FullName))&#10;            .ForMember(dest =&gt; dest.ApplicantEmail, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.ApplicantPhone, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.PhoneNumber ?? string.Empty));&#10;&#10;  &#10;        CreateMap&lt;Review, ReviewDto&gt;()&#10;            .ForMember(dest =&gt; dest.Id, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.RestaurantId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.RestaurantId)))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer.FullName))&#10;            .ForMember(dest =&gt; dest.CustomerEmail, opt =&gt; opt.MapFrom(src =&gt; src.Customer.Email));&#10;&#10;        &#10;        CreateMap&lt;Order, OrderDto&gt;()&#10;            .ForMember(dest =&gt; dest.Id, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.Type, opt =&gt; opt.MapFrom(src =&gt; src.Type.ToString()))&#10;            .ForMember(dest =&gt; dest.RestaurantId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.RestaurantId)))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : null))&#10;            .ForMember(dest =&gt; dest.TableId, opt =&gt; opt.MapFrom(src =&gt; src.TableId != null ? int.Parse(src.TableId) : (int?)null))&#10;            .ForMember(dest =&gt; dest.OrderItems, opt =&gt; opt.MapFrom(src =&gt; src.OrderItems));&#10;&#10;        CreateMap&lt;OrderItem, OrderItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.Id, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.MenuItemId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.MenuItemId)))&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.MenuItem.Name))&#10;            .ForMember(dest =&gt; dest.OrderId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.OrderId)))&#10;            .ForMember(dest =&gt; dest.Subtotal, opt =&gt; opt.MapFrom(src =&gt; src.UnitPrice * src.Quantity));&#10;&#10;      &#10;        CreateMap&lt;Table, TableDto&gt;()&#10;            .ForMember(dest =&gt; dest.Id, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.RestaurantId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.RestaurantId)));&#10;        &#10;        CreateMap&lt;CreateTableDto, Table&gt;();&#10;        CreateMap&lt;UpdateTableDto, Table&gt;();&#10;        &#10;        CreateMap&lt;Order, RecentOrderDto&gt;()&#10;            .ForMember(dest =&gt; dest.OrderId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : &quot;Guest&quot;))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.OrderType, opt =&gt; opt.MapFrom(src =&gt; src.Type.ToString()));&#10;&#10;      &#10;        CreateMap&lt;MenuItem, TopSellingItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuItemId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.Name))&#10;            .ForMember(dest =&gt; dest.QuantitySold, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.TotalRevenue, opt =&gt; opt.Ignore());&#10;&#10;  &#10;        CreateMap&lt;(DateTime Date, decimal Revenue, int OrderCount), DailyRevenueDto&gt;()&#10;            .ForMember(dest =&gt; dest.Date, opt =&gt; opt.MapFrom(src =&gt; src.Date))&#10;            .ForMember(dest =&gt; dest.Revenue, opt =&gt; opt.MapFrom(src =&gt; src.Revenue))&#10;            .ForMember(dest =&gt; dest.OrderCount, opt =&gt; opt.MapFrom(src =&gt; src.OrderCount));&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using AutoMapper;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Employee;&#10;using RestaurantManagment.Application.Common.DTOs.JobApplication;&#10;using RestaurantManagment.Application.Common.DTOs.MenuItem;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Order;&#10;using RestaurantManagment.Application.Common.DTOs.Owner;&#10;using RestaurantManagment.Application.Common.DTOs.Review;&#10;using RestaurantManagment.Application.DTOs.Menu;&#10;using RestaurantManagment.Application.DTOs.MenuItem;&#10;using RestaurantManagment.Application.DTOs.Order;&#10;using RestaurantManagment.Application.DTOs.Reservation;&#10;using RestaurantManagment.Domain.Models;&#10;using CreateOrderDto = RestaurantManagment.Application.DTOs.Order.CreateOrderDto;&#10;using CreateOrderItemDto = RestaurantManagment.Application.DTOs.Order.CreateOrderItemDto;&#10;using CreateRestaurantDto = RestaurantManagment.Application.Common.DTOs.Restaurant.CreateRestaurantDto;&#10;using UpdateRestaurantDto = RestaurantManagment.Application.Common.DTOs.Restaurant.UpdateRestaurantDto;&#10;using RestaurantResponseDto = RestaurantManagment.Application.DTOs.Restaurant.RestaurantResponseDto;&#10;using UpdateOrderDto = RestaurantManagment.Application.DTOs.Order.UpdateOrderDto;&#10;&#10;namespace RestaurantManagment.Application.Mappings;&#10;&#10;public class MappingProfile : Profile&#10;{&#10;    public MappingProfile()&#10;    {&#10;      &#10;        CreateMap&lt;Restaurant, RestaurantResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.OwnerName, opt =&gt; opt.MapFrom(src =&gt; src.Owner.FullName));&#10;        CreateMap&lt;Restaurant, RestaurantAdminListDto&gt;()&#10;            .ForMember(dest =&gt; dest.OwnerName, opt =&gt; opt.MapFrom(src =&gt; src.Owner.FullName))&#10;            .ForMember(dest =&gt; dest.OwnerEmail, opt =&gt; opt.MapFrom(src =&gt; src.Owner.Email ?? string.Empty));&#10;        CreateMap&lt;CreateRestaurantDto, Restaurant&gt;();&#10;        CreateMap&lt;UpdateRestaurantDto, Restaurant&gt;();&#10;&#10;     &#10;        CreateMap&lt;Menu, MenuResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name));&#10;        CreateMap&lt;CreateMenuDto, Menu&gt;();&#10;        CreateMap&lt;UpdateMenuDto, Menu&gt;();&#10;&#10;  &#10;        CreateMap&lt;MenuItem, MenuItemResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuName, opt =&gt; opt.MapFrom(src =&gt; src.Menu.Name));&#10;        CreateMap&lt;MenuItem, RestaurantManagment.Application.Common.DTOs.MenuItem.MenuItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.Id, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.MenuId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.MenuId)))&#10;            .ForMember(dest =&gt; dest.MenuName, opt =&gt; opt.MapFrom(src =&gt; src.Menu.Name));&#10;        &#10;        CreateMap&lt;CreateMenuItemDto, MenuItem&gt;();&#10;        CreateMap&lt;UpdateMenuItemDto, MenuItem&gt;();&#10;&#10;    &#10;        CreateMap&lt;Order, OrderResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table != null ? src.Table.TableNumber : (int?)null))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : null))&#10;            .ForMember(dest =&gt; dest.DeliveryPersonName, opt =&gt; opt.MapFrom(src =&gt; src.DeliveryPerson != null ? src.DeliveryPerson.FullName : null))&#10;            .ForMember(dest =&gt; dest.Items, opt =&gt; opt.MapFrom(src =&gt; src.OrderItems));&#10;        &#10;        CreateMap&lt;CreateOrderDto, Order&gt;()&#10;            .ForMember(dest =&gt; dest.OrderItems, opt =&gt; opt.Ignore());&#10;        &#10;        CreateMap&lt;UpdateOrderDto, Order&gt;()&#10;            .ForAllMembers(opts =&gt; opts.Condition((src, dest, srcMember) =&gt; srcMember != null));&#10;&#10;        CreateMap&lt;OrderItem, OrderItemResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.MenuItem.Name));&#10;        &#10;        CreateMap&lt;CreateOrderItemDto, OrderItem&gt;();&#10;&#10;   &#10;        CreateMap&lt;Reservation, ReservationResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table.TableNumber));&#10;        &#10;        CreateMap&lt;Reservation, RestaurantManagment.Application.Common.DTOs.Reservation.ReservationDto&gt;()&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.RestaurantId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.RestaurantId)))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.TableId)))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table.TableNumber));&#10;        &#10;        CreateMap&lt;CreateReservationDto, Reservation&gt;();&#10;        CreateMap&lt;UpdateReservationDto, Reservation&gt;()&#10;            .ForAllMembers(opts =&gt; opts.Condition((src, dest, srcMember) =&gt; srcMember != null));&#10;        &#10;       &#10;        CreateMap&lt;UserRegisterDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Username))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.MapFrom(src =&gt; src.FirstName))&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.MapFrom(src =&gt; src.LastName))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FirstName + &quot; &quot; + src.LastName))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email));&#10;        CreateMap&lt;UserLoginDto, AppUser&gt;();&#10;        &#10;&#10;        CreateMap&lt;OwnershipApplication, OwnershipApplicationAdminDto&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.User.UserName ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.UserEmail, opt =&gt; opt.MapFrom(src =&gt; src.User.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()));&#10;&#10;      &#10;        CreateMap&lt;AppUser, EmployeeDto&gt;()&#10;            .ForMember(dest =&gt; dest.EmployerRestaurantId, opt =&gt; opt.MapFrom(src =&gt; &#10;                src.EmployerRestaurantId != null ? int.Parse(src.EmployerRestaurantId) : (int?)null))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; &#10;                src.EmployerRestaurant != null ? src.EmployerRestaurant.Name : null))&#10;            .ForMember(dest =&gt; dest.HireDate, opt =&gt; opt.MapFrom(src =&gt; src.CreatedAt))&#10;            .ForMember(dest =&gt; dest.IsActive, opt =&gt; opt.MapFrom(src =&gt; !src.IsDeleted))&#10;            .ForMember(dest =&gt; dest.Roles, opt =&gt; opt.Ignore());&#10;&#10;        CreateMap&lt;CreateEmployeeDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FullName))&#10;            .ForMember(dest =&gt; dest.PhoneNumber, opt =&gt; opt.MapFrom(src =&gt; src.PhoneNumber))&#10;            .ForMember(dest =&gt; dest.Address, opt =&gt; opt.MapFrom(src =&gt; src.Address))&#10;            .ForMember(dest =&gt; dest.EmailConfirmed, opt =&gt; opt.MapFrom(src =&gt; true))&#10;            .ForMember(dest =&gt; dest.IsDeleted, opt =&gt; opt.MapFrom(src =&gt; false))&#10;            .ForMember(dest =&gt; dest.CreatedAt, opt =&gt; opt.MapFrom(src =&gt; DateTime.UtcNow))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.Ignore());&#10;&#10;        CreateMap&lt;UpdateEmployeeDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FullName))&#10;            .ForMember(dest =&gt; dest.PhoneNumber, opt =&gt; opt.MapFrom(src =&gt; src.PhoneNumber))&#10;            .ForMember(dest =&gt; dest.Address, opt =&gt; opt.MapFrom(src =&gt; src.Address))&#10;            .ForMember(dest =&gt; dest.UpdatedAt, opt =&gt; opt.MapFrom(src =&gt; DateTime.UtcNow))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.Ignore())&#10;            .ForAllMembers(opts =&gt; opts.Condition((_, _, srcMember) =&gt; srcMember != null));&#10;&#10;   &#10;        CreateMap&lt;JobApplication, JobApplicationDto&gt;()&#10;            .ForMember(dest =&gt; dest.JobTitle, opt =&gt; opt.MapFrom(src =&gt; src.JobPosting.Title))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.JobPosting.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.ApplicantName, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.FullName))&#10;            .ForMember(dest =&gt; dest.ApplicantEmail, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.ApplicantPhone, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.PhoneNumber ?? string.Empty));&#10;&#10;  &#10;        CreateMap&lt;Review, ReviewDto&gt;()&#10;            .ForMember(dest =&gt; dest.Id, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.RestaurantId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.RestaurantId)))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer.FullName))&#10;            .ForMember(dest =&gt; dest.CustomerEmail, opt =&gt; opt.MapFrom(src =&gt; src.Customer.Email));&#10;&#10;        &#10;        CreateMap&lt;Order, OrderDto&gt;()&#10;            .ForMember(dest =&gt; dest.Id, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.Type, opt =&gt; opt.MapFrom(src =&gt; src.Type.ToString()))&#10;            .ForMember(dest =&gt; dest.RestaurantId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.RestaurantId)))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : null))&#10;            .ForMember(dest =&gt; dest.TableId, opt =&gt; opt.MapFrom(src =&gt; src.TableId != null ? int.Parse(src.TableId) : (int?)null))&#10;            .ForMember(dest =&gt; dest.OrderItems, opt =&gt; opt.MapFrom(src =&gt; src.OrderItems));&#10;&#10;        CreateMap&lt;OrderItem, OrderItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.Id, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.MenuItemId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.MenuItemId)))&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.MenuItem.Name))&#10;            .ForMember(dest =&gt; dest.OrderId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.OrderId)))&#10;            .ForMember(dest =&gt; dest.Subtotal, opt =&gt; opt.MapFrom(src =&gt; src.UnitPrice * src.Quantity));&#10;&#10;      &#10;        CreateMap&lt;Table, TableDto&gt;()&#10;            .ForMember(dest =&gt; dest.Id, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.RestaurantId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.RestaurantId)));&#10;        &#10;        CreateMap&lt;CreateTableDto, Table&gt;();&#10;        CreateMap&lt;UpdateTableDto, Table&gt;();&#10;        &#10;        CreateMap&lt;Order, RecentOrderDto&gt;()&#10;            .ForMember(dest =&gt; dest.OrderId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : &quot;Guest&quot;))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.OrderType, opt =&gt; opt.MapFrom(src =&gt; src.Type.ToString()));&#10;&#10;      &#10;        CreateMap&lt;MenuItem, TopSellingItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuItemId, opt =&gt; opt.MapFrom(src =&gt; int.Parse(src.Id)))&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.Name))&#10;            .ForMember(dest =&gt; dest.QuantitySold, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.TotalRevenue, opt =&gt; opt.Ignore());&#10;&#10;  &#10;        CreateMap&lt;(DateTime Date, decimal Revenue, int OrderCount), DailyRevenueDto&gt;()&#10;            .ForMember(dest =&gt; dest.Date, opt =&gt; opt.MapFrom(src =&gt; src.Date))&#10;            .ForMember(dest =&gt; dest.Revenue, opt =&gt; opt.MapFrom(src =&gt; src.Revenue))&#10;            .ForMember(dest =&gt; dest.OrderCount, opt =&gt; opt.MapFrom(src =&gt; src.OrderCount));&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Domain.Models.Common;&#10;&#10;public class TopSellingItemDto&#10;{&#10;    public string MenuItemId { get; set; } = string.Empty;&#10;    public string MenuItemName { get; set; } = string.Empty;&#10;    public int QuantitySold { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs" />
              <option name="originalContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/OwnerService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/OwnerService.cs" />
              <option name="originalContent" value="using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Employee;&#10;using RestaurantManagment.Application.Common.DTOs.JobApplication;&#10;using RestaurantManagment.Application.Common.DTOs.Menu;&#10;using RestaurantManagment.Application.Common.DTOs.MenuItem;&#10;using RestaurantManagment.Application.Common.DTOs.Order;&#10;using RestaurantManagment.Application.Common.DTOs.Owner;&#10;using RestaurantManagment.Application.Common.DTOs.Reservation;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.DTOs.Review;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using AutoMapper;&#10;using Microsoft.EntityFrameworkCore;&#10;&#10;namespace RestaurantManagment.Infrastructure.Services;&#10;&#10;public class OwnerService(IAppDbContext _context, IMapper _mapper): IOwnerService&#10;{&#10;    private IOwnerService _ownerServiceImplementation;&#10;&#10;    public async Task&lt;IEnumerable&lt;Restaurant&gt;&gt; GetOwnerRestaurantsAsync(string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;            &#10;        var restaurants = await _context.Restaurants&#10;            .Where(r =&gt; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted)&#10;            .ToListAsync();&#10;        &#10;        return restaurants;&#10;    }&#10;&#10;    public async Task&lt;Restaurant?&gt; GetRestaurantByIdAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurants = await _context.Restaurants&#10;            .Where(r =&gt; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted)&#10;            .ToListAsync();&#10;        &#10;        var restaurant = restaurants.FirstOrDefault(r =&gt; r.Id == restaurantId);&#10;        return restaurant;&#10;    }&#10;&#10;    public async Task&lt;Restaurant&gt; CreateRestaurantAsync(CreateRestaurantDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;        &#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = _mapper.Map&lt;Restaurant&gt;(dto);&#10;        restaurant.OwnerId = ownerId;&#10;        restaurant.Rate = 0;&#10;        restaurant.CreatedAt = DateTime.UtcNow;&#10;        restaurant.IsDeleted = false;&#10;&#10;        _context.Restaurants.Add(restaurant);&#10;        await _context.SaveChangesAsync();&#10;&#10;        return restaurant;&#10;    }&#10;    &#10;    public async Task&lt;Restaurant&gt; UpdateRestaurantAsync(string restaurantId, UpdateRestaurantDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;        &#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = await _context.Restaurants&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId &amp;&amp; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted);&#10; &#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found or you don't have access to this restaurant.&quot;);&#10;&#10;        _mapper.Map(dto, restaurant);&#10;        restaurant.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return restaurant;&#10;    }&#10;    &#10;    public async Task DeleteRestaurantAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = await _context.Restaurants&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId &amp;&amp; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found or you don't have access to this restaurant.&quot;);&#10;&#10;        restaurant.IsDeleted = true;&#10;        restaurant.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;bool&gt; IsRestaurantOwnerAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = await _context.Restaurants&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId &amp;&amp; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted);&#10;&#10;        return restaurant != null;&#10;    }&#10;&#10;    public async Task&lt;OwnerDashboardDto&gt; GetDashboardDataAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = await _context.Restaurants&#10;            .Include(r =&gt; r.Orders)&#10;            .Include(r =&gt; r.Menus)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId &amp;&amp; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found.&quot;);&#10;&#10;        var dashboard = new OwnerDashboardDto&#10;        {&#10;            RestaurantId = int.Parse(restaurantId),&#10;            RestaurantName = restaurant.Name,&#10;            TotalRevenue = await GetTotalRevenueAsync(restaurantId, ownerId),&#10;            TodayRevenue = await GetTodayRevenueAsync(restaurantId, ownerId),&#10;            TotalOrders = await GetTotalOrdersCountAsync(restaurantId, ownerId),&#10;            TodayOrders = await GetTodayOrdersCountAsync(restaurantId, ownerId),&#10;            ActiveReservations = await GetActiveReservationsCountAsync(restaurantId, ownerId),&#10;            MenuItemCount = await GetMenuItemsCountAsync(restaurantId, ownerId),&#10;            EmployeeCount = await GetEmployeeCountAsync(restaurantId, ownerId),&#10;            PendingApplicationsCount = await GetPendingApplicationsCountAsync(restaurantId, ownerId),&#10;            PendingReviewsCount = await GetPendingReviewsCountAsync(restaurantId, ownerId),&#10;            AverageRating = await GetAverageRatingAsync(restaurantId),&#10;            TopSellingItems = (await GetTopSellingItemsAsync(restaurantId, 5)).ToList()&#10;        };&#10;&#10;        return dashboard;&#10;    }&#10;&#10;    public async Task&lt;OwnerStatisticsDto&gt; GetStatisticsAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var orders = await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &amp;&amp; !o.IsDeleted)&#10;            .ToListAsync();&#10;&#10;        var totalRevenue = orders.Sum(o =&gt; o.TotalAmount);&#10;        var totalOrders = orders.Count;&#10;        var avgOrderValue = totalOrders &gt; 0 ? totalRevenue / totalOrders : 0;&#10;&#10;        return new OwnerStatisticsDto&#10;        {&#10;            TotalOrders = totalOrders,&#10;            TotalRevenue = totalRevenue,&#10;            TotalEmployees = await GetEmployeeCountAsync(restaurantId, ownerId),&#10;            TotalMenuItems = await GetMenuItemsCountAsync(restaurantId, ownerId),&#10;            AvailableTables = await GetAvailableTablesCountAsync(restaurantId, ownerId),&#10;            AverageOrderValue = (double)avgOrderValue,&#10;            AverageRating = await GetAverageRatingAsync(restaurantId)&#10;        };&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;TopSellingItemDto&gt;&gt; GetTopSellingItemsAsync(string restaurantId, int count = 10)&#10;    {&#10;        var topItems = await _context.OrderItems&#10;            .Include(oi =&gt; oi.MenuItem)&#10;            .Include(oi =&gt; oi.Order)&#10;            .Where(oi =&gt; oi.Order.RestaurantId == restaurantId &amp;&amp; !oi.IsDeleted &amp;&amp; !oi.Order.IsDeleted)&#10;            .GroupBy(oi =&gt; new { oi.MenuItemId, oi.MenuItem.Name, oi.MenuItem.Category })&#10;            .Select(g =&gt; new TopSellingItemDto&#10;            {&#10;                MenuItemId = int.Parse(g.Key.MenuItemId),&#10;                MenuItemName = g.Key.Name,&#10;                Category = g.Key.Category ?? &quot;Other&quot;,&#10;                QuantitySold = g.Sum(oi =&gt; oi.Quantity),&#10;                TotalRevenue = g.Sum(oi =&gt; oi.UnitPrice * oi.Quantity),&#10;                Price = g.First().UnitPrice&#10;            })&#10;            .OrderByDescending(x =&gt; x.QuantitySold)&#10;            .Take(count)&#10;            .ToListAsync();&#10;&#10;        return topItems;&#10;    }&#10;&#10;    public async Task&lt;RevenueChartDto&gt; GetRevenueChartDataAsync(string restaurantId, int days = 30)&#10;    {&#10;        var startDate = DateTime.UtcNow.Date.AddDays(-days);&#10;        var orders = await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate &gt;= startDate &#10;                &amp;&amp; !o.IsDeleted)&#10;            .ToListAsync();&#10;&#10;        var dailyRevenue = orders&#10;            .GroupBy(o =&gt; o.OrderDate.Date)&#10;            .Select(g =&gt; new DailyRevenueDto&#10;            {&#10;                Date = g.Key,&#10;                Revenue = g.Sum(o =&gt; o.TotalAmount),&#10;                OrderCount = g.Count()&#10;            })&#10;            .OrderBy(d =&gt; d.Date)&#10;            .ToList();&#10;&#10;        var totalRevenue = dailyRevenue.Sum(d =&gt; d.Revenue);&#10;        var avgRevenue = dailyRevenue.Any() ? totalRevenue / dailyRevenue.Count : 0;&#10;&#10;        return new RevenueChartDto&#10;        {&#10;            DailyRevenue = dailyRevenue,&#10;            TotalRevenue = totalRevenue,&#10;            AverageDailyRevenue = avgRevenue&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;EmployeeDto&gt;&gt; GetEmployeesAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Users&#10;            .Where(u =&gt; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var employees = await query&#10;            .OrderBy(u =&gt; u.FullName)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var employeeDtos = _mapper.Map&lt;List&lt;EmployeeDto&gt;&gt;(employees);&#10;&#10;        return new PaginatedResult&lt;EmployeeDto&gt;&#10;        {&#10;            Items = employeeDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;EmployeeDto?&gt; GetEmployeeByIdAsync(string restaurantId, string employeeId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var employee = await _context.Users&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == employeeId &amp;&amp; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted);&#10;&#10;        return employee != null ? _mapper.Map&lt;EmployeeDto&gt;(employee) : null;&#10;    }&#10;&#10;    public async Task&lt;EmployeeDto&gt; CreateEmployeeAsync(string restaurantId, CreateEmployeeDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        &#10;        var existingUser = await _context.Users.FirstOrDefaultAsync(u =&gt; u.Email == dto.Email);&#10;        if (existingUser != null)&#10;            throw new Exception(&quot;This email address is already in use.&quot;);&#10;&#10;        var employee = _mapper.Map&lt;AppUser&gt;(dto);&#10;        employee.EmployerRestaurantId = restaurantId;&#10;        employee.CreatedAt = DateTime.UtcNow;&#10;        employee.IsDeleted = false;&#10;        employee.EmailConfirmed = true;&#10;&#10;       &#10;        var nameParts = dto.FullName.Split(' ', 2);&#10;        employee.FirstName = nameParts[0];&#10;        employee.LastName = nameParts.Length &gt; 1 ? nameParts[1] : &quot;&quot;;&#10;&#10;        _context.Users.Add(employee);&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;EmployeeDto&gt;(employee);&#10;    }&#10;&#10;    public async Task&lt;EmployeeDto&gt; UpdateEmployeeAsync(string restaurantId, string employeeId, UpdateEmployeeDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var employee = await _context.Users&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == employeeId &amp;&amp; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted);&#10;&#10;        if (employee == null)&#10;            throw new Exception(&quot;Employee not found or you don't have access to this employee.&quot;);&#10;&#10;    &#10;        if (employee.Email != dto.Email)&#10;        {&#10;            var existingUser = await _context.Users.FirstOrDefaultAsync(u =&gt; u.Email == dto.Email &amp;&amp; u.Id != employeeId);&#10;            if (existingUser != null)&#10;                throw new Exception(&quot;This email address is already in use.&quot;);&#10;        }&#10;&#10;        _mapper.Map(dto, employee);&#10;        &#10;   &#10;        var nameParts = dto.FullName.Split(' ', 2);&#10;        employee.FirstName = nameParts[0];&#10;        employee.LastName = nameParts.Length &gt; 1 ? nameParts[1] : &quot;&quot;;&#10;        &#10;        employee.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;EmployeeDto&gt;(employee);&#10;    }&#10;&#10;    public async Task DeleteEmployeeAsync(string restaurantId, string employeeId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var employee = await _context.Users&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == employeeId &amp;&amp; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted);&#10;&#10;        if (employee == null)&#10;            throw new Exception(&quot;Employee not found or you don't have access to this employee.&quot;);&#10;&#10;        employee.IsDeleted = true;&#10;        employee.DeletedAt = DateTime.UtcNow;&#10;        employee.DeletedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetEmployeeCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.Users&#10;            .CountAsync(u =&gt; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted);&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;JobApplicationDto&gt;&gt; GetJobApplicationsAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;                .ThenInclude(jp =&gt; jp.Restaurant)&#10;            .Include(ja =&gt; ja.Applicant)&#10;            .Where(ja =&gt; ja.JobPosting.RestaurantId == restaurantId &amp;&amp; !ja.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var applications = await query&#10;            .OrderByDescending(ja =&gt; ja.ApplicationDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var applicationDtos = _mapper.Map&lt;List&lt;JobApplicationDto&gt;&gt;(applications);&#10;&#10;        return new PaginatedResult&lt;JobApplicationDto&gt;&#10;        {&#10;            Items = applicationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;JobApplicationDto&gt;&gt; GetPendingJobApplicationsAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;                .ThenInclude(jp =&gt; jp.Restaurant)&#10;            .Include(ja =&gt; ja.Applicant)&#10;            .Where(ja =&gt; ja.JobPosting.RestaurantId == restaurantId &#10;                &amp;&amp; ja.Status == &quot;Pending&quot; &#10;                &amp;&amp; !ja.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var applications = await query&#10;            .OrderByDescending(ja =&gt; ja.ApplicationDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var applicationDtos = _mapper.Map&lt;List&lt;JobApplicationDto&gt;&gt;(applications);&#10;&#10;        return new PaginatedResult&lt;JobApplicationDto&gt;&#10;        {&#10;            Items = applicationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;JobApplicationDto?&gt; GetJobApplicationByIdAsync(int applicationId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var application = await _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;                .ThenInclude(jp =&gt; jp.Restaurant)&#10;            .Include(ja =&gt; ja.Applicant)&#10;            .Where(ja =&gt; ja.Id == applicationId.ToString() &amp;&amp; !ja.IsDeleted)&#10;            .FirstOrDefaultAsync();&#10;&#10;        if (application == null)&#10;            return null;&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(application.JobPosting.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this application.&quot;);&#10;&#10;        return _mapper.Map&lt;JobApplicationDto&gt;(application);&#10;    }&#10;&#10;    public async Task AcceptJobApplicationAsync(int applicationId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var application = await _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;            .FirstOrDefaultAsync(ja =&gt; ja.Id == applicationId.ToString() &amp;&amp; !ja.IsDeleted);&#10;&#10;        if (application == null)&#10;            throw new Exception(&quot;Job application not found.&quot;);&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(application.JobPosting.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this application.&quot;);&#10;&#10;        application.Status = &quot;Accepted&quot;;&#10;        application.ReviewedDate = DateTime.UtcNow;&#10;        application.ReviewedBy = ownerId;&#10;        application.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectJobApplicationAsync(int applicationId, string ownerId, string? rejectionReason = null)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var application = await _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;            .FirstOrDefaultAsync(ja =&gt; ja.Id == applicationId.ToString() &amp;&amp; !ja.IsDeleted);&#10;&#10;        if (application == null)&#10;            throw new Exception(&quot;Job application not found.&quot;);&#10;&#10;     &#10;        var isOwner = await IsRestaurantOwnerAsync(application.JobPosting.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this application.&quot;);&#10;&#10;        application.Status = &quot;Rejected&quot;;&#10;        application.ReviewedDate = DateTime.UtcNow;&#10;        application.ReviewedBy = ownerId;&#10;        application.ReviewNotes = rejectionReason;&#10;        application.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetPendingApplicationsCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;            .Where(ja =&gt; ja.JobPosting.RestaurantId == restaurantId &#10;                &amp;&amp; ja.Status == &quot;Pending&quot; &#10;                &amp;&amp; !ja.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetRestaurantReviewsAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Customer)&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &amp;&amp; !r.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var reviews = await query&#10;            .OrderByDescending(r =&gt; r.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reviewDtos = _mapper.Map&lt;List&lt;ReviewDto&gt;&gt;(reviews);&#10;&#10;        return new PaginatedResult&lt;ReviewDto&gt;&#10;        {&#10;            Items = reviewDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetPendingReviewsAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Customer)&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &#10;                &amp;&amp; r.Status == &quot;Pending&quot; &#10;                &amp;&amp; !r.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var reviews = await query&#10;            .OrderByDescending(r =&gt; r.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reviewDtos = _mapper.Map&lt;List&lt;ReviewDto&gt;&gt;(reviews);&#10;&#10;        return new PaginatedResult&lt;ReviewDto&gt;&#10;        {&#10;            Items = reviewDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;ReviewDto?&gt; GetReviewByIdAsync(int reviewId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var review = await _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Customer)&#10;            .Where(r =&gt; r.Id == reviewId.ToString() &amp;&amp; !r.IsDeleted)&#10;            .FirstOrDefaultAsync();&#10;&#10;        if (review == null)&#10;            return null;&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(review.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this review.&quot;);&#10;&#10;        return _mapper.Map&lt;ReviewDto&gt;(review);&#10;    }&#10;&#10;    public async Task ApproveReviewAsync(int reviewId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var review = await _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId.ToString() &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found.&quot;);&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(review.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this review.&quot;);&#10;&#10;        review.Status = &quot;Approved&quot;;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;        review.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectReviewAsync(int reviewId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var review = await _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId.ToString() &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found.&quot;);&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(review.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this review.&quot;);&#10;&#10;        review.Status = &quot;Rejected&quot;;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;        review.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RespondToReviewAsync(int reviewId, string response, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        if (string.IsNullOrEmpty(response))&#10;            throw new ArgumentException(&quot;Response cannot be null or empty.&quot;, nameof(response));&#10;&#10;        var review = await _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId.ToString() &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found.&quot;);&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(review.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this review.&quot;);&#10;&#10;        review.OwnerResponse = response;&#10;        review.RespondedAt = DateTime.UtcNow;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;        review.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetPendingReviewsCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.Reviews&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &#10;                &amp;&amp; r.Status == &quot;Pending&quot; &#10;                &amp;&amp; !r.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;double&gt; GetAverageRatingAsync(string restaurantId)&#10;    {&#10;        var approvedReviews = await _context.Reviews&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &#10;                &amp;&amp; r.Status == &quot;Approved&quot; &#10;                &amp;&amp; !r.IsDeleted)&#10;            .ToListAsync();&#10;&#10;        if (!approvedReviews.Any())&#10;            return 0;&#10;&#10;        return approvedReviews.Average(r =&gt; r.Rating);&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;OrderDto&gt;&gt; GetRestaurantOrdersAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Orders&#10;            .Include(o =&gt; o.Restaurant)&#10;            .Include(o =&gt; o.Customer)&#10;            .Include(o =&gt; o.Table)&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &amp;&amp; !o.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var orders = await query&#10;            .OrderByDescending(o =&gt; o.OrderDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var orderDtos = _mapper.Map&lt;List&lt;OrderDto&gt;&gt;(orders);&#10;&#10;        return new PaginatedResult&lt;OrderDto&gt;&#10;        {&#10;            Items = orderDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;OrderDto&gt;&gt; GetOrdersByStatusAsync(string restaurantId, OrderStatus status, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Orders&#10;            .Include(o =&gt; o.Restaurant)&#10;            .Include(o =&gt; o.Customer)&#10;            .Include(o =&gt; o.Table)&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.Status == status &#10;                &amp;&amp; !o.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var orders = await query&#10;            .OrderByDescending(o =&gt; o.OrderDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var orderDtos = _mapper.Map&lt;List&lt;OrderDto&gt;&gt;(orders);&#10;&#10;        return new PaginatedResult&lt;OrderDto&gt;&#10;        {&#10;            Items = orderDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;OrderDto?&gt; GetOrderByIdAsync(int orderId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var order = await _context.Orders&#10;            .Include(o =&gt; o.Restaurant)&#10;            .Include(o =&gt; o.Customer)&#10;            .Include(o =&gt; o.Table)&#10;            .Include(o =&gt; o.DeliveryPerson)&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.Id == orderId.ToString() &amp;&amp; !o.IsDeleted)&#10;            .FirstOrDefaultAsync();&#10;&#10;        if (order == null)&#10;            return null;&#10;&#10;      &#10;        var isOwner = await IsRestaurantOwnerAsync(order.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this order.&quot;);&#10;&#10;        return _mapper.Map&lt;OrderDto&gt;(order);&#10;    }&#10;&#10;    public async Task&lt;OrderDto&gt; UpdateOrderStatusAsync(int orderId, OrderStatus newStatus, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var order = await _context.Orders&#10;            .Include(o =&gt; o.Restaurant)&#10;            .Include(o =&gt; o.Customer)&#10;            .Include(o =&gt; o.Table)&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .FirstOrDefaultAsync(o =&gt; o.Id == orderId.ToString() &amp;&amp; !o.IsDeleted);&#10;&#10;        if (order == null)&#10;            throw new Exception(&quot;Order not found.&quot;);&#10;&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(order.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this order.&quot;);&#10;&#10;        order.Status = newStatus;&#10;        &#10;        &#10;        if (newStatus == OrderStatus.Completed || newStatus == OrderStatus.Served)&#10;        {&#10;            order.CompletedAt = DateTime.UtcNow;&#10;        }&#10;&#10;        order.UpdatedAt = DateTime.UtcNow;&#10;        order.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;OrderDto&gt;(order);&#10;    }&#10;&#10;    public async Task&lt;decimal&gt; GetTotalRevenueAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var totalRevenue = await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; (o.Status == OrderStatus.Completed || o.Status == OrderStatus.Served)&#10;                &amp;&amp; !o.IsDeleted)&#10;            .SumAsync(o =&gt; o.TotalAmount);&#10;&#10;        return totalRevenue;&#10;    }&#10;&#10;    public async Task&lt;decimal&gt; GetTodayRevenueAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var today = DateTime.UtcNow.Date;&#10;        var todayRevenue = await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate.Date == today&#10;                &amp;&amp; (o.Status == OrderStatus.Completed || o.Status == OrderStatus.Served)&#10;                &amp;&amp; !o.IsDeleted)&#10;            .SumAsync(o =&gt; o.TotalAmount);&#10;&#10;        return todayRevenue;&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetTotalOrdersCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &amp;&amp; !o.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetTodayOrdersCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var today = DateTime.UtcNow.Date;&#10;        return await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate.Date == today&#10;                &amp;&amp; !o.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReservationDto&gt;&gt; GetRestaurantReservationsAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Reservations&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Table)&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &amp;&amp; !r.IsDeleted)&#10;            .OrderByDescending(r =&gt; r.ReservationDate);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var reservations = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reservationDtos = _mapper.Map&lt;List&lt;ReservationDto&gt;&gt;(reservations);&#10;&#10;        return new PaginatedResult&lt;ReservationDto&gt;&#10;        {&#10;            Items = reservationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReservationDto&gt;&gt; GetReservationsByStatusAsync(string restaurantId, ReservationStatus status, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Reservations&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Table)&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &amp;&amp; r.Status == status &amp;&amp; !r.IsDeleted)&#10;            .OrderByDescending(r =&gt; r.ReservationDate);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var reservations = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reservationDtos = _mapper.Map&lt;List&lt;ReservationDto&gt;&gt;(reservations);&#10;&#10;        return new PaginatedResult&lt;ReservationDto&gt;&#10;        {&#10;            Items = reservationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;ReservationDto?&gt; GetReservationByIdAsync(string reservationId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var reservation = await _context.Reservations&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Table)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reservationId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (reservation == null)&#10;            return null;&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(reservation.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this reservation.&quot;);&#10;&#10;        return _mapper.Map&lt;ReservationDto&gt;(reservation);&#10;    }&#10;&#10;    public async Task&lt;ReservationDto&gt; UpdateReservationStatusAsync(string reservationId, ReservationStatus newStatus, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var reservation = await _context.Reservations&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Table)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reservationId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (reservation == null)&#10;            throw new Exception(&quot;Reservation not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(reservation.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this reservation.&quot;);&#10;&#10;        reservation.Status = newStatus;&#10;        reservation.UpdatedAt = DateTime.UtcNow;&#10;        reservation.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;ReservationDto&gt;(reservation);&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetActiveReservationsCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.Reservations&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &#10;                &amp;&amp; (r.Status == ReservationStatus.Pending || r.Status == ReservationStatus.Confirmed)&#10;                &amp;&amp; !r.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;ReservationDto&gt;&gt; GetTodayReservationsAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var reservations = await _context.Reservations&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Table)&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &#10;                &amp;&amp; r.ReservationDate &gt;= DateTime.UtcNow.Date &#10;                &amp;&amp; r.ReservationDate &lt; DateTime.UtcNow.Date.AddDays(1)&#10;                &amp;&amp; !r.IsDeleted)&#10;            .OrderBy(r =&gt; r.ReservationDate)&#10;            .ToListAsync();&#10;&#10;        return _mapper.Map&lt;List&lt;ReservationDto&gt;&gt;(reservations);&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;MenuDto&gt;&gt; GetRestaurantMenusAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var menus = await _context.Menus&#10;            .Where(m =&gt; m.RestaurantId == restaurantId &amp;&amp; !m.IsDeleted)&#10;            .ToListAsync();&#10;&#10;        return _mapper.Map&lt;List&lt;MenuDto&gt;&gt;(menus);&#10;    }&#10;&#10;    public async Task&lt;MenuDto?&gt; GetMenuByIdAsync(string menuId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menu = await _context.Menus&#10;            .FirstOrDefaultAsync(m =&gt; m.Id == menuId.ToString() &amp;&amp; !m.IsDeleted);&#10;&#10;        if (menu == null)&#10;            return null;&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu.&quot;);&#10;&#10;        return _mapper.Map&lt;MenuDto&gt;(menu);&#10;    }&#10;&#10;    public async Task&lt;MenuDto&gt; CreateMenuAsync(string restaurantId, CreateMenuDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = await _context.Restaurants&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var menu = _mapper.Map&lt;Menu&gt;(dto);&#10;        menu.RestaurantId = restaurantId;&#10;        menu.CreatedAt = DateTime.UtcNow;&#10;        menu.CreatedBy = ownerId;&#10;        menu.IsDeleted = false;&#10;&#10;        _context.Menus.Add(menu);&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;MenuDto&gt;(menu);&#10;    }&#10;&#10;    public async Task&lt;MenuDto&gt; UpdateMenuAsync(string menuId, UpdateMenuDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menu = await _context.Menus&#10;            .FirstOrDefaultAsync(m =&gt; m.Id == menuId.ToString() &amp;&amp; !m.IsDeleted);&#10;&#10;        if (menu == null)&#10;            throw new Exception(&quot;Menu not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu.&quot;);&#10;&#10;        _mapper.Map(dto, menu);&#10;        menu.UpdatedAt = DateTime.UtcNow;&#10;        menu.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;MenuDto&gt;(menu);&#10;    }&#10;&#10;    public async Task DeleteMenuAsync(string menuId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menu = await _context.Menus&#10;            .FirstOrDefaultAsync(m =&gt; m.Id == menuId.ToString() &amp;&amp; !m.IsDeleted);&#10;&#10;        if (menu == null)&#10;            throw new Exception(&quot;Menu not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu.&quot;);&#10;&#10;        menu.IsDeleted = true;&#10;        menu.DeletedAt = DateTime.UtcNow;&#10;        menu.DeletedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;MenuItemDto&gt;&gt; GetMenuItemsAsync(string menuId, string ownerId, int pageNumber = 1, int pageSize = 20)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menu = await _context.Menus&#10;            .Include(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(m =&gt; m.Id == menuId &amp;&amp; !m.IsDeleted);&#10;&#10;        if (menu == null)&#10;            throw new Exception(&quot;Menu not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu.&quot;);&#10;&#10;        var query = _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;            .Where(mi =&gt; mi.MenuId == menuId &amp;&amp; !mi.IsDeleted)&#10;            .OrderBy(mi =&gt; mi.Category)&#10;            .ThenBy(mi =&gt; mi.Name);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var menuItems = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var menuItemDtos = _mapper.Map&lt;List&lt;MenuItemDto&gt;&gt;(menuItems);&#10;&#10;        return new PaginatedResult&lt;MenuItemDto&gt;&#10;        {&#10;            Items = menuItemDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;MenuItemDto?&gt; GetMenuItemByIdAsync(string menuItemId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menuItem = await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;                .ThenInclude(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(mi =&gt; mi.Id == menuItemId &amp;&amp; !mi.IsDeleted);&#10;&#10;        if (menuItem == null)&#10;            return null;&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menuItem.Menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu item.&quot;);&#10;&#10;        return _mapper.Map&lt;MenuItemDto&gt;(menuItem);&#10;    }&#10;&#10;    public async Task&lt;MenuItemDto&gt; CreateMenuItemAsync(string menuId, CreateMenuItemDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menu = await _context.Menus&#10;            .Include(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(m =&gt; m.Id == menuId &amp;&amp; !m.IsDeleted);&#10;&#10;        if (menu == null)&#10;            throw new Exception(&quot;Menu not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu.&quot;);&#10;&#10;        var menuItem = _mapper.Map&lt;MenuItem&gt;(dto);&#10;        menuItem.MenuId = menuId;&#10;        menuItem.CreatedAt = DateTime.UtcNow;&#10;        menuItem.CreatedBy = ownerId;&#10;        menuItem.IsDeleted = false;&#10;&#10;        _context.MenuItems.Add(menuItem);&#10;        await _context.SaveChangesAsync();&#10;&#10;        // Reload with navigation properties&#10;        menuItem = await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;            .FirstAsync(mi =&gt; mi.Id == menuItem.Id);&#10;&#10;        return _mapper.Map&lt;MenuItemDto&gt;(menuItem);&#10;    }&#10;&#10;    public async Task&lt;MenuItemDto&gt; UpdateMenuItemAsync(string menuItemId, UpdateMenuItemDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menuItem = await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;                .ThenInclude(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(mi =&gt; mi.Id == menuItemId &amp;&amp; !mi.IsDeleted);&#10;&#10;        if (menuItem == null)&#10;            throw new Exception(&quot;Menu item not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menuItem.Menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu item.&quot;);&#10;&#10;        _mapper.Map(dto, menuItem);&#10;        menuItem.UpdatedAt = DateTime.UtcNow;&#10;        menuItem.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;MenuItemDto&gt;(menuItem);&#10;    }&#10;&#10;    public async Task DeleteMenuItemAsync(string menuItemId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menuItem = await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;                .ThenInclude(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(mi =&gt; mi.Id == menuItemId &amp;&amp; !mi.IsDeleted);&#10;&#10;        if (menuItem == null)&#10;            throw new Exception(&quot;Menu item not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menuItem.Menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu item.&quot;);&#10;&#10;        menuItem.IsDeleted = true;&#10;        menuItem.DeletedAt = DateTime.UtcNow;&#10;        menuItem.DeletedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task UpdateMenuItemAvailabilityAsync(string menuItemId, bool isAvailable, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menuItem = await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;                .ThenInclude(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(mi =&gt; mi.Id == menuItemId &amp;&amp; !mi.IsDeleted);&#10;&#10;        if (menuItem == null)&#10;            throw new Exception(&quot;Menu item not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menuItem.Menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu item.&quot;);&#10;&#10;        menuItem.IsAvailable = isAvailable;&#10;        menuItem.UpdatedAt = DateTime.UtcNow;&#10;        menuItem.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetMenuItemsCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;            .Where(mi =&gt; mi.Menu.RestaurantId == restaurantId &amp;&amp; !mi.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;TableDto&gt;&gt; GetRestaurantTablesAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var tables = await _context.Tables&#10;            .Where(t =&gt; t.RestaurantId == restaurantId &amp;&amp; !t.IsDeleted)&#10;            .OrderBy(t =&gt; t.TableNumber)&#10;            .ToListAsync();&#10;&#10;        return _mapper.Map&lt;List&lt;TableDto&gt;&gt;(tables);&#10;    }&#10;&#10;    public async Task&lt;TableDto?&gt; GetTableByIdAsync(string tableId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var table = await _context.Tables&#10;            .FirstOrDefaultAsync(t =&gt; t.Id == tableId &amp;&amp; !t.IsDeleted);&#10;&#10;        if (table == null)&#10;            return null;&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(table.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this table.&quot;);&#10;&#10;        return _mapper.Map&lt;TableDto&gt;(table);&#10;    }&#10;&#10;    public async Task&lt;TableDto&gt; CreateTableAsync(string restaurantId, CreateTableDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;       &#10;        var existingTable = await _context.Tables&#10;            .FirstOrDefaultAsync(t =&gt; t.RestaurantId == restaurantId &#10;                &amp;&amp; t.TableNumber == dto.TableNumber &#10;                &amp;&amp; !t.IsDeleted);&#10;&#10;        if (existingTable != null)&#10;            throw new Exception($&quot;Table number {dto.TableNumber} already exists in this restaurant.&quot;);&#10;&#10;        var table = _mapper.Map&lt;Table&gt;(dto);&#10;        table.RestaurantId = restaurantId;&#10;        table.CreatedAt = DateTime.UtcNow;&#10;        table.CreatedBy = ownerId;&#10;        table.IsDeleted = false;&#10;        &#10;        if (Enum.TryParse&lt;TableStatus&gt;(dto.Status, true, out var status))&#10;            table.Status = status;&#10;        else&#10;            table.Status = TableStatus.Available;&#10;&#10;        _context.Tables.Add(table);&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;TableDto&gt;(table);&#10;    }&#10;&#10;    public async Task&lt;TableDto&gt; UpdateTableAsync(string tableId, UpdateTableDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var table = await _context.Tables&#10;            .FirstOrDefaultAsync(t =&gt; t.Id == tableId &amp;&amp; !t.IsDeleted);&#10;&#10;        if (table == null)&#10;            throw new Exception(&quot;Table not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(table.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this table.&quot;);&#10;&#10;      &#10;        if (table.TableNumber != dto.TableNumber)&#10;        {&#10;            var existingTable = await _context.Tables&#10;                .FirstOrDefaultAsync(t =&gt; t.RestaurantId == table.RestaurantId &#10;                    &amp;&amp; t.TableNumber == dto.TableNumber &#10;                    &amp;&amp; t.Id != tableId&#10;                    &amp;&amp; !t.IsDeleted);&#10;&#10;            if (existingTable != null)&#10;                throw new Exception($&quot;Table number {dto.TableNumber} already exists in this restaurant.&quot;);&#10;        }&#10;&#10;        table.TableNumber = dto.TableNumber;&#10;        table.Capacity = dto.Capacity;&#10;        table.Location = dto.Location;&#10;        &#10;        if (Enum.TryParse&lt;TableStatus&gt;(dto.Status, true, out var status))&#10;            table.Status = status;&#10;&#10;        table.UpdatedAt = DateTime.UtcNow;&#10;        table.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;TableDto&gt;(table);&#10;    }&#10;&#10;    public async Task DeleteTableAsync(string tableId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var table = await _context.Tables&#10;            .FirstOrDefaultAsync(t =&gt; t.Id == tableId &amp;&amp; !t.IsDeleted);&#10;&#10;        if (table == null)&#10;            throw new Exception(&quot;Table not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(table.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this table.&quot;);&#10;&#10;        table.IsDeleted = true;&#10;        table.DeletedAt = DateTime.UtcNow;&#10;        table.DeletedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;TableDto&gt; UpdateTableStatusAsync(string tableId, TableStatus newStatus, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var table = await _context.Tables&#10;            .FirstOrDefaultAsync(t =&gt; t.Id == tableId &amp;&amp; !t.IsDeleted);&#10;&#10;        if (table == null)&#10;            throw new Exception(&quot;Table not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(table.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this table.&quot;);&#10;&#10;        table.Status = newStatus;&#10;        table.UpdatedAt = DateTime.UtcNow;&#10;        table.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;TableDto&gt;(table);&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetAvailableTablesCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.Tables&#10;            .Where(t =&gt; t.RestaurantId == restaurantId &#10;                &amp;&amp; t.Status == TableStatus.Available &#10;                &amp;&amp; !t.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;SalesReportDto&gt; GetSalesReportAsync(string restaurantId, DateTime startDate, DateTime endDate, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;  &#10;        var orders = await _context.Orders&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate &gt;= startDate &#10;                &amp;&amp; o.OrderDate &lt;= endDate&#10;                &amp;&amp; (o.Status == OrderStatus.Completed || o.Status == OrderStatus.Served)&#10;                &amp;&amp; !o.IsDeleted)&#10;            .ToListAsync();&#10;&#10;      &#10;        var totalRevenue = orders.Sum(o =&gt; o.TotalAmount);&#10;        var totalOrders = orders.Count;&#10;        var averageOrderValue = totalOrders &gt; 0 ? totalRevenue / totalOrders : 0;&#10;&#10;        var dailySales = orders&#10;            .GroupBy(o =&gt; o.OrderDate.Date)&#10;            .Select(g =&gt; new DailyRevenueDto&#10;            {&#10;                Date = g.Key,&#10;                Revenue = g.Sum(o =&gt; o.TotalAmount),&#10;                OrderCount = g.Count()&#10;            })&#10;            .OrderBy(d =&gt; d.Date)&#10;            .ToList();&#10;&#10;       &#10;        var categorySales = await GetCategorySalesAsync(restaurantId, startDate, endDate, ownerId);&#10;&#10;        &#10;        var topProducts = orders&#10;            .SelectMany(o =&gt; o.OrderItems)&#10;            .GroupBy(oi =&gt; new { oi.MenuItemId, oi.MenuItem.Name, oi.MenuItem.Category })&#10;            .Select(g =&gt; new TopSellingItemDto&#10;            {&#10;                MenuItemId = int.Parse(g.Key.MenuItemId),&#10;                MenuItemName = g.Key.Name,&#10;                Category = g.Key.Category ?? &quot;Other&quot;,&#10;                QuantitySold = g.Sum(oi =&gt; oi.Quantity),&#10;                TotalRevenue = g.Sum(oi =&gt; oi.UnitPrice * oi.Quantity),&#10;                Price = g.First().UnitPrice&#10;            })&#10;            .OrderByDescending(x =&gt; x.TotalRevenue)&#10;            .Take(10)&#10;            .ToList();&#10;&#10;        return new SalesReportDto&#10;        {&#10;            StartDate = startDate,&#10;            EndDate = endDate,&#10;            TotalRevenue = totalRevenue,&#10;            TotalOrders = totalOrders,&#10;            AverageOrderValue = averageOrderValue,&#10;            CategorySales = categorySales.ToList(),&#10;            DailySales = dailySales,&#10;            TopProducts = topProducts&#10;        };&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OrderDto&gt;&gt; GetOrdersByDateRangeAsync(string restaurantId, DateTime startDate, DateTime endDate, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var orders = await _context.Orders&#10;            .Include(o =&gt; o.Restaurant)&#10;            .Include(o =&gt; o.Customer)&#10;            .Include(o =&gt; o.Table)&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate &gt;= startDate &#10;                &amp;&amp; o.OrderDate &lt;= endDate&#10;                &amp;&amp; !o.IsDeleted)&#10;            .OrderByDescending(o =&gt; o.OrderDate)&#10;            .ToListAsync();&#10;&#10;       &#10;        return _mapper.Map&lt;List&lt;OrderDto&gt;&gt;(orders);&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;CategorySalesDto&gt;&gt; GetCategorySalesAsync(string restaurantId, DateTime startDate, DateTime endDate, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;    &#10;        var orders = await _context.Orders&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate &gt;= startDate &#10;                &amp;&amp; o.OrderDate &lt;= endDate&#10;                &amp;&amp; (o.Status == OrderStatus.Completed || o.Status == OrderStatus.Served)&#10;                &amp;&amp; !o.IsDeleted)&#10;            .ToListAsync();&#10;&#10;&#10;        var totalRevenue = orders.Sum(o =&gt; o.TotalAmount);&#10;&#10;    &#10;        var categorySales = orders&#10;            .SelectMany(o =&gt; o.OrderItems)&#10;            .Where(oi =&gt; !oi.IsDeleted)&#10;            .GroupBy(oi =&gt; oi.MenuItem.Category ?? &quot;Other&quot;)&#10;            .Select(g =&gt; new CategorySalesDto&#10;            {&#10;                Category = g.Key,&#10;                ItemsSold = g.Sum(oi =&gt; oi.Quantity),&#10;                Revenue = g.Sum(oi =&gt; oi.UnitPrice * oi.Quantity),&#10;                Percentage = totalRevenue &gt; 0 ? (g.Sum(oi =&gt; oi.UnitPrice * oi.Quantity) / totalRevenue) * 100 : 0&#10;            })&#10;            .OrderByDescending(c =&gt; c.Revenue)&#10;            .ToList();&#10;&#10;        return categorySales;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Employee;&#10;using RestaurantManagment.Application.Common.DTOs.JobApplication;&#10;using RestaurantManagment.Application.Common.DTOs.Menu;&#10;using RestaurantManagment.Application.Common.DTOs.MenuItem;&#10;using RestaurantManagment.Application.Common.DTOs.Order;&#10;using RestaurantManagment.Application.Common.DTOs.Owner;&#10;using RestaurantManagment.Application.Common.DTOs.Reservation;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.DTOs.Review;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using AutoMapper;&#10;using Microsoft.EntityFrameworkCore;&#10;&#10;namespace RestaurantManagment.Infrastructure.Services;&#10;&#10;public class OwnerService(IAppDbContext _context, IMapper _mapper): IOwnerService&#10;{&#10;    private IOwnerService _ownerServiceImplementation;&#10;&#10;    public async Task&lt;IEnumerable&lt;Restaurant&gt;&gt; GetOwnerRestaurantsAsync(string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;            &#10;        var restaurants = await _context.Restaurants&#10;            .Where(r =&gt; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted)&#10;            .ToListAsync();&#10;        &#10;        return restaurants;&#10;    }&#10;&#10;    public async Task&lt;Restaurant?&gt; GetRestaurantByIdAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurants = await _context.Restaurants&#10;            .Where(r =&gt; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted)&#10;            .ToListAsync();&#10;        &#10;        var restaurant = restaurants.FirstOrDefault(r =&gt; r.Id == restaurantId);&#10;        return restaurant;&#10;    }&#10;&#10;    public async Task&lt;Restaurant&gt; CreateRestaurantAsync(CreateRestaurantDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;        &#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = _mapper.Map&lt;Restaurant&gt;(dto);&#10;        restaurant.OwnerId = ownerId;&#10;        restaurant.Rate = 0;&#10;        restaurant.CreatedAt = DateTime.UtcNow;&#10;        restaurant.IsDeleted = false;&#10;&#10;        _context.Restaurants.Add(restaurant);&#10;        await _context.SaveChangesAsync();&#10;&#10;        return restaurant;&#10;    }&#10;    &#10;    public async Task&lt;Restaurant&gt; UpdateRestaurantAsync(string restaurantId, UpdateRestaurantDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;        &#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = await _context.Restaurants&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId &amp;&amp; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted);&#10; &#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found or you don't have access to this restaurant.&quot;);&#10;&#10;        _mapper.Map(dto, restaurant);&#10;        restaurant.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return restaurant;&#10;    }&#10;    &#10;    public async Task DeleteRestaurantAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = await _context.Restaurants&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId &amp;&amp; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found or you don't have access to this restaurant.&quot;);&#10;&#10;        restaurant.IsDeleted = true;&#10;        restaurant.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;bool&gt; IsRestaurantOwnerAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = await _context.Restaurants&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId &amp;&amp; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted);&#10;&#10;        return restaurant != null;&#10;    }&#10;&#10;    public async Task&lt;OwnerDashboardDto&gt; GetDashboardDataAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = await _context.Restaurants&#10;            .Include(r =&gt; r.Orders)&#10;            .Include(r =&gt; r.Menus)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId &amp;&amp; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found.&quot;);&#10;&#10;        var dashboard = new OwnerDashboardDto&#10;        {&#10;            RestaurantId = int.Parse(restaurantId),&#10;            RestaurantName = restaurant.Name,&#10;            TotalRevenue = await GetTotalRevenueAsync(restaurantId, ownerId),&#10;            TodayRevenue = await GetTodayRevenueAsync(restaurantId, ownerId),&#10;            TotalOrders = await GetTotalOrdersCountAsync(restaurantId, ownerId),&#10;            TodayOrders = await GetTodayOrdersCountAsync(restaurantId, ownerId),&#10;            ActiveReservations = await GetActiveReservationsCountAsync(restaurantId, ownerId),&#10;            MenuItemCount = await GetMenuItemsCountAsync(restaurantId, ownerId),&#10;            EmployeeCount = await GetEmployeeCountAsync(restaurantId, ownerId),&#10;            PendingApplicationsCount = await GetPendingApplicationsCountAsync(restaurantId, ownerId),&#10;            PendingReviewsCount = await GetPendingReviewsCountAsync(restaurantId, ownerId),&#10;            AverageRating = await GetAverageRatingAsync(restaurantId),&#10;            TopSellingItems = (await GetTopSellingItemsAsync(restaurantId, 5)).ToList()&#10;        };&#10;&#10;        return dashboard;&#10;    }&#10;&#10;    public async Task&lt;OwnerStatisticsDto&gt; GetStatisticsAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var orders = await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &amp;&amp; !o.IsDeleted)&#10;            .ToListAsync();&#10;&#10;        var totalRevenue = orders.Sum(o =&gt; o.TotalAmount);&#10;        var totalOrders = orders.Count;&#10;        var avgOrderValue = totalOrders &gt; 0 ? totalRevenue / totalOrders : 0;&#10;&#10;        return new OwnerStatisticsDto&#10;        {&#10;            TotalOrders = totalOrders,&#10;            TotalRevenue = totalRevenue,&#10;            TotalEmployees = await GetEmployeeCountAsync(restaurantId, ownerId),&#10;            TotalMenuItems = await GetMenuItemsCountAsync(restaurantId, ownerId),&#10;            AvailableTables = await GetAvailableTablesCountAsync(restaurantId, ownerId),&#10;            AverageOrderValue = (double)avgOrderValue,&#10;            AverageRating = await GetAverageRatingAsync(restaurantId)&#10;        };&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;TopSellingItemDto&gt;&gt; GetTopSellingItemsAsync(string restaurantId, int count = 10)&#10;    {&#10;        var topItems = await _context.OrderItems&#10;            .Include(oi =&gt; oi.MenuItem)&#10;            .Include(oi =&gt; oi.Order)&#10;            .Where(oi =&gt; oi.Order.RestaurantId == restaurantId &amp;&amp; !oi.IsDeleted &amp;&amp; !oi.Order.IsDeleted)&#10;            .GroupBy(oi =&gt; new { oi.MenuItemId, oi.MenuItem.Name, oi.MenuItem.Category })&#10;            .Select(g =&gt; new TopSellingItemDto&#10;            {&#10;                MenuItemId = int.Parse(g.Key.MenuItemId),&#10;                MenuItemName = g.Key.Name,&#10;                Category = g.Key.Category ?? &quot;Other&quot;,&#10;                QuantitySold = g.Sum(oi =&gt; oi.Quantity),&#10;                TotalRevenue = g.Sum(oi =&gt; oi.UnitPrice * oi.Quantity),&#10;                Price = g.First().UnitPrice&#10;            })&#10;            .OrderByDescending(x =&gt; x.QuantitySold)&#10;            .Take(count)&#10;            .ToListAsync();&#10;&#10;        return topItems;&#10;    }&#10;&#10;    public async Task&lt;RevenueChartDto&gt; GetRevenueChartDataAsync(string restaurantId, int days = 30)&#10;    {&#10;        var startDate = DateTime.UtcNow.Date.AddDays(-days);&#10;        var orders = await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate &gt;= startDate &#10;                &amp;&amp; !o.IsDeleted)&#10;            .ToListAsync();&#10;&#10;        var dailyRevenue = orders&#10;            .GroupBy(o =&gt; o.OrderDate.Date)&#10;            .Select(g =&gt; new DailyRevenueDto&#10;            {&#10;                Date = g.Key,&#10;                Revenue = g.Sum(o =&gt; o.TotalAmount),&#10;                OrderCount = g.Count()&#10;            })&#10;            .OrderBy(d =&gt; d.Date)&#10;            .ToList();&#10;&#10;        var totalRevenue = dailyRevenue.Sum(d =&gt; d.Revenue);&#10;        var avgRevenue = dailyRevenue.Any() ? totalRevenue / dailyRevenue.Count : 0;&#10;&#10;        return new RevenueChartDto&#10;        {&#10;            DailyRevenue = dailyRevenue,&#10;            TotalRevenue = totalRevenue,&#10;            AverageDailyRevenue = avgRevenue&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;EmployeeDto&gt;&gt; GetEmployeesAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Users&#10;            .Include(u =&gt; u.EmployerRestaurant)&#10;            .Where(u =&gt; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var employees = await query&#10;            .OrderBy(u =&gt; u.FullName)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var employeeDtos = _mapper.Map&lt;List&lt;EmployeeDto&gt;&gt;(employees);&#10;&#10;        return new PaginatedResult&lt;EmployeeDto&gt;&#10;        {&#10;            Items = employeeDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;EmployeeDto?&gt; GetEmployeeByIdAsync(string restaurantId, string employeeId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var employee = await _context.Users&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == employeeId &amp;&amp; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted);&#10;&#10;        return employee != null ? _mapper.Map&lt;EmployeeDto&gt;(employee) : null;&#10;    }&#10;&#10;    public async Task&lt;EmployeeDto&gt; CreateEmployeeAsync(string restaurantId, CreateEmployeeDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        &#10;        var existingUser = await _context.Users.FirstOrDefaultAsync(u =&gt; u.Email == dto.Email);&#10;        if (existingUser != null)&#10;            throw new Exception(&quot;This email address is already in use.&quot;);&#10;&#10;        var employee = _mapper.Map&lt;AppUser&gt;(dto);&#10;        employee.EmployerRestaurantId = restaurantId;&#10;        employee.CreatedAt = DateTime.UtcNow;&#10;        employee.IsDeleted = false;&#10;        employee.EmailConfirmed = true;&#10;&#10;       &#10;        var nameParts = dto.FullName.Split(' ', 2);&#10;        employee.FirstName = nameParts[0];&#10;        employee.LastName = nameParts.Length &gt; 1 ? nameParts[1] : &quot;&quot;;&#10;&#10;        _context.Users.Add(employee);&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;EmployeeDto&gt;(employee);&#10;    }&#10;&#10;    public async Task&lt;EmployeeDto&gt; UpdateEmployeeAsync(string restaurantId, string employeeId, UpdateEmployeeDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var employee = await _context.Users&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == employeeId &amp;&amp; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted);&#10;&#10;        if (employee == null)&#10;            throw new Exception(&quot;Employee not found or you don't have access to this employee.&quot;);&#10;&#10;    &#10;        if (employee.Email != dto.Email)&#10;        {&#10;            var existingUser = await _context.Users.FirstOrDefaultAsync(u =&gt; u.Email == dto.Email &amp;&amp; u.Id != employeeId);&#10;            if (existingUser != null)&#10;                throw new Exception(&quot;This email address is already in use.&quot;);&#10;        }&#10;&#10;        _mapper.Map(dto, employee);&#10;        &#10;   &#10;        var nameParts = dto.FullName.Split(' ', 2);&#10;        employee.FirstName = nameParts[0];&#10;        employee.LastName = nameParts.Length &gt; 1 ? nameParts[1] : &quot;&quot;;&#10;        &#10;        employee.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;EmployeeDto&gt;(employee);&#10;    }&#10;&#10;    public async Task DeleteEmployeeAsync(string restaurantId, string employeeId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var employee = await _context.Users&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == employeeId &amp;&amp; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted);&#10;&#10;        if (employee == null)&#10;            throw new Exception(&quot;Employee not found or you don't have access to this employee.&quot;);&#10;&#10;        employee.IsDeleted = true;&#10;        employee.DeletedAt = DateTime.UtcNow;&#10;        employee.DeletedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetEmployeeCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.Users&#10;            .CountAsync(u =&gt; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted);&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;JobApplicationDto&gt;&gt; GetJobApplicationsAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;                .ThenInclude(jp =&gt; jp.Restaurant)&#10;            .Include(ja =&gt; ja.Applicant)&#10;            .Where(ja =&gt; ja.JobPosting.RestaurantId == restaurantId &amp;&amp; !ja.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var applications = await query&#10;            .OrderByDescending(ja =&gt; ja.ApplicationDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var applicationDtos = _mapper.Map&lt;List&lt;JobApplicationDto&gt;&gt;(applications);&#10;&#10;        return new PaginatedResult&lt;JobApplicationDto&gt;&#10;        {&#10;            Items = applicationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;JobApplicationDto&gt;&gt; GetPendingJobApplicationsAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;                .ThenInclude(jp =&gt; jp.Restaurant)&#10;            .Include(ja =&gt; ja.Applicant)&#10;            .Where(ja =&gt; ja.JobPosting.RestaurantId == restaurantId &#10;                &amp;&amp; ja.Status == &quot;Pending&quot; &#10;                &amp;&amp; !ja.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var applications = await query&#10;            .OrderByDescending(ja =&gt; ja.ApplicationDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var applicationDtos = _mapper.Map&lt;List&lt;JobApplicationDto&gt;&gt;(applications);&#10;&#10;        return new PaginatedResult&lt;JobApplicationDto&gt;&#10;        {&#10;            Items = applicationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;JobApplicationDto?&gt; GetJobApplicationByIdAsync(int applicationId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var application = await _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;                .ThenInclude(jp =&gt; jp.Restaurant)&#10;            .Include(ja =&gt; ja.Applicant)&#10;            .Where(ja =&gt; ja.Id == applicationId.ToString() &amp;&amp; !ja.IsDeleted)&#10;            .FirstOrDefaultAsync();&#10;&#10;        if (application == null)&#10;            return null;&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(application.JobPosting.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this application.&quot;);&#10;&#10;        return _mapper.Map&lt;JobApplicationDto&gt;(application);&#10;    }&#10;&#10;    public async Task AcceptJobApplicationAsync(int applicationId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var application = await _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;            .FirstOrDefaultAsync(ja =&gt; ja.Id == applicationId.ToString() &amp;&amp; !ja.IsDeleted);&#10;&#10;        if (application == null)&#10;            throw new Exception(&quot;Job application not found.&quot;);&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(application.JobPosting.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this application.&quot;);&#10;&#10;        application.Status = &quot;Accepted&quot;;&#10;        application.ReviewedDate = DateTime.UtcNow;&#10;        application.ReviewedBy = ownerId;&#10;        application.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectJobApplicationAsync(int applicationId, string ownerId, string? rejectionReason = null)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var application = await _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;            .FirstOrDefaultAsync(ja =&gt; ja.Id == applicationId.ToString() &amp;&amp; !ja.IsDeleted);&#10;&#10;        if (application == null)&#10;            throw new Exception(&quot;Job application not found.&quot;);&#10;&#10;     &#10;        var isOwner = await IsRestaurantOwnerAsync(application.JobPosting.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this application.&quot;);&#10;&#10;        application.Status = &quot;Rejected&quot;;&#10;        application.ReviewedDate = DateTime.UtcNow;&#10;        application.ReviewedBy = ownerId;&#10;        application.ReviewNotes = rejectionReason;&#10;        application.UpdatedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetPendingApplicationsCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.JobApplications&#10;            .Include(ja =&gt; ja.JobPosting)&#10;            .Where(ja =&gt; ja.JobPosting.RestaurantId == restaurantId &#10;                &amp;&amp; ja.Status == &quot;Pending&quot; &#10;                &amp;&amp; !ja.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetRestaurantReviewsAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Customer)&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &amp;&amp; !r.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var reviews = await query&#10;            .OrderByDescending(r =&gt; r.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reviewDtos = _mapper.Map&lt;List&lt;ReviewDto&gt;&gt;(reviews);&#10;&#10;        return new PaginatedResult&lt;ReviewDto&gt;&#10;        {&#10;            Items = reviewDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReviewDto&gt;&gt; GetPendingReviewsAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Customer)&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &#10;                &amp;&amp; r.Status == &quot;Pending&quot; &#10;                &amp;&amp; !r.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var reviews = await query&#10;            .OrderByDescending(r =&gt; r.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reviewDtos = _mapper.Map&lt;List&lt;ReviewDto&gt;&gt;(reviews);&#10;&#10;        return new PaginatedResult&lt;ReviewDto&gt;&#10;        {&#10;            Items = reviewDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;ReviewDto?&gt; GetReviewByIdAsync(int reviewId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var review = await _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Customer)&#10;            .Where(r =&gt; r.Id == reviewId.ToString() &amp;&amp; !r.IsDeleted)&#10;            .FirstOrDefaultAsync();&#10;&#10;        if (review == null)&#10;            return null;&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(review.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this review.&quot;);&#10;&#10;        return _mapper.Map&lt;ReviewDto&gt;(review);&#10;    }&#10;&#10;    public async Task ApproveReviewAsync(int reviewId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var review = await _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId.ToString() &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found.&quot;);&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(review.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this review.&quot;);&#10;&#10;        review.Status = &quot;Approved&quot;;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;        review.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectReviewAsync(int reviewId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var review = await _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId.ToString() &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found.&quot;);&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(review.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this review.&quot;);&#10;&#10;        review.Status = &quot;Rejected&quot;;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;        review.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RespondToReviewAsync(int reviewId, string response, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        if (string.IsNullOrEmpty(response))&#10;            throw new ArgumentException(&quot;Response cannot be null or empty.&quot;, nameof(response));&#10;&#10;        var review = await _context.Reviews&#10;            .Include(r =&gt; r.Restaurant)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reviewId.ToString() &amp;&amp; !r.IsDeleted);&#10;&#10;        if (review == null)&#10;            throw new Exception(&quot;Review not found.&quot;);&#10;        &#10;        var isOwner = await IsRestaurantOwnerAsync(review.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this review.&quot;);&#10;&#10;        review.OwnerResponse = response;&#10;        review.RespondedAt = DateTime.UtcNow;&#10;        review.UpdatedAt = DateTime.UtcNow;&#10;        review.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetPendingReviewsCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.Reviews&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &#10;                &amp;&amp; r.Status == &quot;Pending&quot; &#10;                &amp;&amp; !r.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;double&gt; GetAverageRatingAsync(string restaurantId)&#10;    {&#10;        var approvedReviews = await _context.Reviews&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &#10;                &amp;&amp; r.Status == &quot;Approved&quot; &#10;                &amp;&amp; !r.IsDeleted)&#10;            .ToListAsync();&#10;&#10;        if (!approvedReviews.Any())&#10;            return 0;&#10;&#10;        return approvedReviews.Average(r =&gt; r.Rating);&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;OrderDto&gt;&gt; GetRestaurantOrdersAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Orders&#10;            .Include(o =&gt; o.Restaurant)&#10;            .Include(o =&gt; o.Customer)&#10;            .Include(o =&gt; o.Table)&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &amp;&amp; !o.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var orders = await query&#10;            .OrderByDescending(o =&gt; o.OrderDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var orderDtos = _mapper.Map&lt;List&lt;OrderDto&gt;&gt;(orders);&#10;&#10;        return new PaginatedResult&lt;OrderDto&gt;&#10;        {&#10;            Items = orderDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;OrderDto&gt;&gt; GetOrdersByStatusAsync(string restaurantId, OrderStatus status, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Orders&#10;            .Include(o =&gt; o.Restaurant)&#10;            .Include(o =&gt; o.Customer)&#10;            .Include(o =&gt; o.Table)&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.Status == status &#10;                &amp;&amp; !o.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var orders = await query&#10;            .OrderByDescending(o =&gt; o.OrderDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var orderDtos = _mapper.Map&lt;List&lt;OrderDto&gt;&gt;(orders);&#10;&#10;        return new PaginatedResult&lt;OrderDto&gt;&#10;        {&#10;            Items = orderDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;OrderDto?&gt; GetOrderByIdAsync(int orderId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var order = await _context.Orders&#10;            .Include(o =&gt; o.Restaurant)&#10;            .Include(o =&gt; o.Customer)&#10;            .Include(o =&gt; o.Table)&#10;            .Include(o =&gt; o.DeliveryPerson)&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.Id == orderId.ToString() &amp;&amp; !o.IsDeleted)&#10;            .FirstOrDefaultAsync();&#10;&#10;        if (order == null)&#10;            return null;&#10;&#10;      &#10;        var isOwner = await IsRestaurantOwnerAsync(order.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this order.&quot;);&#10;&#10;        return _mapper.Map&lt;OrderDto&gt;(order);&#10;    }&#10;&#10;    public async Task&lt;OrderDto&gt; UpdateOrderStatusAsync(int orderId, OrderStatus newStatus, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var order = await _context.Orders&#10;            .Include(o =&gt; o.Restaurant)&#10;            .Include(o =&gt; o.Customer)&#10;            .Include(o =&gt; o.Table)&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .FirstOrDefaultAsync(o =&gt; o.Id == orderId.ToString() &amp;&amp; !o.IsDeleted);&#10;&#10;        if (order == null)&#10;            throw new Exception(&quot;Order not found.&quot;);&#10;&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(order.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this order.&quot;);&#10;&#10;        order.Status = newStatus;&#10;        &#10;        &#10;        if (newStatus == OrderStatus.Completed || newStatus == OrderStatus.Served)&#10;        {&#10;            order.CompletedAt = DateTime.UtcNow;&#10;        }&#10;&#10;        order.UpdatedAt = DateTime.UtcNow;&#10;        order.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;OrderDto&gt;(order);&#10;    }&#10;&#10;    public async Task&lt;decimal&gt; GetTotalRevenueAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var totalRevenue = await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; (o.Status == OrderStatus.Completed || o.Status == OrderStatus.Served)&#10;                &amp;&amp; !o.IsDeleted)&#10;            .SumAsync(o =&gt; o.TotalAmount);&#10;&#10;        return totalRevenue;&#10;    }&#10;&#10;    public async Task&lt;decimal&gt; GetTodayRevenueAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var today = DateTime.UtcNow.Date;&#10;        var todayRevenue = await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate.Date == today&#10;                &amp;&amp; (o.Status == OrderStatus.Completed || o.Status == OrderStatus.Served)&#10;                &amp;&amp; !o.IsDeleted)&#10;            .SumAsync(o =&gt; o.TotalAmount);&#10;&#10;        return todayRevenue;&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetTotalOrdersCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &amp;&amp; !o.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetTodayOrdersCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var today = DateTime.UtcNow.Date;&#10;        return await _context.Orders&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate.Date == today&#10;                &amp;&amp; !o.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReservationDto&gt;&gt; GetRestaurantReservationsAsync(string restaurantId, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Reservations&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Table)&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &amp;&amp; !r.IsDeleted)&#10;            .OrderByDescending(r =&gt; r.ReservationDate);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var reservations = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reservationDtos = _mapper.Map&lt;List&lt;ReservationDto&gt;&gt;(reservations);&#10;&#10;        return new PaginatedResult&lt;ReservationDto&gt;&#10;        {&#10;            Items = reservationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;ReservationDto&gt;&gt; GetReservationsByStatusAsync(string restaurantId, ReservationStatus status, string ownerId, int pageNumber = 1, int pageSize = 10)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var query = _context.Reservations&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Table)&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &amp;&amp; r.Status == status &amp;&amp; !r.IsDeleted)&#10;            .OrderByDescending(r =&gt; r.ReservationDate);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var reservations = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var reservationDtos = _mapper.Map&lt;List&lt;ReservationDto&gt;&gt;(reservations);&#10;&#10;        return new PaginatedResult&lt;ReservationDto&gt;&#10;        {&#10;            Items = reservationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;ReservationDto?&gt; GetReservationByIdAsync(string reservationId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var reservation = await _context.Reservations&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Table)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reservationId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (reservation == null)&#10;            return null;&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(reservation.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this reservation.&quot;);&#10;&#10;        return _mapper.Map&lt;ReservationDto&gt;(reservation);&#10;    }&#10;&#10;    public async Task&lt;ReservationDto&gt; UpdateReservationStatusAsync(string reservationId, ReservationStatus newStatus, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var reservation = await _context.Reservations&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Table)&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == reservationId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (reservation == null)&#10;            throw new Exception(&quot;Reservation not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(reservation.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this reservation.&quot;);&#10;&#10;        reservation.Status = newStatus;&#10;        reservation.UpdatedAt = DateTime.UtcNow;&#10;        reservation.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;ReservationDto&gt;(reservation);&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetActiveReservationsCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.Reservations&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &#10;                &amp;&amp; (r.Status == ReservationStatus.Pending || r.Status == ReservationStatus.Confirmed)&#10;                &amp;&amp; !r.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;ReservationDto&gt;&gt; GetTodayReservationsAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var reservations = await _context.Reservations&#10;            .Include(r =&gt; r.Restaurant)&#10;            .Include(r =&gt; r.Table)&#10;            .Where(r =&gt; r.RestaurantId == restaurantId &#10;                &amp;&amp; r.ReservationDate &gt;= DateTime.UtcNow.Date &#10;                &amp;&amp; r.ReservationDate &lt; DateTime.UtcNow.Date.AddDays(1)&#10;                &amp;&amp; !r.IsDeleted)&#10;            .OrderBy(r =&gt; r.ReservationDate)&#10;            .ToListAsync();&#10;&#10;        return _mapper.Map&lt;List&lt;ReservationDto&gt;&gt;(reservations);&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;MenuDto&gt;&gt; GetRestaurantMenusAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var menus = await _context.Menus&#10;            .Where(m =&gt; m.RestaurantId == restaurantId &amp;&amp; !m.IsDeleted)&#10;            .ToListAsync();&#10;&#10;        return _mapper.Map&lt;List&lt;MenuDto&gt;&gt;(menus);&#10;    }&#10;&#10;    public async Task&lt;MenuDto?&gt; GetMenuByIdAsync(string menuId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menu = await _context.Menus&#10;            .FirstOrDefaultAsync(m =&gt; m.Id == menuId.ToString() &amp;&amp; !m.IsDeleted);&#10;&#10;        if (menu == null)&#10;            return null;&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu.&quot;);&#10;&#10;        return _mapper.Map&lt;MenuDto&gt;(menu);&#10;    }&#10;&#10;    public async Task&lt;MenuDto&gt; CreateMenuAsync(string restaurantId, CreateMenuDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var restaurant = await _context.Restaurants&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId &amp;&amp; !r.IsDeleted);&#10;&#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var menu = _mapper.Map&lt;Menu&gt;(dto);&#10;        menu.RestaurantId = restaurantId;&#10;        menu.CreatedAt = DateTime.UtcNow;&#10;        menu.CreatedBy = ownerId;&#10;        menu.IsDeleted = false;&#10;&#10;        _context.Menus.Add(menu);&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;MenuDto&gt;(menu);&#10;    }&#10;&#10;    public async Task&lt;MenuDto&gt; UpdateMenuAsync(string menuId, UpdateMenuDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menu = await _context.Menus&#10;            .FirstOrDefaultAsync(m =&gt; m.Id == menuId.ToString() &amp;&amp; !m.IsDeleted);&#10;&#10;        if (menu == null)&#10;            throw new Exception(&quot;Menu not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu.&quot;);&#10;&#10;        _mapper.Map(dto, menu);&#10;        menu.UpdatedAt = DateTime.UtcNow;&#10;        menu.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;MenuDto&gt;(menu);&#10;    }&#10;&#10;    public async Task DeleteMenuAsync(string menuId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menu = await _context.Menus&#10;            .FirstOrDefaultAsync(m =&gt; m.Id == menuId.ToString() &amp;&amp; !m.IsDeleted);&#10;&#10;        if (menu == null)&#10;            throw new Exception(&quot;Menu not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu.&quot;);&#10;&#10;        menu.IsDeleted = true;&#10;        menu.DeletedAt = DateTime.UtcNow;&#10;        menu.DeletedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;MenuItemDto&gt;&gt; GetMenuItemsAsync(string menuId, string ownerId, int pageNumber = 1, int pageSize = 20)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menu = await _context.Menus&#10;            .Include(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(m =&gt; m.Id == menuId &amp;&amp; !m.IsDeleted);&#10;&#10;        if (menu == null)&#10;            throw new Exception(&quot;Menu not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu.&quot;);&#10;&#10;        var query = _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;            .Where(mi =&gt; mi.MenuId == menuId &amp;&amp; !mi.IsDeleted)&#10;            .OrderBy(mi =&gt; mi.Category)&#10;            .ThenBy(mi =&gt; mi.Name);&#10;&#10;        var totalCount = await query.CountAsync();&#10;        var menuItems = await query&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var menuItemDtos = _mapper.Map&lt;List&lt;MenuItemDto&gt;&gt;(menuItems);&#10;&#10;        return new PaginatedResult&lt;MenuItemDto&gt;&#10;        {&#10;            Items = menuItemDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;MenuItemDto?&gt; GetMenuItemByIdAsync(string menuItemId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menuItem = await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;                .ThenInclude(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(mi =&gt; mi.Id == menuItemId &amp;&amp; !mi.IsDeleted);&#10;&#10;        if (menuItem == null)&#10;            return null;&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menuItem.Menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu item.&quot;);&#10;&#10;        return _mapper.Map&lt;MenuItemDto&gt;(menuItem);&#10;    }&#10;&#10;    public async Task&lt;MenuItemDto&gt; CreateMenuItemAsync(string menuId, CreateMenuItemDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menu = await _context.Menus&#10;            .Include(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(m =&gt; m.Id == menuId &amp;&amp; !m.IsDeleted);&#10;&#10;        if (menu == null)&#10;            throw new Exception(&quot;Menu not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu.&quot;);&#10;&#10;        var menuItem = _mapper.Map&lt;MenuItem&gt;(dto);&#10;        menuItem.MenuId = menuId;&#10;        menuItem.CreatedAt = DateTime.UtcNow;&#10;        menuItem.CreatedBy = ownerId;&#10;        menuItem.IsDeleted = false;&#10;&#10;        _context.MenuItems.Add(menuItem);&#10;        await _context.SaveChangesAsync();&#10;&#10;        // Reload with navigation properties&#10;        menuItem = await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;            .FirstAsync(mi =&gt; mi.Id == menuItem.Id);&#10;&#10;        return _mapper.Map&lt;MenuItemDto&gt;(menuItem);&#10;    }&#10;&#10;    public async Task&lt;MenuItemDto&gt; UpdateMenuItemAsync(string menuItemId, UpdateMenuItemDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menuItem = await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;                .ThenInclude(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(mi =&gt; mi.Id == menuItemId &amp;&amp; !mi.IsDeleted);&#10;&#10;        if (menuItem == null)&#10;            throw new Exception(&quot;Menu item not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menuItem.Menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu item.&quot;);&#10;&#10;        _mapper.Map(dto, menuItem);&#10;        menuItem.UpdatedAt = DateTime.UtcNow;&#10;        menuItem.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;MenuItemDto&gt;(menuItem);&#10;    }&#10;&#10;    public async Task DeleteMenuItemAsync(string menuItemId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menuItem = await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;                .ThenInclude(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(mi =&gt; mi.Id == menuItemId &amp;&amp; !mi.IsDeleted);&#10;&#10;        if (menuItem == null)&#10;            throw new Exception(&quot;Menu item not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menuItem.Menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu item.&quot;);&#10;&#10;        menuItem.IsDeleted = true;&#10;        menuItem.DeletedAt = DateTime.UtcNow;&#10;        menuItem.DeletedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task UpdateMenuItemAvailabilityAsync(string menuItemId, bool isAvailable, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var menuItem = await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;                .ThenInclude(m =&gt; m.Restaurant)&#10;            .FirstOrDefaultAsync(mi =&gt; mi.Id == menuItemId &amp;&amp; !mi.IsDeleted);&#10;&#10;        if (menuItem == null)&#10;            throw new Exception(&quot;Menu item not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(menuItem.Menu.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this menu item.&quot;);&#10;&#10;        menuItem.IsAvailable = isAvailable;&#10;        menuItem.UpdatedAt = DateTime.UtcNow;&#10;        menuItem.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetMenuItemsCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.MenuItems&#10;            .Include(mi =&gt; mi.Menu)&#10;            .Where(mi =&gt; mi.Menu.RestaurantId == restaurantId &amp;&amp; !mi.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;TableDto&gt;&gt; GetRestaurantTablesAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var tables = await _context.Tables&#10;            .Where(t =&gt; t.RestaurantId == restaurantId &amp;&amp; !t.IsDeleted)&#10;            .OrderBy(t =&gt; t.TableNumber)&#10;            .ToListAsync();&#10;&#10;        return _mapper.Map&lt;List&lt;TableDto&gt;&gt;(tables);&#10;    }&#10;&#10;    public async Task&lt;TableDto?&gt; GetTableByIdAsync(string tableId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var table = await _context.Tables&#10;            .FirstOrDefaultAsync(t =&gt; t.Id == tableId &amp;&amp; !t.IsDeleted);&#10;&#10;        if (table == null)&#10;            return null;&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(table.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this table.&quot;);&#10;&#10;        return _mapper.Map&lt;TableDto&gt;(table);&#10;    }&#10;&#10;    public async Task&lt;TableDto&gt; CreateTableAsync(string restaurantId, CreateTableDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;       &#10;        var existingTable = await _context.Tables&#10;            .FirstOrDefaultAsync(t =&gt; t.RestaurantId == restaurantId &#10;                &amp;&amp; t.TableNumber == dto.TableNumber &#10;                &amp;&amp; !t.IsDeleted);&#10;&#10;        if (existingTable != null)&#10;            throw new Exception($&quot;Table number {dto.TableNumber} already exists in this restaurant.&quot;);&#10;&#10;        var table = _mapper.Map&lt;Table&gt;(dto);&#10;        table.RestaurantId = restaurantId;&#10;        table.CreatedAt = DateTime.UtcNow;&#10;        table.CreatedBy = ownerId;&#10;        table.IsDeleted = false;&#10;        &#10;        if (Enum.TryParse&lt;TableStatus&gt;(dto.Status, true, out var status))&#10;            table.Status = status;&#10;        else&#10;            table.Status = TableStatus.Available;&#10;&#10;        _context.Tables.Add(table);&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;TableDto&gt;(table);&#10;    }&#10;&#10;    public async Task&lt;TableDto&gt; UpdateTableAsync(string tableId, UpdateTableDto dto, string ownerId)&#10;    {&#10;        if (dto == null)&#10;            throw new ArgumentNullException(nameof(dto));&#10;&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var table = await _context.Tables&#10;            .FirstOrDefaultAsync(t =&gt; t.Id == tableId &amp;&amp; !t.IsDeleted);&#10;&#10;        if (table == null)&#10;            throw new Exception(&quot;Table not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(table.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this table.&quot;);&#10;&#10;      &#10;        if (table.TableNumber != dto.TableNumber)&#10;        {&#10;            var existingTable = await _context.Tables&#10;                .FirstOrDefaultAsync(t =&gt; t.RestaurantId == table.RestaurantId &#10;                    &amp;&amp; t.TableNumber == dto.TableNumber &#10;                    &amp;&amp; t.Id != tableId&#10;                    &amp;&amp; !t.IsDeleted);&#10;&#10;            if (existingTable != null)&#10;                throw new Exception($&quot;Table number {dto.TableNumber} already exists in this restaurant.&quot;);&#10;        }&#10;&#10;        table.TableNumber = dto.TableNumber;&#10;        table.Capacity = dto.Capacity;&#10;        table.Location = dto.Location;&#10;        &#10;        if (Enum.TryParse&lt;TableStatus&gt;(dto.Status, true, out var status))&#10;            table.Status = status;&#10;&#10;        table.UpdatedAt = DateTime.UtcNow;&#10;        table.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;TableDto&gt;(table);&#10;    }&#10;&#10;    public async Task DeleteTableAsync(string tableId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var table = await _context.Tables&#10;            .FirstOrDefaultAsync(t =&gt; t.Id == tableId &amp;&amp; !t.IsDeleted);&#10;&#10;        if (table == null)&#10;            throw new Exception(&quot;Table not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(table.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this table.&quot;);&#10;&#10;        table.IsDeleted = true;&#10;        table.DeletedAt = DateTime.UtcNow;&#10;        table.DeletedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;TableDto&gt; UpdateTableStatusAsync(string tableId, TableStatus newStatus, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var table = await _context.Tables&#10;            .FirstOrDefaultAsync(t =&gt; t.Id == tableId &amp;&amp; !t.IsDeleted);&#10;&#10;        if (table == null)&#10;            throw new Exception(&quot;Table not found.&quot;);&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(table.RestaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this table.&quot;);&#10;&#10;        table.Status = newStatus;&#10;        table.UpdatedAt = DateTime.UtcNow;&#10;        table.UpdatedBy = ownerId;&#10;&#10;        await _context.SaveChangesAsync();&#10;&#10;        return _mapper.Map&lt;TableDto&gt;(table);&#10;    }&#10;&#10;    public async Task&lt;int&gt; GetAvailableTablesCountAsync(string restaurantId, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        return await _context.Tables&#10;            .Where(t =&gt; t.RestaurantId == restaurantId &#10;                &amp;&amp; t.Status == TableStatus.Available &#10;                &amp;&amp; !t.IsDeleted)&#10;            .CountAsync();&#10;    }&#10;&#10;    public async Task&lt;SalesReportDto&gt; GetSalesReportAsync(string restaurantId, DateTime startDate, DateTime endDate, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;  &#10;        var orders = await _context.Orders&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate &gt;= startDate &#10;                &amp;&amp; o.OrderDate &lt;= endDate&#10;                &amp;&amp; (o.Status == OrderStatus.Completed || o.Status == OrderStatus.Served)&#10;                &amp;&amp; !o.IsDeleted)&#10;            .ToListAsync();&#10;&#10;      &#10;        var totalRevenue = orders.Sum(o =&gt; o.TotalAmount);&#10;        var totalOrders = orders.Count;&#10;        var averageOrderValue = totalOrders &gt; 0 ? totalRevenue / totalOrders : 0;&#10;&#10;        var dailySales = orders&#10;            .GroupBy(o =&gt; o.OrderDate.Date)&#10;            .Select(g =&gt; new DailyRevenueDto&#10;            {&#10;                Date = g.Key,&#10;                Revenue = g.Sum(o =&gt; o.TotalAmount),&#10;                OrderCount = g.Count()&#10;            })&#10;            .OrderBy(d =&gt; d.Date)&#10;            .ToList();&#10;&#10;       &#10;        var categorySales = await GetCategorySalesAsync(restaurantId, startDate, endDate, ownerId);&#10;&#10;        &#10;        var topProducts = orders&#10;            .SelectMany(o =&gt; o.OrderItems)&#10;            .GroupBy(oi =&gt; new { oi.MenuItemId, oi.MenuItem.Name, oi.MenuItem.Category })&#10;            .Select(g =&gt; new TopSellingItemDto&#10;            {&#10;                MenuItemId = int.Parse(g.Key.MenuItemId),&#10;                MenuItemName = g.Key.Name,&#10;                Category = g.Key.Category ?? &quot;Other&quot;,&#10;                QuantitySold = g.Sum(oi =&gt; oi.Quantity),&#10;                TotalRevenue = g.Sum(oi =&gt; oi.UnitPrice * oi.Quantity),&#10;                Price = g.First().UnitPrice&#10;            })&#10;            .OrderByDescending(x =&gt; x.TotalRevenue)&#10;            .Take(10)&#10;            .ToList();&#10;&#10;        return new SalesReportDto&#10;        {&#10;            StartDate = startDate,&#10;            EndDate = endDate,&#10;            TotalRevenue = totalRevenue,&#10;            TotalOrders = totalOrders,&#10;            AverageOrderValue = averageOrderValue,&#10;            CategorySales = categorySales.ToList(),&#10;            DailySales = dailySales,&#10;            TopProducts = topProducts&#10;        };&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OrderDto&gt;&gt; GetOrdersByDateRangeAsync(string restaurantId, DateTime startDate, DateTime endDate, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;        var orders = await _context.Orders&#10;            .Include(o =&gt; o.Restaurant)&#10;            .Include(o =&gt; o.Customer)&#10;            .Include(o =&gt; o.Table)&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate &gt;= startDate &#10;                &amp;&amp; o.OrderDate &lt;= endDate&#10;                &amp;&amp; !o.IsDeleted)&#10;            .OrderByDescending(o =&gt; o.OrderDate)&#10;            .ToListAsync();&#10;&#10;       &#10;        return _mapper.Map&lt;List&lt;OrderDto&gt;&gt;(orders);&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;CategorySalesDto&gt;&gt; GetCategorySalesAsync(string restaurantId, DateTime startDate, DateTime endDate, string ownerId)&#10;    {&#10;        if (string.IsNullOrEmpty(ownerId))&#10;            throw new ArgumentException(&quot;Owner ID cannot be null or empty.&quot;, nameof(ownerId));&#10;&#10;        var isOwner = await IsRestaurantOwnerAsync(restaurantId, ownerId);&#10;        if (!isOwner)&#10;            throw new Exception(&quot;You don't have access to this restaurant.&quot;);&#10;&#10;    &#10;        var orders = await _context.Orders&#10;            .Include(o =&gt; o.OrderItems)&#10;                .ThenInclude(oi =&gt; oi.MenuItem)&#10;            .Where(o =&gt; o.RestaurantId == restaurantId &#10;                &amp;&amp; o.OrderDate &gt;= startDate &#10;                &amp;&amp; o.OrderDate &lt;= endDate&#10;                &amp;&amp; (o.Status == OrderStatus.Completed || o.Status == OrderStatus.Served)&#10;                &amp;&amp; !o.IsDeleted)&#10;            .ToListAsync();&#10;&#10;&#10;        var totalRevenue = orders.Sum(o =&gt; o.TotalAmount);&#10;&#10;    &#10;        var categorySales = orders&#10;            .SelectMany(o =&gt; o.OrderItems)&#10;            .Where(oi =&gt; !oi.IsDeleted)&#10;            .GroupBy(oi =&gt; oi.MenuItem.Category ?? &quot;Other&quot;)&#10;            .Select(g =&gt; new CategorySalesDto&#10;            {&#10;                Category = g.Key,&#10;                ItemsSold = g.Sum(oi =&gt; oi.Quantity),&#10;                Revenue = g.Sum(oi =&gt; oi.UnitPrice * oi.Quantity),&#10;                Percentage = totalRevenue &gt; 0 ? (g.Sum(oi =&gt; oi.UnitPrice * oi.Quantity) / totalRevenue) * 100 : 0&#10;            })&#10;            .OrderByDescending(c =&gt; c.Revenue)&#10;            .ToList();&#10;&#10;        return categorySales;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.Metadata.Builders;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Persistance.Configurations;&#10;&#10;public class JobPostingConfiguration : IEntityTypeConfiguration&lt;JobPosting&gt;&#10;{&#10;    public void Configure(EntityTypeBuilder&lt;JobPosting&gt; builder)&#10;    {&#10;        builder.HasKey(j =&gt; j.Id);&#10;&#10;        builder.Property(j =&gt; j.Title)&#10;            .IsRequired()&#10;            .HasMaxLength(200);&#10;&#10;        builder.Property(j =&gt; j.Description)&#10;            .IsRequired()&#10;            .HasMaxLength(2000);&#10;&#10;        builder.Property(j =&gt; j.Requirements)&#10;            .IsRequired()&#10;            .HasMaxLength(1000);&#10;&#10;        builder.Property(j =&gt; j.Position)&#10;            .IsRequired()&#10;            .HasMaxLength(100);&#10;&#10;        builder.Property(j =&gt; j.EmploymentType)&#10;            .IsRequired()&#10;            .HasMaxLength(50);&#10;&#10;        // Relationships&#10;        builder.HasOne(j =&gt; j.Restaurant)&#10;            .WithMany(r =&gt; r.JobPostings)&#10;            .HasForeignKey(j =&gt; j.RestaurantId)&#10;            .OnDelete(DeleteBehavior.Cascade);&#10;&#10;        // Indexes&#10;        builder.HasIndex(j =&gt; j.RestaurantId);&#10;        builder.HasIndex(j =&gt; j.IsActive);&#10;&#10;        // Soft Delete Query Filter&#10;        builder.HasQueryFilter(j =&gt; !j.IsDeleted);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Seeders/DbSeeder.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Seeders/DbSeeder.cs" />
              <option name="originalContent" value="using Microsoft.AspNetCore.Identity;&#10;using Microsoft.EntityFrameworkCore;&#10;using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.Persistance.Seeders;&#10;&#10;public static class DbSeeder&#10;{&#10;    public static async Task SeedDataAsync(IServiceProvider serviceProvider)&#10;    {&#10;        var scope = serviceProvider.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var roleManager = scope.ServiceProvider.GetRequiredService&lt;RoleManager&lt;IdentityRole&gt;&gt;();&#10;&#10;        // Database'i olutur - migration yerine mevcut durumu kontrol et&#10;        try&#10;        {&#10;            await context.Database.MigrateAsync();&#10;        }&#10;        catch (Exception)&#10;        {&#10;            // Eer migration hatas varsa, veritaban zaten var demektir, devam et&#10;        }&#10;&#10;        // Rolleri olutur&#10;        await SeedRolesAsync(roleManager);&#10;&#10;        // Kullanclar olutur&#10;        var owner = await SeedUsersAsync(userManager);&#10;&#10;        // Eer owner yoksa dn&#10;        if (owner == null) return;&#10;&#10;        // Restoranlar olutur&#10;        var restaurants = await SeedRestaurantsAsync(context, owner.Id);&#10;&#10;        if (restaurants.Count == 0) return;&#10;&#10;        // Her restoran iin verileri olutur&#10;        foreach (var restaurant in restaurants)&#10;        {&#10;            await SeedMenusAsync(context, restaurant.Id);&#10;            await SeedTablesAsync(context, restaurant.Id);&#10;            await SeedOrdersAsync(context, restaurant.Id);&#10;            await SeedReservationsAsync(context, restaurant.Id);&#10;            await SeedReviewsAsync(context, restaurant.Id);&#10;            await SeedJobPostingsAsync(context, restaurant.Id);&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedRolesAsync(RoleManager&lt;IdentityRole&gt; roleManager)&#10;    {&#10;        string[] roles = { &quot;Admin&quot;, &quot;RestaurantOwner&quot;, &quot;Employee&quot;, &quot;Customer&quot;, &quot;Delivery&quot; };&#10;&#10;        foreach (var role in roles)&#10;        {&#10;            if (!await roleManager.RoleExistsAsync(role))&#10;            {&#10;                await roleManager.CreateAsync(new IdentityRole(role));&#10;            }&#10;        }&#10;    }&#10;&#10;    private static async Task&lt;AppUser?&gt; SeedUsersAsync(UserManager&lt;AppUser&gt; userManager)&#10;    {&#10;        // Admin kullanc&#10;        var admin = await userManager.FindByEmailAsync(&quot;admin@gmail.com&quot;);&#10;        if (admin == null)&#10;        {&#10;            admin = new AppUser&#10;            {&#10;                UserName = &quot;admin@gmail.com&quot;,&#10;                Email = &quot;admin@gmail.com&quot;,&#10;                EmailConfirmed = true,&#10;                FullName = &quot;Admin User&quot;,&#10;                FirstName = &quot;Admin&quot;,&#10;                LastName = &quot;User&quot;,&#10;                PhoneNumber = &quot;+905551234567&quot;&#10;            };&#10;            await userManager.CreateAsync(admin, &quot;Admin123!&quot;);&#10;            await userManager.AddToRoleAsync(admin, &quot;Admin&quot;);&#10;        }&#10;&#10;        // RestaurantOwner kullanc&#10;        var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;        if (owner == null)&#10;        {&#10;            owner = new AppUser&#10;            {&#10;                UserName = &quot;owner@gmail.com&quot;,&#10;                Email = &quot;owner@gmail.com&quot;,&#10;                EmailConfirmed = true,&#10;                FullName = &quot;Ahmet Ylmaz&quot;,&#10;                FirstName = &quot;Ahmet&quot;,&#10;                LastName = &quot;Ylmaz&quot;,&#10;                PhoneNumber = &quot;+905551234568&quot;&#10;            };&#10;            await userManager.CreateAsync(owner, &quot;Owner123!&quot;);&#10;            await userManager.AddToRoleAsync(owner, &quot;RestaurantOwner&quot;);&#10;        }&#10;&#10;        // Customer kullanclar&#10;        for (int i = 1; i &lt;= 5; i++)&#10;        {&#10;            var customerEmail = $&quot;customer{i}@gmail.com&quot;;&#10;            var customer = await userManager.FindByEmailAsync(customerEmail);&#10;            if (customer == null)&#10;            {&#10;                customer = new AppUser&#10;                {&#10;                    UserName = customerEmail,&#10;                    Email = customerEmail,&#10;                    EmailConfirmed = true,&#10;                    FullName = $&quot;Mteri {i}&quot;,&#10;                    FirstName = $&quot;Mteri&quot;,&#10;                    LastName = $&quot;{i}&quot;,&#10;                    PhoneNumber = $&quot;+90555123456{i}&quot;&#10;                };&#10;                await userManager.CreateAsync(customer, $&quot;Customer{i}23!&quot;);&#10;                await userManager.AddToRoleAsync(customer, &quot;Customer&quot;);&#10;            }&#10;        }&#10;&#10;        // Employee kullanclar&#10;        for (int i = 1; i &lt;= 3; i++)&#10;        {&#10;            var employeeEmail = $&quot;employee{i}@gmail.com&quot;;&#10;            var employee = await userManager.FindByEmailAsync(employeeEmail);&#10;            if (employee == null)&#10;            {&#10;                employee = new AppUser&#10;                {&#10;                    UserName = employeeEmail,&#10;                    Email = employeeEmail,&#10;                    EmailConfirmed = true,&#10;                    FullName = $&quot;alan {i}&quot;,&#10;                    FirstName = $&quot;alan&quot;,&#10;                    LastName = $&quot;{i}&quot;,&#10;                    PhoneNumber = $&quot;+90555234567{i}&quot;&#10;                };&#10;                await userManager.CreateAsync(employee, $&quot;Employee{i}23!&quot;);&#10;                await userManager.AddToRoleAsync(employee, &quot;Employee&quot;);&#10;            }&#10;        }&#10;&#10;        // Delivery kullanc&#10;        var delivery = await userManager.FindByEmailAsync(&quot;delivery@gmail.com&quot;);&#10;        if (delivery == null)&#10;        {&#10;            delivery = new AppUser&#10;            {&#10;                UserName = &quot;delivery@gmail.com&quot;,&#10;                Email = &quot;delivery@gmail.com&quot;,&#10;                EmailConfirmed = true,&#10;                FullName = &quot;Teslimat Grevlisi&quot;,&#10;                FirstName = &quot;Teslimat&quot;,&#10;                LastName = &quot;Grevlisi&quot;,&#10;                PhoneNumber = &quot;+905551234569&quot;&#10;            };&#10;            await userManager.CreateAsync(delivery, &quot;Delivery123!&quot;);&#10;            await userManager.AddToRoleAsync(delivery, &quot;Delivery&quot;);&#10;        }&#10;&#10;        return owner;&#10;    }&#10;&#10;    private static async Task&lt;List&lt;Restaurant&gt;&gt; SeedRestaurantsAsync(AppDbContext context, string ownerId)&#10;    {&#10;        var restaurants = new List&lt;Restaurant&gt;();&#10;&#10;        // Owner'a ait restoran var m kontrol et&#10;        var existingRestaurants = await context.Restaurants.Where(r =&gt; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted).ToListAsync();&#10;        &#10;        if (existingRestaurants.Count == 0)&#10;        {&#10;            // Owner'n restoran yoksa olutur&#10;            var restaurant1 = new Restaurant&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Lezzet Dura&quot;,&#10;                Description = &quot;Trk mutfann en lezzetli yemeklerini modern bir atmosferde sunuyoruz.&quot;,&#10;                Address = &quot;Kzlay Mahallesi, Atatrk Bulvar No: 123, ankaya/Ankara&quot;,&#10;                PhoneNumber = &quot;+903121234567&quot;,&#10;                Email = &quot;info@lezzetduragi.com&quot;,&#10;                Website = &quot;www.lezzetduragi.com&quot;,&#10;                OwnerId = ownerId,&#10;                Rate = 4.5m&#10;            };&#10;&#10;            var restaurant2 = new Restaurant&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Pizza Palace&quot;,&#10;                Description = &quot;talyan pizza ve pasta eitleriyle hizmetinizdeyiz.&quot;,&#10;                Address = &quot;Bahelievler Mahallesi, stiklal Caddesi No: 45, ankaya/Ankara&quot;,&#10;                PhoneNumber = &quot;+903129876543&quot;,&#10;                Email = &quot;info@pizzapalace.com&quot;,&#10;                Website = &quot;www.pizzapalace.com&quot;,&#10;                OwnerId = ownerId,&#10;                Rate = 4.3m&#10;            };&#10;&#10;            var restaurant3 = new Restaurant&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Sushi Tokyo&quot;,&#10;                Description = &quot;Otantik Japon mutfa, taze ve kaliteli sui eitleri.&quot;,&#10;                Address = &quot;Kavaklidere, Tunal Hilmi Caddesi No: 78, ankaya/Ankara&quot;,&#10;                PhoneNumber = &quot;+903125554433&quot;,&#10;                Email = &quot;info@sushitokyo.com&quot;,&#10;                Website = &quot;www.sushitokyo.com&quot;,&#10;                OwnerId = ownerId,&#10;                Rate = 4.7m&#10;            };&#10;&#10;            var restaurant4 = new Restaurant&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Burger House&quot;,&#10;                Description = &quot;Lezzetli burgerler ve patates kzartmalar ile fast food deneyimi.&quot;,&#10;                Address = &quot;mitky, ayyolu Caddesi No: 156, Yenimahalle/Ankara&quot;,&#10;                PhoneNumber = &quot;+903123336677&quot;,&#10;                Email = &quot;info@burgerhouse.com&quot;,&#10;                Website = &quot;www.burgerhouse.com&quot;,&#10;                OwnerId = ownerId,&#10;                Rate = 4.2m&#10;            };&#10;&#10;            var restaurant5 = new Restaurant&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Vejetaryen Ke&quot;,&#10;                Description = &quot;Salkl ve lezzetli vejetaryen ve vegan yemek seenekleri.&quot;,&#10;                Address = &quot;Beevler, 6. Cadde No: 34, Yenimahalle/Ankara&quot;,&#10;                PhoneNumber = &quot;+903127778899&quot;,&#10;                Email = &quot;info@vejetaryenkose.com&quot;,&#10;                Website = &quot;www.vejetaryenkose.com&quot;,&#10;                OwnerId = ownerId,&#10;                Rate = 4.6m&#10;            };&#10;&#10;            restaurants.Add(restaurant1);&#10;            restaurants.Add(restaurant2);&#10;            restaurants.Add(restaurant3);&#10;            restaurants.Add(restaurant4);&#10;            restaurants.Add(restaurant5);&#10;&#10;            context.Restaurants.AddRange(restaurants);&#10;            await context.SaveChangesAsync();&#10;        }&#10;        else&#10;        {&#10;            restaurants = existingRestaurants;&#10;        }&#10;&#10;        return restaurants;&#10;    }&#10;&#10;    private static async Task SeedMenusAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.Menus.AnyAsync(m =&gt; m.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var restaurant = await context.Restaurants.FindAsync(restaurantId);&#10;        if (restaurant == null) return;&#10;&#10;        if (restaurant.Name == &quot;Lezzet Dura&quot;)&#10;        {&#10;            var mainMenu = new Menu&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Ana Men&quot;,&#10;                Description = &quot;Geleneksel Trk yemekleri&quot;,&#10;                RestaurantId = restaurantId&#10;            };&#10;            context.Menus.Add(mainMenu);&#10;            await context.SaveChangesAsync();&#10;&#10;            var menuItems = new List&lt;MenuItem&gt;&#10;            {&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Adana Kebap&quot;,&#10;                    Description = &quot;Acl kyma kebap, pilav ve salata ile&quot;,&#10;                    Price = 185.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;Ana Yemek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;skender Kebap&quot;,&#10;                    Description = &quot;Dner, yourt ve tereya ile&quot;,&#10;                    Price = 220.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;Ana Yemek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Kuzu Tandr&quot;,&#10;                    Description = &quot;Frnda pimi yumuack kuzu eti&quot;,&#10;                    Price = 280.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;Ana Yemek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Mercimek orbas&quot;,&#10;                    Description = &quot;Geleneksel krmz mercimek orbas&quot;,&#10;                    Price = 45.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;orba&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Trk Kahvesi&quot;,&#10;                    Description = &quot;Geleneksel Trk kahvesi&quot;,&#10;                    Price = 35.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;ecek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Ayran&quot;,&#10;                    Description = &quot;Ev yapm yourt ayran&quot;,&#10;                    Price = 25.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;ecek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Meze Taba&quot;,&#10;                    Description = &quot;Kark Trk mezeleri&quot;,&#10;                    Price = 120.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;Meze&quot;,&#10;                    IsAvailable = true&#10;                }&#10;            };&#10;&#10;            context.MenuItems.AddRange(menuItems);&#10;        }&#10;        else if (restaurant.Name == &quot;Pizza Palace&quot;)&#10;        {&#10;            var pizzaMenu = new Menu&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Pizza Mens&quot;,&#10;                Description = &quot;talyan usul pizzalar&quot;,&#10;                RestaurantId = restaurantId&#10;            };&#10;            context.Menus.Add(pizzaMenu);&#10;            await context.SaveChangesAsync();&#10;&#10;            var menuItems = new List&lt;MenuItem&gt;&#10;            {&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Margherita Pizza&quot;,&#10;                    Description = &quot;Domates, mozzarella ve fesleen&quot;,&#10;                    Price = 150.00m,&#10;                    MenuId = pizzaMenu.Id,&#10;                    Category = &quot;Pizza&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Pepperoni Pizza&quot;,&#10;                    Description = &quot;Domates, mozzarella ve pepperoni&quot;,&#10;                    Price = 175.00m,&#10;                    MenuId = pizzaMenu.Id,&#10;                    Category = &quot;Pizza&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Kark Pizza&quot;,&#10;                    Description = &quot;Sucuk, salam, mantar, biber, zeytin&quot;,&#10;                    Price = 185.00m,&#10;                    MenuId = pizzaMenu.Id,&#10;                    Category = &quot;Pizza&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Fettuccine Alfredo&quot;,&#10;                    Description = &quot;Krema soslu makarna&quot;,&#10;                    Price = 140.00m,&#10;                    MenuId = pizzaMenu.Id,&#10;                    Category = &quot;Pasta&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Limonata&quot;,&#10;                    Description = &quot;Taze sklm limonata&quot;,&#10;                    Price = 40.00m,&#10;                    MenuId = pizzaMenu.Id,&#10;                    Category = &quot;ecek&quot;,&#10;                    IsAvailable = true&#10;                }&#10;            };&#10;&#10;            context.MenuItems.AddRange(menuItems);&#10;        }&#10;        else if (restaurant.Name == &quot;Sushi Tokyo&quot;)&#10;        {&#10;            var sushiMenu = new Menu&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Sushi Mens&quot;,&#10;                Description = &quot;Japon usul sui ve sashimi&quot;,&#10;                RestaurantId = restaurantId&#10;            };&#10;            context.Menus.Add(sushiMenu);&#10;            await context.SaveChangesAsync();&#10;&#10;            var menuItems = new List&lt;MenuItem&gt;&#10;            {&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Salmon Sashimi&quot;,&#10;                    Description = &quot;Taze somon bal dilimleri&quot;,&#10;                    Price = 300.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;Sashimi&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Tuna Sashimi&quot;,&#10;                    Description = &quot;Taze ton bal dilimleri&quot;,&#10;                    Price = 350.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;Sashimi&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;California Roll&quot;,&#10;                    Description = &quot;Avokado, salatalk ve yenge eti ile&quot;,&#10;                    Price = 180.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;Maki&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Spicy Tuna Roll&quot;,&#10;                    Description = &quot;Acl ton bal, avokado ve salatalk ile&quot;,&#10;                    Price = 200.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;Maki&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Tempura&quot;,&#10;                    Description = &quot;Kzartlm sebze ve deniz rnleri&quot;,&#10;                    Price = 220.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;Attrmalk&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Miso orbas&quot;,&#10;                    Description = &quot;Japon usul miso orbas&quot;,&#10;                    Price = 50.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;orba&quot;,&#10;                    IsAvailable = true&#10;                }&#10;            };&#10;&#10;            context.MenuItems.AddRange(menuItems);&#10;        }&#10;        else if (restaurant.Name == &quot;Burger House&quot;)&#10;        {&#10;            var burgerMenu = new Menu&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Burger Mens&quot;,&#10;                Description = &quot;Lezzetli burgerler ve attrmalklar&quot;,&#10;                RestaurantId = restaurantId&#10;            };&#10;            context.Menus.Add(burgerMenu);&#10;            await context.SaveChangesAsync();&#10;&#10;            var menuItems = new List&lt;MenuItem&gt;&#10;            {&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Cheeseburger&quot;,&#10;                    Description = &quot;Kfte, peynir, marul, domates ve zel sos ile&quot;,&#10;                    Price = 200.00m,&#10;                    MenuId = burgerMenu.Id,&#10;                    Category = &quot;Burger&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Double Cheeseburger&quot;,&#10;                    Description = &quot;ki kat kfte, iki kat peynir ile&quot;,&#10;                    Price = 250.00m,&#10;                    MenuId = burgerMenu.Id,&#10;                    Category = &quot;Burger&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Veggie Burger&quot;,&#10;                    Description = &quot;Vejetaryen burger, sebzeler ve zel sos ile&quot;,&#10;                    Price = 180.00m,&#10;                    MenuId = burgerMenu.Id,&#10;                    Category = &quot;Burger&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Patates Kzartmas&quot;,&#10;                    Description = &quot;Kzartlm taze patates&quot;,&#10;                    Price = 50.00m,&#10;                    MenuId = burgerMenu.Id,&#10;                    Category = &quot;Attrmalk&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Soan Halkas&quot;,&#10;                    Description = &quot;Kzartlm soan halkalar&quot;,&#10;                    Price = 40.00m,&#10;                    MenuId = burgerMenu.Id,&#10;                    Category = &quot;Attrmalk&quot;,&#10;                    IsAvailable = true&#10;                }&#10;            };&#10;&#10;            context.MenuItems.AddRange(menuItems);&#10;        }&#10;        else if (restaurant.Name == &quot;Vejetaryen Ke&quot;)&#10;        {&#10;            var vegeMenu = new Menu&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Vejetaryen Men&quot;,&#10;                Description = &quot;Vejetaryen ve vegan yemekler&quot;,&#10;                RestaurantId = restaurantId&#10;            };&#10;            context.Menus.Add(vegeMenu);&#10;            await context.SaveChangesAsync();&#10;&#10;            var menuItems = new List&lt;MenuItem&gt;&#10;            {&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Sebze Taba&quot;,&#10;                    Description = &quot;Mevsim sebzeleri ile hazrlanm tabak&quot;,&#10;                    Price = 100.00m,&#10;                    MenuId = vegeMenu.Id,&#10;                    Category = &quot;Salata&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Nohutlu Pilav&quot;,&#10;                    Description = &quot;Baharatl nohut ve pirin pilav&quot;,&#10;                    Price = 120.00m,&#10;                    MenuId = vegeMenu.Id,&#10;                    Category = &quot;Ana Yemek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Zeytinyal Enginar&quot;,&#10;                    Description = &quot;Zeytinyal ve limonlu enginar kalbi&quot;,&#10;                    Price = 80.00m,&#10;                    MenuId = vegeMenu.Id,&#10;                    Category = &quot;Meze&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Vegan Burger&quot;,&#10;                    Description = &quot;Kinoal ve sebzeli vegan burger&quot;,&#10;                    Price = 200.00m,&#10;                    MenuId = vegeMenu.Id,&#10;                    Category = &quot;Burger&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Chia Puding&quot;,&#10;                    Description = &quot;Chia tohumu, badem st ve meyvelerle&quot;,&#10;                    Price = 70.00m,&#10;                    MenuId = vegeMenu.Id,&#10;                    Category = &quot;Tatl&quot;,&#10;                    IsAvailable = true&#10;                }&#10;            };&#10;&#10;            context.MenuItems.AddRange(menuItems);&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedTablesAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.Tables.AnyAsync(t =&gt; t.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var tables = new List&lt;Table&gt;();&#10;        for (int i = 1; i &lt;= 10; i++)&#10;        {&#10;            tables.Add(new Table&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                TableNumber = i,&#10;                Capacity = i % 3 == 0 ? 6 : (i % 2 == 0 ? 4 : 2),&#10;                Status = TableStatus.Available,&#10;                RestaurantId = restaurantId,&#10;                Location = i &lt;= 5 ? &quot; Mekan&quot; : &quot;D Mekan&quot;&#10;            });&#10;        }&#10;&#10;        context.Tables.AddRange(tables);&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedOrdersAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.Orders.AnyAsync(o =&gt; o.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var menuItems = await context.MenuItems&#10;            .Where(mi =&gt; mi.Menu.RestaurantId == restaurantId)&#10;            .ToListAsync();&#10;&#10;        if (menuItems.Count == 0) return;&#10;&#10;        var customers = await context.Users&#10;            .Where(u =&gt; u.Email != null &amp;&amp; u.Email.StartsWith(&quot;customer&quot;))&#10;            .ToListAsync();&#10;&#10;        var random = new Random();&#10;        var statuses = new[] { OrderStatus.Completed, OrderStatus.Completed, OrderStatus.Completed, OrderStatus.Preparing, OrderStatus.Ready, OrderStatus.Served };&#10;&#10;        for (int i = 0; i &lt; 30; i++)&#10;        {&#10;            var orderDate = DateTime.UtcNow.AddDays(-random.Next(0, 30));&#10;            var customer = customers[random.Next(customers.Count)];&#10;            var status = statuses[random.Next(statuses.Length)];&#10;&#10;            var order = new Order&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                OrderDate = orderDate,&#10;                CustomerId = customer.Id,&#10;                RestaurantId = restaurantId,&#10;                Status = status,&#10;                Type = random.Next(3) == 0 ? OrderType.Delivery : OrderType.DineIn,&#10;                TotalAmount = 0,&#10;                SpecialRequests = status == OrderStatus.Completed ? &quot;Sipari tamamland&quot; : null&#10;            };&#10;&#10;            // 2-5 aras rn ekle&#10;            var itemCount = random.Next(2, 6);&#10;            decimal totalAmount = 0;&#10;&#10;            for (int j = 0; j &lt; itemCount; j++)&#10;            {&#10;                var menuItem = menuItems[random.Next(menuItems.Count)];&#10;                var quantity = random.Next(1, 4);&#10;                var price = menuItem.Price;&#10;&#10;                totalAmount += price * quantity;&#10;&#10;                var orderItem = new OrderItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    OrderId = order.Id,&#10;                    MenuItemId = menuItem.Id,&#10;                    Quantity = quantity,&#10;                    UnitPrice = price&#10;                };&#10;&#10;                order.OrderItems.Add(orderItem);&#10;            }&#10;&#10;            order.TotalAmount = totalAmount;&#10;            context.Orders.Add(order);&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedReservationsAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.Reservations.AnyAsync(r =&gt; r.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var tables = await context.Tables&#10;            .Where(t =&gt; t.RestaurantId == restaurantId)&#10;            .ToListAsync();&#10;&#10;        var customers = await context.Users&#10;            .Where(u =&gt; u.Email != null &amp;&amp; u.Email.StartsWith(&quot;customer&quot;))&#10;            .ToListAsync();&#10;&#10;        var random = new Random();&#10;        var statuses = new[] { ReservationStatus.Confirmed, ReservationStatus.Confirmed, ReservationStatus.Pending, ReservationStatus.Completed };&#10;&#10;        for (int i = 0; i &lt; 15; i++)&#10;        {&#10;            var reservationDate = DateTime.UtcNow.AddDays(random.Next(-7, 14));&#10;            var customer = customers[random.Next(customers.Count)];&#10;            var table = tables[random.Next(tables.Count)];&#10;            var status = statuses[random.Next(statuses.Length)];&#10;&#10;            var reservation = new Reservation&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                ReservationDate = reservationDate,&#10;                NumberOfGuests = random.Next(2, table.Capacity + 1),&#10;                CustomerId = customer.Id,&#10;                CustomerName = customer.FullName,&#10;                CustomerPhone = customer.PhoneNumber ?? &quot;+905551234567&quot;,&#10;                CustomerEmail = customer.Email,&#10;                RestaurantId = restaurantId,&#10;                TableId = table.Id,&#10;                Status = status,&#10;                SpecialRequests = i % 3 == 0 ? &quot;Pencere kenar masa ltfen&quot; : null&#10;            };&#10;&#10;            context.Reservations.Add(reservation);&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedReviewsAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.Reviews.AnyAsync(r =&gt; r.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var customers = await context.Users&#10;            .Where(u =&gt; u.Email != null &amp;&amp; u.Email.StartsWith(&quot;customer&quot;))&#10;            .ToListAsync();&#10;&#10;        var random = new Random();&#10;        var comments = new[]&#10;        {&#10;            &quot;Harika bir deneyimdi, kesinlikle tekrar geleceim!&quot;,&#10;            &quot;Yemekler ok lezzetliydi, personel ok ilgili.&quot;,&#10;            &quot;Fiyatlar biraz yksek ama kaliteli.&quot;,&#10;            &quot;Ortam ok gzel, aile ile gelmek iin ideal.&quot;,&#10;            &quot;Servis biraz yavat ama yemekler harikayd.&quot;,&#10;            &quot;Tavsiye ederim, ok memnun kaldk.&quot;,&#10;            &quot;Men eitlilii gzel, her damak zevkine uygun.&quot;,&#10;            &quot;Temizlik ve hijyen konusunda ok zenli.&quot;&#10;        };&#10;&#10;        var statuses = new[] { &quot;Approved&quot;, &quot;Approved&quot;, &quot;Approved&quot;, &quot;Pending&quot; };&#10;&#10;        for (int i = 0; i &lt; 20; i++)&#10;        {&#10;            var customer = customers[random.Next(customers.Count)];&#10;            var rating = random.Next(3, 6);&#10;            var status = statuses[random.Next(statuses.Length)];&#10;&#10;            var review = new Review&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Rating = rating,&#10;                Comment = comments[random.Next(comments.Length)],&#10;                CustomerId = customer.Id,&#10;                RestaurantId = restaurantId,&#10;                Status = status,&#10;                OwnerResponse = status == &quot;Approved&quot; &amp;&amp; i % 3 == 0 &#10;                    ? &quot;Teekkr ederiz, tekrar bekleriz!&quot; &#10;                    : null&#10;            };&#10;&#10;            context.Reviews.Add(review);&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedJobPostingsAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.JobPostings.AnyAsync(j =&gt; j.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var jobPostings = new List&lt;JobPosting&gt;&#10;        {&#10;            new JobPosting&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Title = &quot;A&quot;,&#10;                Description = &quot;Deneyimli a aranyor. Trk mutfa bilgisi art.&quot;,&#10;                Requirements = &quot;En az 3 yl deneyim, hijyen eitimi&quot;,&#10;                Salary = 25000m,&#10;                RestaurantId = restaurantId,&#10;                PostedDate = DateTime.UtcNow.AddDays(-10)&#10;            },&#10;            new JobPosting&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Title = &quot;Garson&quot;,&#10;                Description = &quot;Part-time garson aranyor.&quot;,&#10;                Requirements = &quot;Mteri ilikileri konusunda yetenekli&quot;,&#10;                Salary = 18000m,&#10;                RestaurantId = restaurantId,&#10;                PostedDate = DateTime.UtcNow.AddDays(-5)&#10;            }&#10;        };&#10;&#10;        context.JobPostings.AddRange(jobPostings);&#10;        await context.SaveChangesAsync();&#10;&#10;        // Baz bavurular ekle&#10;        var customers = await context.Users&#10;            .Where(u =&gt; u.Email != null &amp;&amp; u.Email.StartsWith(&quot;customer&quot;))&#10;            .Take(3)&#10;            .ToListAsync();&#10;&#10;        var random = new Random();&#10;        foreach (var jobPosting in jobPostings.Take(1))&#10;        {&#10;            foreach (var customer in customers)&#10;            {&#10;                var application = new JobApplication&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    JobPostingId = jobPosting.Id,&#10;                    ApplicantId = customer.Id,&#10;                    CoverLetter = &quot;lgili pozisyon iin bavurmak istiyorum. Deneyimli ve alkanm.&quot;,&#10;                    Status = &quot;Pending&quot;,&#10;                    ApplicationDate = DateTime.UtcNow.AddDays(-random.Next(1, 5))&#10;                };&#10;&#10;                context.JobApplications.Add(application);&#10;            }&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Identity;&#10;using Microsoft.EntityFrameworkCore;&#10;using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.Persistance.Seeders;&#10;&#10;public static class DbSeeder&#10;{&#10;    public static async Task SeedDataAsync(IServiceProvider serviceProvider)&#10;    {&#10;        var scope = serviceProvider.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var roleManager = scope.ServiceProvider.GetRequiredService&lt;RoleManager&lt;IdentityRole&gt;&gt;();&#10;&#10;        // Database'i olutur - migration yerine mevcut durumu kontrol et&#10;        try&#10;        {&#10;            await context.Database.MigrateAsync();&#10;        }&#10;        catch (Exception)&#10;        {&#10;            // Eer migration hatas varsa, veritaban zaten var demektir, devam et&#10;        }&#10;&#10;        // Rolleri olutur&#10;        await SeedRolesAsync(roleManager);&#10;&#10;        // Kullanclar olutur&#10;        var owner = await SeedUsersAsync(userManager);&#10;&#10;        // Eer owner yoksa dn&#10;        if (owner == null) return;&#10;&#10;        // Restoranlar olutur&#10;        var restaurants = await SeedRestaurantsAsync(context, owner.Id);&#10;&#10;        if (restaurants.Count == 0) return;&#10;&#10;        // Her restoran iin verileri olutur&#10;        foreach (var restaurant in restaurants)&#10;        {&#10;            await SeedEmployeesAsync(context, userManager, restaurant.Id);&#10;            await SeedMenusAsync(context, restaurant.Id);&#10;            await SeedTablesAsync(context, restaurant.Id);&#10;            await SeedOrdersAsync(context, restaurant.Id);&#10;            await SeedReservationsAsync(context, restaurant.Id);&#10;            await SeedReviewsAsync(context, restaurant.Id);&#10;            await SeedJobPostingsAsync(context, restaurant.Id);&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedRolesAsync(RoleManager&lt;IdentityRole&gt; roleManager)&#10;    {&#10;        string[] roles = { &quot;Admin&quot;, &quot;RestaurantOwner&quot;, &quot;Employee&quot;, &quot;Customer&quot;, &quot;Delivery&quot; };&#10;&#10;        foreach (var role in roles)&#10;        {&#10;            if (!await roleManager.RoleExistsAsync(role))&#10;            {&#10;                await roleManager.CreateAsync(new IdentityRole(role));&#10;            }&#10;        }&#10;    }&#10;&#10;    private static async Task&lt;AppUser?&gt; SeedUsersAsync(UserManager&lt;AppUser&gt; userManager)&#10;    {&#10;        // Admin kullanc&#10;        var admin = await userManager.FindByEmailAsync(&quot;admin@gmail.com&quot;);&#10;        if (admin == null)&#10;        {&#10;            admin = new AppUser&#10;            {&#10;                UserName = &quot;admin@gmail.com&quot;,&#10;                Email = &quot;admin@gmail.com&quot;,&#10;                EmailConfirmed = true,&#10;                FullName = &quot;Admin User&quot;,&#10;                FirstName = &quot;Admin&quot;,&#10;                LastName = &quot;User&quot;,&#10;                PhoneNumber = &quot;+905551234567&quot;&#10;            };&#10;            await userManager.CreateAsync(admin, &quot;Admin123!&quot;);&#10;            await userManager.AddToRoleAsync(admin, &quot;Admin&quot;);&#10;        }&#10;&#10;        // RestaurantOwner kullanc&#10;        var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;        if (owner == null)&#10;        {&#10;            owner = new AppUser&#10;            {&#10;                UserName = &quot;owner@gmail.com&quot;,&#10;                Email = &quot;owner@gmail.com&quot;,&#10;                EmailConfirmed = true,&#10;                FullName = &quot;Ahmet Ylmaz&quot;,&#10;                FirstName = &quot;Ahmet&quot;,&#10;                LastName = &quot;Ylmaz&quot;,&#10;                PhoneNumber = &quot;+905551234568&quot;&#10;            };&#10;            await userManager.CreateAsync(owner, &quot;Owner123!&quot;);&#10;            await userManager.AddToRoleAsync(owner, &quot;RestaurantOwner&quot;);&#10;        }&#10;&#10;        // Customer kullanclar&#10;        for (int i = 1; i &lt;= 5; i++)&#10;        {&#10;            var customerEmail = $&quot;customer{i}@gmail.com&quot;;&#10;            var customer = await userManager.FindByEmailAsync(customerEmail);&#10;            if (customer == null)&#10;            {&#10;                customer = new AppUser&#10;                {&#10;                    UserName = customerEmail,&#10;                    Email = customerEmail,&#10;                    EmailConfirmed = true,&#10;                    FullName = $&quot;Mteri {i}&quot;,&#10;                    FirstName = $&quot;Mteri&quot;,&#10;                    LastName = $&quot;{i}&quot;,&#10;                    PhoneNumber = $&quot;+90555123456{i}&quot;&#10;                };&#10;                await userManager.CreateAsync(customer, $&quot;Customer{i}23!&quot;);&#10;                await userManager.AddToRoleAsync(customer, &quot;Customer&quot;);&#10;            }&#10;        }&#10;&#10;        // Employee kullanclar&#10;        for (int i = 1; i &lt;= 3; i++)&#10;        {&#10;            var employeeEmail = $&quot;employee{i}@gmail.com&quot;;&#10;            var employee = await userManager.FindByEmailAsync(employeeEmail);&#10;            if (employee == null)&#10;            {&#10;                employee = new AppUser&#10;                {&#10;                    UserName = employeeEmail,&#10;                    Email = employeeEmail,&#10;                    EmailConfirmed = true,&#10;                    FullName = $&quot;alan {i}&quot;,&#10;                    FirstName = $&quot;alan&quot;,&#10;                    LastName = $&quot;{i}&quot;,&#10;                    PhoneNumber = $&quot;+90555234567{i}&quot;&#10;                };&#10;                await userManager.CreateAsync(employee, $&quot;Employee{i}23!&quot;);&#10;                await userManager.AddToRoleAsync(employee, &quot;Employee&quot;);&#10;            }&#10;        }&#10;&#10;        // Delivery kullanc&#10;        var delivery = await userManager.FindByEmailAsync(&quot;delivery@gmail.com&quot;);&#10;        if (delivery == null)&#10;        {&#10;            delivery = new AppUser&#10;            {&#10;                UserName = &quot;delivery@gmail.com&quot;,&#10;                Email = &quot;delivery@gmail.com&quot;,&#10;                EmailConfirmed = true,&#10;                FullName = &quot;Teslimat Grevlisi&quot;,&#10;                FirstName = &quot;Teslimat&quot;,&#10;                LastName = &quot;Grevlisi&quot;,&#10;                PhoneNumber = &quot;+905551234569&quot;&#10;            };&#10;            await userManager.CreateAsync(delivery, &quot;Delivery123!&quot;);&#10;            await userManager.AddToRoleAsync(delivery, &quot;Delivery&quot;);&#10;        }&#10;&#10;        return owner;&#10;    }&#10;&#10;    private static async Task&lt;List&lt;Restaurant&gt;&gt; SeedRestaurantsAsync(AppDbContext context, string ownerId)&#10;    {&#10;        var restaurants = new List&lt;Restaurant&gt;();&#10;&#10;        // Owner'a ait restoran var m kontrol et&#10;        var existingRestaurants = await context.Restaurants.Where(r =&gt; r.OwnerId == ownerId &amp;&amp; !r.IsDeleted).ToListAsync();&#10;        &#10;        if (existingRestaurants.Count == 0)&#10;        {&#10;            // Owner'n restoran yoksa olutur&#10;            var restaurant1 = new Restaurant&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Lezzet Dura&quot;,&#10;                Description = &quot;Trk mutfann en lezzetli yemeklerini modern bir atmosferde sunuyoruz.&quot;,&#10;                Address = &quot;Kzlay Mahallesi, Atatrk Bulvar No: 123, ankaya/Ankara&quot;,&#10;                PhoneNumber = &quot;+903121234567&quot;,&#10;                Email = &quot;info@lezzetduragi.com&quot;,&#10;                Website = &quot;www.lezzetduragi.com&quot;,&#10;                OwnerId = ownerId,&#10;                Rate = 4.5m&#10;            };&#10;&#10;            var restaurant2 = new Restaurant&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Pizza Palace&quot;,&#10;                Description = &quot;talyan pizza ve pasta eitleriyle hizmetinizdeyiz.&quot;,&#10;                Address = &quot;Bahelievler Mahallesi, stiklal Caddesi No: 45, ankaya/Ankara&quot;,&#10;                PhoneNumber = &quot;+903129876543&quot;,&#10;                Email = &quot;info@pizzapalace.com&quot;,&#10;                Website = &quot;www.pizzapalace.com&quot;,&#10;                OwnerId = ownerId,&#10;                Rate = 4.3m&#10;            };&#10;&#10;            var restaurant3 = new Restaurant&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Sushi Tokyo&quot;,&#10;                Description = &quot;Otantik Japon mutfa, taze ve kaliteli sui eitleri.&quot;,&#10;                Address = &quot;Kavaklidere, Tunal Hilmi Caddesi No: 78, ankaya/Ankara&quot;,&#10;                PhoneNumber = &quot;+903125554433&quot;,&#10;                Email = &quot;info@sushitokyo.com&quot;,&#10;                Website = &quot;www.sushitokyo.com&quot;,&#10;                OwnerId = ownerId,&#10;                Rate = 4.7m&#10;            };&#10;&#10;            var restaurant4 = new Restaurant&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Burger House&quot;,&#10;                Description = &quot;Lezzetli burgerler ve patates kzartmalar ile fast food deneyimi.&quot;,&#10;                Address = &quot;mitky, ayyolu Caddesi No: 156, Yenimahalle/Ankara&quot;,&#10;                PhoneNumber = &quot;+903123336677&quot;,&#10;                Email = &quot;info@burgerhouse.com&quot;,&#10;                Website = &quot;www.burgerhouse.com&quot;,&#10;                OwnerId = ownerId,&#10;                Rate = 4.2m&#10;            };&#10;&#10;            var restaurant5 = new Restaurant&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Vejetaryen Ke&quot;,&#10;                Description = &quot;Salkl ve lezzetli vejetaryen ve vegan yemek seenekleri.&quot;,&#10;                Address = &quot;Beevler, 6. Cadde No: 34, Yenimahalle/Ankara&quot;,&#10;                PhoneNumber = &quot;+903127778899&quot;,&#10;                Email = &quot;info@vejetaryenkose.com&quot;,&#10;                Website = &quot;www.vejetaryenkose.com&quot;,&#10;                OwnerId = ownerId,&#10;                Rate = 4.6m&#10;            };&#10;&#10;            restaurants.Add(restaurant1);&#10;            restaurants.Add(restaurant2);&#10;            restaurants.Add(restaurant3);&#10;            restaurants.Add(restaurant4);&#10;            restaurants.Add(restaurant5);&#10;&#10;            context.Restaurants.AddRange(restaurants);&#10;            await context.SaveChangesAsync();&#10;        }&#10;        else&#10;        {&#10;            restaurants = existingRestaurants;&#10;        }&#10;&#10;        return restaurants;&#10;    }&#10;&#10;    private static async Task SeedMenusAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.Menus.AnyAsync(m =&gt; m.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var restaurant = await context.Restaurants.FindAsync(restaurantId);&#10;        if (restaurant == null) return;&#10;&#10;        if (restaurant.Name == &quot;Lezzet Dura&quot;)&#10;        {&#10;            var mainMenu = new Menu&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Ana Men&quot;,&#10;                Description = &quot;Geleneksel Trk yemekleri&quot;,&#10;                RestaurantId = restaurantId&#10;            };&#10;            context.Menus.Add(mainMenu);&#10;            await context.SaveChangesAsync();&#10;&#10;            var menuItems = new List&lt;MenuItem&gt;&#10;            {&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Adana Kebap&quot;,&#10;                    Description = &quot;Acl kyma kebap, pilav ve salata ile&quot;,&#10;                    Price = 185.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;Ana Yemek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;skender Kebap&quot;,&#10;                    Description = &quot;Dner, yourt ve tereya ile&quot;,&#10;                    Price = 220.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;Ana Yemek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Kuzu Tandr&quot;,&#10;                    Description = &quot;Frnda pimi yumuack kuzu eti&quot;,&#10;                    Price = 280.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;Ana Yemek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Mercimek orbas&quot;,&#10;                    Description = &quot;Geleneksel krmz mercimek orbas&quot;,&#10;                    Price = 45.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;orba&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Trk Kahvesi&quot;,&#10;                    Description = &quot;Geleneksel Trk kahvesi&quot;,&#10;                    Price = 35.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;ecek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Ayran&quot;,&#10;                    Description = &quot;Ev yapm yourt ayran&quot;,&#10;                    Price = 25.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;ecek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Meze Taba&quot;,&#10;                    Description = &quot;Kark Trk mezeleri&quot;,&#10;                    Price = 120.00m,&#10;                    MenuId = mainMenu.Id,&#10;                    Category = &quot;Meze&quot;,&#10;                    IsAvailable = true&#10;                }&#10;            };&#10;&#10;            context.MenuItems.AddRange(menuItems);&#10;        }&#10;        else if (restaurant.Name == &quot;Pizza Palace&quot;)&#10;        {&#10;            var pizzaMenu = new Menu&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Pizza Mens&quot;,&#10;                Description = &quot;talyan usul pizzalar&quot;,&#10;                RestaurantId = restaurantId&#10;            };&#10;            context.Menus.Add(pizzaMenu);&#10;            await context.SaveChangesAsync();&#10;&#10;            var menuItems = new List&lt;MenuItem&gt;&#10;            {&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Margherita Pizza&quot;,&#10;                    Description = &quot;Domates, mozzarella ve fesleen&quot;,&#10;                    Price = 150.00m,&#10;                    MenuId = pizzaMenu.Id,&#10;                    Category = &quot;Pizza&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Pepperoni Pizza&quot;,&#10;                    Description = &quot;Domates, mozzarella ve pepperoni&quot;,&#10;                    Price = 175.00m,&#10;                    MenuId = pizzaMenu.Id,&#10;                    Category = &quot;Pizza&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Kark Pizza&quot;,&#10;                    Description = &quot;Sucuk, salam, mantar, biber, zeytin&quot;,&#10;                    Price = 185.00m,&#10;                    MenuId = pizzaMenu.Id,&#10;                    Category = &quot;Pizza&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Fettuccine Alfredo&quot;,&#10;                    Description = &quot;Krema soslu makarna&quot;,&#10;                    Price = 140.00m,&#10;                    MenuId = pizzaMenu.Id,&#10;                    Category = &quot;Pasta&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Limonata&quot;,&#10;                    Description = &quot;Taze sklm limonata&quot;,&#10;                    Price = 40.00m,&#10;                    MenuId = pizzaMenu.Id,&#10;                    Category = &quot;ecek&quot;,&#10;                    IsAvailable = true&#10;                }&#10;            };&#10;&#10;            context.MenuItems.AddRange(menuItems);&#10;        }&#10;        else if (restaurant.Name == &quot;Sushi Tokyo&quot;)&#10;        {&#10;            var sushiMenu = new Menu&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Sushi Mens&quot;,&#10;                Description = &quot;Japon usul sui ve sashimi&quot;,&#10;                RestaurantId = restaurantId&#10;            };&#10;            context.Menus.Add(sushiMenu);&#10;            await context.SaveChangesAsync();&#10;&#10;            var menuItems = new List&lt;MenuItem&gt;&#10;            {&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Salmon Sashimi&quot;,&#10;                    Description = &quot;Taze somon bal dilimleri&quot;,&#10;                    Price = 300.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;Sashimi&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Tuna Sashimi&quot;,&#10;                    Description = &quot;Taze ton bal dilimleri&quot;,&#10;                    Price = 350.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;Sashimi&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;California Roll&quot;,&#10;                    Description = &quot;Avokado, salatalk ve yenge eti ile&quot;,&#10;                    Price = 180.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;Maki&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Spicy Tuna Roll&quot;,&#10;                    Description = &quot;Acl ton bal, avokado ve salatalk ile&quot;,&#10;                    Price = 200.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;Maki&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Tempura&quot;,&#10;                    Description = &quot;Kzartlm sebze ve deniz rnleri&quot;,&#10;                    Price = 220.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;Attrmalk&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Miso orbas&quot;,&#10;                    Description = &quot;Japon usul miso orbas&quot;,&#10;                    Price = 50.00m,&#10;                    MenuId = sushiMenu.Id,&#10;                    Category = &quot;orba&quot;,&#10;                    IsAvailable = true&#10;                }&#10;            };&#10;&#10;            context.MenuItems.AddRange(menuItems);&#10;        }&#10;        else if (restaurant.Name == &quot;Burger House&quot;)&#10;        {&#10;            var burgerMenu = new Menu&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Burger Mens&quot;,&#10;                Description = &quot;Lezzetli burgerler ve attrmalklar&quot;,&#10;                RestaurantId = restaurantId&#10;            };&#10;            context.Menus.Add(burgerMenu);&#10;            await context.SaveChangesAsync();&#10;&#10;            var menuItems = new List&lt;MenuItem&gt;&#10;            {&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Cheeseburger&quot;,&#10;                    Description = &quot;Kfte, peynir, marul, domates ve zel sos ile&quot;,&#10;                    Price = 200.00m,&#10;                    MenuId = burgerMenu.Id,&#10;                    Category = &quot;Burger&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Double Cheeseburger&quot;,&#10;                    Description = &quot;ki kat kfte, iki kat peynir ile&quot;,&#10;                    Price = 250.00m,&#10;                    MenuId = burgerMenu.Id,&#10;                    Category = &quot;Burger&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Veggie Burger&quot;,&#10;                    Description = &quot;Vejetaryen burger, sebzeler ve zel sos ile&quot;,&#10;                    Price = 180.00m,&#10;                    MenuId = burgerMenu.Id,&#10;                    Category = &quot;Burger&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Patates Kzartmas&quot;,&#10;                    Description = &quot;Kzartlm taze patates&quot;,&#10;                    Price = 50.00m,&#10;                    MenuId = burgerMenu.Id,&#10;                    Category = &quot;Attrmalk&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Soan Halkas&quot;,&#10;                    Description = &quot;Kzartlm soan halkalar&quot;,&#10;                    Price = 40.00m,&#10;                    MenuId = burgerMenu.Id,&#10;                    Category = &quot;Attrmalk&quot;,&#10;                    IsAvailable = true&#10;                }&#10;            };&#10;&#10;            context.MenuItems.AddRange(menuItems);&#10;        }&#10;        else if (restaurant.Name == &quot;Vejetaryen Ke&quot;)&#10;        {&#10;            var vegeMenu = new Menu&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Name = &quot;Vejetaryen Men&quot;,&#10;                Description = &quot;Vejetaryen ve vegan yemekler&quot;,&#10;                RestaurantId = restaurantId&#10;            };&#10;            context.Menus.Add(vegeMenu);&#10;            await context.SaveChangesAsync();&#10;&#10;            var menuItems = new List&lt;MenuItem&gt;&#10;            {&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Sebze Taba&quot;,&#10;                    Description = &quot;Mevsim sebzeleri ile hazrlanm tabak&quot;,&#10;                    Price = 100.00m,&#10;                    MenuId = vegeMenu.Id,&#10;                    Category = &quot;Salata&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Nohutlu Pilav&quot;,&#10;                    Description = &quot;Baharatl nohut ve pirin pilav&quot;,&#10;                    Price = 120.00m,&#10;                    MenuId = vegeMenu.Id,&#10;                    Category = &quot;Ana Yemek&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Zeytinyal Enginar&quot;,&#10;                    Description = &quot;Zeytinyal ve limonlu enginar kalbi&quot;,&#10;                    Price = 80.00m,&#10;                    MenuId = vegeMenu.Id,&#10;                    Category = &quot;Meze&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Vegan Burger&quot;,&#10;                    Description = &quot;Kinoal ve sebzeli vegan burger&quot;,&#10;                    Price = 200.00m,&#10;                    MenuId = vegeMenu.Id,&#10;                    Category = &quot;Burger&quot;,&#10;                    IsAvailable = true&#10;                },&#10;                new MenuItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    Name = &quot;Chia Puding&quot;,&#10;                    Description = &quot;Chia tohumu, badem st ve meyvelerle&quot;,&#10;                    Price = 70.00m,&#10;                    MenuId = vegeMenu.Id,&#10;                    Category = &quot;Tatl&quot;,&#10;                    IsAvailable = true&#10;                }&#10;            };&#10;&#10;            context.MenuItems.AddRange(menuItems);&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedTablesAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.Tables.AnyAsync(t =&gt; t.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var tables = new List&lt;Table&gt;();&#10;        for (int i = 1; i &lt;= 10; i++)&#10;        {&#10;            tables.Add(new Table&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                TableNumber = i,&#10;                Capacity = i % 3 == 0 ? 6 : (i % 2 == 0 ? 4 : 2),&#10;                Status = TableStatus.Available,&#10;                RestaurantId = restaurantId,&#10;                Location = i &lt;= 5 ? &quot; Mekan&quot; : &quot;D Mekan&quot;&#10;            });&#10;        }&#10;&#10;        context.Tables.AddRange(tables);&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedOrdersAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.Orders.AnyAsync(o =&gt; o.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var menuItems = await context.MenuItems&#10;            .Where(mi =&gt; mi.Menu.RestaurantId == restaurantId)&#10;            .ToListAsync();&#10;&#10;        if (menuItems.Count == 0) return;&#10;&#10;        var customers = await context.Users&#10;            .Where(u =&gt; u.Email != null &amp;&amp; u.Email.StartsWith(&quot;customer&quot;))&#10;            .ToListAsync();&#10;&#10;        var random = new Random();&#10;        var statuses = new[] { OrderStatus.Completed, OrderStatus.Completed, OrderStatus.Completed, OrderStatus.Preparing, OrderStatus.Ready, OrderStatus.Served };&#10;&#10;        for (int i = 0; i &lt; 30; i++)&#10;        {&#10;            var orderDate = DateTime.UtcNow.AddDays(-random.Next(0, 30));&#10;            var customer = customers[random.Next(customers.Count)];&#10;            var status = statuses[random.Next(statuses.Length)];&#10;&#10;            var order = new Order&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                OrderDate = orderDate,&#10;                CustomerId = customer.Id,&#10;                RestaurantId = restaurantId,&#10;                Status = status,&#10;                Type = random.Next(3) == 0 ? OrderType.Delivery : OrderType.DineIn,&#10;                TotalAmount = 0,&#10;                SpecialRequests = status == OrderStatus.Completed ? &quot;Sipari tamamland&quot; : null&#10;            };&#10;&#10;            // 2-5 aras rn ekle&#10;            var itemCount = random.Next(2, 6);&#10;            decimal totalAmount = 0;&#10;&#10;            for (int j = 0; j &lt; itemCount; j++)&#10;            {&#10;                var menuItem = menuItems[random.Next(menuItems.Count)];&#10;                var quantity = random.Next(1, 4);&#10;                var price = menuItem.Price;&#10;&#10;                totalAmount += price * quantity;&#10;&#10;                var orderItem = new OrderItem&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    OrderId = order.Id,&#10;                    MenuItemId = menuItem.Id,&#10;                    Quantity = quantity,&#10;                    UnitPrice = price&#10;                };&#10;&#10;                order.OrderItems.Add(orderItem);&#10;            }&#10;&#10;            order.TotalAmount = totalAmount;&#10;            context.Orders.Add(order);&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedReservationsAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.Reservations.AnyAsync(r =&gt; r.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var tables = await context.Tables&#10;            .Where(t =&gt; t.RestaurantId == restaurantId)&#10;            .ToListAsync();&#10;&#10;        var customers = await context.Users&#10;            .Where(u =&gt; u.Email != null &amp;&amp; u.Email.StartsWith(&quot;customer&quot;))&#10;            .ToListAsync();&#10;&#10;        var random = new Random();&#10;        var statuses = new[] { ReservationStatus.Confirmed, ReservationStatus.Confirmed, ReservationStatus.Pending, ReservationStatus.Completed };&#10;&#10;        for (int i = 0; i &lt; 15; i++)&#10;        {&#10;            var reservationDate = DateTime.UtcNow.AddDays(random.Next(-7, 14));&#10;            var customer = customers[random.Next(customers.Count)];&#10;            var table = tables[random.Next(tables.Count)];&#10;            var status = statuses[random.Next(statuses.Length)];&#10;&#10;            var reservation = new Reservation&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                ReservationDate = reservationDate,&#10;                NumberOfGuests = random.Next(2, table.Capacity + 1),&#10;                CustomerId = customer.Id,&#10;                CustomerName = customer.FullName,&#10;                CustomerPhone = customer.PhoneNumber ?? &quot;+905551234567&quot;,&#10;                CustomerEmail = customer.Email,&#10;                RestaurantId = restaurantId,&#10;                TableId = table.Id,&#10;                Status = status,&#10;                SpecialRequests = i % 3 == 0 ? &quot;Pencere kenar masa ltfen&quot; : null&#10;            };&#10;&#10;            context.Reservations.Add(reservation);&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedReviewsAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.Reviews.AnyAsync(r =&gt; r.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var customers = await context.Users&#10;            .Where(u =&gt; u.Email != null &amp;&amp; u.Email.StartsWith(&quot;customer&quot;))&#10;            .ToListAsync();&#10;&#10;        var random = new Random();&#10;        var comments = new[]&#10;        {&#10;            &quot;Harika bir deneyimdi, kesinlikle tekrar geleceim!&quot;,&#10;            &quot;Yemekler ok lezzetliydi, personel ok ilgili.&quot;,&#10;            &quot;Fiyatlar biraz yksek ama kaliteli.&quot;,&#10;            &quot;Ortam ok gzel, aile ile gelmek iin ideal.&quot;,&#10;            &quot;Servis biraz yavat ama yemekler harikayd.&quot;,&#10;            &quot;Tavsiye ederim, ok memnun kaldk.&quot;,&#10;            &quot;Men eitlilii gzel, her damak zevkine uygun.&quot;,&#10;            &quot;Temizlik ve hijyen konusunda ok zenli.&quot;&#10;        };&#10;&#10;        var statuses = new[] { &quot;Approved&quot;, &quot;Approved&quot;, &quot;Approved&quot;, &quot;Pending&quot; };&#10;&#10;        for (int i = 0; i &lt; 20; i++)&#10;        {&#10;            var customer = customers[random.Next(customers.Count)];&#10;            var rating = random.Next(3, 6);&#10;            var status = statuses[random.Next(statuses.Length)];&#10;&#10;            var review = new Review&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Rating = rating,&#10;                Comment = comments[random.Next(comments.Length)],&#10;                CustomerId = customer.Id,&#10;                RestaurantId = restaurantId,&#10;                Status = status,&#10;                OwnerResponse = status == &quot;Approved&quot; &amp;&amp; i % 3 == 0 &#10;                    ? &quot;Teekkr ederiz, tekrar bekleriz!&quot; &#10;                    : null&#10;            };&#10;&#10;            context.Reviews.Add(review);&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedJobPostingsAsync(AppDbContext context, string restaurantId)&#10;    {&#10;        if (await context.JobPostings.AnyAsync(j =&gt; j.RestaurantId == restaurantId))&#10;            return;&#10;&#10;        var jobPostings = new List&lt;JobPosting&gt;&#10;        {&#10;            new JobPosting&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Title = &quot;A&quot;,&#10;                Description = &quot;Deneyimli a aranyor. Trk mutfa bilgisi art.&quot;,&#10;                Requirements = &quot;En az 3 yl deneyim, hijyen eitimi&quot;,&#10;                Salary = 25000m,&#10;                RestaurantId = restaurantId,&#10;                PostedDate = DateTime.UtcNow.AddDays(-10)&#10;            },&#10;            new JobPosting&#10;            {&#10;                Id = Guid.NewGuid().ToString(),&#10;                Title = &quot;Garson&quot;,&#10;                Description = &quot;Part-time garson aranyor.&quot;,&#10;                Requirements = &quot;Mteri ilikileri konusunda yetenekli&quot;,&#10;                Salary = 18000m,&#10;                RestaurantId = restaurantId,&#10;                PostedDate = DateTime.UtcNow.AddDays(-5)&#10;            }&#10;        };&#10;&#10;        context.JobPostings.AddRange(jobPostings);&#10;        await context.SaveChangesAsync();&#10;&#10;        // Baz bavurular ekle&#10;        var customers = await context.Users&#10;            .Where(u =&gt; u.Email != null &amp;&amp; u.Email.StartsWith(&quot;customer&quot;))&#10;            .Take(3)&#10;            .ToListAsync();&#10;&#10;        var random = new Random();&#10;        foreach (var jobPosting in jobPostings.Take(1))&#10;        {&#10;            foreach (var customer in customers)&#10;            {&#10;                var application = new JobApplication&#10;                {&#10;                    Id = Guid.NewGuid().ToString(),&#10;                    JobPostingId = jobPosting.Id,&#10;                    ApplicantId = customer.Id,&#10;                    CoverLetter = &quot;lgili pozisyon iin bavurmak istiyorum. Deneyimli ve alkanm.&quot;,&#10;                    Status = &quot;Pending&quot;,&#10;                    ApplicationDate = DateTime.UtcNow.AddDays(-random.Next(1, 5))&#10;                };&#10;&#10;                context.JobApplications.Add(application);&#10;            }&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;&#10;    private static async Task SeedEmployeesAsync(AppDbContext context, UserManager&lt;AppUser&gt; userManager, string restaurantId)&#10;    {&#10;        // Bu restoranda alan var m kontrol et&#10;        var existingEmployees = await context.Users&#10;            .Where(u =&gt; u.EmployerRestaurantId == restaurantId &amp;&amp; !u.IsDeleted)&#10;            .CountAsync();&#10;&#10;        if (existingEmployees &gt;= 2) return;&#10;&#10;        // Her restoran iin 2-3 alan olutur&#10;        var random = new Random();&#10;        var employeeCount = random.Next(2, 4); // 2 veya 3 alan&#10;&#10;        for (int i = 1; i &lt;= employeeCount; i++)&#10;        {&#10;            var uniqueId = Guid.NewGuid().ToString().Substring(0, 8);&#10;            var employeeEmail = $&quot;employee_{uniqueId}@gmail.com&quot;;&#10;            &#10;            var employee = await userManager.FindByEmailAsync(employeeEmail);&#10;            if (employee == null)&#10;            {&#10;                var positions = new[] { &quot;Garson&quot;, &quot;A&quot;, &quot;Komi&quot;, &quot;Kasiyer&quot;, &quot;Mutfak Personeli&quot; };&#10;                var names = new[] { &quot;Mehmet&quot;, &quot;Aye&quot;, &quot;Fatma&quot;, &quot;Ali&quot;, &quot;Zeynep&quot;, &quot;Ahmet&quot;, &quot;Elif&quot;, &quot;Mustafa&quot;, &quot;Emine&quot;, &quot;Hasan&quot; };&#10;                var surnames = new[] { &quot;Ylmaz&quot;, &quot;Kaya&quot;, &quot;Demir&quot;, &quot;elik&quot;, &quot;ahin&quot;, &quot;Yldz&quot;, &quot;ztrk&quot;, &quot;Aydn&quot;, &quot;Arslan&quot;, &quot;Doan&quot; };&#10;&#10;                var firstName = names[random.Next(names.Length)];&#10;                var lastName = surnames[random.Next(surnames.Length)];&#10;                var position = positions[random.Next(positions.Length)];&#10;&#10;                employee = new AppUser&#10;                {&#10;                    UserName = employeeEmail,&#10;                    Email = employeeEmail,&#10;                    EmailConfirmed = true,&#10;                    FullName = $&quot;{firstName} {lastName} ({position})&quot;,&#10;                    FirstName = firstName,&#10;                    LastName = lastName,&#10;                    PhoneNumber = $&quot;+90555{random.Next(100, 999)}{random.Next(1000, 9999)}&quot;,&#10;                    EmployerRestaurantId = restaurantId,&#10;                    CreatedAt = DateTime.UtcNow,&#10;                    IsDeleted = false&#10;                };&#10;&#10;                var result = await userManager.CreateAsync(employee, &quot;Employee123!&quot;);&#10;                if (result.Succeeded)&#10;                {&#10;                    await userManager.AddToRoleAsync(employee, &quot;Employee&quot;);&#10;                }&#10;            }&#10;        }&#10;&#10;        await context.SaveChangesAsync();&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.AspNetCore.Identity;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.WebAPI;&#10;&#10;public static class OwnerIdFixer&#10;{&#10;    public static async Task FixRestaurantOwnerIds(IServiceProvider services)&#10;    {&#10;        using var scope = services.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var logger = scope.ServiceProvider.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();&#10;        &#10;        try&#10;        {&#10;            // Owner kullancsn bul&#10;            var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;            if (owner == null)&#10;            {&#10;                logger.LogWarning(&quot;owner@gmail.com kullancs bulunamad!&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;Owner bulundu: {owner.Email} (ID: {owner.Id})&quot;);&#10;            &#10;            // Tm aktif restoranlar bul&#10;            var restaurants = await context.Restaurants&#10;                .Where(r =&gt; !r.IsDeleted)&#10;                .ToListAsync();&#10;            &#10;            if (restaurants.Count == 0)&#10;            {&#10;                logger.LogInformation(&quot;Veritabannda restoran bulunamad.&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;{restaurants.Count} restoran bulundu, owner ID'leri gncelleniyor...&quot;);&#10;            &#10;            // Her restorann owner ID'sini gncelle&#10;            foreach (var restaurant in restaurants)&#10;            {&#10;                restaurant.OwnerId = owner.Id;&#10;                logger.LogInformation($&quot; {restaurant.Name} -&gt; Owner ID gncellendi&quot;);&#10;            }&#10;            &#10;            await context.SaveChangesAsync();&#10;            logger.LogInformation($&quot; {restaurants.Count} restorann owner ID'si baaryla gncellendi!&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            logger.LogError(ex, &quot;Owner ID gncellenirken hata olutu!&quot;);&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>