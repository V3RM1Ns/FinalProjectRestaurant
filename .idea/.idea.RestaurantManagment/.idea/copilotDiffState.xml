<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/employee/dashboard/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/employee/dashboard/page.tsx" />
              <option name="originalContent" value="&quot;use client&quot;&#10;&#10;import { useState, useEffect } from &quot;react&quot;&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;&#10;import { Badge } from &quot;@/components/ui/badge&quot;&#10;import { Tabs, TabsContent, TabsList, TabsTrigger } from &quot;@/components/ui/tabs&quot;&#10;import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from &quot;@/components/ui/select&quot;&#10;import { Clock, Package, Calendar, Users, MapPin } from &quot;lucide-react&quot;&#10;import { useToast } from &quot;@/hooks/use-toast&quot;&#10;&#10;interface Order {&#10;  id: string&#10;  customerName: string&#10;  items: Array&lt;{ name: string; quantity: number }&gt;&#10;  total: number&#10;  status: &quot;Pending&quot; | &quot;Preparing&quot; | &quot;Ready&quot; | &quot;Delivered&quot;&#10;  createdAt: string&#10;  address: string&#10;}&#10;&#10;interface Reservation {&#10;  id: string&#10;  customerName: string&#10;  date: string&#10;  time: string&#10;  guestCount: number&#10;  status: &quot;Pending&quot; | &quot;Confirmed&quot; | &quot;Seated&quot; | &quot;Completed&quot;&#10;  tableNumber: string&#10;}&#10;&#10;const mockOrders: Order[] = [&#10;  {&#10;    id: &quot;ORD001&quot;,&#10;    customerName: &quot;Ahmet Yılmaz&quot;,&#10;    items: [&#10;      { name: &quot;İskender Kebap&quot;, quantity: 2 },&#10;      { name: &quot;Ayran&quot;, quantity: 2 },&#10;    ],&#10;    total: 405,&#10;    status: &quot;Pending&quot;,&#10;    createdAt: &quot;2025-10-17T14:30:00&quot;,&#10;    address: &quot;Kadıköy, İstanbul&quot;,&#10;  },&#10;  {&#10;    id: &quot;ORD002&quot;,&#10;    customerName: &quot;Zeynep Kaya&quot;,&#10;    items: [&#10;      { name: &quot;Adana Kebap&quot;, quantity: 1 },&#10;      { name: &quot;Mercimek Çorbası&quot;, quantity: 1 },&#10;    ],&#10;    total: 195,&#10;    status: &quot;Preparing&quot;,&#10;    createdAt: &quot;2025-10-17T14:45:00&quot;,&#10;    address: &quot;Beşiktaş, İstanbul&quot;,&#10;  },&#10;  {&#10;    id: &quot;ORD003&quot;,&#10;    customerName: &quot;Mehmet Demir&quot;,&#10;    items: [{ name: &quot;Kuzu Tandır&quot;, quantity: 1 }],&#10;    total: 235,&#10;    status: &quot;Ready&quot;,&#10;    createdAt: &quot;2025-10-17T15:00:00&quot;,&#10;    address: &quot;Şişli, İstanbul&quot;,&#10;  },&#10;]&#10;&#10;const mockReservations: Reservation[] = [&#10;  {&#10;    id: &quot;RES001&quot;,&#10;    customerName: &quot;Ayşe Öztürk&quot;,&#10;    date: &quot;2025-10-17&quot;,&#10;    time: &quot;19:00&quot;,&#10;    guestCount: 4,&#10;    status: &quot;Confirmed&quot;,&#10;    tableNumber: &quot;12&quot;,&#10;  },&#10;  {&#10;    id: &quot;RES002&quot;,&#10;    customerName: &quot;Can Yıldız&quot;,&#10;    date: &quot;2025-10-17&quot;,&#10;    time: &quot;20:00&quot;,&#10;    guestCount: 2,&#10;    status: &quot;Pending&quot;,&#10;    tableNumber: &quot;5&quot;,&#10;  },&#10;  {&#10;    id: &quot;RES003&quot;,&#10;    customerName: &quot;Elif Arslan&quot;,&#10;    date: &quot;2025-10-17&quot;,&#10;    time: &quot;20:30&quot;,&#10;    guestCount: 6,&#10;    status: &quot;Confirmed&quot;,&#10;    tableNumber: &quot;8&quot;,&#10;  },&#10;]&#10;&#10;const orderStatusConfig = {&#10;  Pending: { label: &quot;Onay Bekliyor&quot;, variant: &quot;secondary&quot; as const, next: &quot;Preparing&quot; },&#10;  Preparing: { label: &quot;Hazırlanıyor&quot;, variant: &quot;default&quot; as const, next: &quot;Ready&quot; },&#10;  Ready: { label: &quot;Hazır&quot;, variant: &quot;default&quot; as const, next: &quot;Delivered&quot; },&#10;  Delivered: { label: &quot;Teslim Edildi&quot;, variant: &quot;outline&quot; as const, next: null },&#10;}&#10;&#10;const reservationStatusConfig = {&#10;  Pending: { label: &quot;Onay Bekliyor&quot;, variant: &quot;secondary&quot; as const, next: &quot;Confirmed&quot; },&#10;  Confirmed: { label: &quot;Onaylandı&quot;, variant: &quot;default&quot; as const, next: &quot;Seated&quot; },&#10;  Seated: { label: &quot;Oturdu&quot;, variant: &quot;default&quot; as const, next: &quot;Completed&quot; },&#10;  Completed: { label: &quot;Tamamlandı&quot;, variant: &quot;outline&quot; as const, next: null },&#10;}&#10;&#10;export default function EmployeeDashboardPage() {&#10;  const [orders, setOrders] = useState&lt;Order[]&gt;([])&#10;  const [reservations, setReservations] = useState&lt;Reservation[]&gt;([])&#10;  const [loading, setLoading] = useState(true)&#10;  const { toast } = useToast()&#10;&#10;  useEffect(() =&gt; {&#10;    const fetchData = async () =&gt; {&#10;      setLoading(true)&#10;      await new Promise((resolve) =&gt; setTimeout(resolve, 500))&#10;      setOrders(mockOrders)&#10;      setReservations(mockReservations)&#10;      setLoading(false)&#10;    }&#10;&#10;    fetchData()&#10;  }, [])&#10;&#10;  const handleUpdateOrderStatus = async (orderId: string, newStatus: string) =&gt; {&#10;    await new Promise((resolve) =&gt; setTimeout(resolve, 300))&#10;    setOrders(&#10;      orders.map((order) =&gt; (order.id === orderId ? { ...order, status: newStatus as Order[&quot;status&quot;] } : order)),&#10;    )&#10;    toast({ title: &quot;Sipariş durumu güncellendi&quot; })&#10;  }&#10;&#10;  const handleUpdateReservationStatus = async (reservationId: string, newStatus: string) =&gt; {&#10;    await new Promise((resolve) =&gt; setTimeout(resolve, 300))&#10;    setReservations(&#10;      reservations.map((res) =&gt;&#10;        res.id === reservationId ? { ...res, status: newStatus as Reservation[&quot;status&quot;] } : res,&#10;      ),&#10;    )&#10;    toast({ title: &quot;Rezervasyon durumu güncellendi&quot; })&#10;  }&#10;&#10;  if (loading) {&#10;    return (&#10;      &lt;div className=&quot;container py-8&quot;&gt;&#10;        &lt;div className=&quot;animate-pulse space-y-6&quot;&gt;&#10;          &lt;div className=&quot;h-8 bg-muted rounded w-1/3&quot; /&gt;&#10;          &lt;div className=&quot;space-y-4&quot;&gt;&#10;            {[1, 2, 3].map((i) =&gt; (&#10;              &lt;div key={i} className=&quot;h-32 bg-muted rounded&quot; /&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  const todayOrders = orders.filter((order) =&gt; {&#10;    const orderDate = new Date(order.createdAt).toDateString()&#10;    const today = new Date().toDateString()&#10;    return orderDate === today&#10;  })&#10;&#10;  const todayReservations = reservations.filter((res) =&gt; {&#10;    const resDate = new Date(res.date).toDateString()&#10;    const today = new Date().toDateString()&#10;    return resDate === today&#10;  })&#10;&#10;  return (&#10;    &lt;div className=&quot;container py-8&quot;&gt;&#10;      &lt;div className=&quot;mb-8&quot;&gt;&#10;        &lt;h1 className=&quot;text-4xl font-bold mb-2&quot;&gt;Çalışan Paneli&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Bugünkü siparişler ve rezervasyonlar&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Stats */}&#10;      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-4 gap-6 mb-8&quot;&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-2&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium text-muted-foreground&quot;&gt;Bekleyen Siparişler&lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-2xl font-bold&quot;&gt;{todayOrders.filter((o) =&gt; o.status === &quot;Pending&quot;).length}&lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-2&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium text-muted-foreground&quot;&gt;Hazırlanan Siparişler&lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-2xl font-bold&quot;&gt;{todayOrders.filter((o) =&gt; o.status === &quot;Preparing&quot;).length}&lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-2&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium text-muted-foreground&quot;&gt;Bekleyen Rezervasyonlar&lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-2xl font-bold&quot;&gt;{todayReservations.filter((r) =&gt; r.status === &quot;Pending&quot;).length}&lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-2&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium text-muted-foreground&quot;&gt;Onaylı Rezervasyonlar&lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-2xl font-bold&quot;&gt;{todayReservations.filter((r) =&gt; r.status === &quot;Confirmed&quot;).length}&lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Orders and Reservations Tabs */}&#10;      &lt;Tabs defaultValue=&quot;orders&quot; className=&quot;w-full&quot;&gt;&#10;        &lt;TabsList className=&quot;mb-6&quot;&gt;&#10;          &lt;TabsTrigger value=&quot;orders&quot; className=&quot;gap-2&quot;&gt;&#10;            &lt;Package className=&quot;h-4 w-4&quot; /&gt;&#10;            Siparişler ({todayOrders.length})&#10;          &lt;/TabsTrigger&gt;&#10;          &lt;TabsTrigger value=&quot;reservations&quot; className=&quot;gap-2&quot;&gt;&#10;            &lt;Calendar className=&quot;h-4 w-4&quot; /&gt;&#10;            Rezervasyonlar ({todayReservations.length})&#10;          &lt;/TabsTrigger&gt;&#10;        &lt;/TabsList&gt;&#10;&#10;        &lt;TabsContent value=&quot;orders&quot;&gt;&#10;          {todayOrders.length === 0 ? (&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;py-12 text-center&quot;&gt;&#10;                &lt;Package className=&quot;h-12 w-12 mx-auto mb-4 text-muted-foreground&quot; /&gt;&#10;                &lt;h3 className=&quot;text-lg font-semibold mb-2&quot;&gt;Bugün sipariş yok&lt;/h3&gt;&#10;                &lt;p className=&quot;text-muted-foreground&quot;&gt;Yeni siparişler burada görünecek&lt;/p&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          ) : (&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;              {todayOrders.map((order) =&gt; (&#10;                &lt;Card key={order.id}&gt;&#10;                  &lt;CardHeader&gt;&#10;                    &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                      &lt;div&gt;&#10;                        &lt;CardTitle className=&quot;text-lg&quot;&gt;Sipariş #{order.id}&lt;/CardTitle&gt;&#10;                        &lt;CardDescription className=&quot;flex items-center gap-2 mt-1&quot;&gt;&#10;                          &lt;Clock className=&quot;h-3 w-3&quot; /&gt;&#10;                          {new Date(order.createdAt).toLocaleTimeString(&quot;tr-TR&quot;, {&#10;                            hour: &quot;2-digit&quot;,&#10;                            minute: &quot;2-digit&quot;,&#10;                          })}&#10;                        &lt;/CardDescription&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;Badge variant={orderStatusConfig[order.status].variant}&gt;&#10;                        {orderStatusConfig[order.status].label}&#10;                      &lt;/Badge&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/CardHeader&gt;&#10;                  &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;                    &lt;div&gt;&#10;                      &lt;p className=&quot;text-sm font-medium mb-2&quot;&gt;Müşteri: {order.customerName}&lt;/p&gt;&#10;                      &lt;div className=&quot;flex items-start gap-2 text-sm text-muted-foreground&quot;&gt;&#10;                        &lt;MapPin className=&quot;h-4 w-4 mt-0.5 shrink-0&quot; /&gt;&#10;                        &lt;span&gt;{order.address}&lt;/span&gt;&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div&gt;&#10;                      &lt;p className=&quot;text-sm font-medium mb-2&quot;&gt;Ürünler:&lt;/p&gt;&#10;                      &lt;ul className=&quot;space-y-1&quot;&gt;&#10;                        {order.items.map((item, index) =&gt; (&#10;                          &lt;li key={index} className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                            • {item.name} x{item.quantity}&#10;                          &lt;/li&gt;&#10;                        ))}&#10;                      &lt;/ul&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div className=&quot;flex items-center justify-between pt-2 border-t&quot;&gt;&#10;                      &lt;span className=&quot;font-bold&quot;&gt;Toplam: ₺{order.total}&lt;/span&gt;&#10;                      {orderStatusConfig[order.status].next &amp;&amp; (&#10;                        &lt;Select&#10;                          value={order.status}&#10;                          onValueChange={(value) =&gt; handleUpdateOrderStatus(order.id, value)}&#10;                        &gt;&#10;                          &lt;SelectTrigger className=&quot;w-[180px]&quot;&gt;&#10;                            &lt;SelectValue /&gt;&#10;                          &lt;/SelectTrigger&gt;&#10;                          &lt;SelectContent&gt;&#10;                            &lt;SelectItem value=&quot;Pending&quot;&gt;Onay Bekliyor&lt;/SelectItem&gt;&#10;                            &lt;SelectItem value=&quot;Preparing&quot;&gt;Hazırlanıyor&lt;/SelectItem&gt;&#10;                            &lt;SelectItem value=&quot;Ready&quot;&gt;Hazır&lt;/SelectItem&gt;&#10;                            &lt;SelectItem value=&quot;Delivered&quot;&gt;Teslim Edildi&lt;/SelectItem&gt;&#10;                          &lt;/SelectContent&gt;&#10;                        &lt;/Select&gt;&#10;                      )}&#10;                    &lt;/div&gt;&#10;                  &lt;/CardContent&gt;&#10;                &lt;/Card&gt;&#10;              ))}&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/TabsContent&gt;&#10;&#10;        &lt;TabsContent value=&quot;reservations&quot;&gt;&#10;          {todayReservations.length === 0 ? (&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;py-12 text-center&quot;&gt;&#10;                &lt;Calendar className=&quot;h-12 w-12 mx-auto mb-4 text-muted-foreground&quot; /&gt;&#10;                &lt;h3 className=&quot;text-lg font-semibold mb-2&quot;&gt;Bugün rezervasyon yok&lt;/h3&gt;&#10;                &lt;p className=&quot;text-muted-foreground&quot;&gt;Yeni rezervasyonlar burada görünecek&lt;/p&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          ) : (&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;              {todayReservations.map((reservation) =&gt; (&#10;                &lt;Card key={reservation.id}&gt;&#10;                  &lt;CardHeader&gt;&#10;                    &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                      &lt;div&gt;&#10;                        &lt;CardTitle className=&quot;text-lg&quot;&gt;Rezervasyon #{reservation.id}&lt;/CardTitle&gt;&#10;                        &lt;CardDescription className=&quot;flex items-center gap-2 mt-1&quot;&gt;&#10;                          &lt;Clock className=&quot;h-3 w-3&quot; /&gt;&#10;                          {reservation.time}&#10;                        &lt;/CardDescription&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;Badge variant={reservationStatusConfig[reservation.status].variant}&gt;&#10;                        {reservationStatusConfig[reservation.status].label}&#10;                      &lt;/Badge&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/CardHeader&gt;&#10;                  &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;                      &lt;div&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-1&quot;&gt;Müşteri&lt;/p&gt;&#10;                        &lt;p className=&quot;font-medium&quot;&gt;{reservation.customerName}&lt;/p&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;div&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-1&quot;&gt;Masa&lt;/p&gt;&#10;                        &lt;p className=&quot;font-medium&quot;&gt;Masa {reservation.tableNumber}&lt;/p&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;div&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-1&quot;&gt;Kişi Sayısı&lt;/p&gt;&#10;                        &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                          &lt;Users className=&quot;h-4 w-4&quot; /&gt;&#10;                          &lt;span className=&quot;font-medium&quot;&gt;{reservation.guestCount} Kişi&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;div&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-1&quot;&gt;Tarih&lt;/p&gt;&#10;                        &lt;p className=&quot;font-medium&quot;&gt;&#10;                          {new Date(reservation.date).toLocaleDateString(&quot;tr-TR&quot;, {&#10;                            day: &quot;numeric&quot;,&#10;                            month: &quot;long&quot;,&#10;                          })}&#10;                        &lt;/p&gt;&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    {reservationStatusConfig[reservation.status].next &amp;&amp; (&#10;                      &lt;div className=&quot;pt-2 border-t&quot;&gt;&#10;                        &lt;Select&#10;                          value={reservation.status}&#10;                          onValueChange={(value) =&gt; handleUpdateReservationStatus(reservation.id, value)}&#10;                        &gt;&#10;                          &lt;SelectTrigger className=&quot;w-full&quot;&gt;&#10;                            &lt;SelectValue /&gt;&#10;                          &lt;/SelectTrigger&gt;&#10;                          &lt;SelectContent&gt;&#10;                            &lt;SelectItem value=&quot;Pending&quot;&gt;Onay Bekliyor&lt;/SelectItem&gt;&#10;                            &lt;SelectItem value=&quot;Confirmed&quot;&gt;Onaylandı&lt;/SelectItem&gt;&#10;                            &lt;SelectItem value=&quot;Seated&quot;&gt;Oturdu&lt;/SelectItem&gt;&#10;                            &lt;SelectItem value=&quot;Completed&quot;&gt;Tamamlandı&lt;/SelectItem&gt;&#10;                          &lt;/SelectContent&gt;&#10;                        &lt;/Select&gt;&#10;                      &lt;/div&gt;&#10;                    )}&#10;                  &lt;/CardContent&gt;&#10;                &lt;/Card&gt;&#10;              ))}&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/TabsContent&gt;&#10;      &lt;/Tabs&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
              <option name="updatedContent" value="&quot;use client&quot;&#10;&#10;import { useState, useEffect } from &quot;react&quot;&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;&#10;import { Badge } from &quot;@/components/ui/badge&quot;&#10;import { Tabs, TabsContent, TabsList, TabsTrigger } from &quot;@/components/ui/tabs&quot;&#10;import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from &quot;@/components/ui/select&quot;&#10;import { Clock, Package, Calendar, Users, MapPin, AlertCircle, UtensilsCrossed, Table as TableIcon } from &quot;lucide-react&quot;&#10;import { useToast } from &quot;@/hooks/use-toast&quot;&#10;import { useAuth } from &quot;@/contexts/auth-context&quot;&#10;import { employeeApi, type Reservation, type Menu, type Table } from &quot;@/lib/employee-api&quot;&#10;import { Alert, AlertDescription } from &quot;@/components/ui/alert&quot;&#10;&#10;const reservationStatusConfig = {&#10;  Pending: { label: &quot;Onay Bekliyor&quot;, variant: &quot;secondary&quot; as const, color: &quot;bg-yellow-100 text-yellow-800&quot; },&#10;  Confirmed: { label: &quot;Onaylandı&quot;, variant: &quot;default&quot; as const, color: &quot;bg-blue-100 text-blue-800&quot; },&#10;  Cancelled: { label: &quot;İptal Edildi&quot;, variant: &quot;destructive&quot; as const, color: &quot;bg-red-100 text-red-800&quot; },&#10;  Completed: { label: &quot;Tamamlandı&quot;, variant: &quot;outline&quot; as const, color: &quot;bg-green-100 text-green-800&quot; },&#10;  NoShow: { label: &quot;Gelmedi&quot;, variant: &quot;outline&quot; as const, color: &quot;bg-gray-100 text-gray-800&quot; },&#10;}&#10;&#10;const tableStatusConfig = {&#10;  Available: { label: &quot;Müsait&quot;, color: &quot;bg-green-100 text-green-800&quot; },&#10;  Occupied: { label: &quot;Dolu&quot;, color: &quot;bg-red-100 text-red-800&quot; },&#10;  Reserved: { label: &quot;Rezerve&quot;, color: &quot;bg-blue-100 text-blue-800&quot; },&#10;  OutOfService: { label: &quot;Hizmet Dışı&quot;, color: &quot;bg-gray-100 text-gray-800&quot; },&#10;}&#10;&#10;export default function EmployeeDashboardPage() {&#10;  const [reservations, setReservations] = useState&lt;Reservation[]&gt;([])&#10;  const [menus, setMenus] = useState&lt;Menu[]&gt;([])&#10;  const [tables, setTables] = useState&lt;Table[]&gt;([])&#10;  const [loading, setLoading] = useState(true)&#10;  const [error, setError] = useState&lt;string | null&gt;(null)&#10;  const { toast } = useToast()&#10;  const { user } = useAuth()&#10;&#10;  useEffect(() =&gt; {&#10;    const fetchData = async () =&gt; {&#10;      if (!user?.employerRestaurantId) {&#10;        setError(&quot;Restoran bilgisi bulunamadı. Lütfen bir restorana bağlı olduğunuzdan emin olun.&quot;)&#10;        setLoading(false)&#10;        return&#10;      }&#10;&#10;      setLoading(true)&#10;      setError(null)&#10;&#10;      try {&#10;        // Tüm verileri paralel olarak getir&#10;        const [reservationsResponse, menusResponse, tablesResponse] = await Promise.all([&#10;          employeeApi.reservations.getAll(user.employerRestaurantId, 1, 50),&#10;          employeeApi.menus.getAll(user.employerRestaurantId),&#10;          employeeApi.tables.getAll(user.employerRestaurantId),&#10;        ])&#10;&#10;        setReservations(reservationsResponse.items)&#10;        setMenus(menusResponse)&#10;        setTables(tablesResponse)&#10;      } catch (err: any) {&#10;        console.error(&quot;Veri yükleme hatası:&quot;, err)&#10;        setError(err.message || &quot;Veriler yüklenirken bir hata oluştu.&quot;)&#10;        toast({&#10;          title: &quot;Hata&quot;,&#10;          description: &quot;Veriler yüklenirken bir hata oluştu.&quot;,&#10;          variant: &quot;destructive&quot;,&#10;        })&#10;      } finally {&#10;        setLoading(false)&#10;      }&#10;    }&#10;&#10;    fetchData()&#10;  }, [user?.employerRestaurantId, toast])&#10;&#10;  const handleUpdateReservationStatus = async (reservationId: string, newStatus: string) =&gt; {&#10;    try {&#10;      await employeeApi.reservations.updateStatus(reservationId, newStatus)&#10;      &#10;      setReservations(&#10;        reservations.map((res) =&gt;&#10;          res.id === reservationId ? { ...res, status: newStatus as Reservation[&quot;status&quot;] } : res,&#10;        ),&#10;      )&#10;      &#10;      toast({ &#10;        title: &quot;Başarılı&quot;,&#10;        description: &quot;Rezervasyon durumu güncellendi&quot; &#10;      })&#10;    } catch (err: any) {&#10;      console.error(&quot;Rezervasyon güncelleme hatası:&quot;, err)&#10;      toast({&#10;        title: &quot;Hata&quot;,&#10;        description: &quot;Rezervasyon durumu güncellenirken bir hata oluştu.&quot;,&#10;        variant: &quot;destructive&quot;,&#10;      })&#10;    }&#10;  }&#10;&#10;  if (loading) {&#10;    return (&#10;      &lt;div className=&quot;container py-8&quot;&gt;&#10;        &lt;div className=&quot;animate-pulse space-y-6&quot;&gt;&#10;          &lt;div className=&quot;h-8 bg-muted rounded w-1/3&quot; /&gt;&#10;          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-4 gap-6&quot;&gt;&#10;            {[1, 2, 3, 4].map((i) =&gt; (&#10;              &lt;div key={i} className=&quot;h-24 bg-muted rounded&quot; /&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;space-y-4&quot;&gt;&#10;            {[1, 2, 3].map((i) =&gt; (&#10;              &lt;div key={i} className=&quot;h-32 bg-muted rounded&quot; /&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (error) {&#10;    return (&#10;      &lt;div className=&quot;container py-8&quot;&gt;&#10;        &lt;Alert variant=&quot;destructive&quot;&gt;&#10;          &lt;AlertCircle className=&quot;h-4 w-4&quot; /&gt;&#10;          &lt;AlertDescription&gt;{error}&lt;/AlertDescription&gt;&#10;        &lt;/Alert&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  // İstatistikler&#10;  const pendingReservations = reservations.filter(r =&gt; r.status === &quot;Pending&quot;).length&#10;  const confirmedReservations = reservations.filter(r =&gt; r.status === &quot;Confirmed&quot;).length&#10;  const totalMenuItems = menus.reduce((acc, menu) =&gt; acc + (menu.menuItems?.length || 0), 0)&#10;  const availableTables = tables.filter(t =&gt; t.status === &quot;Available&quot;).length&#10;&#10;  return (&#10;    &lt;div className=&quot;container py-8&quot;&gt;&#10;      &lt;div className=&quot;mb-8&quot;&gt;&#10;        &lt;h1 className=&quot;text-4xl font-bold mb-2&quot;&gt;Çalışan Paneli&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Restoran yönetimi ve operasyonlar&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* İstatistik Kartları */}&#10;      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-4 gap-6 mb-8&quot;&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-2&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium text-muted-foreground flex items-center gap-2&quot;&gt;&#10;              &lt;Calendar className=&quot;h-4 w-4&quot; /&gt;&#10;              Bekleyen Rezervasyonlar&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-2xl font-bold&quot;&gt;{pendingReservations}&lt;/div&gt;&#10;            &lt;p className=&quot;text-xs text-muted-foreground mt-1&quot;&gt;Onay bekliyor&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;        &#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-2&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium text-muted-foreground flex items-center gap-2&quot;&gt;&#10;              &lt;Calendar className=&quot;h-4 w-4&quot; /&gt;&#10;              Onaylı Rezervasyonlar&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-2xl font-bold&quot;&gt;{confirmedReservations}&lt;/div&gt;&#10;            &lt;p className=&quot;text-xs text-muted-foreground mt-1&quot;&gt;Aktif rezervasyonlar&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;        &#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-2&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium text-muted-foreground flex items-center gap-2&quot;&gt;&#10;              &lt;TableIcon className=&quot;h-4 w-4&quot; /&gt;&#10;              Müsait Masalar&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-2xl font-bold&quot;&gt;{availableTables} / {tables.length}&lt;/div&gt;&#10;            &lt;p className=&quot;text-xs text-muted-foreground mt-1&quot;&gt;Toplam masa sayısı&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;        &#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-2&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium text-muted-foreground flex items-center gap-2&quot;&gt;&#10;              &lt;UtensilsCrossed className=&quot;h-4 w-4&quot; /&gt;&#10;              Menü Öğeleri&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-2xl font-bold&quot;&gt;{totalMenuItems}&lt;/div&gt;&#10;            &lt;p className=&quot;text-xs text-muted-foreground mt-1&quot;&gt;{menus.length} menüde&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Ana Tablar */}&#10;      &lt;Tabs defaultValue=&quot;reservations&quot; className=&quot;w-full&quot;&gt;&#10;        &lt;TabsList className=&quot;mb-6&quot;&gt;&#10;          &lt;TabsTrigger value=&quot;reservations&quot; className=&quot;gap-2&quot;&gt;&#10;            &lt;Calendar className=&quot;h-4 w-4&quot; /&gt;&#10;            Rezervasyonlar ({reservations.length})&#10;          &lt;/TabsTrigger&gt;&#10;          &lt;TabsTrigger value=&quot;tables&quot; className=&quot;gap-2&quot;&gt;&#10;            &lt;TableIcon className=&quot;h-4 w-4&quot; /&gt;&#10;            Masalar ({tables.length})&#10;          &lt;/TabsTrigger&gt;&#10;          &lt;TabsTrigger value=&quot;menus&quot; className=&quot;gap-2&quot;&gt;&#10;            &lt;UtensilsCrossed className=&quot;h-4 w-4&quot; /&gt;&#10;            Menüler ({menus.length})&#10;          &lt;/TabsTrigger&gt;&#10;        &lt;/TabsList&gt;&#10;&#10;        {/* Rezervasyonlar Tab */}&#10;        &lt;TabsContent value=&quot;reservations&quot;&gt;&#10;          {reservations.length === 0 ? (&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;py-12 text-center&quot;&gt;&#10;                &lt;Calendar className=&quot;h-12 w-12 mx-auto mb-4 text-muted-foreground&quot; /&gt;&#10;                &lt;h3 className=&quot;text-lg font-semibold mb-2&quot;&gt;Rezervasyon yok&lt;/h3&gt;&#10;                &lt;p className=&quot;text-muted-foreground&quot;&gt;Henüz rezervasyon bulunmuyor&lt;/p&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          ) : (&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;              {reservations.map((reservation) =&gt; (&#10;                &lt;Card key={reservation.id}&gt;&#10;                  &lt;CardHeader&gt;&#10;                    &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                      &lt;div className=&quot;flex-1&quot;&gt;&#10;                        &lt;CardTitle className=&quot;text-lg&quot;&gt;Rezervasyon #{reservation.id.substring(0, 8)}&lt;/CardTitle&gt;&#10;                        &lt;CardDescription className=&quot;flex items-center gap-2 mt-1&quot;&gt;&#10;                          &lt;Clock className=&quot;h-3 w-3&quot; /&gt;&#10;                          {new Date(reservation.reservationDate).toLocaleString(&quot;tr-TR&quot;, {&#10;                            day: &quot;numeric&quot;,&#10;                            month: &quot;long&quot;,&#10;                            year: &quot;numeric&quot;,&#10;                            hour: &quot;2-digit&quot;,&#10;                            minute: &quot;2-digit&quot;,&#10;                          })}&#10;                        &lt;/CardDescription&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;Badge className={reservationStatusConfig[reservation.status].color}&gt;&#10;                        {reservationStatusConfig[reservation.status].label}&#10;                      &lt;/Badge&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/CardHeader&gt;&#10;                  &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;                      &lt;div&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-1&quot;&gt;Müşteri&lt;/p&gt;&#10;                        &lt;p className=&quot;font-medium&quot;&gt;{reservation.customerName}&lt;/p&gt;&#10;                        &lt;p className=&quot;text-xs text-muted-foreground&quot;&gt;{reservation.customerEmail}&lt;/p&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;div&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-1&quot;&gt;Masa&lt;/p&gt;&#10;                        &lt;p className=&quot;font-medium&quot;&gt;Masa {reservation.tableNumber}&lt;/p&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;div&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-1&quot;&gt;Kişi Sayısı&lt;/p&gt;&#10;                        &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                          &lt;Users className=&quot;h-4 w-4&quot; /&gt;&#10;                          &lt;span className=&quot;font-medium&quot;&gt;{reservation.numberOfGuests} Kişi&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;div&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-1&quot;&gt;Durum&lt;/p&gt;&#10;                        &lt;p className=&quot;font-medium&quot;&gt;{reservationStatusConfig[reservation.status].label}&lt;/p&gt;&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    {reservation.specialRequests &amp;&amp; (&#10;                      &lt;div&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-1&quot;&gt;Özel İstekler&lt;/p&gt;&#10;                        &lt;p className=&quot;text-sm bg-muted p-2 rounded&quot;&gt;{reservation.specialRequests}&lt;/p&gt;&#10;                      &lt;/div&gt;&#10;                    )}&#10;&#10;                    &lt;div className=&quot;pt-2 border-t&quot;&gt;&#10;                      &lt;Select&#10;                        value={reservation.status}&#10;                        onValueChange={(value) =&gt; handleUpdateReservationStatus(reservation.id, value)}&#10;                      &gt;&#10;                        &lt;SelectTrigger className=&quot;w-full&quot;&gt;&#10;                          &lt;SelectValue /&gt;&#10;                        &lt;/SelectTrigger&gt;&#10;                        &lt;SelectContent&gt;&#10;                          &lt;SelectItem value=&quot;Pending&quot;&gt;Onay Bekliyor&lt;/SelectItem&gt;&#10;                          &lt;SelectItem value=&quot;Confirmed&quot;&gt;Onaylandı&lt;/SelectItem&gt;&#10;                          &lt;SelectItem value=&quot;Cancelled&quot;&gt;İptal Edildi&lt;/SelectItem&gt;&#10;                          &lt;SelectItem value=&quot;Completed&quot;&gt;Tamamlandı&lt;/SelectItem&gt;&#10;                          &lt;SelectItem value=&quot;NoShow&quot;&gt;Gelmedi&lt;/SelectItem&gt;&#10;                        &lt;/SelectContent&gt;&#10;                      &lt;/Select&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/CardContent&gt;&#10;                &lt;/Card&gt;&#10;              ))}&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/TabsContent&gt;&#10;&#10;        {/* Masalar Tab */}&#10;        &lt;TabsContent value=&quot;tables&quot;&gt;&#10;          {tables.length === 0 ? (&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;py-12 text-center&quot;&gt;&#10;                &lt;TableIcon className=&quot;h-12 w-12 mx-auto mb-4 text-muted-foreground&quot; /&gt;&#10;                &lt;h3 className=&quot;text-lg font-semibold mb-2&quot;&gt;Masa yok&lt;/h3&gt;&#10;                &lt;p className=&quot;text-muted-foreground&quot;&gt;Henüz masa tanımlanmamış&lt;/p&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          ) : (&#10;            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;&#10;              {tables.map((table) =&gt; (&#10;                &lt;Card key={table.id}&gt;&#10;                  &lt;CardHeader&gt;&#10;                    &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                      &lt;CardTitle className=&quot;text-lg&quot;&gt;Masa {table.tableNumber}&lt;/CardTitle&gt;&#10;                      &lt;Badge className={tableStatusConfig[table.status].color}&gt;&#10;                        {tableStatusConfig[table.status].label}&#10;                      &lt;/Badge&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/CardHeader&gt;&#10;                  &lt;CardContent className=&quot;space-y-2&quot;&gt;&#10;                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                      &lt;span className=&quot;text-sm text-muted-foreground&quot;&gt;Kapasite&lt;/span&gt;&#10;                      &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                        &lt;Users className=&quot;h-4 w-4&quot; /&gt;&#10;                        &lt;span className=&quot;font-medium&quot;&gt;{table.capacity} Kişi&lt;/span&gt;&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    {table.location &amp;&amp; (&#10;                      &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                        &lt;span className=&quot;text-sm text-muted-foreground&quot;&gt;Konum&lt;/span&gt;&#10;                        &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                          &lt;MapPin className=&quot;h-4 w-4&quot; /&gt;&#10;                          &lt;span className=&quot;font-medium&quot;&gt;{table.location}&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    )}&#10;                  &lt;/CardContent&gt;&#10;                &lt;/Card&gt;&#10;              ))}&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/TabsContent&gt;&#10;&#10;        {/* Menüler Tab */}&#10;        &lt;TabsContent value=&quot;menus&quot;&gt;&#10;          {menus.length === 0 ? (&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;py-12 text-center&quot;&gt;&#10;                &lt;UtensilsCrossed className=&quot;h-12 w-12 mx-auto mb-4 text-muted-foreground&quot; /&gt;&#10;                &lt;h3 className=&quot;text-lg font-semibold mb-2&quot;&gt;Menü yok&lt;/h3&gt;&#10;                &lt;p className=&quot;text-muted-foreground&quot;&gt;Henüz menü oluşturulmamış&lt;/p&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          ) : (&#10;            &lt;div className=&quot;space-y-6&quot;&gt;&#10;              {menus.map((menu) =&gt; (&#10;                &lt;Card key={menu.id}&gt;&#10;                  &lt;CardHeader&gt;&#10;                    &lt;CardTitle className=&quot;text-xl&quot;&gt;{menu.name}&lt;/CardTitle&gt;&#10;                    {menu.description &amp;&amp; (&#10;                      &lt;CardDescription&gt;{menu.description}&lt;/CardDescription&gt;&#10;                    )}&#10;                  &lt;/CardHeader&gt;&#10;                  &lt;CardContent&gt;&#10;                    {menu.menuItems &amp;&amp; menu.menuItems.length &gt; 0 ? (&#10;                      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-4&quot;&gt;&#10;                        {menu.menuItems.map((item: any) =&gt; (&#10;                          &lt;div key={item.id} className=&quot;flex items-start justify-between p-3 border rounded-lg&quot;&gt;&#10;                            &lt;div className=&quot;flex-1&quot;&gt;&#10;                              &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                                &lt;h4 className=&quot;font-medium&quot;&gt;{item.name}&lt;/h4&gt;&#10;                                {!item.isAvailable &amp;&amp; (&#10;                                  &lt;Badge variant=&quot;secondary&quot; className=&quot;text-xs&quot;&gt;Tükendi&lt;/Badge&gt;&#10;                                )}&#10;                              &lt;/div&gt;&#10;                              {item.description &amp;&amp; (&#10;                                &lt;p className=&quot;text-sm text-muted-foreground mt-1&quot;&gt;{item.description}&lt;/p&gt;&#10;                              )}&#10;                              {item.category &amp;&amp; (&#10;                                &lt;p className=&quot;text-xs text-muted-foreground mt-1&quot;&gt;{item.category}&lt;/p&gt;&#10;                              )}&#10;                            &lt;/div&gt;&#10;                            &lt;div className=&quot;ml-4 font-bold text-lg whitespace-nowrap&quot;&gt;&#10;                              ₺{item.price}&#10;                            &lt;/div&gt;&#10;                          &lt;/div&gt;&#10;                        ))}&#10;                      &lt;/div&gt;&#10;                    ) : (&#10;                      &lt;p className=&quot;text-sm text-muted-foreground text-center py-4&quot;&gt;&#10;                        Bu menüde henüz ürün yok&#10;                      &lt;/p&gt;&#10;                    )}&#10;                  &lt;/CardContent&gt;&#10;                &lt;/Card&gt;&#10;              ))}&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/TabsContent&gt;&#10;      &lt;/Tabs&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/lib/auth.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/lib/auth.ts" />
              <option name="originalContent" value="import { type AppUser, type AuthResponse, UserRole } from &quot;@/types&quot;&#10;&#10;const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || &quot;http://localhost:5000/api&quot;&#10;&#10;export class AuthService {&#10;  private static TOKEN_KEY = &quot;auth_token&quot;&#10;  private static USER_KEY = &quot;auth_user&quot;&#10;&#10;  static async login(email: string, password: string): Promise&lt;AuthResponse&gt; {&#10;    try {&#10;      const response = await fetch(`${API_BASE_URL}/Account/login`, {&#10;        method: &quot;POST&quot;,&#10;        headers: {&#10;          &quot;Content-Type&quot;: &quot;application/json&quot;,&#10;        },&#10;        body: JSON.stringify({ Email: email, Password: password }),&#10;      })&#10;&#10;      if (!response.ok) {&#10;        const errorText = await response.text()&#10;        console.error(&quot;Login error response:&quot;, errorText)&#10;&#10;        try {&#10;          const error = JSON.parse(errorText)&#10;          // E-posta doğrulama hatası kontrolü&#10;          if (error.requiresEmailVerification || error.RequiresEmailVerification) {&#10;            const verificationError = new Error(error.message || error.Message || &quot;E-posta doğrulaması gerekli&quot;) as any&#10;            verificationError.requiresEmailVerification = true&#10;            throw verificationError&#10;          }&#10;          throw new Error(error.message || error.Message || &quot;Login failed&quot;)&#10;        } catch (e: any) {&#10;          if (e.requiresEmailVerification) {&#10;            throw e&#10;          }&#10;          throw new Error(&quot;Login failed&quot;)&#10;        }&#10;      }&#10;&#10;      const data = await response.json()&#10;&#10;      // Backend'den gelen response yapısı: { message, token, user: { id, userName, email, firstName, lastName, roles } }&#10;      const user: AppUser = {&#10;        id: data.user.id,&#10;        fullName: data.user.userName || data.user.email,&#10;        email: data.user.email,&#10;        phoneNumber: data.user.phoneNumber || &quot;&quot;,&#10;        roles: data.user.roles?.map((role: string) =&gt; role as UserRole) || [UserRole.Customer],&#10;        isActive: true,&#10;      }&#10;&#10;      const authResponse: AuthResponse = {&#10;        token: data.token,&#10;        user,&#10;      }&#10;&#10;      this.setToken(authResponse.token)&#10;      this.setUser(authResponse.user)&#10;      return authResponse&#10;    } catch (error) {&#10;      console.error(&quot;Login error:&quot;, error)&#10;      throw error&#10;    }&#10;  }&#10;&#10;  static async register(&#10;    fullName: string,&#10;    email: string,&#10;    password: string,&#10;    phoneNumber?: string,&#10;    address?: string,&#10;  ): Promise&lt;AuthResponse&gt; {&#10;    try {&#10;      const requestBody = {&#10;        FullName: fullName,&#10;        Email: email,&#10;        Password: password,&#10;        ConfirmPassword: password,&#10;        Phone: phoneNumber || &quot;&quot;,&#10;        Address: address || &quot;&quot;,&#10;      }&#10;&#10;      console.log(&quot;Register request:&quot;, requestBody)&#10;&#10;      const response = await fetch(`${API_BASE_URL}/Account/register`, {&#10;        method: &quot;POST&quot;,&#10;        headers: {&#10;          &quot;Content-Type&quot;: &quot;application/json&quot;,&#10;        },&#10;        body: JSON.stringify(requestBody),&#10;      })&#10;&#10;      console.log(&quot;Register response status:&quot;, response.status)&#10;&#10;      if (!response.ok) {&#10;        const errorText = await response.text()&#10;        console.error(&quot;Register error response:&quot;, errorText)&#10;&#10;        try {&#10;          const error = JSON.parse(errorText)&#10;          throw new Error(error.message || error.title || &quot;Registration failed&quot;)&#10;        } catch (e) {&#10;          throw new Error(errorText || &quot;Registration failed&quot;)&#10;        }&#10;      }&#10;&#10;      const data = await response.json()&#10;      console.log(&quot;Register success response:&quot;, data)&#10;&#10;      // Backend'den gelen response yapısı: { message, token, user: { id, userName, email, firstName, lastName } }&#10;      const user: AppUser = {&#10;        id: data.user.id,&#10;        fullName: data.user.userName || fullName,&#10;        email: data.user.email,&#10;        phoneNumber: phoneNumber || &quot;&quot;,&#10;        roles: [UserRole.Customer], // Yeni kullanıcı default olarak Customer&#10;        isActive: true,&#10;      }&#10;&#10;      const authResponse: AuthResponse = {&#10;        token: data.token,&#10;        user,&#10;      }&#10;&#10;      this.setToken(authResponse.token)&#10;      this.setUser(authResponse.user)&#10;      return authResponse&#10;    } catch (error) {&#10;      console.error(&quot;Registration error:&quot;, error)&#10;      throw error&#10;    }&#10;  }&#10;&#10;  static logout(): void {&#10;    if (typeof window !== &quot;undefined&quot;) {&#10;      localStorage.removeItem(this.TOKEN_KEY)&#10;      localStorage.removeItem(this.USER_KEY)&#10;    }&#10;  }&#10;&#10;  static getToken(): string | null {&#10;    if (typeof window !== &quot;undefined&quot;) {&#10;      return localStorage.getItem(this.TOKEN_KEY)&#10;    }&#10;    return null&#10;  }&#10;&#10;  static setToken(token: string): void {&#10;    if (typeof window !== &quot;undefined&quot;) {&#10;      localStorage.setItem(this.TOKEN_KEY, token)&#10;    }&#10;  }&#10;&#10;  static getUser(): AppUser | null {&#10;    if (typeof window !== &quot;undefined&quot;) {&#10;      const userStr = localStorage.getItem(this.USER_KEY)&#10;      return userStr ? JSON.parse(userStr) : null&#10;    }&#10;    return null&#10;  }&#10;&#10;  static setUser(user: AppUser): void {&#10;    if (typeof window !== &quot;undefined&quot;) {&#10;      localStorage.setItem(this.USER_KEY, JSON.stringify(user))&#10;    }&#10;  }&#10;&#10;  static isAuthenticated(): boolean {&#10;    return !!this.getToken()&#10;  }&#10;&#10;  static hasRole(role: UserRole): boolean {&#10;    const user = this.getUser()&#10;    return user?.roles?.includes(role) ?? false&#10;  }&#10;&#10;  static getPrimaryRole(): UserRole | null {&#10;    const user = this.getUser()&#10;    if (!user?.roles || user.roles.length === 0) return null&#10;&#10;    const rolePriority = [UserRole.Admin, UserRole.Owner, UserRole.Employee, UserRole.Delivery, UserRole.Customer]&#10;&#10;    for (const role of rolePriority) {&#10;      if (user.roles.includes(role)) return role&#10;    }&#10;&#10;    return user.roles[0]&#10;  }&#10;&#10;  static getRedirectPath(): string {&#10;    const role = this.getPrimaryRole()&#10;&#10;    switch (role) {&#10;      case UserRole.Admin:&#10;        return &quot;/admin/dashboard&quot;&#10;      case UserRole.Owner:&#10;        return &quot;/owner/dashboard&quot;&#10;      case UserRole.Employee:&#10;        return &quot;/employee/dashboard&quot;&#10;      case UserRole.Delivery:&#10;        return &quot;/delivery/orders&quot;&#10;      case UserRole.Customer:&#10;      default:&#10;        return &quot;/customer/dashboard&quot;&#10;    }&#10;  }&#10;}&#10;" />
              <option name="updatedContent" value="import { type AppUser, type AuthResponse, UserRole } from &quot;@/types&quot;&#10;&#10;const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || &quot;http://localhost:5000/api&quot;&#10;&#10;export class AuthService {&#10;  private static TOKEN_KEY = &quot;auth_token&quot;&#10;  private static USER_KEY = &quot;auth_user&quot;&#10;&#10;  static async login(email: string, password: string): Promise&lt;AuthResponse&gt; {&#10;    try {&#10;      const response = await fetch(`${API_BASE_URL}/Account/login`, {&#10;        method: &quot;POST&quot;,&#10;        headers: {&#10;          &quot;Content-Type&quot;: &quot;application/json&quot;,&#10;        },&#10;        body: JSON.stringify({ Email: email, Password: password }),&#10;      })&#10;&#10;      if (!response.ok) {&#10;        const errorText = await response.text()&#10;        console.error(&quot;Login error response:&quot;, errorText)&#10;&#10;        try {&#10;          const error = JSON.parse(errorText)&#10;          // E-posta doğrulama hatası kontrolü&#10;          if (error.requiresEmailVerification || error.RequiresEmailVerification) {&#10;            const verificationError = new Error(error.message || error.Message || &quot;E-posta doğrulaması gerekli&quot;) as any&#10;            verificationError.requiresEmailVerification = true&#10;            throw verificationError&#10;          }&#10;          throw new Error(error.message || error.Message || &quot;Login failed&quot;)&#10;        } catch (e: any) {&#10;          if (e.requiresEmailVerification) {&#10;            throw e&#10;          }&#10;          throw new Error(&quot;Login failed&quot;)&#10;        }&#10;      }&#10;&#10;      const data = await response.json()&#10;&#10;      // Backend'den gelen response yapısı: { message, token, user: { id, userName, email, phoneNumber, employerRestaurantId, roles } }&#10;      const user: AppUser = {&#10;        id: data.user.id,&#10;        fullName: data.user.userName || data.user.email,&#10;        email: data.user.email,&#10;        phoneNumber: data.user.phoneNumber || &quot;&quot;,&#10;        employerRestaurantId: data.user.employerRestaurantId,&#10;        roles: data.user.roles?.map((role: string) =&gt; role as UserRole) || [UserRole.Customer],&#10;        createdAt: new Date().toISOString(),&#10;        isDeleted: false,&#10;      }&#10;&#10;      const authResponse: AuthResponse = {&#10;        token: data.token,&#10;        user,&#10;      }&#10;&#10;      this.setToken(authResponse.token)&#10;      this.setUser(authResponse.user)&#10;      return authResponse&#10;    } catch (error) {&#10;      console.error(&quot;Login error:&quot;, error)&#10;      throw error&#10;    }&#10;  }&#10;&#10;  static async register(&#10;    fullName: string,&#10;    email: string,&#10;    password: string,&#10;    phoneNumber?: string,&#10;    address?: string,&#10;  ): Promise&lt;AuthResponse&gt; {&#10;    try {&#10;      const requestBody = {&#10;        FullName: fullName,&#10;        Email: email,&#10;        Password: password,&#10;        ConfirmPassword: password,&#10;        Phone: phoneNumber || &quot;&quot;,&#10;        Address: address || &quot;&quot;,&#10;      }&#10;&#10;      console.log(&quot;Register request:&quot;, requestBody)&#10;&#10;      const response = await fetch(`${API_BASE_URL}/Account/register`, {&#10;        method: &quot;POST&quot;,&#10;        headers: {&#10;          &quot;Content-Type&quot;: &quot;application/json&quot;,&#10;        },&#10;        body: JSON.stringify(requestBody),&#10;      })&#10;&#10;      console.log(&quot;Register response status:&quot;, response.status)&#10;&#10;      if (!response.ok) {&#10;        const errorText = await response.text()&#10;        console.error(&quot;Register error response:&quot;, errorText)&#10;&#10;        try {&#10;          const error = JSON.parse(errorText)&#10;          throw new Error(error.message || error.title || &quot;Registration failed&quot;)&#10;        } catch (e) {&#10;          throw new Error(errorText || &quot;Registration failed&quot;)&#10;        }&#10;      }&#10;&#10;      const data = await response.json()&#10;      console.log(&quot;Register success response:&quot;, data)&#10;&#10;      // Backend'den gelen response yapısı: { message, token, user: { id, userName, email, firstName, lastName } }&#10;      const user: AppUser = {&#10;        id: data.user.id,&#10;        fullName: data.user.userName || fullName,&#10;        email: data.user.email,&#10;        phoneNumber: phoneNumber || &quot;&quot;,&#10;        roles: [UserRole.Customer], // Yeni kullanıcı default olarak Customer&#10;        createdAt: new Date().toISOString(),&#10;        isDeleted: false,&#10;      }&#10;&#10;      const authResponse: AuthResponse = {&#10;        token: data.token,&#10;        user,&#10;      }&#10;&#10;      this.setToken(authResponse.token)&#10;      this.setUser(authResponse.user)&#10;      return authResponse&#10;    } catch (error) {&#10;      console.error(&quot;Registration error:&quot;, error)&#10;      throw error&#10;    }&#10;  }&#10;&#10;  static logout(): void {&#10;    if (typeof window !== &quot;undefined&quot;) {&#10;      localStorage.removeItem(this.TOKEN_KEY)&#10;      localStorage.removeItem(this.USER_KEY)&#10;    }&#10;  }&#10;&#10;  static getToken(): string | null {&#10;    if (typeof window !== &quot;undefined&quot;) {&#10;      return localStorage.getItem(this.TOKEN_KEY)&#10;    }&#10;    return null&#10;  }&#10;&#10;  static setToken(token: string): void {&#10;    if (typeof window !== &quot;undefined&quot;) {&#10;      localStorage.setItem(this.TOKEN_KEY, token)&#10;    }&#10;  }&#10;&#10;  static getUser(): AppUser | null {&#10;    if (typeof window !== &quot;undefined&quot;) {&#10;      const userStr = localStorage.getItem(this.USER_KEY)&#10;      return userStr ? JSON.parse(userStr) : null&#10;    }&#10;    return null&#10;  }&#10;&#10;  static setUser(user: AppUser): void {&#10;    if (typeof window !== &quot;undefined&quot;) {&#10;      localStorage.setItem(this.USER_KEY, JSON.stringify(user))&#10;    }&#10;  }&#10;&#10;  static isAuthenticated(): boolean {&#10;    return !!this.getToken()&#10;  }&#10;&#10;  static hasRole(role: UserRole): boolean {&#10;    const user = this.getUser()&#10;    return user?.roles?.includes(role) ?? false&#10;  }&#10;&#10;  static getPrimaryRole(): UserRole | null {&#10;    const user = this.getUser()&#10;    if (!user?.roles || user.roles.length === 0) return null&#10;&#10;    const rolePriority = [UserRole.Admin, UserRole.Owner, UserRole.Employee, UserRole.Delivery, UserRole.Customer]&#10;&#10;    for (const role of rolePriority) {&#10;      if (user.roles.includes(role)) return role&#10;    }&#10;&#10;    return user.roles[0]&#10;  }&#10;&#10;  static getRedirectPath(): string {&#10;    const role = this.getPrimaryRole()&#10;&#10;    switch (role) {&#10;      case UserRole.Admin:&#10;        return &quot;/admin/dashboard&quot;&#10;      case UserRole.Owner:&#10;        return &quot;/owner/dashboard&quot;&#10;      case UserRole.Employee:&#10;        return &quot;/employee/dashboard&quot;&#10;      case UserRole.Delivery:&#10;        return &quot;/delivery/orders&quot;&#10;      case UserRole.Customer:&#10;      default:&#10;        return &quot;/customer/dashboard&quot;&#10;    }&#10;  }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/lib/employee-api.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/lib/employee-api.ts" />
              <option name="originalContent" value="import { ApiClient } from &quot;./api&quot;&#10;&#10;export interface Reservation {&#10;  id: string&#10;  restaurantId: string&#10;  restaurantName: string&#10;  customerId: string&#10;  customerName: string&#10;  customerEmail: string&#10;  tableId: string&#10;  tableNumber: number&#10;  reservationDate: string&#10;  numberOfGuests: number&#10;  specialRequests?: string&#10;  status: &quot;Pending&quot; | &quot;Confirmed&quot; | &quot;Cancelled&quot; | &quot;Completed&quot; | &quot;NoShow&quot;&#10;  createdAt: string&#10;}&#10;&#10;export interface Menu {&#10;  id: string&#10;  restaurantId: string&#10;  name: string&#10;  description?: string&#10;  isActive: boolean&#10;  createdAt: string&#10;}&#10;&#10;export interface MenuItem {&#10;  id: string&#10;  menuId: string&#10;  name: string&#10;  description?: string&#10;  price: number&#10;  category?: string&#10;  imageUrl?: string&#10;  isAvailable: boolean&#10;  preparationTime?: number&#10;}&#10;&#10;export interface Table {&#10;  id: string&#10;  restaurantId: string&#10;  tableNumber: number&#10;  capacity: number&#10;  location?: string&#10;  status: &quot;Available&quot; | &quot;Occupied&quot; | &quot;Reserved&quot; | &quot;OutOfService&quot;&#10;}&#10;&#10;export interface PaginatedResult&lt;T&gt; {&#10;  items: T[]&#10;  pageNumber: number&#10;  pageSize: number&#10;  totalCount: number&#10;  totalPages: number&#10;}&#10;&#10;export const employeeApi = {&#10;  // Reservation Management&#10;  reservations: {&#10;    getAll: (restaurantId: string, pageNumber = 1, pageSize = 10) =&gt;&#10;      ApiClient.get&lt;PaginatedResult&lt;Reservation&gt;&gt;(&#10;        `/Employee/restaurants/${restaurantId}/reservations?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`&#10;      ),&#10;&#10;    getByStatus: (restaurantId: string, status: string, pageNumber = 1, pageSize = 10) =&gt;&#10;      ApiClient.get&lt;PaginatedResult&lt;Reservation&gt;&gt;(&#10;        `/Employee/restaurants/${restaurantId}/reservations/status/${status}?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`&#10;      ),&#10;&#10;    getById: (reservationId: string) =&gt;&#10;      ApiClient.get&lt;Reservation&gt;(`/Employee/reservations/${reservationId}`),&#10;&#10;    updateStatus: (reservationId: string, newStatus: string) =&gt;&#10;      ApiClient.put&lt;Reservation&gt;(`/Employee/reservations/${reservationId}/status`, newStatus),&#10;&#10;    getActiveCount: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;{ activeReservations: number }&gt;(`/Employee/restaurants/${restaurantId}/reservations/active/count`),&#10;&#10;    getToday: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;Reservation[]&gt;(`/Employee/restaurants/${restaurantId}/reservations/today`),&#10;  },&#10;&#10;  // Menu Management&#10;  menus: {&#10;    getAll: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;Menu[]&gt;(`/Employee/restaurants/${restaurantId}/menus`),&#10;&#10;    getById: (menuId: string) =&gt;&#10;      ApiClient.get&lt;Menu&gt;(`/Employee/menus/${menuId}`),&#10;&#10;    create: (restaurantId: string, data: { name: string; description?: string; isActive: boolean }) =&gt;&#10;      ApiClient.post&lt;Menu&gt;(`/Employee/restaurants/${restaurantId}/menus`, data),&#10;&#10;    update: (menuId: string, data: { name: string; description?: string; isActive: boolean }) =&gt;&#10;      ApiClient.put&lt;Menu&gt;(`/Employee/menus/${menuId}`, data),&#10;&#10;    delete: (menuId: string) =&gt;&#10;      ApiClient.delete(`/Employee/menus/${menuId}`),&#10;  },&#10;&#10;  // Menu Items Management&#10;  menuItems: {&#10;    getAll: (menuId: string, pageNumber = 1, pageSize = 20) =&gt;&#10;      ApiClient.get&lt;PaginatedResult&lt;MenuItem&gt;&gt;(&#10;        `/Employee/menus/${menuId}/items?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`&#10;      ),&#10;&#10;    getById: (menuItemId: string) =&gt;&#10;      ApiClient.get&lt;MenuItem&gt;(`/Employee/menu-items/${menuItemId}`),&#10;&#10;    create: (menuId: string, data: Partial&lt;MenuItem&gt;) =&gt;&#10;      ApiClient.post&lt;MenuItem&gt;(`/Employee/menus/${menuId}/items`, data),&#10;&#10;    update: (menuItemId: string, data: Partial&lt;MenuItem&gt;) =&gt;&#10;      ApiClient.put&lt;MenuItem&gt;(`/Employee/menu-items/${menuItemId}`, data),&#10;&#10;    delete: (menuItemId: string) =&gt;&#10;      ApiClient.delete(`/Employee/menu-items/${menuItemId}`),&#10;&#10;    updateAvailability: (menuItemId: string, isAvailable: boolean) =&gt;&#10;      ApiClient.patch(`/Employee/menu-items/${menuItemId}/availability`, isAvailable),&#10;&#10;    getCount: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;{ count: number }&gt;(`/Employee/restaurants/${restaurantId}/menu-items/count`),&#10;  },&#10;&#10;  // Table Management&#10;  tables: {&#10;    getAll: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;Table[]&gt;(`/Employee/restaurants/${restaurantId}/tables`),&#10;&#10;    getById: (tableId: string) =&gt;&#10;      ApiClient.get&lt;Table&gt;(`/Employee/tables/${tableId}`),&#10;&#10;    create: (restaurantId: string, data: { tableNumber: number; capacity: number; location?: string; status: string }) =&gt;&#10;      ApiClient.post&lt;Table&gt;(`/Employee/restaurants/${restaurantId}/tables`, data),&#10;&#10;    update: (tableId: string, data: { tableNumber: number; capacity: number; location?: string; status: string }) =&gt;&#10;      ApiClient.put&lt;Table&gt;(`/Employee/tables/${tableId}`, data),&#10;&#10;    delete: (tableId: string) =&gt;&#10;      ApiClient.delete(`/Employee/tables/${tableId}`),&#10;&#10;    updateStatus: (tableId: string, newStatus: string) =&gt;&#10;      ApiClient.patch&lt;Table&gt;(`/Employee/tables/${tableId}/status`, newStatus),&#10;&#10;    getAvailableCount: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;{ count: number }&gt;(`/Employee/restaurants/${restaurantId}/tables/available/count`),&#10;  },&#10;}&#10;&#10;" />
              <option name="updatedContent" value="import { ApiClient } from &quot;./api&quot;&#10;&#10;export interface Reservation {&#10;  id: string&#10;  restaurantId: string&#10;  restaurantName: string&#10;  customerId: string&#10;  customerName: string&#10;  customerEmail: string&#10;  tableId: string&#10;  tableNumber: number&#10;  reservationDate: string&#10;  numberOfGuests: number&#10;  specialRequests?: string&#10;  status: &quot;Pending&quot; | &quot;Confirmed&quot; | &quot;Cancelled&quot; | &quot;Completed&quot; | &quot;NoShow&quot;&#10;  createdAt: string&#10;}&#10;&#10;export interface MenuItem {&#10;  id: string&#10;  menuId: string&#10;  name: string&#10;  description?: string&#10;  price: number&#10;  category?: string&#10;  imageUrl?: string&#10;  isAvailable: boolean&#10;  preparationTime?: number&#10;}&#10;&#10;export interface Table {&#10;  id: string&#10;  restaurantId: string&#10;  tableNumber: number&#10;  capacity: number&#10;  location?: string&#10;  status: &quot;Available&quot; | &quot;Occupied&quot; | &quot;Reserved&quot; | &quot;OutOfService&quot;&#10;}&#10;&#10;export interface Menu {&#10;  id: string&#10;  restaurantId: string&#10;  name: string&#10;  description?: string&#10;  isActive?: boolean&#10;  createdAt?: string&#10;  menuItems?: MenuItem[]&#10;}&#10;&#10;export interface PaginatedResult&lt;T&gt; {&#10;  items: T[]&#10;  pageNumber: number&#10;  pageSize: number&#10;  totalCount: number&#10;  totalPages: number&#10;}&#10;&#10;export const employeeApi = {&#10;  // Reservation Management&#10;  reservations: {&#10;    getAll: (restaurantId: string, pageNumber = 1, pageSize = 10) =&gt;&#10;      ApiClient.get&lt;PaginatedResult&lt;Reservation&gt;&gt;(&#10;        `/Employee/restaurants/${restaurantId}/reservations?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`&#10;      ),&#10;&#10;    getByStatus: (restaurantId: string, status: string, pageNumber = 1, pageSize = 10) =&gt;&#10;      ApiClient.get&lt;PaginatedResult&lt;Reservation&gt;&gt;(&#10;        `/Employee/restaurants/${restaurantId}/reservations/status/${status}?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`&#10;      ),&#10;&#10;    getById: (reservationId: string) =&gt;&#10;      ApiClient.get&lt;Reservation&gt;(`/Employee/reservations/${reservationId}`),&#10;&#10;    updateStatus: (reservationId: string, newStatus: string) =&gt;&#10;      ApiClient.put&lt;Reservation&gt;(`/Employee/reservations/${reservationId}/status`, newStatus),&#10;&#10;    getActiveCount: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;{ activeReservations: number }&gt;(`/Employee/restaurants/${restaurantId}/reservations/active/count`),&#10;&#10;    getToday: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;Reservation[]&gt;(`/Employee/restaurants/${restaurantId}/reservations/today`),&#10;  },&#10;&#10;  // Menu Management&#10;  menus: {&#10;    getAll: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;Menu[]&gt;(`/Employee/restaurants/${restaurantId}/menus`),&#10;&#10;    getById: (menuId: string) =&gt;&#10;      ApiClient.get&lt;Menu&gt;(`/Employee/menus/${menuId}`),&#10;&#10;    create: (restaurantId: string, data: { name: string; description?: string; isActive: boolean }) =&gt;&#10;      ApiClient.post&lt;Menu&gt;(`/Employee/restaurants/${restaurantId}/menus`, data),&#10;&#10;    update: (menuId: string, data: { name: string; description?: string; isActive: boolean }) =&gt;&#10;      ApiClient.put&lt;Menu&gt;(`/Employee/menus/${menuId}`, data),&#10;&#10;    delete: (menuId: string) =&gt;&#10;      ApiClient.delete(`/Employee/menus/${menuId}`),&#10;  },&#10;&#10;  // Menu Items Management&#10;  menuItems: {&#10;    getAll: (menuId: string, pageNumber = 1, pageSize = 20) =&gt;&#10;      ApiClient.get&lt;PaginatedResult&lt;MenuItem&gt;&gt;(&#10;        `/Employee/menus/${menuId}/items?pageNumber=${pageNumber}&amp;pageSize=${pageSize}`&#10;      ),&#10;&#10;    getById: (menuItemId: string) =&gt;&#10;      ApiClient.get&lt;MenuItem&gt;(`/Employee/menu-items/${menuItemId}`),&#10;&#10;    create: (menuId: string, data: Partial&lt;MenuItem&gt;) =&gt;&#10;      ApiClient.post&lt;MenuItem&gt;(`/Employee/menus/${menuId}/items`, data),&#10;&#10;    update: (menuItemId: string, data: Partial&lt;MenuItem&gt;) =&gt;&#10;      ApiClient.put&lt;MenuItem&gt;(`/Employee/menu-items/${menuItemId}`, data),&#10;&#10;    delete: (menuItemId: string) =&gt;&#10;      ApiClient.delete(`/Employee/menu-items/${menuItemId}`),&#10;&#10;    updateAvailability: (menuItemId: string, isAvailable: boolean) =&gt;&#10;      ApiClient.patch(`/Employee/menu-items/${menuItemId}/availability`, isAvailable),&#10;&#10;    getCount: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;{ count: number }&gt;(`/Employee/restaurants/${restaurantId}/menu-items/count`),&#10;  },&#10;&#10;  // Table Management&#10;  tables: {&#10;    getAll: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;Table[]&gt;(`/Employee/restaurants/${restaurantId}/tables`),&#10;&#10;    getById: (tableId: string) =&gt;&#10;      ApiClient.get&lt;Table&gt;(`/Employee/tables/${tableId}`),&#10;&#10;    create: (restaurantId: string, data: { tableNumber: number; capacity: number; location?: string; status: string }) =&gt;&#10;      ApiClient.post&lt;Table&gt;(`/Employee/restaurants/${restaurantId}/tables`, data),&#10;&#10;    update: (tableId: string, data: { tableNumber: number; capacity: number; location?: string; status: string }) =&gt;&#10;      ApiClient.put&lt;Table&gt;(`/Employee/tables/${tableId}`, data),&#10;&#10;    delete: (tableId: string) =&gt;&#10;      ApiClient.delete(`/Employee/tables/${tableId}`),&#10;&#10;    updateStatus: (tableId: string, newStatus: string) =&gt;&#10;      ApiClient.patch&lt;Table&gt;(`/Employee/tables/${tableId}/status`, newStatus),&#10;&#10;    getAvailableCount: (restaurantId: string) =&gt;&#10;      ApiClient.get&lt;{ count: number }&gt;(`/Employee/restaurants/${restaurantId}/tables/available/count`),&#10;  },&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Domain.Models.Common;&#10;&#10;public class TopSellingItemDto&#10;{&#10;    public string MenuItemId { get; set; } = string.Empty;&#10;    public string MenuItemName { get; set; } = string.Empty;&#10;    public int QuantitySold { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/AccountService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/AccountService.cs" />
              <option name="originalContent" value="using AutoMapper;&#10;using Microsoft.AspNetCore.Identity;&#10;using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Infrastructure.Services;&#10;&#10;public class AccountService(&#10;    IAppDbContext _context,&#10;    UserManager&lt;AppUser&gt; _userManager,&#10;    IMapper _mapper,&#10;    IEmailService _emailService,&#10;    IJwtTokenService _jwtTokenService) : IAccountService&#10;{&#10;    public async Task CreateApplicationAsync(OwnershipApplication application)&#10;    {&#10;        try&#10;        {&#10;            _context.OwnershipApplications.Add(application);&#10;            await _context.SaveChangesAsync();&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            var detailedError = $&quot;CreateApplicationAsync Error: {ex.Message}&quot;;&#10;            if (ex.InnerException != null)&#10;            {&#10;                detailedError += $&quot; | Inner: {ex.InnerException.Message}&quot;;&#10;            }&#10;            throw new Exception(detailedError, ex);&#10;        }&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message, string? UserId, string? Email, IEnumerable&lt;string&gt; Errors)&gt; RegisterUserAsync(&#10;        UserRegisterDto userRegisterDto, string verificationLink)&#10;    {&#10;        var errors = new List&lt;string&gt;();&#10;&#10;        var existingUserByUsername = await _userManager.FindByNameAsync(userRegisterDto.Username);&#10;        if (existingUserByUsername != null)&#10;        {&#10;            errors.Add(&quot;This username is already in use&quot;);&#10;            return (false, &quot;Registration failed&quot;, null, null, errors);&#10;        }&#10;        &#10;        var existingUserByEmail = await _userManager.FindByEmailAsync(userRegisterDto.Email);&#10;        if (existingUserByEmail != null)&#10;        {&#10;            if (existingUserByEmail.IsDeleted)&#10;            {&#10;                errors.Add(&quot;This email address belongs to a deleted account. Please use a different email or contact support.&quot;);&#10;                return (false, &quot;Registration failed&quot;, null, null, errors);&#10;            }&#10;            errors.Add(&quot;This email address is already in use&quot;);&#10;            return (false, &quot;Registration failed&quot;, null, null, errors);&#10;        }&#10;&#10;        var user = _mapper.Map&lt;AppUser&gt;(userRegisterDto);&#10;&#10;        var result = await _userManager.CreateAsync(user, userRegisterDto.Password);&#10;        if (!result.Succeeded)&#10;        {&#10;            errors.AddRange(result.Errors.Select(e =&gt; e.Description));&#10;            return (false, &quot;Registration failed&quot;, null, null, errors);&#10;        }&#10;&#10;        await _userManager.AddToRoleAsync(user, &quot;Customer&quot;);&#10;        &#10;        return (true, &quot;Registration successful! Please check your email and verify your account.&quot;, user.Id, user.Email, errors);&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message)&gt; VerifyEmailAsync(string userId, string token)&#10;    {&#10;        if (string.IsNullOrEmpty(userId) || string.IsNullOrEmpty(token))&#10;        {&#10;            return (false, &quot;Invalid verification link&quot;);&#10;        }&#10;&#10;        var user = await _userManager.FindByIdAsync(userId);&#10;        if (user == null)&#10;        {&#10;            return (false, &quot;User not found&quot;);&#10;        }&#10;&#10;        if (user.EmailConfirmed)&#10;        {&#10;            return (true, &quot;Email already verified&quot;);&#10;        }&#10;&#10;        var result = await _userManager.ConfirmEmailAsync(user, token);&#10;        if (result.Succeeded)&#10;        {&#10;            return (true, &quot;Email verified successfully&quot;);&#10;        }&#10;&#10;        return (false, &quot;Email verification failed&quot;);&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message)&gt; ResendVerificationEmailAsync(string email, string verificationLink)&#10;    {&#10;        var user = await _userManager.FindByEmailAsync(email);&#10;        if (user == null)&#10;        {&#10;            return (false, &quot;User not found&quot;);&#10;        }&#10;&#10;        if (user.EmailConfirmed)&#10;        {&#10;            return (false, &quot;Email address is already verified&quot;);&#10;        }&#10;&#10;        try&#10;        {&#10;            await _emailService.SendEmailVerificationAsync(user.Email!, user.UserName!, verificationLink);&#10;            return (true, &quot;Verification email has been resent&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return (false, $&quot;Email could not be sent: {ex.Message}&quot;);&#10;        }&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message, string? Token, object? User, bool RequiresEmailVerification)&gt; LoginAsync(&#10;        UserLoginDto userLoginDto)&#10;    {&#10;        var user = await _userManager.FindByEmailAsync(userLoginDto.Email);&#10;        if (user == null)&#10;        {&#10;            return (false, &quot;Invalid email or password&quot;, null, null, false);&#10;        }&#10;&#10;        if (!user.EmailConfirmed)&#10;        {&#10;            return (false, &quot;Please verify your email address first&quot;, null, &#10;                new { user.Email }, true);&#10;        }&#10;        &#10;        var isPasswordValid = await _userManager.CheckPasswordAsync(user, userLoginDto.Password);&#10;        if (!isPasswordValid)&#10;        {&#10;            return (false, &quot;Invalid email or password&quot;, null, null, false);&#10;        }&#10;&#10;        var token = await _jwtTokenService.GenerateTokenAsync(user);&#10;        var roles = await _userManager.GetRolesAsync(user);&#10;&#10;        var userInfo = new&#10;        {&#10;            user.Id,&#10;            user.UserName,&#10;            user.Email,&#10;            Roles = roles&#10;        };&#10;&#10;        return (true, &quot;Login successful&quot;, token, userInfo, false);&#10;    }&#10;&#10;    public Task LogoutAsync()&#10;    {&#10;        return Task.CompletedTask;&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message)&gt; ForgotPasswordAsync(string email, string resetLink)&#10;    {&#10;        var user = await _userManager.FindByEmailAsync(email);&#10;        if (user == null || !(await _userManager.IsEmailConfirmedAsync(user)))&#10;        {&#10;            return (true, &quot;If an account is registered with this email address, password reset instructions have been sent.&quot;);&#10;        }&#10;&#10;        try&#10;        {&#10;            await _emailService.SendPasswordResetAsync(user.Email!, user.UserName!, resetLink);&#10;        }&#10;        catch (Exception)&#10;        {&#10;          &#10;        }&#10;&#10;        return (true, &quot;If an account is registered with this email address, password reset instructions have been sent.&quot;);&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message)&gt; ResetPasswordAsync(ResetPasswordDto resetPasswordDto)&#10;    {&#10;        var user = await _userManager.FindByIdAsync(resetPasswordDto.UserId);&#10;        if (user == null)&#10;        {&#10;            return (false, &quot;Invalid user&quot;);&#10;        }&#10;&#10;        var isSamePassword = await _userManager.CheckPasswordAsync(user, resetPasswordDto.Password);&#10;        if (isSamePassword)&#10;        {&#10;            return (false, &quot;New password cannot be the same as the old one.&quot;);&#10;        }&#10;&#10;        var result = await _userManager.ResetPasswordAsync(user, resetPasswordDto.Token, resetPasswordDto.Password);&#10;        if (result.Succeeded)&#10;        {&#10;            return (true, &quot;Your password has been reset successfully&quot;);&#10;        }&#10;&#10;        return (false, &quot;Password reset failed. The link may have expired.&quot;);&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message, IEnumerable&lt;string&gt; Errors)&gt; ChangePasswordAsync(&#10;        string userId, ChangePasswordDto changePasswordDto)&#10;    {&#10;        var errors = new List&lt;string&gt;();&#10;        &#10;        var user = await _userManager.FindByIdAsync(userId);&#10;        if (user == null)&#10;        {&#10;            errors.Add(&quot;User not found&quot;);&#10;            return (false, &quot;User not found&quot;, errors);&#10;        }&#10;&#10;        var isCurrentPasswordCorrect = await _userManager.CheckPasswordAsync(user, changePasswordDto.CurrentPassword);&#10;        if (!isCurrentPasswordCorrect)&#10;        {&#10;            errors.Add(&quot;Your current password is incorrect&quot;);&#10;            return (false, &quot;Current password is incorrect&quot;, errors);&#10;        }&#10;&#10;        var isSamePassword = await _userManager.CheckPasswordAsync(user, changePasswordDto.NewPassword);&#10;        if (isSamePassword)&#10;        {&#10;            errors.Add(&quot;New password cannot be the same as your current password&quot;);&#10;            return (false, &quot;New password cannot be the same&quot;, errors);&#10;        }&#10;&#10;        var result = await _userManager.ChangePasswordAsync(user, changePasswordDto.CurrentPassword, changePasswordDto.NewPassword);&#10;        if (result.Succeeded)&#10;        {&#10;            return (true, &quot;Your password has been changed successfully&quot;, errors);&#10;        }&#10;&#10;        errors.AddRange(result.Errors.Select(e =&gt; e.Description));&#10;        return (false, &quot;Password change failed&quot;, errors);&#10;    }&#10;&#10;    public async Task&lt;(bool Success, object? Profile, string Message)&gt; GetUserProfileAsync(string userId)&#10;    {&#10;        var user = await _userManager.FindByIdAsync(userId);&#10;        if (user == null)&#10;        {&#10;            return (false, null, &quot;User not found&quot;);&#10;        }&#10;&#10;        var roles = await _userManager.GetRolesAsync(user);&#10;&#10;        var profile = new&#10;        {&#10;            user.Id,&#10;            user.FirstName,&#10;            user.LastName,&#10;            user.FullName,&#10;            user.UserName,&#10;            user.Email,&#10;            user.EmailConfirmed,&#10;            user.Phone,&#10;            user.Address,&#10;            Roles = roles&#10;        };&#10;&#10;        return (true, profile, &quot;Profile retrieved successfully&quot;);&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message, bool EmailChanged, IEnumerable&lt;string&gt; Errors)&gt; UpdateUserProfileAsync(&#10;        string userId, UserProfileDto userProfileDto, string? verificationLink)&#10;    {&#10;        var errors = new List&lt;string&gt;();&#10;        var user = await _userManager.FindByIdAsync(userId);&#10;        &#10;        if (user == null)&#10;        {&#10;            errors.Add(&quot;User not found&quot;);&#10;            return (false, &quot;User not found&quot;, false, errors);&#10;        }&#10;&#10;        bool emailChanged = false;&#10;        &#10;        if (!string.IsNullOrWhiteSpace(userProfileDto.FirstName))&#10;        {&#10;            user.FirstName = userProfileDto.FirstName.Trim();&#10;        }&#10;&#10;        if (!string.IsNullOrWhiteSpace(userProfileDto.LastName))&#10;        {&#10;            user.LastName = userProfileDto.LastName.Trim();&#10;        }&#10;&#10;        user.FullName = $&quot;{user.FirstName} {user.LastName}&quot;.Trim();&#10;        &#10;        if (!string.IsNullOrWhiteSpace(userProfileDto.UserName) &amp;&amp;&#10;            !string.Equals(user.UserName, userProfileDto.UserName, StringComparison.OrdinalIgnoreCase))&#10;        {&#10;            var existingByUsername = await _userManager.FindByNameAsync(userProfileDto.UserName);&#10;            if (existingByUsername != null &amp;&amp; existingByUsername.Id != user.Id)&#10;            {&#10;                errors.Add(&quot;This username is already in use&quot;);&#10;                return (false, &quot;Username is already in use&quot;, false, errors);&#10;            }&#10;&#10;            user.UserName = userProfileDto.UserName;&#10;        }&#10;        &#10;        if (!string.IsNullOrWhiteSpace(userProfileDto.Email) &amp;&amp;&#10;            !string.Equals(user.Email, userProfileDto.Email, StringComparison.OrdinalIgnoreCase))&#10;        {&#10;            var existingByEmail = await _userManager.FindByEmailAsync(userProfileDto.Email);&#10;            if (existingByEmail != null &amp;&amp; existingByEmail.Id != user.Id)&#10;            {&#10;                errors.Add(&quot;This email address is already in use&quot;);&#10;                return (false, &quot;Email is already in use&quot;, false, errors);&#10;            }&#10;&#10;            user.Email = userProfileDto.Email;&#10;            user.EmailConfirmed = false;&#10;            emailChanged = true;&#10;        }&#10;&#10;        user.Phone = userProfileDto.Phone ?? user.Phone;&#10;        user.Address = userProfileDto.Address ?? user.Address;&#10;&#10;        var updateResult = await _userManager.UpdateAsync(user);&#10;        if (!updateResult.Succeeded)&#10;        {&#10;            errors.AddRange(updateResult.Errors.Select(e =&gt; e.Description));&#10;            return (false, &quot;Profile update failed&quot;, false, errors);&#10;        }&#10;        &#10;        if (emailChanged &amp;&amp; !string.IsNullOrEmpty(verificationLink))&#10;        {&#10;            try&#10;            {&#10;                await _emailService.SendEmailVerificationAsync(user.Email!, user.UserName!, verificationLink);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return (true, &quot;Profile updated but verification email could not be sent.&quot;, true, new[] { ex.Message });&#10;            }&#10;        }&#10;&#10;        return (true, emailChanged ? &quot;Profile updated. Please verify your new email address.&quot; : &quot;Profile updated.&quot;, emailChanged, errors);&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message, string? DeletionLink)&gt; RequestAccountDeletionAsync(&#10;        string userId, string deletionLink)&#10;    {&#10;        var user = await _userManager.FindByIdAsync(userId);&#10;        if (user == null)&#10;        {&#10;            return (false, &quot;User not found&quot;, null);&#10;        }&#10;&#10;        try&#10;        {&#10;            await _emailService.SendAccountDeletionConfirmationAsync(&#10;                user.Email!,&#10;                user.UserName!,&#10;                deletionLink);&#10;&#10;            return (true, &quot;We have sent a confirmation link to your email address for account deletion.&quot;, deletionLink);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return (false, $&quot;Email could not be sent: {ex.Message}&quot;, null);&#10;        }&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message)&gt; ConfirmAccountDeletionAsync(string userId, string token)&#10;    {&#10;        if (string.IsNullOrEmpty(userId) || string.IsNullOrEmpty(token))&#10;        {&#10;            return (false, &quot;Invalid deletion link&quot;);&#10;        }&#10;&#10;        var user = await _userManager.FindByIdAsync(userId);&#10;        if (user == null)&#10;        {&#10;            return (false, &quot;User not found&quot;);&#10;        }&#10;&#10;        var isValidToken = await _userManager.VerifyUserTokenAsync(&#10;            user,&#10;            TokenOptions.DefaultProvider,&#10;            &quot;AccountDeletion&quot;,&#10;            token);&#10;&#10;        if (!isValidToken)&#10;        {&#10;            return (false, &quot;Invalid or expired token&quot;);&#10;        }&#10;&#10;        user.IsDeleted = true;&#10;        var result = await _userManager.UpdateAsync(user);&#10;&#10;        if (result.Succeeded)&#10;        {&#10;            return (true, &quot;Account deleted successfully&quot;);&#10;        }&#10;&#10;        return (false, &quot;Account deletion failed&quot;);&#10;    }&#10;&#10;    public async Task&lt;(bool Success, string Message)&gt; ApplyForRestaurantOwnershipAsync(&#10;        string userId, OwnershipApplicationDto applicationDto)&#10;    {&#10;        try&#10;        {&#10;            var user = await _userManager.FindByIdAsync(userId);&#10;            if (user == null)&#10;            {&#10;                return (false, &quot;User not found&quot;);&#10;            }&#10;&#10;            var hasPendingApplication = await _context.OwnershipApplications&#10;                .AnyAsync(a =&gt; a.UserId == userId &amp;&amp; a.Status == ApplicationStatus.Pending);&#10;&#10;            if (hasPendingApplication)&#10;            {&#10;                return (false, &quot;You already have a pending application.&quot;);&#10;            }&#10;&#10;            if (string.IsNullOrEmpty(applicationDto.ImageUrl))&#10;            {&#10;                return (false, &quot;Restaurant image is required.&quot;);&#10;            }&#10;&#10;            var application = new OwnershipApplication&#10;            {&#10;                UserId = userId,&#10;                BusinessName = applicationDto.BusinessName,&#10;                BusinessDescription = applicationDto.BusinessDescription,&#10;                BusinessAddress = applicationDto.BusinessAddress,&#10;                BusinessPhone = applicationDto.BusinessPhone,&#10;                BusinessEmail = applicationDto.BusinessEmail,&#10;                Category = applicationDto.Category,&#10;                AdditionalNotes = applicationDto.AdditionalNotes,&#10;                ImageUrl = applicationDto.ImageUrl,&#10;                ApplicationDate = DateTime.UtcNow,&#10;                Status = ApplicationStatus.Pending&#10;            };&#10;&#10;            await CreateApplicationAsync(application);&#10;&#10;            return (true, &quot;Your restaurant ownership application has been received and will be reviewed.&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            // Detaylı hata mesajı döndür&#10;            return (false, $&quot;Error: {ex.Message} - Inner: {ex.InnerException?.Message}&quot;);&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using AutoMapper;&#13;&#10;using Microsoft.AspNetCore.Identity;&#13;&#10;using Microsoft.EntityFrameworkCore;&#13;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#13;&#10;using RestaurantManagment.Application.Common.Interfaces;&#13;&#10;using RestaurantManagment.Domain.Models;&#13;&#10;&#13;&#10;namespace RestaurantManagment.Infrastructure.Services;&#13;&#10;&#13;&#10;public class AccountService(&#13;&#10;    IAppDbContext _context,&#13;&#10;    UserManager&lt;AppUser&gt; _userManager,&#13;&#10;    IMapper _mapper,&#13;&#10;    IEmailService _emailService,&#13;&#10;    IJwtTokenService _jwtTokenService) : IAccountService&#13;&#10;{&#13;&#10;    public async Task CreateApplicationAsync(OwnershipApplication application)&#13;&#10;    {&#13;&#10;        try&#13;&#10;        {&#13;&#10;            _context.OwnershipApplications.Add(application);&#13;&#10;            await _context.SaveChangesAsync();&#13;&#10;        }&#13;&#10;        catch (Exception ex)&#13;&#10;        {&#13;&#10;            var detailedError = $&quot;CreateApplicationAsync Error: {ex.Message}&quot;;&#13;&#10;            if (ex.InnerException != null)&#13;&#10;            {&#13;&#10;                detailedError += $&quot; | Inner: {ex.InnerException.Message}&quot;;&#13;&#10;            }&#13;&#10;            throw new Exception(detailedError, ex);&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message, string? UserId, string? Email, IEnumerable&lt;string&gt; Errors)&gt; RegisterUserAsync(&#13;&#10;        UserRegisterDto userRegisterDto, string verificationLink)&#13;&#10;    {&#13;&#10;        var errors = new List&lt;string&gt;();&#13;&#10;&#13;&#10;        var existingUserByUsername = await _userManager.FindByNameAsync(userRegisterDto.Username);&#13;&#10;        if (existingUserByUsername != null)&#13;&#10;        {&#13;&#10;            errors.Add(&quot;This username is already in use&quot;);&#13;&#10;            return (false, &quot;Registration failed&quot;, null, null, errors);&#13;&#10;        }&#13;&#10;        &#13;&#10;        var existingUserByEmail = await _userManager.FindByEmailAsync(userRegisterDto.Email);&#13;&#10;        if (existingUserByEmail != null)&#13;&#10;        {&#13;&#10;            if (existingUserByEmail.IsDeleted)&#13;&#10;            {&#13;&#10;                errors.Add(&quot;This email address belongs to a deleted account. Please use a different email or contact support.&quot;);&#13;&#10;                return (false, &quot;Registration failed&quot;, null, null, errors);&#13;&#10;            }&#13;&#10;            errors.Add(&quot;This email address is already in use&quot;);&#13;&#10;            return (false, &quot;Registration failed&quot;, null, null, errors);&#13;&#10;        }&#13;&#10;&#13;&#10;        var user = _mapper.Map&lt;AppUser&gt;(userRegisterDto);&#13;&#10;&#13;&#10;        var result = await _userManager.CreateAsync(user, userRegisterDto.Password);&#13;&#10;        if (!result.Succeeded)&#13;&#10;        {&#13;&#10;            errors.AddRange(result.Errors.Select(e =&gt; e.Description));&#13;&#10;            return (false, &quot;Registration failed&quot;, null, null, errors);&#13;&#10;        }&#13;&#10;&#13;&#10;        await _userManager.AddToRoleAsync(user, &quot;Customer&quot;);&#13;&#10;        &#13;&#10;        return (true, &quot;Registration successful! Please check your email and verify your account.&quot;, user.Id, user.Email, errors);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message)&gt; VerifyEmailAsync(string userId, string token)&#13;&#10;    {&#13;&#10;        if (string.IsNullOrEmpty(userId) || string.IsNullOrEmpty(token))&#13;&#10;        {&#13;&#10;            return (false, &quot;Invalid verification link&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        var user = await _userManager.FindByIdAsync(userId);&#13;&#10;        if (user == null)&#13;&#10;        {&#13;&#10;            return (false, &quot;User not found&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        if (user.EmailConfirmed)&#13;&#10;        {&#13;&#10;            return (true, &quot;Email already verified&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        var result = await _userManager.ConfirmEmailAsync(user, token);&#13;&#10;        if (result.Succeeded)&#13;&#10;        {&#13;&#10;            return (true, &quot;Email verified successfully&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        return (false, &quot;Email verification failed&quot;);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message)&gt; ResendVerificationEmailAsync(string email, string verificationLink)&#13;&#10;    {&#13;&#10;        var user = await _userManager.FindByEmailAsync(email);&#13;&#10;        if (user == null)&#13;&#10;        {&#13;&#10;            return (false, &quot;User not found&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        if (user.EmailConfirmed)&#13;&#10;        {&#13;&#10;            return (false, &quot;Email address is already verified&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        try&#13;&#10;        {&#13;&#10;            await _emailService.SendEmailVerificationAsync(user.Email!, user.UserName!, verificationLink);&#13;&#10;            return (true, &quot;Verification email has been resent&quot;);&#13;&#10;        }&#13;&#10;        catch (Exception ex)&#13;&#10;        {&#13;&#10;            return (false, $&quot;Email could not be sent: {ex.Message}&quot;);&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message, string? Token, object? User, bool RequiresEmailVerification)&gt; LoginAsync(&#13;&#10;        UserLoginDto userLoginDto)&#13;&#10;    {&#13;&#10;        var user = await _userManager.FindByEmailAsync(userLoginDto.Email);&#13;&#10;        if (user == null)&#13;&#10;        {&#13;&#10;            return (false, &quot;Invalid email or password&quot;, null, null, false);&#13;&#10;        }&#13;&#10;&#13;&#10;        if (!user.EmailConfirmed)&#13;&#10;        {&#13;&#10;            return (false, &quot;Please verify your email address first&quot;, null, &#13;&#10;                new { user.Email }, true);&#13;&#10;        }&#13;&#10;        &#13;&#10;        var isPasswordValid = await _userManager.CheckPasswordAsync(user, userLoginDto.Password);&#13;&#10;        if (!isPasswordValid)&#13;&#10;        {&#13;&#10;            return (false, &quot;Invalid email or password&quot;, null, null, false);&#13;&#10;        }&#13;&#10;&#13;&#10;        var token = await _jwtTokenService.GenerateTokenAsync(user);&#13;&#10;        var roles = await _userManager.GetRolesAsync(user);&#13;&#10;&#13;&#10;        var userInfo = new&#13;&#10;        {&#13;&#10;            user.Id,&#13;&#10;            user.UserName,&#13;&#10;            user.Email,&#13;&#10;            user.PhoneNumber,&#13;&#10;            user.EmployerRestaurantId,&#13;&#10;            Roles = roles&#13;&#10;        };&#13;&#10;&#13;&#10;        return (true, &quot;Login successful&quot;, token, userInfo, false);&#13;&#10;    }&#13;&#10;&#13;&#10;    public Task LogoutAsync()&#13;&#10;    {&#13;&#10;        return Task.CompletedTask;&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message)&gt; ForgotPasswordAsync(string email, string resetLink)&#13;&#10;    {&#13;&#10;        var user = await _userManager.FindByEmailAsync(email);&#13;&#10;        if (user == null || !(await _userManager.IsEmailConfirmedAsync(user)))&#13;&#10;        {&#13;&#10;            return (true, &quot;If an account is registered with this email address, password reset instructions have been sent.&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        try&#13;&#10;        {&#13;&#10;            await _emailService.SendPasswordResetAsync(user.Email!, user.UserName!, resetLink);&#13;&#10;        }&#13;&#10;        catch (Exception)&#13;&#10;        {&#13;&#10;          &#13;&#10;        }&#13;&#10;&#13;&#10;        return (true, &quot;If an account is registered with this email address, password reset instructions have been sent.&quot;);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message)&gt; ResetPasswordAsync(ResetPasswordDto resetPasswordDto)&#13;&#10;    {&#13;&#10;        var user = await _userManager.FindByIdAsync(resetPasswordDto.UserId);&#13;&#10;        if (user == null)&#13;&#10;        {&#13;&#10;            return (false, &quot;Invalid user&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        var isSamePassword = await _userManager.CheckPasswordAsync(user, resetPasswordDto.Password);&#13;&#10;        if (isSamePassword)&#13;&#10;        {&#13;&#10;            return (false, &quot;New password cannot be the same as the old one.&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        var result = await _userManager.ResetPasswordAsync(user, resetPasswordDto.Token, resetPasswordDto.Password);&#13;&#10;        if (result.Succeeded)&#13;&#10;        {&#13;&#10;            return (true, &quot;Your password has been reset successfully&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        return (false, &quot;Password reset failed. The link may have expired.&quot;);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message, IEnumerable&lt;string&gt; Errors)&gt; ChangePasswordAsync(&#13;&#10;        string userId, ChangePasswordDto changePasswordDto)&#13;&#10;    {&#13;&#10;        var errors = new List&lt;string&gt;();&#13;&#10;        &#13;&#10;        var user = await _userManager.FindByIdAsync(userId);&#13;&#10;        if (user == null)&#13;&#10;        {&#13;&#10;            errors.Add(&quot;User not found&quot;);&#13;&#10;            return (false, &quot;User not found&quot;, errors);&#13;&#10;        }&#13;&#10;&#13;&#10;        var isCurrentPasswordCorrect = await _userManager.CheckPasswordAsync(user, changePasswordDto.CurrentPassword);&#13;&#10;        if (!isCurrentPasswordCorrect)&#13;&#10;        {&#13;&#10;            errors.Add(&quot;Your current password is incorrect&quot;);&#13;&#10;            return (false, &quot;Current password is incorrect&quot;, errors);&#13;&#10;        }&#13;&#10;&#13;&#10;        var isSamePassword = await _userManager.CheckPasswordAsync(user, changePasswordDto.NewPassword);&#13;&#10;        if (isSamePassword)&#13;&#10;        {&#13;&#10;            errors.Add(&quot;New password cannot be the same as your current password&quot;);&#13;&#10;            return (false, &quot;New password cannot be the same&quot;, errors);&#13;&#10;        }&#13;&#10;&#13;&#10;        var result = await _userManager.ChangePasswordAsync(user, changePasswordDto.CurrentPassword, changePasswordDto.NewPassword);&#13;&#10;        if (result.Succeeded)&#13;&#10;        {&#13;&#10;            return (true, &quot;Your password has been changed successfully&quot;, errors);&#13;&#10;        }&#13;&#10;&#13;&#10;        errors.AddRange(result.Errors.Select(e =&gt; e.Description));&#13;&#10;        return (false, &quot;Password change failed&quot;, errors);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, object? Profile, string Message)&gt; GetUserProfileAsync(string userId)&#13;&#10;    {&#13;&#10;        var user = await _userManager.FindByIdAsync(userId);&#13;&#10;        if (user == null)&#13;&#10;        {&#13;&#10;            return (false, null, &quot;User not found&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        var roles = await _userManager.GetRolesAsync(user);&#13;&#10;&#13;&#10;        var profile = new&#13;&#10;        {&#13;&#10;            user.Id,&#13;&#10;            user.FirstName,&#13;&#10;            user.LastName,&#13;&#10;            user.FullName,&#13;&#10;            user.UserName,&#13;&#10;            user.Email,&#13;&#10;            user.EmailConfirmed,&#13;&#10;            user.Phone,&#13;&#10;            user.Address,&#13;&#10;            Roles = roles&#13;&#10;        };&#13;&#10;&#13;&#10;        return (true, profile, &quot;Profile retrieved successfully&quot;);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message, bool EmailChanged, IEnumerable&lt;string&gt; Errors)&gt; UpdateUserProfileAsync(&#13;&#10;        string userId, UserProfileDto userProfileDto, string? verificationLink)&#13;&#10;    {&#13;&#10;        var errors = new List&lt;string&gt;();&#13;&#10;        var user = await _userManager.FindByIdAsync(userId);&#13;&#10;        &#13;&#10;        if (user == null)&#13;&#10;        {&#13;&#10;            errors.Add(&quot;User not found&quot;);&#13;&#10;            return (false, &quot;User not found&quot;, false, errors);&#13;&#10;        }&#13;&#10;&#13;&#10;        bool emailChanged = false;&#13;&#10;        &#13;&#10;        if (!string.IsNullOrWhiteSpace(userProfileDto.FirstName))&#13;&#10;        {&#13;&#10;            user.FirstName = userProfileDto.FirstName.Trim();&#13;&#10;        }&#13;&#10;&#13;&#10;        if (!string.IsNullOrWhiteSpace(userProfileDto.LastName))&#13;&#10;        {&#13;&#10;            user.LastName = userProfileDto.LastName.Trim();&#13;&#10;        }&#13;&#10;&#13;&#10;        user.FullName = $&quot;{user.FirstName} {user.LastName}&quot;.Trim();&#13;&#10;        &#13;&#10;        if (!string.IsNullOrWhiteSpace(userProfileDto.UserName) &amp;&amp;&#13;&#10;            !string.Equals(user.UserName, userProfileDto.UserName, StringComparison.OrdinalIgnoreCase))&#13;&#10;        {&#13;&#10;            var existingByUsername = await _userManager.FindByNameAsync(userProfileDto.UserName);&#13;&#10;            if (existingByUsername != null &amp;&amp; existingByUsername.Id != user.Id)&#13;&#10;            {&#13;&#10;                errors.Add(&quot;This username is already in use&quot;);&#13;&#10;                return (false, &quot;Username is already in use&quot;, false, errors);&#13;&#10;            }&#13;&#10;&#13;&#10;            user.UserName = userProfileDto.UserName;&#13;&#10;        }&#13;&#10;        &#13;&#10;        if (!string.IsNullOrWhiteSpace(userProfileDto.Email) &amp;&amp;&#13;&#10;            !string.Equals(user.Email, userProfileDto.Email, StringComparison.OrdinalIgnoreCase))&#13;&#10;        {&#13;&#10;            var existingByEmail = await _userManager.FindByEmailAsync(userProfileDto.Email);&#13;&#10;            if (existingByEmail != null &amp;&amp; existingByEmail.Id != user.Id)&#13;&#10;            {&#13;&#10;                errors.Add(&quot;This email address is already in use&quot;);&#13;&#10;                return (false, &quot;Email is already in use&quot;, false, errors);&#13;&#10;            }&#13;&#10;&#13;&#10;            user.Email = userProfileDto.Email;&#13;&#10;            user.EmailConfirmed = false;&#13;&#10;            emailChanged = true;&#13;&#10;        }&#13;&#10;&#13;&#10;        user.Phone = userProfileDto.Phone ?? user.Phone;&#13;&#10;        user.Address = userProfileDto.Address ?? user.Address;&#13;&#10;&#13;&#10;        var updateResult = await _userManager.UpdateAsync(user);&#13;&#10;        if (!updateResult.Succeeded)&#13;&#10;        {&#13;&#10;            errors.AddRange(updateResult.Errors.Select(e =&gt; e.Description));&#13;&#10;            return (false, &quot;Profile update failed&quot;, false, errors);&#13;&#10;        }&#13;&#10;        &#13;&#10;        if (emailChanged &amp;&amp; !string.IsNullOrEmpty(verificationLink))&#13;&#10;        {&#13;&#10;            try&#13;&#10;            {&#13;&#10;                await _emailService.SendEmailVerificationAsync(user.Email!, user.UserName!, verificationLink);&#13;&#10;            }&#13;&#10;            catch (Exception ex)&#13;&#10;            {&#13;&#10;                return (true, &quot;Profile updated but verification email could not be sent.&quot;, true, new[] { ex.Message });&#13;&#10;            }&#13;&#10;        }&#13;&#10;&#13;&#10;        return (true, emailChanged ? &quot;Profile updated. Please verify your new email address.&quot; : &quot;Profile updated.&quot;, emailChanged, errors);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message, string? DeletionLink)&gt; RequestAccountDeletionAsync(&#13;&#10;        string userId, string deletionLink)&#13;&#10;    {&#13;&#10;        var user = await _userManager.FindByIdAsync(userId);&#13;&#10;        if (user == null)&#13;&#10;        {&#13;&#10;            return (false, &quot;User not found&quot;, null);&#13;&#10;        }&#13;&#10;&#13;&#10;        try&#13;&#10;        {&#13;&#10;            await _emailService.SendAccountDeletionConfirmationAsync(&#13;&#10;                user.Email!,&#13;&#10;                user.UserName!,&#13;&#10;                deletionLink);&#13;&#10;&#13;&#10;            return (true, &quot;We have sent a confirmation link to your email address for account deletion.&quot;, deletionLink);&#13;&#10;        }&#13;&#10;        catch (Exception ex)&#13;&#10;        {&#13;&#10;            return (false, $&quot;Email could not be sent: {ex.Message}&quot;, null);&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message)&gt; ConfirmAccountDeletionAsync(string userId, string token)&#13;&#10;    {&#13;&#10;        if (string.IsNullOrEmpty(userId) || string.IsNullOrEmpty(token))&#13;&#10;        {&#13;&#10;            return (false, &quot;Invalid deletion link&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        var user = await _userManager.FindByIdAsync(userId);&#13;&#10;        if (user == null)&#13;&#10;        {&#13;&#10;            return (false, &quot;User not found&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        var isValidToken = await _userManager.VerifyUserTokenAsync(&#13;&#10;            user,&#13;&#10;            TokenOptions.DefaultProvider,&#13;&#10;            &quot;AccountDeletion&quot;,&#13;&#10;            token);&#13;&#10;&#13;&#10;        if (!isValidToken)&#13;&#10;        {&#13;&#10;            return (false, &quot;Invalid or expired token&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        user.IsDeleted = true;&#13;&#10;        var result = await _userManager.UpdateAsync(user);&#13;&#10;&#13;&#10;        if (result.Succeeded)&#13;&#10;        {&#13;&#10;            return (true, &quot;Account deleted successfully&quot;);&#13;&#10;        }&#13;&#10;&#13;&#10;        return (false, &quot;Account deletion failed&quot;);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task&lt;(bool Success, string Message)&gt; ApplyForRestaurantOwnershipAsync(&#13;&#10;        string userId, OwnershipApplicationDto applicationDto)&#13;&#10;    {&#13;&#10;        try&#13;&#10;        {&#13;&#10;            var user = await _userManager.FindByIdAsync(userId);&#13;&#10;            if (user == null)&#13;&#10;            {&#13;&#10;                return (false, &quot;User not found&quot;);&#13;&#10;            }&#13;&#10;&#13;&#10;            var hasPendingApplication = await _context.OwnershipApplications&#13;&#10;                .AnyAsync(a =&gt; a.UserId == userId &amp;&amp; a.Status == ApplicationStatus.Pending);&#13;&#10;&#13;&#10;            if (hasPendingApplication)&#13;&#10;            {&#13;&#10;                return (false, &quot;You already have a pending application.&quot;);&#13;&#10;            }&#13;&#10;&#13;&#10;            if (string.IsNullOrEmpty(applicationDto.ImageUrl))&#13;&#10;            {&#13;&#10;                return (false, &quot;Restaurant image is required.&quot;);&#13;&#10;            }&#13;&#10;&#13;&#10;            var application = new OwnershipApplication&#13;&#10;            {&#13;&#10;                UserId = userId,&#13;&#10;                BusinessName = applicationDto.BusinessName,&#13;&#10;                BusinessDescription = applicationDto.BusinessDescription,&#13;&#10;                BusinessAddress = applicationDto.BusinessAddress,&#13;&#10;                BusinessPhone = applicationDto.BusinessPhone,&#13;&#10;                BusinessEmail = applicationDto.BusinessEmail,&#13;&#10;                Category = applicationDto.Category,&#13;&#10;                AdditionalNotes = applicationDto.AdditionalNotes,&#13;&#10;                ImageUrl = applicationDto.ImageUrl,&#13;&#10;                ApplicationDate = DateTime.UtcNow,&#13;&#10;                Status = ApplicationStatus.Pending&#13;&#10;            };&#13;&#10;&#13;&#10;            await CreateApplicationAsync(application);&#13;&#10;&#13;&#10;            return (true, &quot;Your restaurant ownership application has been received and will be reviewed.&quot;);&#13;&#10;        }&#13;&#10;        catch (Exception ex)&#13;&#10;        {&#13;&#10;            // Detaylı hata mesajı döndür&#13;&#10;            return (false, $&quot;Error: {ex.Message} - Inner: {ex.InnerException?.Message}&quot;);&#13;&#10;        }&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.Metadata.Builders;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Persistance.Configurations;&#10;&#10;public class JobPostingConfiguration : IEntityTypeConfiguration&lt;JobPosting&gt;&#10;{&#10;    public void Configure(EntityTypeBuilder&lt;JobPosting&gt; builder)&#10;    {&#10;        builder.HasKey(j =&gt; j.Id);&#10;&#10;        builder.Property(j =&gt; j.Title)&#10;            .IsRequired()&#10;            .HasMaxLength(200);&#10;&#10;        builder.Property(j =&gt; j.Description)&#10;            .IsRequired()&#10;            .HasMaxLength(2000);&#10;&#10;        builder.Property(j =&gt; j.Requirements)&#10;            .IsRequired()&#10;            .HasMaxLength(1000);&#10;&#10;        builder.Property(j =&gt; j.Position)&#10;            .IsRequired()&#10;            .HasMaxLength(100);&#10;&#10;        builder.Property(j =&gt; j.EmploymentType)&#10;            .IsRequired()&#10;            .HasMaxLength(50);&#10;&#10;        // Relationships&#10;        builder.HasOne(j =&gt; j.Restaurant)&#10;            .WithMany(r =&gt; r.JobPostings)&#10;            .HasForeignKey(j =&gt; j.RestaurantId)&#10;            .OnDelete(DeleteBehavior.Cascade);&#10;&#10;        // Indexes&#10;        builder.HasIndex(j =&gt; j.RestaurantId);&#10;        builder.HasIndex(j =&gt; j.IsActive);&#10;&#10;        // Soft Delete Query Filter&#10;        builder.HasQueryFilter(j =&gt; !j.IsDeleted);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/FileController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/FileController.cs" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;public class FileController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public FileController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload profile image for user&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/profile/{userId}&quot;)]&#10;    [Authorize]&#10;    public async Task&lt;IActionResult&gt; UploadProfileImage(string userId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadProfileImageAsync(file, userId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Profil resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload menu item image&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/menuitem/{menuItemId}&quot;)]&#10;    [Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadMenuItemImage(string menuItemId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadMenuItemImageAsync(file, menuItemId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Menü öğesi resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload reward image&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/reward/{rewardId}&quot;)]&#10;    [Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRewardImage(string rewardId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRewardImageAsync(file, rewardId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Ödül resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload restaurant image&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/restaurant/{restaurantId}&quot;)]&#10;    [Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRestaurantImage(string restaurantId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRestaurantImageAsync(file, restaurantId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Restoran resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete a file&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete(&quot;delete&quot;)]&#10;    [Authorize]&#10;    public async Task&lt;IActionResult&gt; DeleteFile([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Dosya başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Dosya bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Check if file exists&#10;    /// &lt;/summary&gt;&#10;    [HttpGet(&quot;exists&quot;)]&#10;    public async Task&lt;IActionResult&gt; FileExists([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var exists = await _fileService.FileExistsAsync(fileUrl);&#10;            return Ok(new { exists });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya kontrol edilirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/MenuItemImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/MenuItemImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;public class MenuItemImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public MenuItemImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload menu item image (Required when creating menu item)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{menuItemId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadMenuItemImage(string menuItemId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Menü öğesi resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadMenuItemImageAsync(file, menuItemId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Menü öğesi resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Menü öğesi resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update menu item image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{menuItemId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateMenuItemImage(string menuItemId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Menü öğesi resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadMenuItemImageAsync(file, menuItemId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Menü öğesi resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Menü öğesi resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete menu item image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteMenuItemImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Menü öğesi resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Menü öğesi resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Menü öğesi resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/ProfileImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/ProfileImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize]&#10;public class ProfileImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public ProfileImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload profile image (Optional for customer)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{userId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadProfileImage(string userId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Profil resmi seçilmedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadProfileImageAsync(file, userId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Profil resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Profil resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update profile image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{userId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateProfileImage(string userId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Profil resmi seçilmedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadProfileImageAsync(file, userId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Profil resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Profil resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete profile image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteProfileImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Profil resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Profil resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Profil resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RestaurantImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RestaurantImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;public class RestaurantImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public RestaurantImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload restaurant image (Required when creating restaurant)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{restaurantId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRestaurantImage(string restaurantId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Restoran resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRestaurantImageAsync(file, restaurantId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Restoran resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Restoran resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update restaurant image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{restaurantId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateRestaurantImage(string restaurantId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Restoran resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRestaurantImageAsync(file, restaurantId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Restoran resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Restoran resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete restaurant image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteRestaurantImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Restoran resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Restoran resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Restoran resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RewardImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RewardImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;public class RewardImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public RewardImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload reward image (Required when creating reward)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{rewardId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRewardImage(string rewardId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Ödül resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRewardImageAsync(file, rewardId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Ödül resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Ödül resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update reward image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{rewardId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateRewardImage(string rewardId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Ödül resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRewardImageAsync(file, rewardId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Ödül resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Ödül resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete reward image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteRewardImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Ödül resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Ödül resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Ödül resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.AspNetCore.Identity;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.WebAPI;&#10;&#10;public static class OwnerIdFixer&#10;{&#10;    public static async Task FixRestaurantOwnerIds(IServiceProvider services)&#10;    {&#10;        using var scope = services.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var logger = scope.ServiceProvider.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();&#10;        &#10;        try&#10;        {&#10;            // Owner kullanıcısını bul&#10;            var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;            if (owner == null)&#10;            {&#10;                logger.LogWarning(&quot;owner@gmail.com kullanıcısı bulunamadı!&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;Owner bulundu: {owner.Email} (ID: {owner.Id})&quot;);&#10;            &#10;            // Tüm aktif restoranları bul&#10;            var restaurants = await context.Restaurants&#10;                .Where(r =&gt; !r.IsDeleted)&#10;                .ToListAsync();&#10;            &#10;            if (restaurants.Count == 0)&#10;            {&#10;                logger.LogInformation(&quot;Veritabanında restoran bulunamadı.&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;{restaurants.Count} restoran bulundu, owner ID'leri güncelleniyor...&quot;);&#10;            &#10;            // Her restoranın owner ID'sini güncelle&#10;            foreach (var restaurant in restaurants)&#10;            {&#10;                restaurant.OwnerId = owner.Id;&#10;                logger.LogInformation($&quot;✓ {restaurant.Name} -&gt; Owner ID güncellendi&quot;);&#10;            }&#10;            &#10;            await context.SaveChangesAsync();&#10;            logger.LogInformation($&quot;✅ {restaurants.Count} restoranın owner ID'si başarıyla güncellendi!&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            logger.LogError(ex, &quot;Owner ID güncellenirken hata oluştu!&quot;);&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>