<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/cart/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/cart/page.tsx" />
              <option name="originalContent" value="&quot;use client&quot;&#10;&#10;import { useCart } from &quot;@/contexts/cart-context&quot;&#10;import { Button } from &quot;@/components/ui/button&quot;&#10;import { Card, CardContent, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;&#10;import { Separator } from &quot;@/components/ui/separator&quot;&#10;import { Plus, Minus, Trash2, ShoppingBag } from &quot;lucide-react&quot;&#10;import Link from &quot;next/link&quot;&#10;import { useRouter } from &quot;next/navigation&quot;&#10;&#10;export default function CartPage() {&#10;  const { items, updateQuantity, removeItem, total, clearCart } = useCart()&#10;  const router = useRouter()&#10;&#10;  if (items.length === 0) {&#10;    return (&#10;      &lt;div className=&quot;container py-16&quot;&gt;&#10;        &lt;Card className=&quot;max-w-md mx-auto text-center&quot;&gt;&#10;          &lt;CardContent className=&quot;pt-12 pb-12&quot;&gt;&#10;            &lt;ShoppingBag className=&quot;h-16 w-16 mx-auto mb-4 text-muted-foreground&quot; /&gt;&#10;            &lt;h2 className=&quot;text-2xl font-bold mb-2&quot;&gt;Sepetiniz Boş&lt;/h2&gt;&#10;            &lt;p className=&quot;text-muted-foreground mb-6&quot;&gt;Henüz sepetinize ürün eklemediniz&lt;/p&gt;&#10;            &lt;Link href=&quot;/restaurants&quot;&gt;&#10;              &lt;Button&gt;Restoranları Keşfet&lt;/Button&gt;&#10;            &lt;/Link&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  // Group items by restaurant&#10;  const itemsByRestaurant = items.reduce(&#10;    (acc, item) =&gt; {&#10;      if (!acc[item.restaurantId]) {&#10;        acc[item.restaurantId] = {&#10;          restaurantName: item.restaurantName,&#10;          items: [],&#10;        }&#10;      }&#10;      acc[item.restaurantId].items.push(item)&#10;      return acc&#10;    },&#10;    {} as Record&lt;string, { restaurantName: string; items: typeof items }&gt;,&#10;  )&#10;&#10;  return (&#10;    &lt;div className=&quot;container py-8&quot;&gt;&#10;      &lt;h1 className=&quot;text-4xl font-bold mb-8&quot;&gt;Sepetim&lt;/h1&gt;&#10;&#10;      &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-8&quot;&gt;&#10;        {/* Cart Items */}&#10;        &lt;div className=&quot;lg:col-span-2 space-y-6&quot;&gt;&#10;          {Object.entries(itemsByRestaurant).map(([restaurantId, { restaurantName, items: restaurantItems }]) =&gt; (&#10;            &lt;Card key={restaurantId}&gt;&#10;              &lt;CardHeader&gt;&#10;                &lt;CardTitle&gt;{restaurantName}&lt;/CardTitle&gt;&#10;              &lt;/CardHeader&gt;&#10;              &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;                {restaurantItems.map((item) =&gt; (&#10;                  &lt;div key={item.menuItem.id}&gt;&#10;                    &lt;div className=&quot;flex gap-4&quot;&gt;&#10;                      &lt;img&#10;                        src={item.menuItem.imageUrl || &quot;/placeholder.svg&quot;}&#10;                        alt={item.menuItem.name}&#10;                        className=&quot;w-24 h-24 object-cover rounded-lg&quot;&#10;                      /&gt;&#10;                      &lt;div className=&quot;flex-1&quot;&gt;&#10;                        &lt;h3 className=&quot;font-semibold mb-1&quot;&gt;{item.menuItem.name}&lt;/h3&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-2&quot;&gt;{item.menuItem.description}&lt;/p&gt;&#10;                        &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                          &lt;span className=&quot;font-bold text-primary&quot;&gt;₺{item.menuItem.price}&lt;/span&gt;&#10;                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                            &lt;Button&#10;                              variant=&quot;outline&quot;&#10;                              size=&quot;icon&quot;&#10;                              className=&quot;h-8 w-8 bg-transparent&quot;&#10;                              onClick={() =&gt; updateQuantity(item.menuItem.id, item.quantity - 1)}&#10;                            &gt;&#10;                              &lt;Minus className=&quot;h-4 w-4&quot; /&gt;&#10;                            &lt;/Button&gt;&#10;                            &lt;span className=&quot;w-8 text-center font-medium&quot;&gt;{item.quantity}&lt;/span&gt;&#10;                            &lt;Button&#10;                              variant=&quot;outline&quot;&#10;                              size=&quot;icon&quot;&#10;                              className=&quot;h-8 w-8 bg-transparent&quot;&#10;                              onClick={() =&gt; updateQuantity(item.menuItem.id, item.quantity + 1)}&#10;                            &gt;&#10;                              &lt;Plus className=&quot;h-4 w-4&quot; /&gt;&#10;                            &lt;/Button&gt;&#10;                            &lt;Button&#10;                              variant=&quot;ghost&quot;&#10;                              size=&quot;icon&quot;&#10;                              className=&quot;h-8 w-8 text-destructive&quot;&#10;                              onClick={() =&gt; removeItem(item.menuItem.id)}&#10;                            &gt;&#10;                              &lt;Trash2 className=&quot;h-4 w-4&quot; /&gt;&#10;                            &lt;/Button&gt;&#10;                          &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;Separator className=&quot;mt-4&quot; /&gt;&#10;                  &lt;/div&gt;&#10;                ))}&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          ))}&#10;        &lt;/div&gt;&#10;&#10;        {/* Order Summary */}&#10;        &lt;div className=&quot;lg:col-span-1&quot;&gt;&#10;          &lt;Card className=&quot;sticky top-20&quot;&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Sipariş Özeti&lt;/CardTitle&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;              &lt;div className=&quot;space-y-2&quot;&gt;&#10;                &lt;div className=&quot;flex justify-between text-sm&quot;&gt;&#10;                  &lt;span className=&quot;text-muted-foreground&quot;&gt;Ara Toplam&lt;/span&gt;&#10;                  &lt;span&gt;₺{total.toFixed(2)}&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;flex justify-between text-sm&quot;&gt;&#10;                  &lt;span className=&quot;text-muted-foreground&quot;&gt;Teslimat Ücreti&lt;/span&gt;&#10;                  &lt;span&gt;₺15.00&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &lt;Separator /&gt;&#10;                &lt;div className=&quot;flex justify-between text-lg font-bold&quot;&gt;&#10;                  &lt;span&gt;Toplam&lt;/span&gt;&#10;                  &lt;span&gt;₺{(total + 15).toFixed(2)}&lt;/span&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;&#10;              &lt;Button className=&quot;w-full&quot; size=&quot;lg&quot; onClick={() =&gt; router.push(&quot;/checkout&quot;)}&gt;&#10;                Siparişi Tamamla&#10;              &lt;/Button&gt;&#10;&#10;              &lt;Button variant=&quot;outline&quot; className=&quot;w-full bg-transparent&quot; onClick={clearCart}&gt;&#10;                Sepeti Temizle&#10;              &lt;/Button&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
              <option name="updatedContent" value="&quot;use client&quot;&#10;&#10;import { useCart } from &quot;@/contexts/cart-context&quot;&#10;import { Button } from &quot;@/components/ui/button&quot;&#10;import { Card, CardContent, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;&#10;import { Separator } from &quot;@/components/ui/separator&quot;&#10;import { Plus, Minus, Trash2, ShoppingBag, X, Tag, Gift } from &quot;lucide-react&quot;&#10;import Link from &quot;next/link&quot;&#10;import { useRouter } from &quot;next/navigation&quot;&#10;import { Badge } from &quot;@/components/ui/badge&quot;&#10;import { useEffect, useState } from &quot;react&quot;&#10;import { loyaltyApi } from &quot;@/lib/api&quot;&#10;import { useToast } from &quot;@/hooks/use-toast&quot;&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogHeader,&#10;  DialogTitle,&#10;  DialogTrigger,&#10;} from &quot;@/components/ui/dialog&quot;&#10;&#10;interface Redemption {&#10;  id: string&#10;  rewardName: string&#10;  restaurantName: string&#10;  pointsSpent: number&#10;  couponCode: string&#10;  redeemedAt: string&#10;  isUsed: boolean&#10;  expiryDate: string&#10;}&#10;&#10;export default function CartPage() {&#10;  const { items, updateQuantity, removeItem, total, clearCart, appliedCoupon, removeCoupon, discountAmount, finalTotal, currentRestaurantId, applyCoupon } = useCart()&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [redemptions, setRedemptions] = useState&lt;Redemption[]&gt;([])&#10;  const [loadingRedemptions, setLoadingRedemptions] = useState(false)&#10;  const [couponsDialogOpen, setCouponsDialogOpen] = useState(false)&#10;&#10;  useEffect(() =&gt; {&#10;    if (items.length &gt; 0) {&#10;      fetchRedemptions()&#10;    }&#10;  }, [items])&#10;&#10;  const fetchRedemptions = async () =&gt; {&#10;    setLoadingRedemptions(true)&#10;    try {&#10;      const data = await loyaltyApi.customer.getRedemptions()&#10;      // Filter only unused coupons and not expired&#10;      const validRedemptions = data.filter((r: Redemption) =&gt; &#10;        !r.isUsed &amp;&amp; new Date(r.expiryDate) &gt; new Date()&#10;      )&#10;      setRedemptions(validRedemptions)&#10;    } catch (error: any) {&#10;      console.error('Error fetching redemptions:', error)&#10;    } finally {&#10;      setLoadingRedemptions(false)&#10;    }&#10;  }&#10;&#10;  const handleApplyCoupon = async (redemption: Redemption) =&gt; {&#10;    // Check if coupon is for current restaurant&#10;    const currentRestaurantName = items[0]?.restaurantName&#10;    &#10;    if (redemption.restaurantName !== currentRestaurantName) {&#10;      toast({&#10;        title: 'Hata',&#10;        description: `Bu kupon sadece &quot;${redemption.restaurantName}&quot; restoranı için geçerlidir.`,&#10;        variant: 'destructive',&#10;      })&#10;      return&#10;    }&#10;&#10;    // Get reward details to get discount amount&#10;    try {&#10;      const rewards = await loyaltyApi.getRestaurantRewards(currentRestaurantId || '')&#10;      const reward = rewards.find((r: any) =&gt; r.name === redemption.rewardName)&#10;      &#10;      if (reward) {&#10;        applyCoupon({&#10;          couponCode: redemption.couponCode,&#10;          discountAmount: reward.discountAmount || 0,&#10;          discountPercentage: reward.discountPercentage || 0,&#10;          rewardName: redemption.rewardName,&#10;          restaurantId: currentRestaurantId || ''&#10;        })&#10;&#10;        toast({&#10;          title: 'Başarılı!',&#10;          description: `Kupon &quot;${redemption.couponCode}&quot; sepete uygulandı.`,&#10;        })&#10;        &#10;        setCouponsDialogOpen(false)&#10;      }&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Hata',&#10;        description: 'Kupon uygulanırken bir hata oluştu.',&#10;        variant: 'destructive',&#10;      })&#10;    }&#10;  }&#10;&#10;  if (items.length === 0) {&#10;    return (&#10;      &lt;div className=&quot;container py-16&quot;&gt;&#10;        &lt;Card className=&quot;max-w-md mx-auto text-center&quot;&gt;&#10;          &lt;CardContent className=&quot;pt-12 pb-12&quot;&gt;&#10;            &lt;ShoppingBag className=&quot;h-16 w-16 mx-auto mb-4 text-muted-foreground&quot; /&gt;&#10;            &lt;h2 className=&quot;text-2xl font-bold mb-2&quot;&gt;Sepetiniz Boş&lt;/h2&gt;&#10;            &lt;p className=&quot;text-muted-foreground mb-6&quot;&gt;Henüz sepetinize ürün eklemediniz&lt;/p&gt;&#10;            &lt;Link href=&quot;/restaurants&quot;&gt;&#10;              &lt;Button&gt;Restoranları Keşfet&lt;/Button&gt;&#10;            &lt;/Link&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  // Group items by restaurant&#10;  const itemsByRestaurant = items.reduce(&#10;    (acc, item) =&gt; {&#10;      if (!acc[item.restaurantId]) {&#10;        acc[item.restaurantId] = {&#10;          restaurantName: item.restaurantName,&#10;          items: [],&#10;        }&#10;      }&#10;      acc[item.restaurantId].items.push(item)&#10;      return acc&#10;    },&#10;    {} as Record&lt;string, { restaurantName: string; items: typeof items }&gt;,&#10;  )&#10;&#10;  const deliveryFee = 15.00&#10;&#10;  // Filter coupons for current restaurant&#10;  const currentRestaurantCoupons = redemptions.filter(&#10;    r =&gt; r.restaurantName === items[0]?.restaurantName&#10;  )&#10;&#10;  return (&#10;    &lt;div className=&quot;container py-8&quot;&gt;&#10;      &lt;h1 className=&quot;text-4xl font-bold mb-8&quot;&gt;Sepetim&lt;/h1&gt;&#10;&#10;      &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-8&quot;&gt;&#10;        {/* Cart Items */}&#10;        &lt;div className=&quot;lg:col-span-2 space-y-6&quot;&gt;&#10;          {Object.entries(itemsByRestaurant).map(([restaurantId, { restaurantName, items: restaurantItems }]) =&gt; (&#10;            &lt;Card key={restaurantId}&gt;&#10;              &lt;CardHeader&gt;&#10;                &lt;CardTitle&gt;{restaurantName}&lt;/CardTitle&gt;&#10;              &lt;/CardHeader&gt;&#10;              &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;                {restaurantItems.map((item) =&gt; (&#10;                  &lt;div key={item.menuItem.id}&gt;&#10;                    &lt;div className=&quot;flex gap-4&quot;&gt;&#10;                      &lt;img&#10;                        src={item.menuItem.imageUrl || &quot;/placeholder.svg&quot;}&#10;                        alt={item.menuItem.name}&#10;                        className=&quot;w-24 h-24 object-cover rounded-lg&quot;&#10;                      /&gt;&#10;                      &lt;div className=&quot;flex-1&quot;&gt;&#10;                        &lt;h3 className=&quot;font-semibold mb-1&quot;&gt;{item.menuItem.name}&lt;/h3&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-2&quot;&gt;{item.menuItem.description}&lt;/p&gt;&#10;                        &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                          &lt;span className=&quot;font-bold text-primary&quot;&gt;₺{item.menuItem.price}&lt;/span&gt;&#10;                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                            &lt;Button&#10;                              variant=&quot;outline&quot;&#10;                              size=&quot;icon&quot;&#10;                              className=&quot;h-8 w-8 bg-transparent&quot;&#10;                              onClick={() =&gt; updateQuantity(item.menuItem.id, item.quantity - 1)}&#10;                            &gt;&#10;                              &lt;Minus className=&quot;h-4 w-4&quot; /&gt;&#10;                            &lt;/Button&gt;&#10;                            &lt;span className=&quot;w-8 text-center font-medium&quot;&gt;{item.quantity}&lt;/span&gt;&#10;                            &lt;Button&#10;                              variant=&quot;outline&quot;&#10;                              size=&quot;icon&quot;&#10;                              className=&quot;h-8 w-8 bg-transparent&quot;&#10;                              onClick={() =&gt; updateQuantity(item.menuItem.id, item.quantity + 1)}&#10;                            &gt;&#10;                              &lt;Plus className=&quot;h-4 w-4&quot; /&gt;&#10;                            &lt;/Button&gt;&#10;                            &lt;Button&#10;                              variant=&quot;ghost&quot;&#10;                              size=&quot;icon&quot;&#10;                              className=&quot;h-8 w-8 text-destructive&quot;&#10;                              onClick={() =&gt; removeItem(item.menuItem.id)}&#10;                            &gt;&#10;                              &lt;Trash2 className=&quot;h-4 w-4&quot; /&gt;&#10;                            &lt;/Button&gt;&#10;                          &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;Separator className=&quot;mt-4&quot; /&gt;&#10;                  &lt;/div&gt;&#10;                ))}&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          ))}&#10;        &lt;/div&gt;&#10;&#10;        {/* Order Summary */}&#10;        &lt;div className=&quot;lg:col-span-1&quot;&gt;&#10;          &lt;Card className=&quot;sticky top-20&quot;&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Sipariş Özeti&lt;/CardTitle&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;              &lt;div className=&quot;space-y-2&quot;&gt;&#10;                &lt;div className=&quot;flex justify-between text-sm&quot;&gt;&#10;                  &lt;span className=&quot;text-muted-foreground&quot;&gt;Ara Toplam&lt;/span&gt;&#10;                  &lt;span&gt;₺{total.toFixed(2)}&lt;/span&gt;&#10;                &lt;/div&gt;&#10;&#10;                {/* Applied Coupon */}&#10;                {appliedCoupon &amp;&amp; (&#10;                  &lt;div className=&quot;bg-green-50 dark:bg-green-950/20 p-3 rounded-lg border border-green-200 dark:border-green-900&quot;&gt;&#10;                    &lt;div className=&quot;flex items-start justify-between gap-2 mb-2&quot;&gt;&#10;                      &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                        &lt;Tag className=&quot;h-4 w-4 text-green-600 dark:text-green-400&quot; /&gt;&#10;                        &lt;div&gt;&#10;                          &lt;p className=&quot;text-sm font-semibold text-green-700 dark:text-green-300&quot;&gt;&#10;                            {appliedCoupon.rewardName}&#10;                          &lt;/p&gt;&#10;                          &lt;p className=&quot;text-xs text-green-600 dark:text-green-400&quot;&gt;&#10;                            Kupon: {appliedCoupon.couponCode}&#10;                          &lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;Button&#10;                        variant=&quot;ghost&quot;&#10;                        size=&quot;icon&quot;&#10;                        className=&quot;h-6 w-6 text-green-600 hover:text-green-700 dark:text-green-400&quot;&#10;                        onClick={removeCoupon}&#10;                      &gt;&#10;                        &lt;X className=&quot;h-4 w-4&quot; /&gt;&#10;                      &lt;/Button&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div className=&quot;flex justify-between items-center&quot;&gt;&#10;                      &lt;span className=&quot;text-xs text-green-600 dark:text-green-400&quot;&gt;İndirim&lt;/span&gt;&#10;                      &lt;Badge variant=&quot;default&quot; className=&quot;bg-green-600 text-white&quot;&gt;&#10;                        -₺{discountAmount.toFixed(2)}&#10;                      &lt;/Badge&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;                )}&#10;&#10;                {/* Available Coupons Button */}&#10;                {!appliedCoupon &amp;&amp; currentRestaurantCoupons.length &gt; 0 &amp;&amp; (&#10;                  &lt;Dialog open={couponsDialogOpen} onOpenChange={setCouponsDialogOpen}&gt;&#10;                    &lt;DialogTrigger asChild&gt;&#10;                      &lt;Button variant=&quot;outline&quot; className=&quot;w-full&quot; size=&quot;sm&quot;&gt;&#10;                        &lt;Gift className=&quot;h-4 w-4 mr-2&quot; /&gt;&#10;                        Kupon Kullan ({currentRestaurantCoupons.length})&#10;                      &lt;/Button&gt;&#10;                    &lt;/DialogTrigger&gt;&#10;                    &lt;DialogContent className=&quot;max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;&#10;                      &lt;DialogHeader&gt;&#10;                        &lt;DialogTitle&gt;Kuponlarım&lt;/DialogTitle&gt;&#10;                        &lt;DialogDescription&gt;&#10;                          {items[0]?.restaurantName} restoranı için kullanılabilir kuponlarınız&#10;                        &lt;/DialogDescription&gt;&#10;                      &lt;/DialogHeader&gt;&#10;                      &lt;div className=&quot;space-y-3 mt-4&quot;&gt;&#10;                        {currentRestaurantCoupons.map((redemption) =&gt; (&#10;                          &lt;Card key={redemption.id} className=&quot;border-2&quot;&gt;&#10;                            &lt;CardContent className=&quot;p-4&quot;&gt;&#10;                              &lt;div className=&quot;flex items-start justify-between gap-3&quot;&gt;&#10;                                &lt;div className=&quot;flex-1&quot;&gt;&#10;                                  &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;&#10;                                    &lt;Gift className=&quot;h-5 w-5 text-primary&quot; /&gt;&#10;                                    &lt;h4 className=&quot;font-semibold&quot;&gt;{redemption.rewardName}&lt;/h4&gt;&#10;                                  &lt;/div&gt;&#10;                                  &lt;div className=&quot;space-y-1 text-sm text-muted-foreground&quot;&gt;&#10;                                    &lt;p className=&quot;flex items-center gap-2&quot;&gt;&#10;                                      &lt;Tag className=&quot;h-3 w-3&quot; /&gt;&#10;                                      Kupon Kodu: &lt;span className=&quot;font-mono font-semibold text-foreground&quot;&gt;{redemption.couponCode}&lt;/span&gt;&#10;                                    &lt;/p&gt;&#10;                                    &lt;p&gt;Son Kullanma: {new Date(redemption.expiryDate).toLocaleDateString('tr-TR')}&lt;/p&gt;&#10;                                    &lt;p className=&quot;text-xs&quot;&gt;Kullanılan Puan: {redemption.pointsSpent}&lt;/p&gt;&#10;                                  &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;Button&#10;                                  onClick={() =&gt; handleApplyCoupon(redemption)}&#10;                                  size=&quot;sm&quot;&#10;                                  className=&quot;shrink-0&quot;&#10;                                &gt;&#10;                                  Kullan&#10;                                &lt;/Button&gt;&#10;                              &lt;/div&gt;&#10;                            &lt;/CardContent&gt;&#10;                          &lt;/Card&gt;&#10;                        ))}&#10;                      &lt;/div&gt;&#10;                    &lt;/DialogContent&gt;&#10;                  &lt;/Dialog&gt;&#10;                )}&#10;&#10;                &lt;div className=&quot;flex justify-between text-sm&quot;&gt;&#10;                  &lt;span className=&quot;text-muted-foreground&quot;&gt;Teslimat Ücreti&lt;/span&gt;&#10;                  &lt;span&gt;₺{deliveryFee.toFixed(2)}&lt;/span&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;Separator /&gt;&#10;&#10;                &lt;div className=&quot;flex justify-between text-lg font-bold&quot;&gt;&#10;                  &lt;span&gt;Toplam&lt;/span&gt;&#10;                  &lt;span&gt;₺{(finalTotal + deliveryFee).toFixed(2)}&lt;/span&gt;&#10;                &lt;/div&gt;&#10;&#10;                {appliedCoupon &amp;&amp; discountAmount &gt; 0 &amp;&amp; (&#10;                  &lt;p className=&quot;text-xs text-green-600 dark:text-green-400 text-center&quot;&gt;&#10;                     ₺{discountAmount.toFixed(2)} tasarruf ettiniz!&#10;                  &lt;/p&gt;&#10;                )}&#10;              &lt;/div&gt;&#10;&#10;              &lt;Button className=&quot;w-full&quot; size=&quot;lg&quot; onClick={() =&gt; router.push(&quot;/checkout&quot;)}&gt;&#10;                Siparişi Tamamla&#10;              &lt;/Button&gt;&#10;&#10;              &lt;Button variant=&quot;outline&quot; className=&quot;w-full bg-transparent&quot; onClick={clearCart}&gt;&#10;                Sepeti Temizle&#10;              &lt;/Button&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/restaurants/[id]/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/restaurants/[id]/page.tsx" />
              <option name="originalContent" value="&quot;use client&quot;&#10;&#10;import { useState, useEffect } from &quot;react&quot;&#10;import { useParams } from &quot;next/navigation&quot;&#10;import type { Restaurant, Menu, MenuItem } from &quot;@/types&quot;&#10;import { getCategoryName } from &quot;@/types&quot;&#10;import { Button } from &quot;@/components/ui/button&quot;&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;&#10;import { Badge } from &quot;@/components/ui/badge&quot;&#10;import { Tabs, TabsContent, TabsList, TabsTrigger } from &quot;@/components/ui/tabs&quot;&#10;import { Star, MapPin, Clock, Phone, Mail, Plus, Minus } from &quot;lucide-react&quot;&#10;import { useCart } from &quot;@/contexts/cart-context&quot;&#10;import { useToast } from &quot;@/hooks/use-toast&quot;&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogHeader,&#10;  DialogTitle,&#10;  DialogTrigger,&#10;} from &quot;@/components/ui/dialog&quot;&#10;import {&#10;  Pagination,&#10;  PaginationContent,&#10;  PaginationItem,&#10;  PaginationLink,&#10;  PaginationNext,&#10;  PaginationPrevious,&#10;} from &quot;@/components/ui/pagination&quot;&#10;import { ReviewSection } from &quot;@/components/reviews/review-section&quot;&#10;import { customerApi } from &quot;@/lib/customer-api&quot;&#10;import { RestaurantLocationMap } from &quot;@/components/maps/RestaurantLocationMap&quot;&#10;&#10;export default function RestaurantDetailPage() {&#10;  const params = useParams()&#10;  const { addItem } = useCart()&#10;  const { toast } = useToast()&#10;  const [restaurant, setRestaurant] = useState&lt;Restaurant | null&gt;(null)&#10;  const [menus, setMenus] = useState&lt;Menu[]&gt;([])&#10;  const [loading, setLoading] = useState(true)&#10;  const [selectedItem, setSelectedItem] = useState&lt;MenuItem | null&gt;(null)&#10;  const [quantity, setQuantity] = useState(1)&#10;  const [currentMenuPage, setCurrentMenuPage] = useState&lt;{[key: string]: number}&gt;({})&#10;  const menuItemsPerPage = 6&#10;&#10;  useEffect(() =&gt; {&#10;    const fetchData = async () =&gt; {&#10;      setLoading(true)&#10;      try {&#10;        // Fetch restaurant details from API&#10;        const restaurantData = await customerApi.restaurants.getById(params.id as string)&#10;        &#10;        // Fix imageUrl to use full URL&#10;        if (restaurantData.imageUrl &amp;&amp; !restaurantData.imageUrl.startsWith('http')) {&#10;          const baseUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000'&#10;          restaurantData.imageUrl = `${baseUrl}${restaurantData.imageUrl}`&#10;        }&#10;        &#10;        setRestaurant(restaurantData)&#10;        &#10;        // Fetch restaurant menus&#10;        const menusData = await customerApi.restaurants.getMenus(params.id as string)&#10;        &#10;        // Fix imageUrls in menu items&#10;        menusData.forEach((menu: any) =&gt; {&#10;          menu.menuItems?.forEach((item: any) =&gt; {&#10;            if (item.imageUrl &amp;&amp; !item.imageUrl.startsWith('http')) {&#10;              const baseUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000'&#10;              item.imageUrl = `${baseUrl}${item.imageUrl}`&#10;            }&#10;          })&#10;        })&#10;        &#10;        setMenus(menusData)&#10;      } catch (error: any) {&#10;        console.error(&quot;Error fetching restaurant:&quot;, error)&#10;        toast({&#10;          title: &quot;Hata&quot;,&#10;          description: &quot;Restoran bilgileri yüklenirken bir hata oluştu.&quot;,&#10;          variant: &quot;destructive&quot;,&#10;        })&#10;      } finally {&#10;        setLoading(false)&#10;      }&#10;    }&#10;&#10;    fetchData()&#10;  }, [params.id, toast])&#10;&#10;  const handleDialogOpen = (item: MenuItem) =&gt; {&#10;    setSelectedItem(item)&#10;    setQuantity(1)&#10;  }&#10;&#10;  const handleAddToCart = async () =&gt; {&#10;    if (!restaurant || !selectedItem) return&#10;&#10;    const success = await addItem(selectedItem, restaurant.id, restaurant.name, quantity)&#10;&#10;    if (success) {&#10;      toast({&#10;        title: &quot;Sepete eklendi&quot;,&#10;        description: `${selectedItem.name} (${quantity} adet) sepetinize eklendi.`,&#10;      })&#10;&#10;      const closeButton = document.querySelector('[data-state=&quot;open&quot;] button[aria-label=&quot;Close&quot;]') as HTMLButtonElement&#10;      closeButton?.click()&#10;    }&#10;  }&#10;&#10;  const handleDialogClose = (open: boolean) =&gt; {&#10;    if (!open) {&#10;      setTimeout(() =&gt; {&#10;        setSelectedItem(null)&#10;        setQuantity(1)&#10;      }, 100)&#10;    }&#10;  }&#10;&#10;  const getPaginatedItems = (items: MenuItem[], menuId: string) =&gt; {&#10;    const page = currentMenuPage[menuId] || 1&#10;    const startIndex = (page - 1) * menuItemsPerPage&#10;    const endIndex = startIndex + menuItemsPerPage&#10;    return items.slice(startIndex, endIndex)&#10;  }&#10;&#10;  const getTotalPages = (itemsCount: number) =&gt; {&#10;    return Math.ceil(itemsCount / menuItemsPerPage)&#10;  }&#10;&#10;  const setMenuPage = (menuId: string, page: number) =&gt; {&#10;    setCurrentMenuPage(prev =&gt; ({ ...prev, [menuId]: page }))&#10;  }&#10;&#10;  if (loading) {&#10;    return (&#10;      &lt;div className=&quot;container py-8&quot;&gt;&#10;        &lt;div className=&quot;animate-pulse space-y-6&quot;&gt;&#10;          &lt;div className=&quot;h-64 bg-muted rounded-lg&quot; /&gt;&#10;          &lt;div className=&quot;h-8 bg-muted rounded w-1/3&quot; /&gt;&#10;          &lt;div className=&quot;h-4 bg-muted rounded w-2/3&quot; /&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (!restaurant) {&#10;    return (&#10;      &lt;div className=&quot;container py-8&quot;&gt;&#10;        &lt;p&gt;Restoran bulunamadı&lt;/p&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;min-h-screen&quot;&gt;&#10;      {/* Hero Section */}&#10;      &lt;div className=&quot;relative h-64 md:h-96 overflow-hidden&quot;&gt;&#10;        &lt;img&#10;          src={restaurant.imageUrl || &quot;/placeholder.svg&quot;}&#10;          alt={restaurant.name}&#10;          className=&quot;w-full h-full object-cover&quot;&#10;        /&gt;&#10;        &lt;div className=&quot;absolute inset-0 bg-gradient-to-t from-background to-transparent&quot; /&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div className=&quot;container py-8&quot;&gt;&#10;        {/* Restaurant Info */}&#10;        &lt;div className=&quot;mb-8&quot;&gt;&#10;          &lt;div className=&quot;flex items-start justify-between mb-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;h1 className=&quot;text-4xl font-bold mb-2&quot;&gt;{restaurant.name}&lt;/h1&gt;&#10;              &lt;div className=&quot;flex items-center gap-4 text-muted-foreground mb-3&quot;&gt;&#10;                &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                  &lt;Star className=&quot;h-5 w-5 fill-yellow-400 text-yellow-400&quot; /&gt;&#10;                  &lt;span className=&quot;font-medium&quot;&gt;{restaurant.rating}&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &lt;Badge&gt;{getCategoryName(restaurant.category)}&lt;/Badge&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &lt;div className=&quot;flex items-center gap-4&quot;&gt;&#10;              &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot;&gt;&#10;                &lt;MapPin className=&quot;h-4 w-4&quot; /&gt;&#10;              &lt;/Button&gt;&#10;              &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot;&gt;&#10;                &lt;Clock className=&quot;h-4 w-4&quot; /&gt;&#10;              &lt;/Button&gt;&#10;              &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot;&gt;&#10;                &lt;Phone className=&quot;h-4 w-4&quot; /&gt;&#10;              &lt;/Button&gt;&#10;              &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot;&gt;&#10;                &lt;Mail className=&quot;h-4 w-4&quot; /&gt;&#10;              &lt;/Button&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;&#10;          &lt;p className=&quot;text-lg text-muted-foreground mb-6&quot;&gt;{restaurant.description}&lt;/p&gt;&#10;&#10;          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-4&quot;&gt;&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;pt-6&quot;&gt;&#10;                &lt;div className=&quot;flex items-center gap-3&quot;&gt;&#10;                  &lt;MapPin className=&quot;h-5 w-5 text-muted-foreground&quot; /&gt;&#10;                  &lt;div&gt;&#10;                    &lt;p className=&quot;text-sm font-medium&quot;&gt;Adres&lt;/p&gt;&#10;                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{restaurant.address}&lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;pt-6&quot;&gt;&#10;                &lt;div className=&quot;flex items-center gap-3&quot;&gt;&#10;                  &lt;Clock className=&quot;h-5 w-5 text-muted-foreground&quot; /&gt;&#10;                  &lt;div&gt;&#10;                    &lt;p className=&quot;text-sm font-medium&quot;&gt;Çalışma Saatleri&lt;/p&gt;&#10;                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;09:00 - 23:00&lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;pt-6&quot;&gt;&#10;                &lt;div className=&quot;flex items-center gap-3&quot;&gt;&#10;                  &lt;Phone className=&quot;h-5 w-5 text-muted-foreground&quot; /&gt;&#10;                  &lt;div&gt;&#10;                    &lt;p className=&quot;text-sm font-medium&quot;&gt;İletişim&lt;/p&gt;&#10;                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{restaurant.phoneNumber}&lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Menu Section */}&#10;        &lt;div&gt;&#10;          &lt;h2 className=&quot;text-3xl font-bold mb-6&quot;&gt;Menü&lt;/h2&gt;&#10;&#10;          &lt;Tabs defaultValue={menus[0]?.id} className=&quot;w-full&quot;&gt;&#10;            &lt;TabsList className=&quot;mb-6&quot;&gt;&#10;              {menus.map((menu) =&gt; (&#10;                &lt;TabsTrigger key={menu.id} value={menu.id}&gt;&#10;                  {menu.name}&#10;                &lt;/TabsTrigger&gt;&#10;              ))}&#10;            &lt;/TabsList&gt;&#10;&#10;            {menus.map((menu) =&gt; {&#10;              const paginatedItems = getPaginatedItems(menu.menuItems, menu.id)&#10;              const totalPages = getTotalPages(menu.menuItems.length)&#10;              const currentPage = currentMenuPage[menu.id] || 1&#10;&#10;              return (&#10;                &lt;TabsContent key={menu.id} value={menu.id}&gt;&#10;                  &lt;p className=&quot;text-muted-foreground mb-6&quot;&gt;{menu.description}&lt;/p&gt;&#10;&#10;                  &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;&#10;                    {paginatedItems.map((item) =&gt; (&#10;                      &lt;Card key={item.id} className=&quot;overflow-hidden&quot;&gt;&#10;                        &lt;div className=&quot;relative h-48&quot;&gt;&#10;                          &lt;img&#10;                            src={item.imageUrl || &quot;/placeholder.svg&quot;}&#10;                            alt={item.name}&#10;                            className=&quot;w-full h-full object-cover&quot;&#10;                          /&gt;&#10;                          {!item.isAvailable &amp;&amp; (&#10;                            &lt;div className=&quot;absolute inset-0 bg-background/80 flex items-center justify-center&quot;&gt;&#10;                              &lt;Badge variant=&quot;destructive&quot;&gt;Stokta Yok&lt;/Badge&gt;&#10;                            &lt;/div&gt;&#10;                          )}&#10;                        &lt;/div&gt;&#10;                        &lt;CardHeader&gt;&#10;                          &lt;div className=&quot;flex items-start justify-between gap-2&quot;&gt;&#10;                            &lt;CardTitle className=&quot;text-lg&quot;&gt;{item.name}&lt;/CardTitle&gt;&#10;                            &lt;span className=&quot;font-bold text-primary whitespace-nowrap&quot;&gt;₺{item.price}&lt;/span&gt;&#10;                          &lt;/div&gt;&#10;                          &lt;CardDescription className=&quot;line-clamp-2&quot;&gt;{item.description}&lt;/CardDescription&gt;&#10;                        &lt;/CardHeader&gt;&#10;                        &lt;CardContent&gt;&#10;                          &lt;Dialog &#10;                            open={selectedItem?.id === item.id} &#10;                            onOpenChange={(open) =&gt; handleDialogClose(open)}&#10;                          &gt;&#10;                            &lt;DialogTrigger asChild&gt;&#10;                              &lt;Button&#10;                                className=&quot;w-full&quot;&#10;                                disabled={!item.isAvailable}&#10;                                onClick={() =&gt; handleDialogOpen(item)}&#10;                              &gt;&#10;                                Sepete Ekle&#10;                              &lt;/Button&gt;&#10;                            &lt;/DialogTrigger&gt;&#10;                            &lt;DialogContent&gt;&#10;                              &lt;DialogHeader&gt;&#10;                                &lt;DialogTitle&gt;{item.name}&lt;/DialogTitle&gt;&#10;                                &lt;DialogDescription&gt;{item.description}&lt;/DialogDescription&gt;&#10;                              &lt;/DialogHeader&gt;&#10;                              {selectedItem &amp;&amp; (&#10;                                &lt;div className=&quot;space-y-4&quot;&gt;&#10;                                  &lt;img&#10;                                    src={selectedItem.imageUrl || &quot;/placeholder.svg&quot;}&#10;                                    alt={selectedItem.name}&#10;                                    className=&quot;w-full h-48 object-cover rounded-lg&quot;&#10;                                  /&gt;&#10;&#10;                                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                                    &lt;span className=&quot;text-2xl font-bold&quot;&gt;₺{selectedItem.price}&lt;/span&gt;&#10;                                    &lt;div className=&quot;flex items-center gap-3&quot;&gt;&#10;                                      &lt;Button&#10;                                        variant=&quot;outline&quot;&#10;                                        size=&quot;icon&quot;&#10;                                        onClick={() =&gt; setQuantity(Math.max(1, quantity - 1))}&#10;                                      &gt;&#10;                                        &lt;Minus className=&quot;h-4 w-4&quot; /&gt;&#10;                                      &lt;/Button&gt;&#10;                                      &lt;span className=&quot;text-xl font-medium w-8 text-center&quot;&gt;{quantity}&lt;/span&gt;&#10;                                      &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot; onClick={() =&gt; setQuantity(quantity + 1)}&gt;&#10;                                        &lt;Plus className=&quot;h-4 w-4&quot; /&gt;&#10;                                      &lt;/Button&gt;&#10;                                    &lt;/div&gt;&#10;                                  &lt;/div&gt;&#10;&#10;                                  &lt;Button className=&quot;w-full&quot; size=&quot;lg&quot; onClick={handleAddToCart}&gt;&#10;                                    Sepete Ekle - ₺{selectedItem.price * quantity}&#10;                                  &lt;/Button&gt;&#10;                                &lt;/div&gt;&#10;                              )}&#10;                            &lt;/DialogContent&gt;&#10;                          &lt;/Dialog&gt;&#10;                        &lt;/CardContent&gt;&#10;                      &lt;/Card&gt;&#10;                    ))}&#10;                  &lt;/div&gt;&#10;&#10;                  {/* Menu Items Pagination */}&#10;                  {totalPages &gt; 1 &amp;&amp; (&#10;                    &lt;div className=&quot;flex justify-center mt-6&quot;&gt;&#10;                      &lt;Pagination&gt;&#10;                        &lt;PaginationContent&gt;&#10;                          &lt;PaginationItem&gt;&#10;                            &lt;PaginationPrevious &#10;                              onClick={() =&gt; setMenuPage(menu.id, Math.max(1, currentPage - 1))}&#10;                              className={currentPage === 1 ? &quot;pointer-events-none opacity-50&quot; : &quot;cursor-pointer&quot;}&#10;                            /&gt;&#10;                          &lt;/PaginationItem&gt;&#10;                          {Array.from({ length: totalPages }, (_, i) =&gt; i + 1).map((page) =&gt; (&#10;                            &lt;PaginationItem key={page}&gt;&#10;                              &lt;PaginationLink&#10;                                onClick={() =&gt; setMenuPage(menu.id, page)}&#10;                                isActive={currentPage === page}&#10;                                className=&quot;cursor-pointer&quot;&#10;                              &gt;&#10;                                {page}&#10;                              &lt;/PaginationLink&gt;&#10;                            &lt;/PaginationItem&gt;&#10;                          ))}&#10;                          &lt;PaginationItem&gt;&#10;                            &lt;PaginationNext &#10;                              onClick={() =&gt; setMenuPage(menu.id, Math.min(totalPages, currentPage + 1))}&#10;                              className={currentPage === totalPages ? &quot;pointer-events-none opacity-50&quot; : &quot;cursor-pointer&quot;}&#10;                            /&gt;&#10;                          &lt;/PaginationItem&gt;&#10;                        &lt;/PaginationContent&gt;&#10;                      &lt;/Pagination&gt;&#10;                    &lt;/div&gt;&#10;                  )}&#10;                &lt;/TabsContent&gt;&#10;              )&#10;            })}&#10;          &lt;/Tabs&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Reviews Section */}&#10;        &lt;div className=&quot;mt-12&quot;&gt;&#10;          &lt;ReviewSection restaurantId={restaurant.id} restaurantName={restaurant.name} /&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Map Section */}&#10;        {restaurant.latitude &amp;&amp; restaurant.longitude &amp;&amp; (&#10;          &lt;div className=&quot;mt-12&quot;&gt;&#10;            &lt;h2 className=&quot;text-2xl font-bold mb-4&quot;&gt;Konum&lt;/h2&gt;&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;p-4&quot;&gt;&#10;                &lt;div className=&quot;h-64 w-full&quot;&gt;&#10;                  &lt;RestaurantLocationMap&#10;                    latitude={restaurant.latitude}&#10;                    longitude={restaurant.longitude}&#10;                    restaurantName={restaurant.name}&#10;                    address={restaurant.address}&#10;                  /&gt;&#10;                &lt;/div&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          &lt;/div&gt;&#10;        )}&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
              <option name="updatedContent" value="&quot;use client&quot;&#10;&#10;import { useState, useEffect } from &quot;react&quot;&#10;import { useParams, useRouter } from &quot;next/navigation&quot;&#10;import type { Restaurant, Menu, MenuItem } from &quot;@/types&quot;&#10;import { getCategoryName } from &quot;@/types&quot;&#10;import { Button } from &quot;@/components/ui/button&quot;&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;&#10;import { Badge } from &quot;@/components/ui/badge&quot;&#10;import { Tabs, TabsContent, TabsList, TabsTrigger } from &quot;@/components/ui/tabs&quot;&#10;import { Star, MapPin, Clock, Phone, Mail, Plus, Minus, Gift } from &quot;lucide-react&quot;&#10;import { useCart } from &quot;@/contexts/cart-context&quot;&#10;import { useToast } from &quot;@/hooks/use-toast&quot;&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogHeader,&#10;  DialogTitle,&#10;  DialogTrigger,&#10;} from &quot;@/components/ui/dialog&quot;&#10;import {&#10;  Pagination,&#10;  PaginationContent,&#10;  PaginationItem,&#10;  PaginationLink,&#10;  PaginationNext,&#10;  PaginationPrevious,&#10;} from &quot;@/components/ui/pagination&quot;&#10;import { ReviewSection } from &quot;@/components/reviews/review-section&quot;&#10;import { customerApi } from &quot;@/lib/customer-api&quot;&#10;import { RestaurantLocationMap } from &quot;@/components/maps/RestaurantLocationMap&quot;&#10;&#10;export default function RestaurantDetailPage() {&#10;  const params = useParams()&#10;  const router = useRouter()&#10;  const { addItem } = useCart()&#10;  const { toast } = useToast()&#10;  const [restaurant, setRestaurant] = useState&lt;Restaurant | null&gt;(null)&#10;  const [menus, setMenus] = useState&lt;Menu[]&gt;([])&#10;  const [loading, setLoading] = useState(true)&#10;  const [selectedItem, setSelectedItem] = useState&lt;MenuItem | null&gt;(null)&#10;  const [quantity, setQuantity] = useState(1)&#10;  const [currentMenuPage, setCurrentMenuPage] = useState&lt;{[key: string]: number}&gt;({})&#10;  const menuItemsPerPage = 6&#10;&#10;  useEffect(() =&gt; {&#10;    const fetchData = async () =&gt; {&#10;      setLoading(true)&#10;      try {&#10;        // Fetch restaurant details from API&#10;        const restaurantData = await customerApi.restaurants.getById(params.id as string)&#10;        &#10;        // Fix imageUrl to use full URL&#10;        if (restaurantData.imageUrl &amp;&amp; !restaurantData.imageUrl.startsWith('http')) {&#10;          const baseUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000'&#10;          restaurantData.imageUrl = `${baseUrl}${restaurantData.imageUrl}`&#10;        }&#10;        &#10;        setRestaurant(restaurantData)&#10;        &#10;        // Fetch restaurant menus&#10;        const menusData = await customerApi.restaurants.getMenus(params.id as string)&#10;        &#10;        // Fix imageUrls in menu items&#10;        menusData.forEach((menu: any) =&gt; {&#10;          menu.menuItems?.forEach((item: any) =&gt; {&#10;            if (item.imageUrl &amp;&amp; !item.imageUrl.startsWith('http')) {&#10;              const baseUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000'&#10;              item.imageUrl = `${baseUrl}${item.imageUrl}`&#10;            }&#10;          })&#10;        })&#10;        &#10;        setMenus(menusData)&#10;      } catch (error: any) {&#10;        console.error(&quot;Error fetching restaurant:&quot;, error)&#10;        toast({&#10;          title: &quot;Hata&quot;,&#10;          description: &quot;Restoran bilgileri yüklenirken bir hata oluştu.&quot;,&#10;          variant: &quot;destructive&quot;,&#10;        })&#10;      } finally {&#10;        setLoading(false)&#10;      }&#10;    }&#10;&#10;    fetchData()&#10;  }, [params.id, toast])&#10;&#10;  const handleDialogOpen = (item: MenuItem) =&gt; {&#10;    setSelectedItem(item)&#10;    setQuantity(1)&#10;  }&#10;&#10;  const handleAddToCart = async () =&gt; {&#10;    if (!restaurant || !selectedItem) return&#10;&#10;    const success = await addItem(selectedItem, restaurant.id, restaurant.name, quantity)&#10;&#10;    if (success) {&#10;      toast({&#10;        title: &quot;Sepete eklendi&quot;,&#10;        description: `${selectedItem.name} (${quantity} adet) sepetinize eklendi.`,&#10;      })&#10;&#10;      const closeButton = document.querySelector('[data-state=&quot;open&quot;] button[aria-label=&quot;Close&quot;]') as HTMLButtonElement&#10;      closeButton?.click()&#10;    }&#10;  }&#10;&#10;  const handleDialogClose = (open: boolean) =&gt; {&#10;    if (!open) {&#10;      setTimeout(() =&gt; {&#10;        setSelectedItem(null)&#10;        setQuantity(1)&#10;      }, 100)&#10;    }&#10;  }&#10;&#10;  const getPaginatedItems = (items: MenuItem[], menuId: string) =&gt; {&#10;    const page = currentMenuPage[menuId] || 1&#10;    const startIndex = (page - 1) * menuItemsPerPage&#10;    const endIndex = startIndex + menuItemsPerPage&#10;    return items.slice(startIndex, endIndex)&#10;  }&#10;&#10;  const getTotalPages = (itemsCount: number) =&gt; {&#10;    return Math.ceil(itemsCount / menuItemsPerPage)&#10;  }&#10;&#10;  const setMenuPage = (menuId: string, page: number) =&gt; {&#10;    setCurrentMenuPage(prev =&gt; ({ ...prev, [menuId]: page }))&#10;  }&#10;&#10;  if (loading) {&#10;    return (&#10;      &lt;div className=&quot;container py-8&quot;&gt;&#10;        &lt;div className=&quot;animate-pulse space-y-6&quot;&gt;&#10;          &lt;div className=&quot;h-64 bg-muted rounded-lg&quot; /&gt;&#10;          &lt;div className=&quot;h-8 bg-muted rounded w-1/3&quot; /&gt;&#10;          &lt;div className=&quot;h-4 bg-muted rounded w-2/3&quot; /&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (!restaurant) {&#10;    return (&#10;      &lt;div className=&quot;container py-8&quot;&gt;&#10;        &lt;p&gt;Restoran bulunamadı&lt;/p&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;min-h-screen&quot;&gt;&#10;      {/* Hero Section */}&#10;      &lt;div className=&quot;relative h-64 md:h-96 overflow-hidden&quot;&gt;&#10;        &lt;img&#10;          src={restaurant.imageUrl || &quot;/placeholder.svg&quot;}&#10;          alt={restaurant.name}&#10;          className=&quot;w-full h-full object-cover&quot;&#10;        /&gt;&#10;        &lt;div className=&quot;absolute inset-0 bg-gradient-to-t from-background to-transparent&quot; /&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div className=&quot;container py-8&quot;&gt;&#10;        {/* Restaurant Info */}&#10;        &lt;div className=&quot;mb-8&quot;&gt;&#10;          &lt;div className=&quot;flex items-start justify-between mb-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;h1 className=&quot;text-4xl font-bold mb-2&quot;&gt;{restaurant.name}&lt;/h1&gt;&#10;              &lt;div className=&quot;flex items-center gap-4 text-muted-foreground mb-3&quot;&gt;&#10;                &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                  &lt;Star className=&quot;h-5 w-5 fill-yellow-400 text-yellow-400&quot; /&gt;&#10;                  &lt;span className=&quot;font-medium&quot;&gt;{restaurant.rating}&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &lt;Badge&gt;{getCategoryName(restaurant.category)}&lt;/Badge&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &lt;div className=&quot;flex items-center gap-4&quot;&gt;&#10;              &lt;Button &#10;                variant=&quot;default&quot;&#10;                onClick={() =&gt; router.push(`/restaurants/${params.id}/rewards`)}&#10;                className=&quot;gap-2&quot;&#10;              &gt;&#10;                &lt;Gift className=&quot;h-4 w-4&quot; /&gt;&#10;                Rewards&#10;              &lt;/Button&gt;&#10;              &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot;&gt;&#10;                &lt;MapPin className=&quot;h-4 w-4&quot; /&gt;&#10;              &lt;/Button&gt;&#10;              &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot;&gt;&#10;                &lt;Clock className=&quot;h-4 w-4&quot; /&gt;&#10;              &lt;/Button&gt;&#10;              &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot;&gt;&#10;                &lt;Phone className=&quot;h-4 w-4&quot; /&gt;&#10;              &lt;/Button&gt;&#10;              &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot;&gt;&#10;                &lt;Mail className=&quot;h-4 w-4&quot; /&gt;&#10;              &lt;/Button&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;&#10;          &lt;p className=&quot;text-lg text-muted-foreground mb-6&quot;&gt;{restaurant.description}&lt;/p&gt;&#10;&#10;          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-4&quot;&gt;&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;pt-6&quot;&gt;&#10;                &lt;div className=&quot;flex items-center gap-3&quot;&gt;&#10;                  &lt;MapPin className=&quot;h-5 w-5 text-muted-foreground&quot; /&gt;&#10;                  &lt;div&gt;&#10;                    &lt;p className=&quot;text-sm font-medium&quot;&gt;Adres&lt;/p&gt;&#10;                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{restaurant.address}&lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;pt-6&quot;&gt;&#10;                &lt;div className=&quot;flex items-center gap-3&quot;&gt;&#10;                  &lt;Clock className=&quot;h-5 w-5 text-muted-foreground&quot; /&gt;&#10;                  &lt;div&gt;&#10;                    &lt;p className=&quot;text-sm font-medium&quot;&gt;Çalışma Saatleri&lt;/p&gt;&#10;                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;09:00 - 23:00&lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;pt-6&quot;&gt;&#10;                &lt;div className=&quot;flex items-center gap-3&quot;&gt;&#10;                  &lt;Phone className=&quot;h-5 w-5 text-muted-foreground&quot; /&gt;&#10;                  &lt;div&gt;&#10;                    &lt;p className=&quot;text-sm font-medium&quot;&gt;İletişim&lt;/p&gt;&#10;                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{restaurant.phoneNumber}&lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Menu Section */}&#10;        &lt;div&gt;&#10;          &lt;h2 className=&quot;text-3xl font-bold mb-6&quot;&gt;Menü&lt;/h2&gt;&#10;&#10;          &lt;Tabs defaultValue={menus[0]?.id} className=&quot;w-full&quot;&gt;&#10;            &lt;TabsList className=&quot;mb-6&quot;&gt;&#10;              {menus.map((menu) =&gt; (&#10;                &lt;TabsTrigger key={menu.id} value={menu.id}&gt;&#10;                  {menu.name}&#10;                &lt;/TabsTrigger&gt;&#10;              ))}&#10;            &lt;/TabsList&gt;&#10;&#10;            {menus.map((menu) =&gt; {&#10;              const paginatedItems = getPaginatedItems(menu.menuItems, menu.id)&#10;              const totalPages = getTotalPages(menu.menuItems.length)&#10;              const currentPage = currentMenuPage[menu.id] || 1&#10;&#10;              return (&#10;                &lt;TabsContent key={menu.id} value={menu.id}&gt;&#10;                  &lt;p className=&quot;text-muted-foreground mb-6&quot;&gt;{menu.description}&lt;/p&gt;&#10;&#10;                  &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;&#10;                    {paginatedItems.map((item) =&gt; (&#10;                      &lt;Card key={item.id} className=&quot;overflow-hidden&quot;&gt;&#10;                        &lt;div className=&quot;relative h-48&quot;&gt;&#10;                          &lt;img&#10;                            src={item.imageUrl || &quot;/placeholder.svg&quot;}&#10;                            alt={item.name}&#10;                            className=&quot;w-full h-full object-cover&quot;&#10;                          /&gt;&#10;                          {!item.isAvailable &amp;&amp; (&#10;                            &lt;div className=&quot;absolute inset-0 bg-background/80 flex items-center justify-center&quot;&gt;&#10;                              &lt;Badge variant=&quot;destructive&quot;&gt;Stokta Yok&lt;/Badge&gt;&#10;                            &lt;/div&gt;&#10;                          )}&#10;                        &lt;/div&gt;&#10;                        &lt;CardHeader&gt;&#10;                          &lt;div className=&quot;flex items-start justify-between gap-2&quot;&gt;&#10;                            &lt;CardTitle className=&quot;text-lg&quot;&gt;{item.name}&lt;/CardTitle&gt;&#10;                            &lt;span className=&quot;font-bold text-primary whitespace-nowrap&quot;&gt;₺{item.price}&lt;/span&gt;&#10;                          &lt;/div&gt;&#10;                          &lt;CardDescription className=&quot;line-clamp-2&quot;&gt;{item.description}&lt;/CardDescription&gt;&#10;                        &lt;/CardHeader&gt;&#10;                        &lt;CardContent&gt;&#10;                          &lt;Dialog &#10;                            open={selectedItem?.id === item.id} &#10;                            onOpenChange={(open) =&gt; handleDialogClose(open)}&#10;                          &gt;&#10;                            &lt;DialogTrigger asChild&gt;&#10;                              &lt;Button&#10;                                className=&quot;w-full&quot;&#10;                                disabled={!item.isAvailable}&#10;                                onClick={() =&gt; handleDialogOpen(item)}&#10;                              &gt;&#10;                                Sepete Ekle&#10;                              &lt;/Button&gt;&#10;                            &lt;/DialogTrigger&gt;&#10;                            &lt;DialogContent&gt;&#10;                              &lt;DialogHeader&gt;&#10;                                &lt;DialogTitle&gt;{item.name}&lt;/DialogTitle&gt;&#10;                                &lt;DialogDescription&gt;{item.description}&lt;/DialogDescription&gt;&#10;                              &lt;/DialogHeader&gt;&#10;                              {selectedItem &amp;&amp; (&#10;                                &lt;div className=&quot;space-y-4&quot;&gt;&#10;                                  &lt;img&#10;                                    src={selectedItem.imageUrl || &quot;/placeholder.svg&quot;}&#10;                                    alt={selectedItem.name}&#10;                                    className=&quot;w-full h-48 object-cover rounded-lg&quot;&#10;                                  /&gt;&#10;&#10;                                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                                    &lt;span className=&quot;text-2xl font-bold&quot;&gt;₺{selectedItem.price}&lt;/span&gt;&#10;                                    &lt;div className=&quot;flex items-center gap-3&quot;&gt;&#10;                                      &lt;Button&#10;                                        variant=&quot;outline&quot;&#10;                                        size=&quot;icon&quot;&#10;                                        onClick={() =&gt; setQuantity(Math.max(1, quantity - 1))}&#10;                                      &gt;&#10;                                        &lt;Minus className=&quot;h-4 w-4&quot; /&gt;&#10;                                      &lt;/Button&gt;&#10;                                      &lt;span className=&quot;text-xl font-medium w-8 text-center&quot;&gt;{quantity}&lt;/span&gt;&#10;                                      &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot; onClick={() =&gt; setQuantity(quantity + 1)}&gt;&#10;                                        &lt;Plus className=&quot;h-4 w-4&quot; /&gt;&#10;                                      &lt;/Button&gt;&#10;                                    &lt;/div&gt;&#10;                                  &lt;/div&gt;&#10;&#10;                                  &lt;Button className=&quot;w-full&quot; size=&quot;lg&quot; onClick={handleAddToCart}&gt;&#10;                                    Sepete Ekle - ₺{selectedItem.price * quantity}&#10;                                  &lt;/Button&gt;&#10;                                &lt;/div&gt;&#10;                              )}&#10;                            &lt;/DialogContent&gt;&#10;                          &lt;/Dialog&gt;&#10;                        &lt;/CardContent&gt;&#10;                      &lt;/Card&gt;&#10;                    ))}&#10;                  &lt;/div&gt;&#10;&#10;                  {/* Menu Items Pagination */}&#10;                  {totalPages &gt; 1 &amp;&amp; (&#10;                    &lt;div className=&quot;flex justify-center mt-6&quot;&gt;&#10;                      &lt;Pagination&gt;&#10;                        &lt;PaginationContent&gt;&#10;                          &lt;PaginationItem&gt;&#10;                            &lt;PaginationPrevious &#10;                              onClick={() =&gt; setMenuPage(menu.id, Math.max(1, currentPage - 1))}&#10;                              className={currentPage === 1 ? &quot;pointer-events-none opacity-50&quot; : &quot;cursor-pointer&quot;}&#10;                            /&gt;&#10;                          &lt;/PaginationItem&gt;&#10;                          {Array.from({ length: totalPages }, (_, i) =&gt; i + 1).map((page) =&gt; (&#10;                            &lt;PaginationItem key={page}&gt;&#10;                              &lt;PaginationLink&#10;                                onClick={() =&gt; setMenuPage(menu.id, page)}&#10;                                isActive={currentPage === page}&#10;                                className=&quot;cursor-pointer&quot;&#10;                              &gt;&#10;                                {page}&#10;                              &lt;/PaginationLink&gt;&#10;                            &lt;/PaginationItem&gt;&#10;                          ))}&#10;                          &lt;PaginationItem&gt;&#10;                            &lt;PaginationNext &#10;                              onClick={() =&gt; setMenuPage(menu.id, Math.min(totalPages, currentPage + 1))}&#10;                              className={currentPage === totalPages ? &quot;pointer-events-none opacity-50&quot; : &quot;cursor-pointer&quot;}&#10;                            /&gt;&#10;                          &lt;/PaginationItem&gt;&#10;                        &lt;/PaginationContent&gt;&#10;                      &lt;/Pagination&gt;&#10;                    &lt;/div&gt;&#10;                  )}&#10;                &lt;/TabsContent&gt;&#10;              )&#10;            })}&#10;          &lt;/Tabs&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Reviews Section */}&#10;        &lt;div className=&quot;mt-12&quot;&gt;&#10;          &lt;ReviewSection restaurantId={restaurant.id} restaurantName={restaurant.name} /&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Map Section */}&#10;        {restaurant.latitude &amp;&amp; restaurant.longitude &amp;&amp; (&#10;          &lt;div className=&quot;mt-12&quot;&gt;&#10;            &lt;h2 className=&quot;text-2xl font-bold mb-4&quot;&gt;Konum&lt;/h2&gt;&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;p-4&quot;&gt;&#10;                &lt;div className=&quot;h-64 w-full&quot;&gt;&#10;                  &lt;RestaurantLocationMap&#10;                    latitude={restaurant.latitude}&#10;                    longitude={restaurant.longitude}&#10;                    restaurantName={restaurant.name}&#10;                    address={restaurant.address}&#10;                  /&gt;&#10;                &lt;/div&gt;&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          &lt;/div&gt;&#10;        )}&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/restaurants/[id]/rewards/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/restaurants/[id]/rewards/page.tsx" />
              <option name="originalContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useParams, useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Badge } from '@/components/ui/badge'&#10;import { useToast } from '@/hooks/use-toast'&#10;import { loyaltyApi } from '@/lib/api'&#10;import { customerApi } from '@/lib/customer-api'&#10;import { ArrowLeft, Gift, Star, Clock, Users } from 'lucide-react'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;&#10;interface Reward {&#10;  id: string&#10;  restaurantId: string&#10;  restaurantName: string&#10;  name: string&#10;  description: string&#10;  pointsRequired: number&#10;  discountAmount?: number&#10;  discountPercentage?: number&#10;  imageUrl?: string&#10;  isActive: boolean&#10;  startDate?: string&#10;  endDate?: string&#10;  maxRedemptions?: number&#10;  currentRedemptions: number&#10;  canRedeem: boolean&#10;}&#10;&#10;export default function RestaurantRewardsPage() {&#10;  const params = useParams()&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [rewards, setRewards] = useState&lt;Reward[]&gt;([])&#10;  const [loading, setLoading] = useState(false)&#10;  const [selectedReward, setSelectedReward] = useState&lt;Reward | null&gt;(null)&#10;  const [confirmDialogOpen, setConfirmDialogOpen] = useState(false)&#10;  const [userPoints, setUserPoints] = useState(0)&#10;  &#10;  const restaurantId = params.id as string&#10;&#10;  useEffect(() =&gt; {&#10;    fetchRewards()&#10;    fetchUserPoints()&#10;    fetchRestaurantInfo()&#10;  }, [restaurantId])&#10;&#10;  const fetchRestaurantInfo = async () =&gt; {&#10;    try {&#10;      const restaurantData = await customerApi.restaurants.getById(restaurantId)&#10;      // You can store restaurant data in state if needed&#10;      console.log('Restaurant data:', restaurantData)&#10;    } catch (error: any) {&#10;      console.error('Error fetching restaurant:', error)&#10;    }&#10;  }&#10;&#10;  const fetchRewards = async () =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await loyaltyApi.getRestaurantRewards(restaurantId)&#10;      setRewards(data)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const fetchUserPoints = async () =&gt; {&#10;    try {&#10;      const balances = await loyaltyApi.customer.getBalance()&#10;      const balance = balances.find((b: any) =&gt; b.restaurantId === restaurantId)&#10;      setUserPoints(balance?.availablePoints || 0)&#10;    } catch (error: any) {&#10;      console.error(error)&#10;    }&#10;  }&#10;&#10;  const handleRedeemClick = (reward: Reward) =&gt; {&#10;    setSelectedReward(reward)&#10;    setConfirmDialogOpen(true)&#10;  }&#10;&#10;  const handleConfirmRedeem = async () =&gt; {&#10;    if (!selectedReward) return&#10;&#10;    setLoading(true)&#10;    try {&#10;      const redemption = await loyaltyApi.customer.redeemReward(selectedReward.id)&#10;      toast({&#10;        title: 'Success!',&#10;        description: `Reward redeemed! Your coupon code: ${redemption.couponCode}`,&#10;      })&#10;      setConfirmDialogOpen(false)&#10;      fetchRewards()&#10;      fetchUserPoints()&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-6xl&quot;&gt;&#10;      &lt;Button variant=&quot;ghost&quot; onClick={() =&gt; router.back()} className=&quot;mb-4&quot;&gt;&#10;        &lt;ArrowLeft className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;        Back&#10;      &lt;/Button&gt;&#10;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Loyalty Rewards&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Redeem your points for exclusive rewards&lt;/p&gt;&#10;        &lt;div className=&quot;mt-2&quot;&gt;&#10;          &lt;Badge variant=&quot;outline&quot; className=&quot;text-lg px-4 py-2&quot;&gt;&#10;            &lt;Star className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;            Your Points: {userPoints}&#10;          &lt;/Badge&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      {loading &amp;&amp; rewards.length === 0 ? (&#10;        &lt;div className=&quot;text-center py-12 text-muted-foreground&quot;&gt;Loading rewards...&lt;/div&gt;&#10;      ) : rewards.length === 0 ? (&#10;        &lt;Card&gt;&#10;          &lt;CardContent className=&quot;py-12 text-center text-muted-foreground&quot;&gt;&#10;            &lt;Gift className=&quot;w-16 h-16 mx-auto mb-4 opacity-20&quot; /&gt;&#10;            &lt;p&gt;No rewards available at this restaurant yet.&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      ) : (&#10;        &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;&#10;          {rewards.map((reward) =&gt; {&#10;            const isAvailable = reward.isActive &amp;&amp; &#10;                               (!reward.maxRedemptions || reward.currentRedemptions &lt; reward.maxRedemptions) &amp;&amp;&#10;                               (!reward.endDate || new Date(reward.endDate) &gt; new Date())&#10;            const hasEnoughPoints = userPoints &gt;= reward.pointsRequired&#10;&#10;            return (&#10;              &lt;Card key={reward.id} className={!isAvailable ? 'opacity-60' : ''}&gt;&#10;                {reward.imageUrl &amp;&amp; (&#10;                  &lt;div className=&quot;aspect-video w-full overflow-hidden rounded-t-lg&quot;&gt;&#10;                    &lt;img &#10;                      src={reward.imageUrl} &#10;                      alt={reward.name}&#10;                      className=&quot;w-full h-full object-cover&quot;&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                )}&#10;                &lt;CardHeader&gt;&#10;                  &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                    &lt;CardTitle className=&quot;text-lg&quot;&gt;{reward.name}&lt;/CardTitle&gt;&#10;                    {!isAvailable &amp;&amp; (&#10;                      &lt;Badge variant=&quot;secondary&quot;&gt;Unavailable&lt;/Badge&gt;&#10;                    )}&#10;                  &lt;/div&gt;&#10;                  &lt;CardDescription className=&quot;mt-2&quot;&gt;{reward.description}&lt;/CardDescription&gt;&#10;                &lt;/CardHeader&gt;&#10;                &lt;CardContent&gt;&#10;                  &lt;div className=&quot;space-y-3&quot;&gt;&#10;                    {/* Discount Info */}&#10;                    {(reward.discountAmount || reward.discountPercentage) &amp;&amp; (&#10;                      &lt;div className=&quot;bg-primary/10 p-3 rounded-lg text-center&quot;&gt;&#10;                        &lt;div className=&quot;text-2xl font-bold text-primary&quot;&gt;&#10;                          {reward.discountAmount &amp;&amp; `$${reward.discountAmount} OFF`}&#10;                          {reward.discountPercentage &amp;&amp; `${reward.discountPercentage}% OFF`}&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    )}&#10;&#10;                    {/* Points Required */}&#10;                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                      &lt;span className=&quot;text-sm text-muted-foreground&quot;&gt;Points Required&lt;/span&gt;&#10;                      &lt;Badge variant={hasEnoughPoints ? 'default' : 'secondary'} className=&quot;text-base px-3 py-1&quot;&gt;&#10;                        &lt;Star className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                        {reward.pointsRequired}&#10;                      &lt;/Badge&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    {/* Additional Info */}&#10;                    &lt;div className=&quot;space-y-1 text-xs text-muted-foreground&quot;&gt;&#10;                      {reward.maxRedemptions &amp;&amp; (&#10;                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                          &lt;Users className=&quot;w-3 h-3&quot; /&gt;&#10;                          &lt;span&gt;&#10;                            {reward.currentRedemptions}/{reward.maxRedemptions} redeemed&#10;                          &lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      )}&#10;                      {reward.endDate &amp;&amp; (&#10;                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                          &lt;Clock className=&quot;w-3 h-3&quot; /&gt;&#10;                          &lt;span&gt;&#10;                            Valid until {new Date(reward.endDate).toLocaleDateString()}&#10;                          &lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      )}&#10;                    &lt;/div&gt;&#10;&#10;                    {/* Redeem Button */}&#10;                    &lt;Button&#10;                      onClick={() =&gt; handleRedeemClick(reward)}&#10;                      disabled={!isAvailable || !hasEnoughPoints}&#10;                      className=&quot;w-full&quot;&#10;                    &gt;&#10;                      {!hasEnoughPoints &#10;                        ? `Need ${reward.pointsRequired - userPoints} more points`&#10;                        : 'Redeem Now'&#10;                      }&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/CardContent&gt;&#10;              &lt;/Card&gt;&#10;            )&#10;          })}&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {/* Confirm Redemption Dialog */}&#10;      &lt;Dialog open={confirmDialogOpen} onOpenChange={setConfirmDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Confirm Redemption&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Are you sure you want to redeem this reward?&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          {selectedReward &amp;&amp; (&#10;            &lt;div className=&quot;py-4&quot;&gt;&#10;              &lt;div className=&quot;space-y-3&quot;&gt;&#10;                &lt;div&gt;&#10;                  &lt;h4 className=&quot;font-semibold&quot;&gt;{selectedReward.name}&lt;/h4&gt;&#10;                  &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{selectedReward.description}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;bg-muted p-3 rounded-lg&quot;&gt;&#10;                  &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;&#10;                    &lt;span className=&quot;text-sm&quot;&gt;Points to Spend&lt;/span&gt;&#10;                    &lt;span className=&quot;font-bold&quot;&gt;-{selectedReward.pointsRequired}&lt;/span&gt;&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                    &lt;span className=&quot;text-sm&quot;&gt;Remaining Balance&lt;/span&gt;&#10;                    &lt;span className=&quot;font-bold&quot;&gt;{userPoints - selectedReward.pointsRequired}&lt;/span&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;p className=&quot;text-xs text-muted-foreground&quot;&gt;&#10;                  You'll receive a coupon code that can be used at this restaurant.&#10;                &lt;/p&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          )}&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button&#10;              variant=&quot;outline&quot;&#10;              onClick={() =&gt; {&#10;                setConfirmDialogOpen(false)&#10;                setSelectedReward(null)&#10;              }}&#10;            &gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button onClick={handleConfirmRedeem} disabled={loading}&gt;&#10;              {loading ? 'Redeeming...' : 'Confirm Redeem'}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useParams, useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Badge } from '@/components/ui/badge'&#10;import { useToast } from '@/hooks/use-toast'&#10;import { loyaltyApi } from '@/lib/api'&#10;import { customerApi } from '@/lib/customer-api'&#10;import { ArrowLeft, Gift, Star, Clock, Users, Loader2 } from 'lucide-react'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;import { useCart } from '@/contexts/cart-context'&#10;&#10;interface Reward {&#10;  id: string&#10;  restaurantId: string&#10;  restaurantName: string&#10;  name: string&#10;  description: string&#10;  pointsRequired: number&#10;  discountAmount?: number&#10;  discountPercentage?: number&#10;  imageUrl?: string&#10;  isActive: boolean&#10;  startDate?: string&#10;  endDate?: string&#10;  maxRedemptions?: number&#10;  currentRedemptions: number&#10;  canRedeem: boolean&#10;}&#10;&#10;export default function RestaurantRewardsPage() {&#10;  const params = useParams()&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const { applyCoupon } = useCart()&#10;  const [rewards, setRewards] = useState&lt;Reward[]&gt;([])&#10;  const [loading, setLoading] = useState(false)&#10;  const [redeeming, setRedeeming] = useState(false)&#10;  const [selectedReward, setSelectedReward] = useState&lt;Reward | null&gt;(null)&#10;  const [confirmDialogOpen, setConfirmDialogOpen] = useState(false)&#10;  const [userPoints, setUserPoints] = useState(0)&#10;  const [restaurantName, setRestaurantName] = useState('')&#10;  &#10;  const restaurantId = params.id as string&#10;&#10;  useEffect(() =&gt; {&#10;    fetchRewards()&#10;    fetchUserPoints()&#10;    fetchRestaurantInfo()&#10;  }, [restaurantId])&#10;&#10;  const fetchRestaurantInfo = async () =&gt; {&#10;    try {&#10;      const restaurantData = await customerApi.restaurants.getById(restaurantId)&#10;      setRestaurantName(restaurantData.name)&#10;    } catch (error: any) {&#10;      console.error('Error fetching restaurant:', error)&#10;    }&#10;  }&#10;&#10;  const fetchRewards = async () =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await loyaltyApi.getRestaurantRewards(restaurantId)&#10;      setRewards(data)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Hata',&#10;        description: error.message || 'Ödüller yüklenirken bir hata oluştu.',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const fetchUserPoints = async () =&gt; {&#10;    try {&#10;      const balances = await loyaltyApi.customer.getBalance()&#10;      const balance = balances.find((b: any) =&gt; b.restaurantId === restaurantId)&#10;      setUserPoints(balance?.availablePoints || 0)&#10;    } catch (error: any) {&#10;      console.error(error)&#10;    }&#10;  }&#10;&#10;  const handleRedeemClick = (reward: Reward) =&gt; {&#10;    setSelectedReward(reward)&#10;    setConfirmDialogOpen(true)&#10;  }&#10;&#10;  const handleConfirmRedeem = async () =&gt; {&#10;    if (!selectedReward) return&#10;&#10;    setRedeeming(true)&#10;    try {&#10;      const redemption = await loyaltyApi.customer.redeemReward(selectedReward.id)&#10;      &#10;      // Apply coupon to cart&#10;      applyCoupon({&#10;        couponCode: redemption.couponCode,&#10;        discountAmount: selectedReward.discountAmount || 0,&#10;        discountPercentage: selectedReward.discountPercentage || 0,&#10;        rewardName: selectedReward.name,&#10;        restaurantId: restaurantId&#10;      })&#10;&#10;      toast({&#10;        title: 'Başarılı!',&#10;        description: `Ödül kullanıldı! Kupon kodunuz: ${redemption.couponCode}. Sepete otomatik olarak eklendi.`,&#10;      })&#10;      setConfirmDialogOpen(false)&#10;      await fetchRewards()&#10;      await fetchUserPoints()&#10;&#10;      // Navigate to cart after 2 seconds&#10;      setTimeout(() =&gt; {&#10;        router.push('/cart')&#10;      }, 2000)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Hata',&#10;        description: error.message || 'Ödül kullanılırken bir hata oluştu.',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setRedeeming(false)&#10;    }&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-6xl&quot;&gt;&#10;      &lt;Button variant=&quot;ghost&quot; onClick={() =&gt; router.back()} className=&quot;mb-4&quot;&gt;&#10;        &lt;ArrowLeft className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;        Geri&#10;      &lt;/Button&gt;&#10;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Sadakat Ödülleri&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;&#10;          {restaurantName &amp;&amp; `${restaurantName} - `}Puanlarınızı kullanarak özel ödülleri kazanın&#10;        &lt;/p&gt;&#10;        &lt;div className=&quot;mt-2&quot;&gt;&#10;          &lt;Badge variant=&quot;outline&quot; className=&quot;text-lg px-4 py-2&quot;&gt;&#10;            &lt;Star className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;            Puanınız: {userPoints}&#10;          &lt;/Badge&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      {loading &amp;&amp; rewards.length === 0 ? (&#10;        &lt;div className=&quot;flex items-center justify-center py-12&quot;&gt;&#10;          &lt;Loader2 className=&quot;h-12 w-12 animate-spin text-primary&quot; /&gt;&#10;        &lt;/div&gt;&#10;      ) : rewards.length === 0 ? (&#10;        &lt;Card&gt;&#10;          &lt;CardContent className=&quot;py-12 text-center text-muted-foreground&quot;&gt;&#10;            &lt;Gift className=&quot;w-16 h-16 mx-auto mb-4 opacity-20&quot; /&gt;&#10;            &lt;p&gt;Bu restoranda henüz ödül bulunmuyor.&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      ) : (&#10;        &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;&#10;          {rewards.map((reward) =&gt; {&#10;            const isAvailable = reward.isActive &amp;&amp; &#10;                               (!reward.maxRedemptions || reward.currentRedemptions &lt; reward.maxRedemptions) &amp;&amp;&#10;                               (!reward.endDate || new Date(reward.endDate) &gt; new Date())&#10;            const hasEnoughPoints = userPoints &gt;= reward.pointsRequired&#10;&#10;            return (&#10;              &lt;Card key={reward.id} className={!isAvailable ? 'opacity-60' : ''}&gt;&#10;                {reward.imageUrl &amp;&amp; (&#10;                  &lt;div className=&quot;aspect-video w-full overflow-hidden rounded-t-lg&quot;&gt;&#10;                    &lt;img &#10;                      src={reward.imageUrl} &#10;                      alt={reward.name}&#10;                      className=&quot;w-full h-full object-cover&quot;&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                )}&#10;                &lt;CardHeader&gt;&#10;                  &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                    &lt;CardTitle className=&quot;text-lg&quot;&gt;{reward.name}&lt;/CardTitle&gt;&#10;                    {!isAvailable &amp;&amp; (&#10;                      &lt;Badge variant=&quot;secondary&quot;&gt;Kullanılamaz&lt;/Badge&gt;&#10;                    )}&#10;                  &lt;/div&gt;&#10;                  &lt;CardDescription className=&quot;mt-2&quot;&gt;{reward.description}&lt;/CardDescription&gt;&#10;                &lt;/CardHeader&gt;&#10;                &lt;CardContent&gt;&#10;                  &lt;div className=&quot;space-y-3&quot;&gt;&#10;                    {/* Discount Info */}&#10;                    {(reward.discountAmount || reward.discountPercentage) &amp;&amp; (&#10;                      &lt;div className=&quot;bg-primary/10 p-3 rounded-lg text-center&quot;&gt;&#10;                        &lt;div className=&quot;text-2xl font-bold text-primary&quot;&gt;&#10;                          {reward.discountAmount &amp;&amp; `₺${reward.discountAmount} İNDİRİM`}&#10;                          {reward.discountPercentage &amp;&amp; `%${reward.discountPercentage} İNDİRİM`}&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    )}&#10;&#10;                    {/* Points Required */}&#10;                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                      &lt;span className=&quot;text-sm text-muted-foreground&quot;&gt;Gereken Puan&lt;/span&gt;&#10;                      &lt;Badge variant={hasEnoughPoints ? 'default' : 'secondary'} className=&quot;text-base px-3 py-1&quot;&gt;&#10;                        &lt;Star className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                        {reward.pointsRequired}&#10;                      &lt;/Badge&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    {/* Additional Info */}&#10;                    &lt;div className=&quot;space-y-1 text-xs text-muted-foreground&quot;&gt;&#10;                      {reward.maxRedemptions &amp;&amp; (&#10;                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                          &lt;Users className=&quot;w-3 h-3&quot; /&gt;&#10;                          &lt;span&gt;&#10;                            {reward.currentRedemptions}/{reward.maxRedemptions} kullanıldı&#10;                          &lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      )}&#10;                      {reward.endDate &amp;&amp; (&#10;                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                          &lt;Clock className=&quot;w-3 h-3&quot; /&gt;&#10;                          &lt;span&gt;&#10;                            Geçerlilik: {new Date(reward.endDate).toLocaleDateString('tr-TR')}&#10;                          &lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      )}&#10;                    &lt;/div&gt;&#10;&#10;                    {/* Redeem Button */}&#10;                    &lt;Button&#10;                      onClick={() =&gt; handleRedeemClick(reward)}&#10;                      disabled={!isAvailable || !hasEnoughPoints}&#10;                      className=&quot;w-full&quot;&#10;                    &gt;&#10;                      {!hasEnoughPoints &#10;                        ? `${reward.pointsRequired - userPoints} puan daha gerekli`&#10;                        : 'Hemen Kullan'&#10;                      }&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/CardContent&gt;&#10;              &lt;/Card&gt;&#10;            )&#10;          })}&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {/* Confirm Redemption Dialog */}&#10;      &lt;Dialog open={confirmDialogOpen} onOpenChange={setConfirmDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Ödülü Kullan&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Bu ödülü kullanmak istediğinizden emin misiniz?&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          {selectedReward &amp;&amp; (&#10;            &lt;div className=&quot;py-4&quot;&gt;&#10;              &lt;div className=&quot;space-y-3&quot;&gt;&#10;                &lt;div&gt;&#10;                  &lt;h4 className=&quot;font-semibold&quot;&gt;{selectedReward.name}&lt;/h4&gt;&#10;                  &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{selectedReward.description}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;flex items-center justify-between p-3 bg-muted rounded-lg&quot;&gt;&#10;                  &lt;span className=&quot;text-sm&quot;&gt;Harcanacak Puan&lt;/span&gt;&#10;                  &lt;Badge variant=&quot;default&quot; className=&quot;text-base&quot;&gt;&#10;                    &lt;Star className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                    {selectedReward.pointsRequired}&#10;                  &lt;/Badge&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;flex items-center justify-between p-3 bg-muted rounded-lg&quot;&gt;&#10;                  &lt;span className=&quot;text-sm&quot;&gt;Kalan Puan&lt;/span&gt;&#10;                  &lt;Badge variant=&quot;outline&quot; className=&quot;text-base&quot;&gt;&#10;                    {userPoints - selectedReward.pointsRequired}&#10;                  &lt;/Badge&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          )}&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button variant=&quot;outline&quot; onClick={() =&gt; setConfirmDialogOpen(false)} disabled={redeeming}&gt;&#10;              İptal&#10;            &lt;/Button&gt;&#10;            &lt;Button onClick={handleConfirmRedeem} disabled={redeeming}&gt;&#10;              {redeeming ? (&#10;                &lt;&gt;&#10;                  &lt;Loader2 className=&quot;w-4 h-4 mr-2 animate-spin&quot; /&gt;&#10;                  Kullanılıyor...&#10;                &lt;/&gt;&#10;              ) : (&#10;                'Onayla ve Kullan'&#10;              )}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/contexts/cart-context.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/contexts/cart-context.tsx" />
              <option name="originalContent" value="&quot;use client&quot;&#10;&#10;import type React from &quot;react&quot;&#10;&#10;import { createContext, useContext, useState, useEffect } from &quot;react&quot;&#10;import type { MenuItem } from &quot;@/types&quot;&#10;&#10;interface CartItem {&#10;  menuItem: MenuItem&#10;  quantity: number&#10;  restaurantId: string&#10;  restaurantName: string&#10;}&#10;&#10;interface CartContextType {&#10;  items: CartItem[];&#10;  addItem: (item: MenuItem, restaurantId: string, restaurantName: string, quantityToAdd?: number) =&gt; Promise&lt;boolean&gt;&#10;  removeItem: (menuItemId: string) =&gt; void&#10;  updateQuantity: (menuItemId: string, quantity: number) =&gt; void&#10;  clearCart: () =&gt; void&#10;  total: number&#10;  currentRestaurantId: string | null&#10;  currentRestaurantName: string | null&#10;}&#10;&#10;const CartContext = createContext&lt;CartContextType | undefined&gt;(undefined)&#10;&#10;export function CartProvider({ children }: { children: React.ReactNode }) {&#10;  const [items, setItems] = useState&lt;CartItem[]&gt;([])&#10;  const [currentRestaurantId, setCurrentRestaurantId] = useState&lt;string | null&gt;(null)&#10;  const [currentRestaurantName, setCurrentRestaurantName] = useState&lt;string | null&gt;(null)&#10;&#10;  // Load cart from localStorage on mount&#10;  useEffect(() =&gt; {&#10;    const savedCart = localStorage.getItem(&quot;cart&quot;)&#10;    if (savedCart) {&#10;      const parsed = JSON.parse(savedCart)&#10;      setItems(parsed)&#10;      &#10;      // Set current restaurant from first item&#10;      if (parsed.length &gt; 0) {&#10;        setCurrentRestaurantId(parsed[0].restaurantId)&#10;        setCurrentRestaurantName(parsed[0].restaurantName)&#10;      }&#10;    }&#10;  }, [])&#10;&#10;  // Save cart to localStorage whenever it changes&#10;  useEffect(() =&gt; {&#10;    localStorage.setItem(&quot;cart&quot;, JSON.stringify(items))&#10;    &#10;    // Update current restaurant&#10;    if (items.length &gt; 0) {&#10;      setCurrentRestaurantId(items[0].restaurantId)&#10;      setCurrentRestaurantName(items[0].restaurantName)&#10;    } else {&#10;      setCurrentRestaurantId(null)&#10;      setCurrentRestaurantName(null)&#10;    }&#10;  }, [items])&#10;&#10;  const addItem = async (menuItem: MenuItem, restaurantId: string, restaurantName: string, quantityToAdd: number = 1): Promise&lt;boolean&gt; =&gt; {&#10;    // Check if trying to add from a different restaurant&#10;    if (currentRestaurantId &amp;&amp; currentRestaurantId !== restaurantId) {&#10;      const confirmed = window.confirm(&#10;        `Sepetinizde &quot;${currentRestaurantName}&quot; restoranından ürünler var.\n\n` +&#10;        `&quot;${restaurantName}&quot; restoranından ürün eklemek için önce mevcut sepeti temizlemeniz gerekiyor.\n\n` +&#10;        `Sepeti temizleyip bu ürünü eklemek istiyor musunuz?`&#10;      )&#10;      &#10;      if (!confirmed) {&#10;        return false&#10;      }&#10;      &#10;      // Clear cart and continue with adding the new item&#10;      setItems([])&#10;    }&#10;&#10;    setItems((prev) =&gt; {&#10;      // Check if item already exists&#10;      const existingIndex = prev.findIndex((item) =&gt; item.menuItem.id === menuItem.id)&#10;&#10;      if (existingIndex &gt; -1) {&#10;        // Update quantity&#10;        const updated = [...prev]&#10;        updated[existingIndex].quantity += quantityToAdd&#10;        return updated&#10;      }&#10;&#10;      // Add new item&#10;      return [...prev, { menuItem, quantity: quantityToAdd, restaurantId, restaurantName }]&#10;    })&#10;    &#10;    return true&#10;  }&#10;&#10;  const removeItem = (menuItemId: string) =&gt; {&#10;    setItems((prev) =&gt; prev.filter((item) =&gt; item.menuItem.id !== menuItemId))&#10;  }&#10;&#10;  const updateQuantity = (menuItemId: string, quantity: number) =&gt; {&#10;    if (quantity &lt;= 0) {&#10;      removeItem(menuItemId)&#10;      return&#10;    }&#10;&#10;    setItems((prev) =&gt; prev.map((item) =&gt; (item.menuItem.id === menuItemId ? { ...item, quantity } : item)))&#10;  }&#10;&#10;  const clearCart = () =&gt; {&#10;    setItems([])&#10;  }&#10;&#10;  const total = items.reduce((sum, item) =&gt; sum + item.menuItem.price * item.quantity, 0)&#10;&#10;  return (&#10;    &lt;CartContext.Provider value={{ &#10;      items, &#10;      addItem, &#10;      removeItem, &#10;      updateQuantity, &#10;      clearCart, &#10;      total,&#10;      currentRestaurantId,&#10;      currentRestaurantName&#10;    }}&gt;&#10;      {children}&#10;    &lt;/CartContext.Provider&gt;&#10;  )&#10;}&#10;&#10;export function useCart() {&#10;  const context = useContext(CartContext)&#10;  if (!context) {&#10;    throw new Error(&quot;useCart must be used within CartProvider&quot;)&#10;  }&#10;  return context&#10;}&#10;" />
              <option name="updatedContent" value="&quot;use client&quot;&#10;&#10;import type React from &quot;react&quot;&#10;&#10;import { createContext, useContext, useState, useEffect } from &quot;react&quot;&#10;import type { MenuItem } from &quot;@/types&quot;&#10;&#10;interface CartItem {&#10;  menuItem: MenuItem&#10;  quantity: number&#10;  restaurantId: string&#10;  restaurantName: string&#10;}&#10;&#10;interface AppliedCoupon {&#10;  couponCode: string&#10;  discountAmount: number&#10;  discountPercentage: number&#10;  rewardName: string&#10;  restaurantId: string&#10;}&#10;&#10;interface CartContextType {&#10;  items: CartItem[];&#10;  addItem: (item: MenuItem, restaurantId: string, restaurantName: string, quantityToAdd?: number) =&gt; Promise&lt;boolean&gt;&#10;  removeItem: (menuItemId: string) =&gt; void&#10;  updateQuantity: (menuItemId: string, quantity: number) =&gt; void&#10;  clearCart: () =&gt; void&#10;  total: number&#10;  currentRestaurantId: string | null&#10;  currentRestaurantName: string | null&#10;  appliedCoupon: AppliedCoupon | null&#10;  applyCoupon: (coupon: AppliedCoupon) =&gt; void&#10;  removeCoupon: () =&gt; void&#10;  discountAmount: number&#10;  finalTotal: number&#10;}&#10;&#10;const CartContext = createContext&lt;CartContextType | undefined&gt;(undefined)&#10;&#10;export function CartProvider({ children }: { children: React.ReactNode }) {&#10;  const [items, setItems] = useState&lt;CartItem[]&gt;([])&#10;  const [currentRestaurantId, setCurrentRestaurantId] = useState&lt;string | null&gt;(null)&#10;  const [currentRestaurantName, setCurrentRestaurantName] = useState&lt;string | null&gt;(null)&#10;  const [appliedCoupon, setAppliedCoupon] = useState&lt;AppliedCoupon | null&gt;(null)&#10;&#10;  // Load cart from localStorage on mount&#10;  useEffect(() =&gt; {&#10;    const savedCart = localStorage.getItem(&quot;cart&quot;)&#10;    if (savedCart) {&#10;      const parsed = JSON.parse(savedCart)&#10;      setItems(parsed)&#10;      &#10;      // Set current restaurant from first item&#10;      if (parsed.length &gt; 0) {&#10;        setCurrentRestaurantId(parsed[0].restaurantId)&#10;        setCurrentRestaurantName(parsed[0].restaurantName)&#10;      }&#10;    }&#10;&#10;    // Load applied coupon&#10;    const savedCoupon = localStorage.getItem(&quot;appliedCoupon&quot;)&#10;    if (savedCoupon) {&#10;      setAppliedCoupon(JSON.parse(savedCoupon))&#10;    }&#10;  }, [])&#10;&#10;  // Save cart to localStorage whenever it changes&#10;  useEffect(() =&gt; {&#10;    localStorage.setItem(&quot;cart&quot;, JSON.stringify(items))&#10;    &#10;    // Update current restaurant&#10;    if (items.length &gt; 0) {&#10;      setCurrentRestaurantId(items[0].restaurantId)&#10;      setCurrentRestaurantName(items[0].restaurantName)&#10;    } else {&#10;      setCurrentRestaurantId(null)&#10;      setCurrentRestaurantName(null)&#10;    }&#10;&#10;    // Remove coupon if restaurant changed&#10;    if (appliedCoupon &amp;&amp; items.length &gt; 0 &amp;&amp; items[0].restaurantId !== appliedCoupon.restaurantId) {&#10;      setAppliedCoupon(null)&#10;      localStorage.removeItem(&quot;appliedCoupon&quot;)&#10;    }&#10;  }, [items, appliedCoupon])&#10;&#10;  // Save applied coupon to localStorage&#10;  useEffect(() =&gt; {&#10;    if (appliedCoupon) {&#10;      localStorage.setItem(&quot;appliedCoupon&quot;, JSON.stringify(appliedCoupon))&#10;    } else {&#10;      localStorage.removeItem(&quot;appliedCoupon&quot;)&#10;    }&#10;  }, [appliedCoupon])&#10;&#10;  const addItem = async (menuItem: MenuItem, restaurantId: string, restaurantName: string, quantityToAdd: number = 1): Promise&lt;boolean&gt; =&gt; {&#10;    // Check if trying to add from a different restaurant&#10;    if (currentRestaurantId &amp;&amp; currentRestaurantId !== restaurantId) {&#10;      const confirmed = window.confirm(&#10;        `Sepetinizde &quot;${currentRestaurantName}&quot; restoranından ürünler var.\n\n` +&#10;        `&quot;${restaurantName}&quot; restoranından ürün eklemek için önce mevcut sepeti temizlemeniz gerekiyor.\n\n` +&#10;        `Sepeti temizleyip bu ürünü eklemek istiyor musunuz?`&#10;      )&#10;      &#10;      if (!confirmed) {&#10;        return false&#10;      }&#10;      &#10;      // Clear cart and continue with adding the new item&#10;      setItems([])&#10;      setAppliedCoupon(null)&#10;    }&#10;&#10;    setItems((prev) =&gt; {&#10;      // Check if item already exists&#10;      const existingIndex = prev.findIndex((item) =&gt; item.menuItem.id === menuItem.id)&#10;&#10;      if (existingIndex &gt; -1) {&#10;        // Update quantity&#10;        const updated = [...prev]&#10;        updated[existingIndex].quantity += quantityToAdd&#10;        return updated&#10;      }&#10;&#10;      // Add new item&#10;      return [...prev, { menuItem, quantity: quantityToAdd, restaurantId, restaurantName }]&#10;    })&#10;    &#10;    return true&#10;  }&#10;&#10;  const removeItem = (menuItemId: string) =&gt; {&#10;    setItems((prev) =&gt; prev.filter((item) =&gt; item.menuItem.id !== menuItemId))&#10;  }&#10;&#10;  const updateQuantity = (menuItemId: string, quantity: number) =&gt; {&#10;    if (quantity &lt;= 0) {&#10;      removeItem(menuItemId)&#10;      return&#10;    }&#10;&#10;    setItems((prev) =&gt; prev.map((item) =&gt; (item.menuItem.id === menuItemId ? { ...item, quantity } : item)))&#10;  }&#10;&#10;  const clearCart = () =&gt; {&#10;    setItems([])&#10;    setAppliedCoupon(null)&#10;  }&#10;&#10;  const applyCoupon = (coupon: AppliedCoupon) =&gt; {&#10;    // Check if coupon is for current restaurant&#10;    if (currentRestaurantId &amp;&amp; coupon.restaurantId !== currentRestaurantId) {&#10;      return&#10;    }&#10;    setAppliedCoupon(coupon)&#10;  }&#10;&#10;  const removeCoupon = () =&gt; {&#10;    setAppliedCoupon(null)&#10;  }&#10;&#10;  const total = items.reduce((sum, item) =&gt; sum + item.menuItem.price * item.quantity, 0)&#10;&#10;  // Calculate discount&#10;  let discountAmount = 0&#10;  if (appliedCoupon) {&#10;    if (appliedCoupon.discountAmount &gt; 0) {&#10;      discountAmount = appliedCoupon.discountAmount&#10;    } else if (appliedCoupon.discountPercentage &gt; 0) {&#10;      discountAmount = (total * appliedCoupon.discountPercentage) / 100&#10;    }&#10;  }&#10;&#10;  const finalTotal = Math.max(0, total - discountAmount)&#10;&#10;  return (&#10;    &lt;CartContext.Provider value={{ &#10;      items, &#10;      addItem, &#10;      removeItem, &#10;      updateQuantity, &#10;      clearCart, &#10;      total,&#10;      currentRestaurantId,&#10;      currentRestaurantName,&#10;      appliedCoupon,&#10;      applyCoupon,&#10;      removeCoupon,&#10;      discountAmount,&#10;      finalTotal&#10;    }}&gt;&#10;      {children}&#10;    &lt;/CartContext.Provider&gt;&#10;  )&#10;}&#10;&#10;export function useCart() {&#10;  const context = useContext(CartContext)&#10;  if (!context) {&#10;    throw new Error(&quot;useCart must be used within CartProvider&quot;)&#10;  }&#10;  return context&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Domain.Models.Common;&#10;&#10;public class TopSellingItemDto&#10;{&#10;    public string MenuItemId { get; set; } = string.Empty;&#10;    public string MenuItemName { get; set; } = string.Empty;&#10;    public int QuantitySold { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.Metadata.Builders;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Persistance.Configurations;&#10;&#10;public class JobPostingConfiguration : IEntityTypeConfiguration&lt;JobPosting&gt;&#10;{&#10;    public void Configure(EntityTypeBuilder&lt;JobPosting&gt; builder)&#10;    {&#10;        builder.HasKey(j =&gt; j.Id);&#10;&#10;        builder.Property(j =&gt; j.Title)&#10;            .IsRequired()&#10;            .HasMaxLength(200);&#10;&#10;        builder.Property(j =&gt; j.Description)&#10;            .IsRequired()&#10;            .HasMaxLength(2000);&#10;&#10;        builder.Property(j =&gt; j.Requirements)&#10;            .IsRequired()&#10;            .HasMaxLength(1000);&#10;&#10;        builder.Property(j =&gt; j.Position)&#10;            .IsRequired()&#10;            .HasMaxLength(100);&#10;&#10;        builder.Property(j =&gt; j.EmploymentType)&#10;            .IsRequired()&#10;            .HasMaxLength(50);&#10;&#10;        // Relationships&#10;        builder.HasOne(j =&gt; j.Restaurant)&#10;            .WithMany(r =&gt; r.JobPostings)&#10;            .HasForeignKey(j =&gt; j.RestaurantId)&#10;            .OnDelete(DeleteBehavior.Cascade);&#10;&#10;        // Indexes&#10;        builder.HasIndex(j =&gt; j.RestaurantId);&#10;        builder.HasIndex(j =&gt; j.IsActive);&#10;&#10;        // Soft Delete Query Filter&#10;        builder.HasQueryFilter(j =&gt; !j.IsDeleted);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/FileController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/FileController.cs" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;public class FileController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public FileController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload profile image for user&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/profile/{userId}&quot;)]&#10;    [Authorize]&#10;    public async Task&lt;IActionResult&gt; UploadProfileImage(string userId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadProfileImageAsync(file, userId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Profil resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload menu item image&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/menuitem/{menuItemId}&quot;)]&#10;    [Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadMenuItemImage(string menuItemId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadMenuItemImageAsync(file, menuItemId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Menü öğesi resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload reward image&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/reward/{rewardId}&quot;)]&#10;    [Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRewardImage(string rewardId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRewardImageAsync(file, rewardId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Ödül resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload restaurant image&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;upload/restaurant/{restaurantId}&quot;)]&#10;    [Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRestaurantImage(string restaurantId, IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Dosya yüklenemedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRestaurantImageAsync(file, restaurantId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Restoran resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete a file&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete(&quot;delete&quot;)]&#10;    [Authorize]&#10;    public async Task&lt;IActionResult&gt; DeleteFile([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Dosya başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Dosya bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Check if file exists&#10;    /// &lt;/summary&gt;&#10;    [HttpGet(&quot;exists&quot;)]&#10;    public async Task&lt;IActionResult&gt; FileExists([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var exists = await _fileService.FileExistsAsync(fileUrl);&#10;            return Ok(new { exists });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Dosya kontrol edilirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/MenuItemImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/MenuItemImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;public class MenuItemImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public MenuItemImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload menu item image (Required when creating menu item)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{menuItemId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadMenuItemImage(string menuItemId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Menü öğesi resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadMenuItemImageAsync(file, menuItemId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Menü öğesi resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Menü öğesi resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update menu item image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{menuItemId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateMenuItemImage(string menuItemId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Menü öğesi resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadMenuItemImageAsync(file, menuItemId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Menü öğesi resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Menü öğesi resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete menu item image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteMenuItemImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Menü öğesi resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Menü öğesi resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Menü öğesi resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/ProfileImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/ProfileImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize]&#10;public class ProfileImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public ProfileImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload profile image (Optional for customer)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{userId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadProfileImage(string userId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Profil resmi seçilmedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadProfileImageAsync(file, userId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Profil resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Profil resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update profile image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{userId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateProfileImage(string userId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Profil resmi seçilmedi.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadProfileImageAsync(file, userId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Profil resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Profil resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete profile image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteProfileImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Profil resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Profil resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Profil resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RestaurantImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RestaurantImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;public class RestaurantImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public RestaurantImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload restaurant image (Required when creating restaurant)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{restaurantId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRestaurantImage(string restaurantId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Restoran resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRestaurantImageAsync(file, restaurantId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Restoran resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Restoran resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update restaurant image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{restaurantId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateRestaurantImage(string restaurantId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Restoran resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRestaurantImageAsync(file, restaurantId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Restoran resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Restoran resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete restaurant image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteRestaurantImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Restoran resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Restoran resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Restoran resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RewardImageController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/RewardImageController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[ApiController]&#10;[Route(&quot;api/[controller]&quot;)]&#10;[Authorize(Roles = &quot;Owner,Admin&quot;)]&#10;public class RewardImageController : ControllerBase&#10;{&#10;    private readonly IFileService _fileService;&#10;&#10;    public RewardImageController(IFileService fileService)&#10;    {&#10;        _fileService = fileService;&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Upload reward image (Required when creating reward)&#10;    /// &lt;/summary&gt;&#10;    [HttpPost(&quot;{rewardId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UploadRewardImage(string rewardId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Ödül resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRewardImageAsync(file, rewardId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Ödül resmi başarıyla yüklendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Ödül resmi yüklenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Update reward image&#10;    /// &lt;/summary&gt;&#10;    [HttpPut(&quot;{rewardId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateRewardImage(string rewardId, [FromForm] IFormFile file)&#10;    {&#10;        try&#10;        {&#10;            if (file == null || file.Length == 0)&#10;                return BadRequest(new { message = &quot;Ödül resmi zorunludur.&quot; });&#10;&#10;            var fileUrl = await _fileService.UploadRewardImageAsync(file, rewardId);&#10;            return Ok(new { imageUrl = fileUrl, message = &quot;Ödül resmi başarıyla güncellendi.&quot; });&#10;        }&#10;        catch (ArgumentException ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Ödül resmi güncellenirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;&#10;    /// &lt;summary&gt;&#10;    /// Delete reward image&#10;    /// &lt;/summary&gt;&#10;    [HttpDelete]&#10;    public async Task&lt;IActionResult&gt; DeleteRewardImage([FromQuery] string fileUrl)&#10;    {&#10;        try&#10;        {&#10;            var result = await _fileService.DeleteFileAsync(fileUrl);&#10;            if (result)&#10;                return Ok(new { message = &quot;Ödül resmi başarıyla silindi.&quot; });&#10;            &#10;            return NotFound(new { message = &quot;Ödül resmi bulunamadı.&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = &quot;Ödül resmi silinirken bir hata oluştu.&quot;, error = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.AspNetCore.Identity;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.WebAPI;&#10;&#10;public static class OwnerIdFixer&#10;{&#10;    public static async Task FixRestaurantOwnerIds(IServiceProvider services)&#10;    {&#10;        using var scope = services.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var logger = scope.ServiceProvider.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();&#10;        &#10;        try&#10;        {&#10;            // Owner kullanıcısını bul&#10;            var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;            if (owner == null)&#10;            {&#10;                logger.LogWarning(&quot;owner@gmail.com kullanıcısı bulunamadı!&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;Owner bulundu: {owner.Email} (ID: {owner.Id})&quot;);&#10;            &#10;            // Tüm aktif restoranları bul&#10;            var restaurants = await context.Restaurants&#10;                .Where(r =&gt; !r.IsDeleted)&#10;                .ToListAsync();&#10;            &#10;            if (restaurants.Count == 0)&#10;            {&#10;                logger.LogInformation(&quot;Veritabanında restoran bulunamadı.&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;{restaurants.Count} restoran bulundu, owner ID'leri güncelleniyor...&quot;);&#10;            &#10;            // Her restoranın owner ID'sini güncelle&#10;            foreach (var restaurant in restaurants)&#10;            {&#10;                restaurant.OwnerId = owner.Id;&#10;                logger.LogInformation($&quot;✓ {restaurant.Name} -&gt; Owner ID güncellendi&quot;);&#10;            }&#10;            &#10;            await context.SaveChangesAsync();&#10;            logger.LogInformation($&quot;✅ {restaurants.Count} restoranın owner ID'si başarıyla güncellendi!&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            logger.LogError(ex, &quot;Owner ID güncellenirken hata oluştu!&quot;);&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>