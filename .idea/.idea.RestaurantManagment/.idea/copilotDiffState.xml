<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Domain.Models.Common;&#10;&#10;public class TopSellingItemDto&#10;{&#10;    public string MenuItemId { get; set; } = string.Empty;&#10;    public string MenuItemName { get; set; } = string.Empty;&#10;    public int QuantitySold { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs" />
              <option name="originalContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/AdminService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/AdminService.cs" />
              <option name="originalContent" value="using Microsoft.AspNetCore.Identity;&#10;using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using AutoMapper;&#10;&#10;namespace RestaurantManagment.Infrastructure.Services;&#10;&#10;public class AdminService(IAppDbContext _context,UserManager&lt;AppUser&gt; _userManager, IMapper _mapper) : IAdminService&#10;{&#10;    &#10;    public async Task&lt;OwnershipApplication?&gt; GetApplicationByIdAsync(string id)&#10;    {&#10;        return await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .FirstOrDefaultAsync(a =&gt; a.Id.ToString() == id.ToString() &amp;&amp; !a.IsDeleted);&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt; GetPendingApplicationsAsync()&#10;    {&#10;        var applications = await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .OrderBy(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;&#10;        return _mapper.Map&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt;(applications);&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplication&gt;&gt; GetApplicationsByUserIdAsync(string userId)&#10;    {&#10;        return await _context.OwnershipApplications&#10;            .Where(a =&gt; a.UserId == userId &amp;&amp; !a.IsDeleted)&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;    }&#10;&#10;    public async Task ApproveApplicationAsync(string applicationId, string reviewerId)&#10;    {&#10;        var application = await _context.OwnershipApplications.FindAsync(applicationId);&#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Approved;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectApplicationAsync(string applicationId, string reviewerId, string reason)&#10;    {&#10;        var application = await _context.OwnershipApplications.FindAsync(applicationId);&#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Rejected;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;        application.RejectionReason = reason;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;AdminDashboardDto&gt; GetAdminDashboardDataAsync()&#10;    {&#10;        var dashboard = new AdminDashboardDto();&#10;&#10;     &#10;        dashboard.TotalUsers = await _userManager.Users&#10;            .Where(u =&gt; !u.IsDeleted)&#10;            .CountAsync();&#10;&#10;        &#10;        dashboard.TotalRestaurants = await _context.Restaurants&#10;            .Where(r =&gt; !r.IsDeleted)&#10;            .CountAsync();&#10;&#10;         &#10;        var restaurantOwnerRole = &quot;RestaurantOwner&quot;;&#10;        var ownersQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allOwners = await ownersQuery.ToListAsync();&#10;        var owners = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allOwners)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(restaurantOwnerRole))&#10;            {&#10;                owners.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalRestaurantOwners = owners.Count;&#10;&#10;        var employeeRole = &quot;Employee&quot;;&#10;        var employeesQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allEmployees = await employeesQuery.ToListAsync();&#10;        var employees = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allEmployees)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(employeeRole))&#10;            {&#10;                employees.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalEmployees = employees.Count;&#10;&#10;        dashboard.TotalPendingApplications = await _context.OwnershipApplications&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .CountAsync();&#10;&#10;        return dashboard;&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;UserAdminShowDto&gt;&gt; GetUsersAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var users = await query&#10;            .OrderByDescending(u =&gt; u.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var userDtos = new List&lt;UserAdminShowDto&gt;();&#10;        foreach (var user in users)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            userDtos.Add(new UserAdminShowDto&#10;            {&#10;                Id = user.Id,&#10;                UserName = user.UserName ?? string.Empty,&#10;                Email = user.Email ?? string.Empty,&#10;                IsActive = !user.IsDeleted,&#10;                Role = roles.FirstOrDefault() ?? &quot;User&quot;&#10;            });&#10;        }&#10;&#10;        return new PaginatedResult&lt;UserAdminShowDto&gt;&#10;        {&#10;            Items = userDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;RestaurantAdminListDto&gt;&gt; GetRestaurantsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.Restaurants&#10;            .Include(r =&gt; r.Owner)&#10;            .Where(r =&gt; !r.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var restaurants = await query&#10;            .OrderByDescending(r =&gt; r.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var restaurantDtos = _mapper.Map&lt;List&lt;RestaurantAdminListDto&gt;&gt;(restaurants);&#10;&#10;        return new PaginatedResult&lt;RestaurantAdminListDto&gt;&#10;        {&#10;            Items = restaurantDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&gt; GetOwnershipApplicationsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; !a.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var applications = await query&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var applicationDtos = _mapper.Map&lt;List&lt;OwnershipApplicationAdminDto&gt;&gt;(applications);&#10;&#10;        return new PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&#10;        {&#10;            Items = applicationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;}" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Identity;&#10;using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using AutoMapper;&#10;&#10;namespace RestaurantManagment.Infrastructure.Services;&#10;&#10;public class AdminService(IAppDbContext _context,UserManager&lt;AppUser&gt; _userManager, IMapper _mapper) : IAdminService&#10;{&#10;    &#10;    public async Task&lt;OwnershipApplication?&gt; GetApplicationByIdAsync(string id)&#10;    {&#10;        return await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == id &amp;&amp; !a.IsDeleted);&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt; GetPendingApplicationsAsync()&#10;    {&#10;        var applications = await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .OrderBy(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;&#10;        return _mapper.Map&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt;(applications);&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplication&gt;&gt; GetApplicationsByUserIdAsync(string userId)&#10;    {&#10;        return await _context.OwnershipApplications&#10;            .Where(a =&gt; a.UserId == userId &amp;&amp; !a.IsDeleted)&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;    }&#10;&#10;    public async Task ApproveApplicationAsync(string applicationId, string reviewerId)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == applicationId &amp;&amp; !a.IsDeleted);&#10;        &#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Approved;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectApplicationAsync(string applicationId, string reviewerId, string reason)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == applicationId &amp;&amp; !a.IsDeleted);&#10;        &#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Rejected;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;        application.RejectionReason = reason;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;AdminDashboardDto&gt; GetAdminDashboardDataAsync()&#10;    {&#10;        var dashboard = new AdminDashboardDto();&#10;&#10;     &#10;        dashboard.TotalUsers = await _userManager.Users&#10;            .Where(u =&gt; !u.IsDeleted)&#10;            .CountAsync();&#10;&#10;        &#10;        dashboard.TotalRestaurants = await _context.Restaurants&#10;            .Where(r =&gt; !r.IsDeleted)&#10;            .CountAsync();&#10;&#10;         &#10;        var restaurantOwnerRole = &quot;RestaurantOwner&quot;;&#10;        var ownersQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allOwners = await ownersQuery.ToListAsync();&#10;        var owners = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allOwners)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(restaurantOwnerRole))&#10;            {&#10;                owners.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalRestaurantOwners = owners.Count;&#10;&#10;        var employeeRole = &quot;Employee&quot;;&#10;        var employeesQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allEmployees = await employeesQuery.ToListAsync();&#10;        var employees = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allEmployees)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(employeeRole))&#10;            {&#10;                employees.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalEmployees = employees.Count;&#10;&#10;        dashboard.TotalPendingApplications = await _context.OwnershipApplications&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .CountAsync();&#10;&#10;        return dashboard;&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;UserAdminShowDto&gt;&gt; GetUsersAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var users = await query&#10;            .OrderByDescending(u =&gt; u.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var userDtos = new List&lt;UserAdminShowDto&gt;();&#10;        foreach (var user in users)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            userDtos.Add(new UserAdminShowDto&#10;            {&#10;                Id = user.Id,&#10;                UserName = user.UserName ?? string.Empty,&#10;                Email = user.Email ?? string.Empty,&#10;                IsActive = !user.IsDeleted,&#10;                Role = roles.FirstOrDefault() ?? &quot;User&quot;&#10;            });&#10;        }&#10;&#10;        return new PaginatedResult&lt;UserAdminShowDto&gt;&#10;        {&#10;            Items = userDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;RestaurantAdminListDto&gt;&gt; GetRestaurantsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.Restaurants&#10;            .Include(r =&gt; r.Owner)&#10;            .Where(r =&gt; !r.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var restaurants = await query&#10;            .OrderByDescending(r =&gt; r.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var restaurantDtos = _mapper.Map&lt;List&lt;RestaurantAdminListDto&gt;&gt;(restaurants);&#10;&#10;        return new PaginatedResult&lt;RestaurantAdminListDto&gt;&#10;        {&#10;            Items = restaurantDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&gt; GetOwnershipApplicationsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; !a.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var applications = await query&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var applicationDtos = _mapper.Map&lt;List&lt;OwnershipApplicationAdminDto&gt;&gt;(applications);&#10;&#10;        return new PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&#10;        {&#10;            Items = applicationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.Metadata.Builders;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Persistance.Configurations;&#10;&#10;public class JobPostingConfiguration : IEntityTypeConfiguration&lt;JobPosting&gt;&#10;{&#10;    public void Configure(EntityTypeBuilder&lt;JobPosting&gt; builder)&#10;    {&#10;        builder.HasKey(j =&gt; j.Id);&#10;&#10;        builder.Property(j =&gt; j.Title)&#10;            .IsRequired()&#10;            .HasMaxLength(200);&#10;&#10;        builder.Property(j =&gt; j.Description)&#10;            .IsRequired()&#10;            .HasMaxLength(2000);&#10;&#10;        builder.Property(j =&gt; j.Requirements)&#10;            .IsRequired()&#10;            .HasMaxLength(1000);&#10;&#10;        builder.Property(j =&gt; j.Position)&#10;            .IsRequired()&#10;            .HasMaxLength(100);&#10;&#10;        builder.Property(j =&gt; j.EmploymentType)&#10;            .IsRequired()&#10;            .HasMaxLength(50);&#10;&#10;        // Relationships&#10;        builder.HasOne(j =&gt; j.Restaurant)&#10;            .WithMany(r =&gt; r.JobPostings)&#10;            .HasForeignKey(j =&gt; j.RestaurantId)&#10;            .OnDelete(DeleteBehavior.Cascade);&#10;&#10;        // Indexes&#10;        builder.HasIndex(j =&gt; j.RestaurantId);&#10;        builder.HasIndex(j =&gt; j.IsActive);&#10;&#10;        // Soft Delete Query Filter&#10;        builder.HasQueryFilter(j =&gt; !j.IsDeleted);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/AdminController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/AdminController.cs" />
              <option name="originalContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers&#10;{&#10;    [Route(&quot;api/[controller]&quot;)]&#10;    [ApiController]&#10;    [Authorize(Roles = &quot;Admin&quot;)] &#10;    public class AdminController : ControllerBase&#10;    {&#10;        private readonly IAdminService _adminService;&#10;&#10;        public AdminController(IAdminService adminService)&#10;        {&#10;            _adminService = adminService;&#10;        }&#10;&#10;       &#10;        [HttpGet(&quot;dashboard&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetDashboard()&#10;        {&#10;            try&#10;            {&#10;                var dashboardData = await _adminService.GetAdminDashboardDataAsync();&#10;                return Ok(dashboardData);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the dashboard data.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;users&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetUsers([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetUsersAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the users.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;restaurants&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetRestaurants([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetRestaurantsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the restaurants.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplications([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetOwnershipApplicationsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications/pending&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetPendingApplications()&#10;        {&#10;            try&#10;            {&#10;                var applications = await _adminService.GetPendingApplicationsAsync();&#10;                return Ok(applications);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }  &#10;        }&#10;&#10;     &#10;        [HttpGet(&quot;applications/{id}&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplication(string id)&#10;        {&#10;            try&#10;            {&#10;                var application = await _adminService.GetApplicationByIdAsync(id);&#10;                if (application == null)&#10;                    return NotFound(new { message = &quot;Application not found.&quot; });&#10;&#10;                return Ok(application);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/approve&quot;)]&#10;        public async Task&lt;IActionResult&gt; ApproveApplication(int id)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                await _adminService.ApproveApplicationAsync(id, userId);&#10;                return Ok(new { message = &quot;Application approved.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while approving the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/reject&quot;)]&#10;        public async Task&lt;IActionResult&gt; RejectApplication(int id, [FromBody] RejectApplicationRequest request)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                if (string.IsNullOrEmpty(request.Reason))&#10;                    return BadRequest(new { message = &quot;Rejection reason must be specified.&quot; });&#10;&#10;                await _adminService.RejectApplicationAsync(id, userId, request.Reason);&#10;                return Ok(new { message = &quot;Application rejected.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while rejecting the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;    }&#10;&#10;    public class RejectApplicationRequest&#10;    {&#10;        public string Reason { get; set; } = string.Empty;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers&#10;{&#10;    [Route(&quot;api/[controller]&quot;)]&#10;    [ApiController]&#10;    [Authorize(Roles = &quot;Admin&quot;)] &#10;    public class AdminController : ControllerBase&#10;    {&#10;        private readonly IAdminService _adminService;&#10;&#10;        public AdminController(IAdminService adminService)&#10;        {&#10;            _adminService = adminService;&#10;        }&#10;&#10;       &#10;        [HttpGet(&quot;dashboard&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetDashboard()&#10;        {&#10;            try&#10;            {&#10;                var dashboardData = await _adminService.GetAdminDashboardDataAsync();&#10;                return Ok(dashboardData);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the dashboard data.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;users&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetUsers([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetUsersAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the users.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;restaurants&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetRestaurants([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetRestaurantsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the restaurants.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplications([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetOwnershipApplicationsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications/pending&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetPendingApplications()&#10;        {&#10;            try&#10;            {&#10;                var applications = await _adminService.GetPendingApplicationsAsync();&#10;                return Ok(applications);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }  &#10;        }&#10;&#10;     &#10;        [HttpGet(&quot;applications/{id}&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplication(string id)&#10;        {&#10;            try&#10;            {&#10;                var application = await _adminService.GetApplicationByIdAsync(id);&#10;                if (application == null)&#10;                    return NotFound(new { message = &quot;Application not found.&quot; });&#10;&#10;                return Ok(application);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/approve&quot;)]&#10;        public async Task&lt;IActionResult&gt; ApproveApplication(string id)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                await _adminService.ApproveApplicationAsync(id, userId);&#10;                return Ok(new { message = &quot;Application approved.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while approving the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/reject&quot;)]&#10;        public async Task&lt;IActionResult&gt; RejectApplication(string id, [FromBody] RejectApplicationRequest request)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                if (string.IsNullOrEmpty(request.Reason))&#10;                    return BadRequest(new { message = &quot;Rejection reason must be specified.&quot; });&#10;&#10;                await _adminService.RejectApplicationAsync(id, userId, request.Reason);&#10;                return Ok(new { message = &quot;Application rejected.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while rejecting the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;    }&#10;&#10;    public class RejectApplicationRequest&#10;    {&#10;        public string Reason { get; set; } = string.Empty;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.AspNetCore.Identity;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.WebAPI;&#10;&#10;public static class OwnerIdFixer&#10;{&#10;    public static async Task FixRestaurantOwnerIds(IServiceProvider services)&#10;    {&#10;        using var scope = services.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var logger = scope.ServiceProvider.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();&#10;        &#10;        try&#10;        {&#10;            // Owner kullanıcısını bul&#10;            var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;            if (owner == null)&#10;            {&#10;                logger.LogWarning(&quot;owner@gmail.com kullanıcısı bulunamadı!&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;Owner bulundu: {owner.Email} (ID: {owner.Id})&quot;);&#10;            &#10;            // Tüm aktif restoranları bul&#10;            var restaurants = await context.Restaurants&#10;                .Where(r =&gt; !r.IsDeleted)&#10;                .ToListAsync();&#10;            &#10;            if (restaurants.Count == 0)&#10;            {&#10;                logger.LogInformation(&quot;Veritabanında restoran bulunamadı.&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;{restaurants.Count} restoran bulundu, owner ID'leri güncelleniyor...&quot;);&#10;            &#10;            // Her restoranın owner ID'sini güncelle&#10;            foreach (var restaurant in restaurants)&#10;            {&#10;                restaurant.OwnerId = owner.Id;&#10;                logger.LogInformation($&quot;✓ {restaurant.Name} -&gt; Owner ID güncellendi&quot;);&#10;            }&#10;            &#10;            await context.SaveChangesAsync();&#10;            logger.LogInformation($&quot;✅ {restaurants.Count} restoranın owner ID'si başarıyla güncellendi!&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            logger.LogError(ex, &quot;Owner ID güncellenirken hata oluştu!&quot;);&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>