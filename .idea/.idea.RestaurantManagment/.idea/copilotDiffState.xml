<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/account-deleted/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/account-deleted/page.tsx" />
              <option name="updatedContent" value="&quot;use client&quot;&#10;&#10;import { useSearchParams } from &quot;next/navigation&quot;&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;&#10;import { Button } from &quot;@/components/ui/button&quot;&#10;import Link from &quot;next/link&quot;&#10;import { CheckCircle2, XCircle, Mail } from &quot;lucide-react&quot;&#10;&#10;export default function AccountDeletedPage() {&#10;  const searchParams = useSearchParams()&#10;  const status = searchParams.get(&quot;status&quot;)&#10;&#10;  if (status === &quot;soft-success&quot;) {&#10;    return (&#10;      &lt;div className=&quot;container flex items-center justify-center min-h-screen py-8&quot;&gt;&#10;        &lt;Card className=&quot;w-full max-w-md&quot;&gt;&#10;          &lt;CardHeader className=&quot;text-center&quot;&gt;&#10;            &lt;div className=&quot;mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-green-100&quot;&gt;&#10;              &lt;CheckCircle2 className=&quot;h-6 w-6 text-green-600&quot; /&gt;&#10;            &lt;/div&gt;&#10;            &lt;CardTitle&gt;Hesabınız Başarıyla Devre Dışı Bırakıldı&lt;/CardTitle&gt;&#10;            &lt;CardDescription&gt;&#10;              Hesabınız geçici olarak devre dışı bırakıldı. Verileriniz korunmaktadır.&#10;            &lt;/CardDescription&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;            &lt;div className=&quot;rounded-lg bg-blue-50 p-4&quot;&gt;&#10;              &lt;div className=&quot;flex items-start space-x-3&quot;&gt;&#10;                &lt;Mail className=&quot;h-5 w-5 text-blue-600 mt-0.5&quot; /&gt;&#10;                &lt;div className=&quot;flex-1 text-sm&quot;&gt;&#10;                  &lt;p className=&quot;font-medium text-blue-900&quot;&gt;Hesabınızı Tekrar Aktif Edebilirsiniz&lt;/p&gt;&#10;                  &lt;p className=&quot;text-blue-700 mt-1&quot;&gt;&#10;                    E-postanıza gönderilen linke tıklayarak hesabınızı istediğiniz zaman tekrar aktif edebilirsiniz.&#10;                  &lt;/p&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &#10;            &lt;p className=&quot;text-sm text-muted-foreground text-center&quot;&gt;&#10;              Tekrar aktif etmek için giriş yapmayı denediğinizde e-postanıza yeni bir aktivasyon linki gönderilecektir.&#10;            &lt;/p&gt;&#10;&#10;            &lt;div className=&quot;pt-4&quot;&gt;&#10;              &lt;Link href=&quot;/login&quot; className=&quot;w-full&quot;&gt;&#10;                &lt;Button className=&quot;w-full&quot;&gt;Giriş Sayfasına Dön&lt;/Button&gt;&#10;              &lt;/Link&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (status === &quot;failed&quot;) {&#10;    return (&#10;      &lt;div className=&quot;container flex items-center justify-center min-h-screen py-8&quot;&gt;&#10;        &lt;Card className=&quot;w-full max-w-md&quot;&gt;&#10;          &lt;CardHeader className=&quot;text-center&quot;&gt;&#10;            &lt;div className=&quot;mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100&quot;&gt;&#10;              &lt;XCircle className=&quot;h-6 w-6 text-red-600&quot; /&gt;&#10;            &lt;/div&gt;&#10;            &lt;CardTitle&gt;İşlem Başarısız&lt;/CardTitle&gt;&#10;            &lt;CardDescription&gt;&#10;              Hesap silme işlemi sırasında bir hata oluştu.&#10;            &lt;/CardDescription&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;            &lt;p className=&quot;text-sm text-muted-foreground text-center&quot;&gt;&#10;              Lütfen daha sonra tekrar deneyin veya destek ekibiyle iletişime geçin.&#10;            &lt;/p&gt;&#10;            &lt;div className=&quot;pt-4&quot;&gt;&#10;              &lt;Link href=&quot;/profile&quot; className=&quot;w-full&quot;&gt;&#10;                &lt;Button className=&quot;w-full&quot;&gt;Profile Dön&lt;/Button&gt;&#10;              &lt;/Link&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container flex items-center justify-center min-h-screen py-8&quot;&gt;&#10;      &lt;Card className=&quot;w-full max-w-md&quot;&gt;&#10;        &lt;CardHeader className=&quot;text-center&quot;&gt;&#10;          &lt;CardTitle&gt;Geçersiz İstek&lt;/CardTitle&gt;&#10;          &lt;CardDescription&gt;&#10;            Hesap silme durumu bulunamadı.&#10;          &lt;/CardDescription&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          &lt;Link href=&quot;/&quot; className=&quot;w-full&quot;&gt;&#10;            &lt;Button className=&quot;w-full&quot;&gt;Ana Sayfaya Dön&lt;/Button&gt;&#10;          &lt;/Link&gt;&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/account-reactivated/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/account-reactivated/page.tsx" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="&quot;use client&quot;&#10;&#10;import { useSearchParams } from &quot;next/navigation&quot;&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;&#10;import { Button } from &quot;@/components/ui/button&quot;&#10;import Link from &quot;next/link&quot;&#10;import { CheckCircle2, XCircle, UserCheck, Info } from &quot;lucide-react&quot;&#10;&#10;export default function AccountReactivatedPage() {&#10;  const searchParams = useSearchParams()&#10;  const status = searchParams.get(&quot;status&quot;)&#10;&#10;  if (status === &quot;success&quot;) {&#10;    return (&#10;      &lt;div className=&quot;container flex items-center justify-center min-h-screen py-8&quot;&gt;&#10;        &lt;Card className=&quot;w-full max-w-md&quot;&gt;&#10;          &lt;CardHeader className=&quot;text-center&quot;&gt;&#10;            &lt;div className=&quot;mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-green-100&quot;&gt;&#10;              &lt;UserCheck className=&quot;h-6 w-6 text-green-600&quot; /&gt;&#10;            &lt;/div&gt;&#10;            &lt;CardTitle&gt;Hesabınız Yeniden Aktif Edildi! &lt;/CardTitle&gt;&#10;            &lt;CardDescription&gt;&#10;              Hoş geldiniz! Hesabınız başarıyla tekrar aktif edildi.&#10;            &lt;/CardDescription&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;            &lt;div className=&quot;rounded-lg bg-green-50 p-4&quot;&gt;&#10;              &lt;div className=&quot;flex items-start space-x-3&quot;&gt;&#10;                &lt;CheckCircle2 className=&quot;h-5 w-5 text-green-600 mt-0.5&quot; /&gt;&#10;                &lt;div className=&quot;flex-1 text-sm&quot;&gt;&#10;                  &lt;p className=&quot;font-medium text-green-900&quot;&gt;Artık Giriş Yapabilirsiniz&lt;/p&gt;&#10;                  &lt;p className=&quot;text-green-700 mt-1&quot;&gt;&#10;                    Hesabınız aktif duruma getirildi. Şimdi giriş yaparak Restaurant Management sistemini kullanmaya devam edebilirsiniz.&#10;                  &lt;/p&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &#10;            &lt;p className=&quot;text-sm text-muted-foreground text-center&quot;&gt;&#10;              Tüm verileriniz ve ayarlarınız korunmuştur.&#10;            &lt;/p&gt;&#10;&#10;            &lt;div className=&quot;pt-4 space-y-2&quot;&gt;&#10;              &lt;Link href=&quot;/login&quot; className=&quot;w-full&quot;&gt;&#10;                &lt;Button className=&quot;w-full&quot;&gt;Giriş Yap&lt;/Button&gt;&#10;              &lt;/Link&gt;&#10;              &lt;Link href=&quot;/&quot; className=&quot;w-full&quot;&gt;&#10;                &lt;Button variant=&quot;outline&quot; className=&quot;w-full&quot;&gt;Ana Sayfaya Dön&lt;/Button&gt;&#10;              &lt;/Link&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (status === &quot;already-active&quot;) {&#10;    return (&#10;      &lt;div className=&quot;container flex items-center justify-center min-h-screen py-8&quot;&gt;&#10;        &lt;Card className=&quot;w-full max-w-md&quot;&gt;&#10;          &lt;CardHeader className=&quot;text-center&quot;&gt;&#10;            &lt;div className=&quot;mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100&quot;&gt;&#10;              &lt;Info className=&quot;h-6 w-6 text-blue-600&quot; /&gt;&#10;            &lt;/div&gt;&#10;            &lt;CardTitle&gt;Hesabınız Zaten Aktif&lt;/CardTitle&gt;&#10;            &lt;CardDescription&gt;&#10;              Bu hesap zaten aktif durumda.&#10;            &lt;/CardDescription&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;            &lt;p className=&quot;text-sm text-muted-foreground text-center&quot;&gt;&#10;              Hesabınız kullanılabilir durumda. Giriş yapabilirsiniz.&#10;            &lt;/p&gt;&#10;            &lt;div className=&quot;pt-4&quot;&gt;&#10;              &lt;Link href=&quot;/login&quot; className=&quot;w-full&quot;&gt;&#10;                &lt;Button className=&quot;w-full&quot;&gt;Giriş Yap&lt;/Button&gt;&#10;              &lt;/Link&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (status === &quot;user-not-found&quot;) {&#10;    return (&#10;      &lt;div className=&quot;container flex items-center justify-center min-h-screen py-8&quot;&gt;&#10;        &lt;Card className=&quot;w-full max-w-md&quot;&gt;&#10;          &lt;CardHeader className=&quot;text-center&quot;&gt;&#10;            &lt;div className=&quot;mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100&quot;&gt;&#10;              &lt;XCircle className=&quot;h-6 w-6 text-red-600&quot; /&gt;&#10;            &lt;/div&gt;&#10;            &lt;CardTitle&gt;Kullanıcı Bulunamadı&lt;/CardTitle&gt;&#10;            &lt;CardDescription&gt;&#10;              Bu hesap bulunamadı veya kalıcı olarak silinmiş.&#10;            &lt;/CardDescription&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;            &lt;p className=&quot;text-sm text-muted-foreground text-center&quot;&gt;&#10;              Hesap tamamen silinmiş olabilir. Yeni bir hesap oluşturmanız gerekebilir.&#10;            &lt;/p&gt;&#10;            &lt;div className=&quot;pt-4 space-y-2&quot;&gt;&#10;              &lt;Link href=&quot;/register&quot; className=&quot;w-full&quot;&gt;&#10;                &lt;Button className=&quot;w-full&quot;&gt;Yeni Hesap Oluştur&lt;/Button&gt;&#10;              &lt;/Link&gt;&#10;              &lt;Link href=&quot;/&quot; className=&quot;w-full&quot;&gt;&#10;                &lt;Button variant=&quot;outline&quot; className=&quot;w-full&quot;&gt;Ana Sayfaya Dön&lt;/Button&gt;&#10;              &lt;/Link&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (status === &quot;invalid-token&quot;) {&#10;    return (&#10;      &lt;div className=&quot;container flex items-center justify-center min-h-screen py-8&quot;&gt;&#10;        &lt;Card className=&quot;w-full max-w-md&quot;&gt;&#10;          &lt;CardHeader className=&quot;text-center&quot;&gt;&#10;            &lt;div className=&quot;mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-yellow-100&quot;&gt;&#10;              &lt;XCircle className=&quot;h-6 w-6 text-yellow-600&quot; /&gt;&#10;            &lt;/div&gt;&#10;            &lt;CardTitle&gt;Geçersiz veya Süresi Dolmuş Link&lt;/CardTitle&gt;&#10;            &lt;CardDescription&gt;&#10;              Aktivasyon linki geçersiz veya süresi dolmuş.&#10;            &lt;/CardDescription&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;            &lt;p className=&quot;text-sm text-muted-foreground text-center&quot;&gt;&#10;              Lütfen giriş yapmayı tekrar deneyin. E-postanıza yeni bir aktivasyon linki gönderilecektir.&#10;            &lt;/p&gt;&#10;            &lt;div className=&quot;pt-4&quot;&gt;&#10;              &lt;Link href=&quot;/login&quot; className=&quot;w-full&quot;&gt;&#10;                &lt;Button className=&quot;w-full&quot;&gt;Giriş Sayfasına Git&lt;/Button&gt;&#10;              &lt;/Link&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (status === &quot;failed&quot;) {&#10;    return (&#10;      &lt;div className=&quot;container flex items-center justify-center min-h-screen py-8&quot;&gt;&#10;        &lt;Card className=&quot;w-full max-w-md&quot;&gt;&#10;          &lt;CardHeader className=&quot;text-center&quot;&gt;&#10;            &lt;div className=&quot;mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100&quot;&gt;&#10;              &lt;XCircle className=&quot;h-6 w-6 text-red-600&quot; /&gt;&#10;            &lt;/div&gt;&#10;            &lt;CardTitle&gt;Aktivasyon Başarısız&lt;/CardTitle&gt;&#10;            &lt;CardDescription&gt;&#10;              Hesap aktivasyonu sırasında bir hata oluştu.&#10;            &lt;/CardDescription&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;            &lt;p className=&quot;text-sm text-muted-foreground text-center&quot;&gt;&#10;              Lütfen daha sonra tekrar deneyin veya destek ekibiyle iletişime geçin.&#10;            &lt;/p&gt;&#10;            &lt;div className=&quot;pt-4&quot;&gt;&#10;              &lt;Link href=&quot;/login&quot; className=&quot;w-full&quot;&gt;&#10;                &lt;Button className=&quot;w-full&quot;&gt;Giriş Sayfasına Dön&lt;/Button&gt;&#10;              &lt;/Link&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container flex items-center justify-center min-h-screen py-8&quot;&gt;&#10;      &lt;Card className=&quot;w-full max-w-md&quot;&gt;&#10;        &lt;CardHeader className=&quot;text-center&quot;&gt;&#10;          &lt;CardTitle&gt;Geçersiz İstek&lt;/CardTitle&gt;&#10;          &lt;CardDescription&gt;&#10;            Aktivasyon durumu bulunamadı.&#10;          &lt;/CardDescription&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          &lt;Link href=&quot;/&quot; className=&quot;w-full&quot;&gt;&#10;            &lt;Button className=&quot;w-full&quot;&gt;Ana Sayfaya Dön&lt;/Button&gt;&#10;          &lt;/Link&gt;&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/profile/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/profile/page.tsx" />
              <option name="originalContent" value="&quot;use client&quot;&#10;&#10;import type React from &quot;react&quot;&#10;&#10;import { useState, useEffect } from &quot;react&quot;&#10;import { useAuth } from &quot;@/contexts/auth-context&quot;&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;&#10;import { Button } from &quot;@/components/ui/button&quot;&#10;import { Input } from &quot;@/components/ui/input&quot;&#10;import { Label } from &quot;@/components/ui/label&quot;&#10;import { Tabs, TabsContent, TabsList, TabsTrigger } from &quot;@/components/ui/tabs&quot;&#10;import { useToast } from &quot;@/hooks/use-toast&quot;&#10;import { User, Mail, Phone, MapPin, Lock, Store, FileText } from &quot;lucide-react&quot;&#10;import { ApiClient } from &quot;@/lib/api&quot;&#10;&#10;export default function ProfilePage() {&#10;  const { user } = useAuth()&#10;  const { toast } = useToast()&#10;  const [loading, setLoading] = useState(false)&#10;  const [fetchingProfile, setFetchingProfile] = useState(true)&#10;  const [profile, setProfile] = useState({&#10;    firstName: &quot;&quot;,&#10;    lastName: &quot;&quot;,&#10;    userName: &quot;&quot;,&#10;    email: &quot;&quot;,&#10;    phone: &quot;&quot;,&#10;    address: &quot;&quot;,&#10;  })&#10;  const [passwords, setPasswords] = useState({&#10;    current: &quot;&quot;,&#10;    new: &quot;&quot;,&#10;    confirm: &quot;&quot;,&#10;  })&#10;  const [ownershipApplication, setOwnershipApplication] = useState({&#10;    businessName: &quot;&quot;,&#10;    businessDescription: &quot;&quot;,&#10;    businessAddress: &quot;&quot;,&#10;    businessPhone: &quot;&quot;,&#10;    businessEmail: &quot;&quot;,&#10;    category: &quot;Türk Mutfağı&quot;,&#10;    additionalNotes: &quot;&quot;,&#10;  })&#10;&#10;  // Profil bilgilerini API'den çek&#10;  useEffect(() =&gt; {&#10;    const fetchProfile = async () =&gt; {&#10;      try {&#10;        const data = await ApiClient.get&lt;any&gt;(&quot;/Account/profile&quot;)&#10;        setProfile({&#10;          firstName: data.firstName || &quot;&quot;,&#10;          lastName: data.lastName || &quot;&quot;,&#10;          userName: data.userName || &quot;&quot;,&#10;          email: data.email || &quot;&quot;,&#10;          phone: data.phone || &quot;&quot;,&#10;          address: data.address || &quot;&quot;,&#10;        })&#10;      } catch (error: any) {&#10;        toast({&#10;          title: &quot;Hata&quot;,&#10;          description: error.message || &quot;Profil bilgileri yüklenemedi.&quot;,&#10;          variant: &quot;destructive&quot;,&#10;        })&#10;      } finally {&#10;        setFetchingProfile(false)&#10;      }&#10;    }&#10;&#10;    fetchProfile()&#10;  }, [toast])&#10;&#10;  const handleUpdateProfile = async (e: React.FormEvent) =&gt; {&#10;    e.preventDefault()&#10;    setLoading(true)&#10;&#10;    try {&#10;      const data = await ApiClient.post&lt;any&gt;(&quot;/Account/profile&quot;, profile)&#10;      toast({&#10;        title: &quot;Başarılı&quot;,&#10;        description: data.message || &quot;Profil başarıyla güncellendi.&quot;,&#10;      })&#10;    } catch (error: any) {&#10;      // Hata mesajını parse et&#10;      const errorMessage = error.message || &quot;Profil güncellenemedi.&quot;&#10;      &#10;      toast({&#10;        title: &quot;Hata&quot;,&#10;        description: errorMessage,&#10;        variant: &quot;destructive&quot;,&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleChangePassword = async (e: React.FormEvent) =&gt; {&#10;    e.preventDefault()&#10;&#10;    if (passwords.new !== passwords.confirm) {&#10;      toast({&#10;        title: &quot;Hata&quot;,&#10;        description: &quot;Yeni şifreler eşleşmiyor.&quot;,&#10;        variant: &quot;destructive&quot;,&#10;      })&#10;      return&#10;    }&#10;&#10;    setLoading(true)&#10;&#10;     try {&#10;      const data = await ApiClient.post&lt;any&gt;(&quot;/Account/change-password&quot;, {&#10;        currentPassword: passwords.current,&#10;        newPassword: passwords.new,&#10;        confirmPassword: passwords.confirm,&#10;      })&#10;&#10;      toast({&#10;        title: &quot;Başarılı&quot;,&#10;        description: data.message || &quot;Şifreniz başarıyla değiştirildi.&quot;,&#10;      })&#10;&#10;      setPasswords({ current: &quot;&quot;, new: &quot;&quot;, confirm: &quot;&quot; })&#10;    } catch (error: any) {&#10;      toast({&#10;        title: &quot;Hata&quot;,&#10;        description: error.message || &quot;Şifre değiştirilemedi.&quot;,&#10;        variant: &quot;destructive&quot;,&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleOwnershipApplication = async (e: React.FormEvent) =&gt; {&#10;    e.preventDefault()&#10;    setLoading(true)&#10;&#10;    // Simulate API call&#10;    await new Promise((resolve) =&gt; setTimeout(resolve, 1000))&#10;&#10;    toast({&#10;      title: &quot;Başvuru Gönderildi&quot;,&#10;      description: &quot;Restoran sahipliği başvurunuz başarıyla gönderildi.&quot;,&#10;    })&#10;&#10;    setOwnershipApplication({&#10;      businessName: &quot;&quot;,&#10;      businessDescription: &quot;&quot;,&#10;      businessAddress: &quot;&quot;,&#10;      businessPhone: &quot;&quot;,&#10;      businessEmail: &quot;&quot;,&#10;      category: &quot;Türk Mutfağı&quot;,&#10;      additionalNotes: &quot;&quot;,&#10;    })&#10;    setLoading(false)&#10;  }&#10;&#10;  if (fetchingProfile) {&#10;    return (&#10;      &lt;div className=&quot;container py-8 max-w-4xl&quot;&gt;&#10;        &lt;div className=&quot;flex items-center justify-center h-96&quot;&gt;&#10;          &lt;p className=&quot;text-lg&quot;&gt;Yükleniyor...&lt;/p&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container py-8 max-w-4xl&quot;&gt;&#10;      &lt;h1 className=&quot;text-4xl font-bold mb-8&quot;&gt;Profilim&lt;/h1&gt;&#10;&#10;      &lt;Tabs defaultValue=&quot;profile&quot; className=&quot;w-full&quot;&gt;&#10;        &lt;TabsList className=&quot;mb-6&quot;&gt;&#10;          &lt;TabsTrigger value=&quot;profile&quot;&gt;Profil Bilgileri&lt;/TabsTrigger&gt;&#10;          &lt;TabsTrigger value=&quot;security&quot;&gt;Güvenlik&lt;/TabsTrigger&gt;&#10;          &lt;TabsTrigger value=&quot;ownership&quot;&gt;Restoran Sahipliği Başvuru&lt;/TabsTrigger&gt;&#10;        &lt;/TabsList&gt;&#10;&#10;        &lt;TabsContent value=&quot;profile&quot;&gt;&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Kişisel Bilgiler&lt;/CardTitle&gt;&#10;              &lt;CardDescription&gt;Hesap bilgilerinizi güncelleyin&lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;form onSubmit={handleUpdateProfile} className=&quot;space-y-4&quot;&gt;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;firstName&quot;&gt;Ad&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;User className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;firstName&quot;&#10;                      value={profile.firstName}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, firstName: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;lastName&quot;&gt;Soyad&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;User className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;lastName&quot;&#10;                      value={profile.lastName}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, lastName: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;userName&quot;&gt;Kullanıcı Adı&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;User className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;userName&quot;&#10;                      value={profile.userName}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, userName: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;email&quot;&gt;E-posta&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Mail className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;email&quot;&#10;                      type=&quot;email&quot;&#10;                      value={profile.email}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, email: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;phone&quot;&gt;Telefon&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Phone className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;phone&quot;&#10;                      type=&quot;tel&quot;&#10;                      value={profile.phone}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, phone: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      placeholder=&quot;+90 555 123 4567&quot;&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;address&quot;&gt;Adres&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;MapPin className=&quot;absolute left-3 top-3 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;address&quot;&#10;                      value={profile.address}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, address: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      placeholder=&quot;Ev veya iş adresiniz&quot;&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;Button type=&quot;submit&quot; disabled={loading}&gt;&#10;                  {loading ? &quot;Kaydediliyor...&quot; : &quot;Değişiklikleri Kaydet&quot;}&#10;                &lt;/Button&gt;&#10;              &lt;/form&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        &lt;/TabsContent&gt;&#10;&#10;        &lt;TabsContent value=&quot;security&quot;&gt;&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Şifre Değiştir&lt;/CardTitle&gt;&#10;              &lt;CardDescription&gt;Hesabınızın güvenliği için güçlü bir şifre kullanın&lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;form onSubmit={handleChangePassword} className=&quot;space-y-4&quot;&gt;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;currentPassword&quot;&gt;Mevcut Şifre&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Lock className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;currentPassword&quot;&#10;                      type=&quot;password&quot;&#10;                      value={passwords.current}&#10;                      onChange={(e) =&gt; setPasswords({ ...passwords, current: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;newPassword&quot;&gt;Yeni Şifre&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Lock className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;newPassword&quot;&#10;                      type=&quot;password&quot;&#10;                      value={passwords.new}&#10;                      onChange={(e) =&gt; setPasswords({ ...passwords, new: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;confirmPassword&quot;&gt;Yeni Şifre (Tekrar)&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Lock className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;confirmPassword&quot;&#10;                      type=&quot;password&quot;&#10;                      value={passwords.confirm}&#10;                      onChange={(e) =&gt; setPasswords({ ...passwords, confirm: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;Button type=&quot;submit&quot; disabled={loading}&gt;&#10;                  {loading ? &quot;Değiştiriliyor...&quot; : &quot;Şifreyi Değiştir&quot;}&#10;                &lt;/Button&gt;&#10;              &lt;/form&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        &lt;/TabsContent&gt;&#10;&#10;        &lt;TabsContent value=&quot;ownership&quot;&gt;&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Restoran Sahipliği Başvuru&lt;/CardTitle&gt;&#10;              &lt;CardDescription&gt;Restoran sahipliği için başvuru formunu doldurun&lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;form onSubmit={handleOwnershipApplication} className=&quot;space-y-4&quot;&gt;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;businessName&quot;&gt;İşletme Adı&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Store className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;businessName&quot;&#10;                      value={ownershipApplication.businessName}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, businessName: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;businessDescription&quot;&gt;İşletme Açıklaması&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;FileText className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;businessDescription&quot;&#10;                      value={ownershipApplication.businessDescription}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, businessDescription: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;businessAddress&quot;&gt;İşletme Adresi&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;MapPin className=&quot;absolute left-3 top-3 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;businessAddress&quot;&#10;                      value={ownershipApplication.businessAddress}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, businessAddress: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      placeholder=&quot;İşletmenizin adresi&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;businessPhone&quot;&gt;İşletme Telefonu&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Phone className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;businessPhone&quot;&#10;                      type=&quot;tel&quot;&#10;                      value={ownershipApplication.businessPhone}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, businessPhone: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      placeholder=&quot;+90 555 123 4567&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;businessEmail&quot;&gt;İşletme E-posta&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Mail className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;businessEmail&quot;&#10;                      type=&quot;email&quot;&#10;                      value={ownershipApplication.businessEmail}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, businessEmail: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;category&quot;&gt;Kategori&lt;/Label&gt;&#10;                  &lt;select&#10;                    id=&quot;category&quot;&#10;                    value={ownershipApplication.category}&#10;                    onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, category: e.target.value })}&#10;                    className=&quot;w-full p-2 border rounded&quot;&#10;                    required&#10;                  &gt;&#10;                    &lt;option value=&quot;Türk Mutfağı&quot;&gt;Türk Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;İtalyan Mutfağı&quot;&gt;İtalyan Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;Japon Mutfağı&quot;&gt;Japon Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;Çin Mutfağı&quot;&gt;Çin Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;Hint Mutfağı&quot;&gt;Hint Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;Meksika Mutfağı&quot;&gt;Meksika Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;Diğer&quot;&gt;Diğer&lt;/option&gt;&#10;                  &lt;/select&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;additionalNotes&quot;&gt;Ekstra Notlar&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;FileText className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;additionalNotes&quot;&#10;                      value={ownershipApplication.additionalNotes}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, additionalNotes: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      placeholder=&quot;Opsiyonel, eklemek istediğiniz notlar&quot;&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;Button type=&quot;submit&quot; disabled={loading}&gt;&#10;                  {loading ? &quot;Gönderiliyor...&quot; : &quot;Başvuruyu Gönder&quot;}&#10;                &lt;/Button&gt;&#10;              &lt;/form&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        &lt;/TabsContent&gt;&#10;      &lt;/Tabs&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
              <option name="updatedContent" value="&quot;use client&quot;&#10;&#10;import type React from &quot;react&quot;&#10;&#10;import { useState, useEffect } from &quot;react&quot;&#10;import { useAuth } from &quot;@/contexts/auth-context&quot;&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;&#10;import { Button } from &quot;@/components/ui/button&quot;&#10;import { Input } from &quot;@/components/ui/input&quot;&#10;import { Label } from &quot;@/components/ui/label&quot;&#10;import { Tabs, TabsContent, TabsList, TabsTrigger } from &quot;@/components/ui/tabs&quot;&#10;import { useToast } from &quot;@/hooks/use-toast&quot;&#10;import { User, Mail, Phone, MapPin, Lock, Store, FileText, Trash2 } from &quot;lucide-react&quot;&#10;import { ApiClient } from &quot;@/lib/api&quot;&#10;import {&#10;  AlertDialog,&#10;  AlertDialogAction,&#10;  AlertDialogCancel,&#10;  AlertDialogContent,&#10;  AlertDialogDescription,&#10;  AlertDialogFooter,&#10;  AlertDialogHeader,&#10;  AlertDialogTitle,&#10;  AlertDialogTrigger,&#10;} from &quot;@/components/ui/alert-dialog&quot;&#10;import { RadioGroup, RadioGroupItem } from &quot;@/components/ui/radio-group&quot;&#10;&#10;export default function ProfilePage() {&#10;  const { user } = useAuth()&#10;  const { toast } = useToast()&#10;  const [loading, setLoading] = useState(false)&#10;  const [fetchingProfile, setFetchingProfile] = useState(true)&#10;  const [deleteType, setDeleteType] = useState&lt;&quot;soft&quot; | &quot;hard&quot;&gt;(&quot;soft&quot;)&#10;  const [profile, setProfile] = useState({&#10;    firstName: &quot;&quot;,&#10;    lastName: &quot;&quot;,&#10;    userName: &quot;&quot;,&#10;    email: &quot;&quot;,&#10;    phone: &quot;&quot;,&#10;    address: &quot;&quot;,&#10;  })&#10;  const [passwords, setPasswords] = useState({&#10;    current: &quot;&quot;,&#10;    new: &quot;&quot;,&#10;    confirm: &quot;&quot;,&#10;  })&#10;  const [ownershipApplication, setOwnershipApplication] = useState({&#10;    businessName: &quot;&quot;,&#10;    businessDescription: &quot;&quot;,&#10;    businessAddress: &quot;&quot;,&#10;    businessPhone: &quot;&quot;,&#10;    businessEmail: &quot;&quot;,&#10;    category: &quot;Türk Mutfağı&quot;,&#10;    additionalNotes: &quot;&quot;,&#10;  })&#10;&#10;  // Profil bilgilerini API'den çek&#10;  useEffect(() =&gt; {&#10;    const fetchProfile = async () =&gt; {&#10;      try {&#10;        const data = await ApiClient.get&lt;any&gt;(&quot;/Account/profile&quot;)&#10;        setProfile({&#10;          firstName: data.firstName || &quot;&quot;,&#10;          lastName: data.lastName || &quot;&quot;,&#10;          userName: data.userName || &quot;&quot;,&#10;          email: data.email || &quot;&quot;,&#10;          phone: data.phone || &quot;&quot;,&#10;          address: data.address || &quot;&quot;,&#10;        })&#10;      } catch (error: any) {&#10;        toast({&#10;          title: &quot;Hata&quot;,&#10;          description: error.message || &quot;Profil bilgileri yüklenemedi.&quot;,&#10;          variant: &quot;destructive&quot;,&#10;        })&#10;      } finally {&#10;        setFetchingProfile(false)&#10;      }&#10;    }&#10;&#10;    fetchProfile()&#10;  }, [toast])&#10;&#10;  const handleUpdateProfile = async (e: React.FormEvent) =&gt; {&#10;    e.preventDefault()&#10;    setLoading(true)&#10;&#10;    try {&#10;      const data = await ApiClient.post&lt;any&gt;(&quot;/Account/profile&quot;, profile)&#10;      toast({&#10;        title: &quot;Başarılı&quot;,&#10;        description: data.message || &quot;Profil başarıyla güncellendi.&quot;,&#10;      })&#10;    } catch (error: any) {&#10;      // Hata mesajını parse et&#10;      const errorMessage = error.message || &quot;Profil güncellenemedi.&quot;&#10;      &#10;      toast({&#10;        title: &quot;Hata&quot;,&#10;        description: errorMessage,&#10;        variant: &quot;destructive&quot;,&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleChangePassword = async (e: React.FormEvent) =&gt; {&#10;    e.preventDefault()&#10;&#10;    if (passwords.new !== passwords.confirm) {&#10;      toast({&#10;        title: &quot;Hata&quot;,&#10;        description: &quot;Yeni şifreler eşleşmiyor.&quot;,&#10;        variant: &quot;destructive&quot;,&#10;      })&#10;      return&#10;    }&#10;&#10;    setLoading(true)&#10;&#10;     try {&#10;      const data = await ApiClient.post&lt;any&gt;(&quot;/Account/change-password&quot;, {&#10;        currentPassword: passwords.current,&#10;        newPassword: passwords.new,&#10;        confirmPassword: passwords.confirm,&#10;      })&#10;&#10;      toast({&#10;        title: &quot;Başarılı&quot;,&#10;        description: data.message || &quot;Şifreniz başarıyla değiştirildi.&quot;,&#10;      })&#10;&#10;      setPasswords({ current: &quot;&quot;, new: &quot;&quot;, confirm: &quot;&quot; })&#10;    } catch (error: any) {&#10;      toast({&#10;        title: &quot;Hata&quot;,&#10;        description: error.message || &quot;Şifre değiştirilemedi.&quot;,&#10;        variant: &quot;destructive&quot;,&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleOwnershipApplication = async (e: React.FormEvent) =&gt; {&#10;    e.preventDefault()&#10;    setLoading(true)&#10;&#10;    // Simulate API call&#10;    await new Promise((resolve) =&gt; setTimeout(resolve, 1000))&#10;&#10;    toast({&#10;      title: &quot;Başvuru Gönderildi&quot;,&#10;      description: &quot;Restoran sahipliği başvurunuz başarıyla gönderildi.&quot;,&#10;    })&#10;&#10;    setOwnershipApplication({&#10;      businessName: &quot;&quot;,&#10;      businessDescription: &quot;&quot;,&#10;      businessAddress: &quot;&quot;,&#10;      businessPhone: &quot;&quot;,&#10;      businessEmail: &quot;&quot;,&#10;      category: &quot;Türk Mutfağı&quot;,&#10;      additionalNotes: &quot;&quot;,&#10;    })&#10;    setLoading(false)&#10;  }&#10;&#10;  const handleDeleteAccount = async () =&gt; {&#10;    setLoading(true)&#10;&#10;    try {&#10;      const data = await ApiClient.post&lt;any&gt;(&quot;/Account/delete-account&quot;, {&#10;        deleteType: deleteType&#10;      })&#10;&#10;      toast({&#10;        title: &quot;E-posta Gönderildi&quot;,&#10;        description: data.message || &quot;Hesap silme onayı e-postanıza gönderildi. Lütfen e-postanızı kontrol edin.&quot;,&#10;      })&#10;    } catch (error: any) {&#10;      toast({&#10;        title: &quot;Hata&quot;,&#10;        description: error.message || &quot;Hesap silme işlemi başlatılamadı.&quot;,&#10;        variant: &quot;destructive&quot;,&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  if (fetchingProfile) {&#10;    return (&#10;      &lt;div className=&quot;container py-8 max-w-4xl&quot;&gt;&#10;        &lt;div className=&quot;flex items-center justify-center h-96&quot;&gt;&#10;          &lt;p className=&quot;text-lg&quot;&gt;Yükleniyor...&lt;/p&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container py-8 max-w-4xl&quot;&gt;&#10;      &lt;h1 className=&quot;text-4xl font-bold mb-8&quot;&gt;Profilim&lt;/h1&gt;&#10;&#10;      &lt;Tabs defaultValue=&quot;profile&quot; className=&quot;w-full&quot;&gt;&#10;        &lt;TabsList className=&quot;mb-6&quot;&gt;&#10;          &lt;TabsTrigger value=&quot;profile&quot;&gt;Profil Bilgileri&lt;/TabsTrigger&gt;&#10;          &lt;TabsTrigger value=&quot;security&quot;&gt;Güvenlik&lt;/TabsTrigger&gt;&#10;          &lt;TabsTrigger value=&quot;ownership&quot;&gt;Restoran Sahipliği Başvuru&lt;/TabsTrigger&gt;&#10;        &lt;/TabsList&gt;&#10;&#10;        &lt;TabsContent value=&quot;profile&quot;&gt;&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Kişisel Bilgiler&lt;/CardTitle&gt;&#10;              &lt;CardDescription&gt;Hesap bilgilerinizi güncelleyin&lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;form onSubmit={handleUpdateProfile} className=&quot;space-y-4&quot;&gt;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;firstName&quot;&gt;Ad&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;User className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;firstName&quot;&#10;                      value={profile.firstName}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, firstName: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;lastName&quot;&gt;Soyad&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;User className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;lastName&quot;&#10;                      value={profile.lastName}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, lastName: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;userName&quot;&gt;Kullanıcı Adı&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;User className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;userName&quot;&#10;                      value={profile.userName}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, userName: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;email&quot;&gt;E-posta&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Mail className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;email&quot;&#10;                      type=&quot;email&quot;&#10;                      value={profile.email}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, email: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;phone&quot;&gt;Telefon&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Phone className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;phone&quot;&#10;                      type=&quot;tel&quot;&#10;                      value={profile.phone}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, phone: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      placeholder=&quot;+90 555 123 4567&quot;&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;address&quot;&gt;Adres&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;MapPin className=&quot;absolute left-3 top-3 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;address&quot;&#10;                      value={profile.address}&#10;                      onChange={(e) =&gt; setProfile({ ...profile, address: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      placeholder=&quot;Ev veya iş adresiniz&quot;&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;Button type=&quot;submit&quot; disabled={loading}&gt;&#10;                  {loading ? &quot;Kaydediliyor...&quot; : &quot;Değişiklikleri Kaydet&quot;}&#10;                &lt;/Button&gt;&#10;              &lt;/form&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        &lt;/TabsContent&gt;&#10;&#10;        &lt;TabsContent value=&quot;security&quot;&gt;&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Şifre Değiştir&lt;/CardTitle&gt;&#10;              &lt;CardDescription&gt;Hesabınızın güvenliği için güçlü bir şifre kullanın&lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;form onSubmit={handleChangePassword} className=&quot;space-y-4&quot;&gt;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;currentPassword&quot;&gt;Mevcut Şifre&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Lock className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;currentPassword&quot;&#10;                      type=&quot;password&quot;&#10;                      value={passwords.current}&#10;                      onChange={(e) =&gt; setPasswords({ ...passwords, current: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;newPassword&quot;&gt;Yeni Şifre&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Lock className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;newPassword&quot;&#10;                      type=&quot;password&quot;&#10;                      value={passwords.new}&#10;                      onChange={(e) =&gt; setPasswords({ ...passwords, new: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;confirmPassword&quot;&gt;Yeni Şifre (Tekrar)&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Lock className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;confirmPassword&quot;&#10;                      type=&quot;password&quot;&#10;                      value={passwords.confirm}&#10;                      onChange={(e) =&gt; setPasswords({ ...passwords, confirm: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;Button type=&quot;submit&quot; disabled={loading}&gt;&#10;                  {loading ? &quot;Değiştiriliyor...&quot; : &quot;Şifreyi Değiştir&quot;}&#10;                &lt;/Button&gt;&#10;              &lt;/form&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        &lt;/TabsContent&gt;&#10;&#10;        &lt;TabsContent value=&quot;ownership&quot;&gt;&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Restoran Sahipliği Başvuru&lt;/CardTitle&gt;&#10;              &lt;CardDescription&gt;Restoran sahipliği için başvuru formunu doldurun&lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;form onSubmit={handleOwnershipApplication} className=&quot;space-y-4&quot;&gt;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;businessName&quot;&gt;İşletme Adı&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Store className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;businessName&quot;&#10;                      value={ownershipApplication.businessName}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, businessName: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;businessDescription&quot;&gt;İşletme Açıklaması&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;FileText className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;businessDescription&quot;&#10;                      value={ownershipApplication.businessDescription}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, businessDescription: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;businessAddress&quot;&gt;İşletme Adresi&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;MapPin className=&quot;absolute left-3 top-3 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;businessAddress&quot;&#10;                      value={ownershipApplication.businessAddress}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, businessAddress: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      placeholder=&quot;İşletmenizin adresi&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;businessPhone&quot;&gt;İşletme Telefonu&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Phone className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;businessPhone&quot;&#10;                      type=&quot;tel&quot;&#10;                      value={ownershipApplication.businessPhone}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, businessPhone: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      placeholder=&quot;+90 555 123 4567&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;businessEmail&quot;&gt;İşletme E-posta&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;Mail className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;businessEmail&quot;&#10;                      type=&quot;email&quot;&#10;                      value={ownershipApplication.businessEmail}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, businessEmail: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      required&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;category&quot;&gt;Kategori&lt;/Label&gt;&#10;                  &lt;select&#10;                    id=&quot;category&quot;&#10;                    value={ownershipApplication.category}&#10;                    onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, category: e.target.value })}&#10;                    className=&quot;w-full p-2 border rounded&quot;&#10;                    required&#10;                  &gt;&#10;                    &lt;option value=&quot;Türk Mutfağı&quot;&gt;Türk Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;İtalyan Mutfağı&quot;&gt;İtalyan Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;Japon Mutfağı&quot;&gt;Japon Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;Çin Mutfağı&quot;&gt;Çin Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;Hint Mutfağı&quot;&gt;Hint Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;Meksika Mutfağı&quot;&gt;Meksika Mutfağı&lt;/option&gt;&#10;                    &lt;option value=&quot;Diğer&quot;&gt;Diğer&lt;/option&gt;&#10;                  &lt;/select&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div&gt;&#10;                  &lt;Label htmlFor=&quot;additionalNotes&quot;&gt;Ekstra Notlar&lt;/Label&gt;&#10;                  &lt;div className=&quot;relative&quot;&gt;&#10;                    &lt;FileText className=&quot;absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground&quot; /&gt;&#10;                    &lt;Input&#10;                      id=&quot;additionalNotes&quot;&#10;                      value={ownershipApplication.additionalNotes}&#10;                      onChange={(e) =&gt; setOwnershipApplication({ ...ownershipApplication, additionalNotes: e.target.value })}&#10;                      className=&quot;pl-10&quot;&#10;                      placeholder=&quot;Opsiyonel, eklemek istediğiniz notlar&quot;&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;Button type=&quot;submit&quot; disabled={loading}&gt;&#10;                  {loading ? &quot;Gönderiliyor...&quot; : &quot;Başvuruyu Gönder&quot;}&#10;                &lt;/Button&gt;&#10;              &lt;/form&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        &lt;/TabsContent&gt;&#10;      &lt;/Tabs&gt;&#10;&#10;      {/* Hesap Silme Bölümü */}&#10;      &lt;div className=&quot;mt-8&quot;&gt;&#10;        &lt;h2 className=&quot;text-2xl font-bold mb-4&quot;&gt;Hesap Silme&lt;/h2&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle&gt;Hesabınızı Silin&lt;/CardTitle&gt;&#10;            &lt;CardDescription&gt;&#10;              Hesabınızı silmek için aşağıdaki seçeneklerden birini seçin ve butona tıklayın. E-postanıza bir doğrulama linki gönderilecektir.&#10;            &lt;/CardDescription&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;              &lt;RadioGroup&#10;                value={deleteType}&#10;                onValueChange={(value) =&gt; setDeleteType(value as &quot;soft&quot; | &quot;hard&quot;)}&#10;                className=&quot;space-y-3&quot;&#10;              &gt;&#10;                &lt;div className=&quot;flex items-center space-x-2&quot;&gt;&#10;                  &lt;RadioGroupItem value=&quot;soft&quot; id=&quot;soft-delete&quot; /&gt;&#10;                  &lt;Label htmlFor=&quot;soft-delete&quot; className=&quot;cursor-pointer&quot;&gt;&#10;                    Sadece hesabı geçici olarak devre dışı bırak (veriler korunur, tekrar aktif edebilirsiniz)&#10;                  &lt;/Label&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;flex items-center space-x-2&quot;&gt;&#10;                  &lt;RadioGroupItem value=&quot;hard&quot; id=&quot;hard-delete&quot; /&gt;&#10;                  &lt;Label htmlFor=&quot;hard-delete&quot; className=&quot;cursor-pointer&quot;&gt;&#10;                    Hesabı ve tüm verileri kalıcı olarak sil (⚠️ Bu işlem geri alınamaz!)&#10;                  &lt;/Label&gt;&#10;                &lt;/div&gt;&#10;              &lt;/RadioGroup&gt;&#10;&#10;              &lt;AlertDialog&gt;&#10;                &lt;AlertDialogTrigger asChild&gt;&#10;                  &lt;Button variant=&quot;destructive&quot; disabled={loading} className=&quot;w-full mt-4&quot;&gt;&#10;                    &lt;Trash2 className=&quot;mr-2 h-4 w-4&quot; /&gt;&#10;                    Hesap Silme İsteği Gönder&#10;                  &lt;/Button&gt;&#10;                &lt;/AlertDialogTrigger&gt;&#10;                &lt;AlertDialogContent&gt;&#10;                  &lt;AlertDialogHeader&gt;&#10;                    &lt;AlertDialogTitle&gt;Hesap Silme Onayı&lt;/AlertDialogTitle&gt;&#10;                    &lt;AlertDialogDescription&gt;&#10;                      {deleteType === &quot;soft&quot; &#10;                        ? &quot;Hesabınız geçici olarak devre dışı bırakılacak. E-postanıza bir doğrulama linki gönderilecek. Onayladıktan sonra hesabınızı istediğiniz zaman tekrar aktif edebilirsiniz.&quot;&#10;                        : &quot;⚠️ DİKKAT: Hesabınız ve tüm verileriniz kalıcı olarak silinecek. Bu işlem geri alınamaz! E-postanıza bir doğrulama linki gönderilecek.&quot;&#10;                      }&#10;                    &lt;/AlertDialogDescription&gt;&#10;                  &lt;/AlertDialogHeader&gt;&#10;                  &lt;AlertDialogFooter&gt;&#10;                    &lt;AlertDialogCancel disabled={loading}&gt;İptal&lt;/AlertDialogCancel&gt;&#10;                    &lt;AlertDialogAction&#10;                      onClick={(e) =&gt; {&#10;                        e.preventDefault()&#10;                        handleDeleteAccount()&#10;                      }}&#10;                      disabled={loading}&#10;                      className=&quot;bg-red-600 hover:bg-red-700&quot;&#10;                    &gt;&#10;                      {loading ? &quot;Gönderiliyor...&quot; : &quot;Onayla ve E-posta Gönder&quot;}&#10;                    &lt;/AlertDialogAction&gt;&#10;                  &lt;/AlertDialogFooter&gt;&#10;                &lt;/AlertDialogContent&gt;&#10;              &lt;/AlertDialog&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Account/ConfirmDeleteAccountDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Account/ConfirmDeleteAccountDto.cs" />
              <option name="updatedContent" value="using System.ComponentModel.DataAnnotations;&#10;&#10;namespace RestaurantManagment.Application.Common.DTOs.Account&#10;{&#10;    public class ConfirmDeleteAccountDto&#10;    {&#10;        [Required(ErrorMessage = &quot;Kullanıcı ID gereklidir&quot;)]&#10;        public string UserId { get; set; } = string.Empty;&#10;&#10;        [Required(ErrorMessage = &quot;Token gereklidir&quot;)]&#10;        public string Token { get; set; } = string.Empty;&#10;&#10;        [Required(ErrorMessage = &quot;Silme türü gereklidir&quot;)]&#10;        public string DeleteType { get; set; } = string.Empty; // &quot;soft&quot; veya &quot;hard&quot;&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Account/DeleteAccountRequestDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Account/DeleteAccountRequestDto.cs" />
              <option name="updatedContent" value="using System.ComponentModel.DataAnnotations;&#10;&#10;namespace RestaurantManagment.Application.Common.DTOs.Account&#10;{&#10;    public class DeleteAccountRequestDto&#10;    {&#10;        [Required(ErrorMessage = &quot;Silme türü gereklidir&quot;)]&#10;        public string DeleteType { get; set; } = string.Empty; // &quot;soft&quot; veya &quot;hard&quot;&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/JobPosting/JobPostingDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/JobPosting/JobPostingDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Application.Common.DTOs.JobPosting;&#10;&#10;public class JobPostingDto&#10;{&#10;    public string Id { get; set; } = string.Empty;&#10;    public string Title { get; set; } = string.Empty;&#10;    public string Description { get; set; } = string.Empty;&#10;    public string Requirements { get; set; } = string.Empty;&#10;    public string Position { get; set; } = string.Empty;&#10;    public decimal? Salary { get; set; }&#10;    public string EmploymentType { get; set; } = string.Empty;&#10;    public DateTime PostedDate { get; set; }&#10;    public DateTime? ExpiryDate { get; set; }&#10;    public bool IsActive { get; set; }&#10;    public string RestaurantId { get; set; } = string.Empty;&#10;    public string RestaurantName { get; set; } = string.Empty;&#10;    public int ApplicationCount { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/IEmailService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/IEmailService.cs" />
              <option name="originalContent" value="namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface IEmailService&#10;{&#10;    Task SendEmailAsync(string to, string subject, string body);&#10;    Task SendEmailVerificationAsync(string to, string userName, string verificationLink);&#10;    Task SendJobApplicationStatusEmailAsync(string applicantEmail, string applicantName, string jobTitle, string restaurantName, string status, string? notes = null);&#10;    Task SendNewJobApplicationNotificationAsync(string ownerEmail, string ownerName, string applicantName, string jobTitle, string restaurantName);&#10;    Task SendPasswordResetAsync(string to, string userName, string resetLink);&#10;}&#10;" />
              <option name="updatedContent" value="namespace RestaurantManagment.Application.Common.Interfaces;&#13;&#10;&#13;&#10;public interface IEmailService&#13;&#10;{&#13;&#10;    Task SendEmailAsync(string to, string subject, string body);&#13;&#10;    Task SendEmailVerificationAsync(string to, string userName, string verificationLink);&#13;&#10;    Task SendJobApplicationStatusEmailAsync(string applicantEmail, string applicantName, string jobTitle, string restaurantName, string status, string? notes = null);&#13;&#10;    Task SendNewJobApplicationNotificationAsync(string ownerEmail, string ownerName, string applicantName, string jobTitle, string restaurantName);&#13;&#10;    Task SendPasswordResetAsync(string to, string userName, string resetLink);&#13;&#10;    Task SendDeleteAccountConfirmationAsync(string to, string userName, string confirmationLink, string deleteType);&#13;&#10;    Task SendAccountReactivationAsync(string to, string userName, string reactivationLink);&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Domain.Models.Common;&#10;&#10;public class TopSellingItemDto&#10;{&#10;    public string MenuItemId { get; set; } = string.Empty;&#10;    public string MenuItemName { get; set; } = string.Empty;&#10;    public int QuantitySold { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/EmailService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/EmailService.cs" />
              <option name="originalContent" value="using RestaurantManagment.Application.Common.Interfaces;&#10;using System.Net;&#10;using System.Net.Mail;&#10;using Microsoft.Extensions.Configuration;&#10;&#10;namespace RestaurantManagment.Infrastructure.Services;&#10;&#10;public class EmailService : IEmailService&#10;{&#10;    private readonly IConfiguration _configuration;&#10;&#10;    public EmailService(IConfiguration configuration)&#10;    {&#10;        _configuration = configuration;&#10;    }&#10;&#10;    public async Task SendEmailAsync(string to, string subject, string body)&#10;    {&#10;        var smtpHost = _configuration[&quot;EmailSettings:SmtpHost&quot;] ?? &quot;smtp.gmail.com&quot;;&#10;        var smtpPort = int.Parse(_configuration[&quot;EmailSettings:SmtpPort&quot;] ?? &quot;587&quot;);&#10;        var smtpUsername = _configuration[&quot;EmailSettings:SmtpUsername&quot;] ?? &quot;&quot;;&#10;        var smtpPassword = _configuration[&quot;EmailSettings:SmtpPassword&quot;] ?? &quot;&quot;;&#10;        var fromEmail = _configuration[&quot;EmailSettings:FromEmail&quot;] ?? smtpUsername;&#10;&#10;        using var client = new SmtpClient(smtpHost, smtpPort)&#10;        {&#10;            EnableSsl = true,&#10;            Credentials = new NetworkCredential(smtpUsername, smtpPassword)&#10;        };&#10;&#10;        var mailMessage = new MailMessage&#10;        {&#10;            From = new MailAddress(fromEmail),&#10;            Subject = subject,&#10;            Body = body,&#10;            IsBodyHtml = true&#10;        };&#10;&#10;        mailMessage.To.Add(to);&#10;&#10;        try&#10;        {&#10;            await client.SendMailAsync(mailMessage);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            // Log the error - in production, use proper logging&#10;            Console.WriteLine($&quot;Email sending failed: {ex.Message}&quot;);&#10;            throw;&#10;        }&#10;    }&#10;&#10;    public async Task SendEmailVerificationAsync(string to, string userName, string verificationLink)&#10;    {&#10;        var subject = &quot;E-posta Adresinizi Doğrulayın - Restaurant Management&quot;;&#10;        var body = $@&quot;&#10;&lt;!DOCTYPE html&gt;&#10;&lt;html&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset='utf-8'&gt;&#10;    &lt;meta name='viewport' content='width=device-width, initial-scale=1.0'&gt;&#10;    &lt;style&gt;&#10;        body {{&#10;            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;&#10;            line-height: 1.6;&#10;            color: #333;&#10;            background-color: #f4f4f4;&#10;            margin: 0;&#10;            padding: 0;&#10;        }}&#10;        .container {{&#10;            max-width: 600px;&#10;            margin: 40px auto;&#10;            background: #ffffff;&#10;            border-radius: 12px;&#10;            overflow: hidden;&#10;            box-shadow: 0 4px 6px rgba(0,0,0,0.1);&#10;        }}&#10;        .header {{&#10;            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;            padding: 40px 20px;&#10;            text-align: center;&#10;            color: white;&#10;        }}&#10;        .header h1 {{&#10;            margin: 0;&#10;            font-size: 28px;&#10;            font-weight: 600;&#10;        }}&#10;        .content {{&#10;            padding: 40px 30px;&#10;        }}&#10;        .welcome-text {{&#10;            font-size: 18px;&#10;            color: #333;&#10;            margin-bottom: 20px;&#10;        }}&#10;        .message {{&#10;            color: #666;&#10;            font-size: 15px;&#10;            margin-bottom: 30px;&#10;            line-height: 1.8;&#10;        }}&#10;        .button-container {{&#10;            text-align: center;&#10;            margin: 35px 0;&#10;        }}&#10;        .verify-button {{&#10;            display: inline-block;&#10;            padding: 16px 40px;&#10;            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;            color: white !important;&#10;            text-decoration: none;&#10;            border-radius: 8px;&#10;            font-weight: 600;&#10;            font-size: 16px;&#10;            transition: transform 0.2s;&#10;            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);&#10;        }}&#10;        .verify-button:hover {{&#10;            transform: translateY(-2px);&#10;            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);&#10;        }}&#10;        .alternative-link {{&#10;            margin-top: 25px;&#10;            padding: 20px;&#10;            background: #f8f9fa;&#10;            border-radius: 8px;&#10;            font-size: 13px;&#10;            color: #666;&#10;            word-break: break-all;&#10;        }}&#10;        .alternative-link p {{&#10;            margin: 0 0 10px 0;&#10;            font-weight: 600;&#10;            color: #333;&#10;        }}&#10;        .alternative-link a {{&#10;            color: #667eea;&#10;            text-decoration: none;&#10;        }}&#10;        .footer {{&#10;            padding: 30px;&#10;            text-align: center;&#10;            background: #f8f9fa;&#10;            color: #999;&#10;            font-size: 13px;&#10;            border-top: 1px solid #e9ecef;&#10;        }}&#10;        .security-note {{&#10;            margin-top: 25px;&#10;            padding: 15px;&#10;            background: #fff3cd;&#10;            border-left: 4px solid #ffc107;&#10;            border-radius: 4px;&#10;            font-size: 13px;&#10;            color: #856404;&#10;        }}&#10;        .icon {{&#10;            font-size: 48px;&#10;            margin-bottom: 15px;&#10;        }}&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div class='container'&gt;&#10;        &lt;div class='header'&gt;&#10;            &lt;div class='icon'&gt;✉️&lt;/div&gt;&#10;            &lt;h1&gt;E-posta Doğrulama&lt;/h1&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class='content'&gt;&#10;            &lt;div class='welcome-text'&gt;&#10;                Merhaba &lt;strong&gt;{userName}&lt;/strong&gt;! &#10;            &lt;/div&gt;&#10;            &lt;div class='message'&gt;&#10;                Restaurant Management sistemine hoş geldiniz! Hesabınızı aktif hale getirmek için e-posta adresinizi doğrulamanız gerekmektedir.&#10;            &lt;/div&gt;&#10;            &lt;div class='message'&gt;&#10;                E-posta adresinizi doğrulamak için aşağıdaki butona tıklayın:&#10;            &lt;/div&gt;&#10;            &lt;div class='button-container'&gt;&#10;                &lt;a href='{verificationLink}' class='verify-button'&gt;&#10;                    E-posta Adresimi Doğrula&#10;                &lt;/a&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class='alternative-link'&gt;&#10;                &lt;p&gt;Buton çalışmıyorsa, aşağıdaki linki tarayıcınıza kopyalayın:&lt;/p&gt;&#10;                &lt;a href='{verificationLink}'&gt;{verificationLink}&lt;/a&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class='security-note'&gt;&#10;                 &lt;strong&gt;Güvenlik Notu:&lt;/strong&gt; Bu link sadece bir kez kullanılabilir ve 24 saat geçerlidir. Eğer bu hesabı siz oluşturmadıysanız, bu e-postayı görmezden gelebilirsiniz.&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class='footer'&gt;&#10;            &lt;p&gt;Bu e-posta Restaurant Management sistemi tarafından otomatik olarak gönderilmiştir.&lt;/p&gt;&#10;            &lt;p&gt;© 2025 Restaurant Management. Tüm hakları saklıdır.&lt;/p&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&quot;;&#10;&#10;        await SendEmailAsync(to, subject, body);&#10;    }&#10;&#10;    public async Task SendJobApplicationStatusEmailAsync(string applicantEmail, string applicantName, string jobTitle, string restaurantName, string status, string? notes = null)&#10;    {&#10;        var subject = $&quot;İş Başvurunuz Hakkında - {restaurantName}&quot;;&#10;        var statusText = status == &quot;Accepted&quot; ? &quot;kabul edildi&quot; : &quot;reddedildi&quot;;&#10;        var body = $@&quot;&#10;            &lt;html&gt;&#10;            &lt;body style='font-family: Arial, sans-serif;'&gt;&#10;                &lt;h2&gt;Sayın {applicantName},&lt;/h2&gt;&#10;                &lt;p&gt;&lt;strong&gt;{restaurantName}&lt;/strong&gt; restoranında &lt;strong&gt;{jobTitle}&lt;/strong&gt; pozisyonuna yaptığınız başvuru &lt;strong&gt;{statusText}&lt;/strong&gt;.&lt;/p&gt;&#10;                {(status == &quot;Accepted&quot; ? &quot;&lt;p&gt;Tebrikler! Başvurunuz onaylandı. Yakında sizinle iletişime geçeceğiz.&lt;/p&gt;&quot; : &quot;&quot;)}&#10;                {(!string.IsNullOrEmpty(notes) ? $&quot;&lt;p&gt;&lt;strong&gt;Değerlendirme Notu:&lt;/strong&gt; {notes}&lt;/p&gt;&quot; : &quot;&quot;)}&#10;                &lt;p&gt;İyi günler dileriz,&lt;br/&gt;{restaurantName} Ekibi&lt;/p&gt;&#10;            &lt;/body&gt;&#10;            &lt;/html&gt;&#10;        &quot;;&#10;&#10;        await SendEmailAsync(applicantEmail, subject, body);&#10;    }&#10;&#10;    public async Task SendNewJobApplicationNotificationAsync(string ownerEmail, string ownerName, string applicantName, string jobTitle, string restaurantName)&#10;    {&#10;        var subject = $&quot;Yeni İş Başvurusu - {restaurantName}&quot;;&#10;        var body = $@&quot;&#10;            &lt;html&gt;&#10;            &lt;body style='font-family: Arial, sans-serif;'&gt;&#10;                &lt;h2&gt;Sayın {ownerName},&lt;/h2&gt;&#10;                &lt;p&gt;&lt;strong&gt;{applicantName}&lt;/strong&gt; isimli kullanıcı &lt;strong&gt;{restaurantName}&lt;/strong&gt; restoranınızda &lt;strong&gt;{jobTitle}&lt;/strong&gt; pozisyonuna başvuruda bulundu.&lt;/p&gt;&#10;                &lt;p&gt;Başvuruyu incelemek için lütfen dashboard'unuzu kontrol edin.&lt;/p&gt;&#10;                &lt;p&gt;İyi çalışmalar dileriz!&lt;/p&gt;&#10;            &lt;/body&gt;&#10;            &lt;/html&gt;&#10;        &quot;;&#10;&#10;        await SendEmailAsync(ownerEmail, subject, body);&#10;    }&#10;&#10;    public async Task SendPasswordResetAsync(string to, string userName, string resetLink)&#10;    {&#10;        var subject = &quot;Şifre Sıfırlama Talimatları - Restaurant Management&quot;;&#10;        var body = $@&quot;&#10;&lt;!DOCTYPE html&gt;&#10;&lt;html&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset='utf-8'&gt;&#10;    &lt;meta name='viewport' content='width=device-width, initial-scale=1.0'&gt;&#10;    &lt;style&gt;&#10;        body {{ font-family: Arial, sans-serif; background: #f8fafc; color: #222; }}&#10;        .container {{ max-width: 500px; margin: 0 auto; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px #0001; padding: 32px; }}&#10;        .btn {{ display: inline-block; background: #2563eb; color: #fff; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: bold; margin-top: 16px; }}&#10;        .footer {{ margin-top: 32px; font-size: 12px; color: #888; }}&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div class='container'&gt;&#10;        &lt;h2&gt;Merhaba {userName},&lt;/h2&gt;&#10;        &lt;p&gt;Şifrenizi sıfırlamak için aşağıdaki butona tıklayın:&lt;/p&gt;&#10;        &lt;a href='{resetLink}' class='btn'&gt;Şifre Sıfırla&lt;/a&gt;&#10;        &lt;p style='margin-top:24px;'&gt;Eğer bu isteği siz yapmadıysanız, bu e-postayı görmezden gelebilirsiniz.&lt;/p&gt;&#10;        &lt;div class='footer'&gt;Restaurant Management ekibi&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;&quot;;&#10;&#10;        await SendEmailAsync(to, subject, body);&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using RestaurantManagment.Application.Common.Interfaces;&#13;&#10;using System.Net;&#13;&#10;using System.Net.Mail;&#13;&#10;using Microsoft.Extensions.Configuration;&#13;&#10;&#13;&#10;namespace RestaurantManagment.Infrastructure.Services;&#13;&#10;&#13;&#10;public class EmailService : IEmailService&#13;&#10;{&#13;&#10;    private readonly IConfiguration _configuration;&#13;&#10;&#13;&#10;    public EmailService(IConfiguration configuration)&#13;&#10;    {&#13;&#10;        _configuration = configuration;&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task SendEmailAsync(string to, string subject, string body)&#13;&#10;    {&#13;&#10;        var smtpHost = _configuration[&quot;EmailSettings:SmtpHost&quot;] ?? &quot;smtp.gmail.com&quot;;&#13;&#10;        var smtpPort = int.Parse(_configuration[&quot;EmailSettings:SmtpPort&quot;] ?? &quot;587&quot;);&#13;&#10;        var smtpUsername = _configuration[&quot;EmailSettings:SmtpUsername&quot;] ?? &quot;&quot;;&#13;&#10;        var smtpPassword = _configuration[&quot;EmailSettings:SmtpPassword&quot;] ?? &quot;&quot;;&#13;&#10;        var fromEmail = _configuration[&quot;EmailSettings:FromEmail&quot;] ?? smtpUsername;&#13;&#10;&#13;&#10;        using var client = new SmtpClient(smtpHost, smtpPort)&#13;&#10;        {&#13;&#10;            EnableSsl = true,&#13;&#10;            Credentials = new NetworkCredential(smtpUsername, smtpPassword)&#13;&#10;        };&#13;&#10;&#13;&#10;        var mailMessage = new MailMessage&#13;&#10;        {&#13;&#10;            From = new MailAddress(fromEmail),&#13;&#10;            Subject = subject,&#13;&#10;            Body = body,&#13;&#10;            IsBodyHtml = true&#13;&#10;        };&#13;&#10;&#13;&#10;        mailMessage.To.Add(to);&#13;&#10;&#13;&#10;        try&#13;&#10;        {&#13;&#10;            await client.SendMailAsync(mailMessage);&#13;&#10;        }&#13;&#10;        catch (Exception ex)&#13;&#10;        {&#13;&#10;            // Log the error - in production, use proper logging&#13;&#10;            Console.WriteLine($&quot;Email sending failed: {ex.Message}&quot;);&#13;&#10;            throw;&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task SendEmailVerificationAsync(string to, string userName, string verificationLink)&#13;&#10;    {&#13;&#10;        var subject = &quot;E-posta Adresinizi Doğrulayın - Restaurant Management&quot;;&#13;&#10;        var body = $@&quot;&#13;&#10;&lt;!DOCTYPE html&gt;&#13;&#10;&lt;html&gt;&#13;&#10;&lt;head&gt;&#13;&#10;    &lt;meta charset='utf-8'&gt;&#13;&#10;    &lt;meta name='viewport' content='width=device-width, initial-scale=1.0'&gt;&#13;&#10;    &lt;style&gt;&#13;&#10;        body {{&#13;&#10;            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;&#13;&#10;            line-height: 1.6;&#13;&#10;            color: #333;&#13;&#10;            background-color: #f4f4f4;&#13;&#10;            margin: 0;&#13;&#10;            padding: 0;&#13;&#10;        }}&#13;&#10;        .container {{&#13;&#10;            max-width: 600px;&#13;&#10;            margin: 40px auto;&#13;&#10;            background: #ffffff;&#13;&#10;            border-radius: 12px;&#13;&#10;            overflow: hidden;&#13;&#10;            box-shadow: 0 4px 6px rgba(0,0,0,0.1);&#13;&#10;        }}&#13;&#10;        .header {{&#13;&#10;            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#13;&#10;            padding: 40px 20px;&#13;&#10;            text-align: center;&#13;&#10;            color: white;&#13;&#10;        }}&#13;&#10;        .header h1 {{&#13;&#10;            margin: 0;&#13;&#10;            font-size: 28px;&#13;&#10;            font-weight: 600;&#13;&#10;        }}&#13;&#10;        .content {{&#13;&#10;            padding: 40px 30px;&#13;&#10;        }}&#13;&#10;        .welcome-text {{&#13;&#10;            font-size: 18px;&#13;&#10;            color: #333;&#13;&#10;            margin-bottom: 20px;&#13;&#10;        }}&#13;&#10;        .message {{&#13;&#10;            color: #666;&#13;&#10;            font-size: 15px;&#13;&#10;            margin-bottom: 30px;&#13;&#10;            line-height: 1.8;&#13;&#10;        }}&#13;&#10;        .button-container {{&#13;&#10;            text-align: center;&#13;&#10;            margin: 35px 0;&#13;&#10;        }}&#13;&#10;        .verify-button {{&#13;&#10;            display: inline-block;&#13;&#10;            padding: 16px 40px;&#13;&#10;            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#13;&#10;            color: white !important;&#13;&#10;            text-decoration: none;&#13;&#10;            border-radius: 8px;&#13;&#10;            font-weight: 600;&#13;&#10;            font-size: 16px;&#13;&#10;            transition: transform 0.2s;&#13;&#10;            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);&#13;&#10;        }}&#13;&#10;        .verify-button:hover {{&#13;&#10;            transform: translateY(-2px);&#13;&#10;            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);&#13;&#10;        }}&#13;&#10;        .alternative-link {{&#13;&#10;            margin-top: 25px;&#13;&#10;            padding: 20px;&#13;&#10;            background: #f8f9fa;&#13;&#10;            border-radius: 8px;&#13;&#10;            font-size: 13px;&#13;&#10;            color: #666;&#13;&#10;            word-break: break-all;&#13;&#10;        }}&#13;&#10;        .alternative-link p {{&#13;&#10;            margin: 0 0 10px 0;&#13;&#10;            font-weight: 600;&#13;&#10;            color: #333;&#13;&#10;        }}&#13;&#10;        .alternative-link a {{&#13;&#10;            color: #667eea;&#13;&#10;            text-decoration: none;&#13;&#10;        }}&#13;&#10;        .footer {{&#13;&#10;            padding: 30px;&#13;&#10;            text-align: center;&#13;&#10;            background: #f8f9fa;&#13;&#10;            color: #999;&#13;&#10;            font-size: 13px;&#13;&#10;            border-top: 1px solid #e9ecef;&#13;&#10;        }}&#13;&#10;        .security-note {{&#13;&#10;            margin-top: 25px;&#13;&#10;            padding: 15px;&#13;&#10;            background: #fff3cd;&#13;&#10;            border-left: 4px solid #ffc107;&#13;&#10;            border-radius: 4px;&#13;&#10;            font-size: 13px;&#13;&#10;            color: #856404;&#13;&#10;        }}&#13;&#10;        .icon {{&#13;&#10;            font-size: 48px;&#13;&#10;            margin-bottom: 15px;&#13;&#10;        }}&#13;&#10;    &lt;/style&gt;&#13;&#10;&lt;/head&gt;&#13;&#10;&lt;body&gt;&#13;&#10;    &lt;div class='container'&gt;&#13;&#10;        &lt;div class='header'&gt;&#13;&#10;            &lt;div class='icon'&gt;✉️&lt;/div&gt;&#13;&#10;            &lt;h1&gt;E-posta Doğrulama&lt;/h1&gt;&#13;&#10;        &lt;/div&gt;&#13;&#10;        &lt;div class='content'&gt;&#13;&#10;            &lt;div class='welcome-text'&gt;&#13;&#10;                Merhaba &lt;strong&gt;{userName}&lt;/strong&gt;! &#13;&#10;            &lt;/div&gt;&#13;&#10;            &lt;div class='message'&gt;&#13;&#10;                Restaurant Management sistemine hoş geldiniz! Hesabınızı aktif hale getirmek için e-posta adresinizi doğrulamanız gerekmektedir.&#13;&#10;            &lt;/div&gt;&#13;&#10;            &lt;div class='message'&gt;&#13;&#10;                E-posta adresinizi doğrulamak için aşağıdaki butona tıklayın:&#13;&#10;            &lt;/div&gt;&#13;&#10;            &lt;div class='button-container'&gt;&#13;&#10;                &lt;a href='{verificationLink}' class='verify-button'&gt;&#13;&#10;                    E-posta Adresimi Doğrula&#13;&#10;                &lt;/a&gt;&#13;&#10;            &lt;/div&gt;&#13;&#10;            &lt;div class='alternative-link'&gt;&#13;&#10;                &lt;p&gt;Buton çalışmıyorsa, aşağıdaki linki tarayıcınıza kopyalayın:&lt;/p&gt;&#13;&#10;                &lt;a href='{verificationLink}'&gt;{verificationLink}&lt;/a&gt;&#13;&#10;            &lt;/div&gt;&#13;&#10;            &lt;div class='security-note'&gt;&#13;&#10;                 &lt;strong&gt;Güvenlik Notu:&lt;/strong&gt; Bu link sadece bir kez kullanılabilir ve 24 saat geçerlidir. Eğer bu hesabı siz oluşturmadıysanız, bu e-postayı görmezden gelebilirsiniz.&#13;&#10;            &lt;/div&gt;&#13;&#10;        &lt;/div&gt;&#13;&#10;        &lt;div class='footer'&gt;&#13;&#10;            &lt;p&gt;Bu e-posta Restaurant Management sistemi tarafından otomatik olarak gönderilmiştir.&lt;/p&gt;&#13;&#10;            &lt;p&gt;© 2025 Restaurant Management. Tüm hakları saklıdır.&lt;/p&gt;&#13;&#10;        &lt;/div&gt;&#13;&#10;    &lt;/div&gt;&#13;&#10;&lt;/body&gt;&#13;&#10;&lt;/html&gt;&quot;;&#13;&#10;&#13;&#10;        await SendEmailAsync(to, subject, body);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task SendJobApplicationStatusEmailAsync(string applicantEmail, string applicantName, string jobTitle, string restaurantName, string status, string? notes = null)&#13;&#10;    {&#13;&#10;        var subject = $&quot;İş Başvurunuz Hakkında - {restaurantName}&quot;;&#13;&#10;        var statusText = status == &quot;Accepted&quot; ? &quot;kabul edildi&quot; : &quot;reddedildi&quot;;&#13;&#10;        var body = $@&quot;&#13;&#10;            &lt;html&gt;&#13;&#10;            &lt;body style='font-family: Arial, sans-serif;'&gt;&#13;&#10;                &lt;h2&gt;Sayın {applicantName},&lt;/h2&gt;&#13;&#10;                &lt;p&gt;&lt;strong&gt;{restaurantName}&lt;/strong&gt; restoranında &lt;strong&gt;{jobTitle}&lt;/strong&gt; pozisyonuna yaptığınız başvuru &lt;strong&gt;{statusText}&lt;/strong&gt;.&lt;/p&gt;&#13;&#10;                {(status == &quot;Accepted&quot; ? &quot;&lt;p&gt;Tebrikler! Başvurunuz onaylandı. Yakında sizinle iletişime geçeceğiz.&lt;/p&gt;&quot; : &quot;&quot;)}&#13;&#10;                {(!string.IsNullOrEmpty(notes) ? $&quot;&lt;p&gt;&lt;strong&gt;Değerlendirme Notu:&lt;/strong&gt; {notes}&lt;/p&gt;&quot; : &quot;&quot;)}&#13;&#10;                &lt;p&gt;İyi günler dileriz,&lt;br/&gt;{restaurantName} Ekibi&lt;/p&gt;&#13;&#10;            &lt;/body&gt;&#13;&#10;            &lt;/html&gt;&#13;&#10;        &quot;;&#13;&#10;&#13;&#10;        await SendEmailAsync(applicantEmail, subject, body);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task SendNewJobApplicationNotificationAsync(string ownerEmail, string ownerName, string applicantName, string jobTitle, string restaurantName)&#13;&#10;    {&#13;&#10;        var subject = $&quot;Yeni İş Başvurusu - {restaurantName}&quot;;&#13;&#10;        var body = $@&quot;&#13;&#10;            &lt;html&gt;&#13;&#10;            &lt;body style='font-family: Arial, sans-serif;'&gt;&#13;&#10;                &lt;h2&gt;Sayın {ownerName},&lt;/h2&gt;&#13;&#10;                &lt;p&gt;&lt;strong&gt;{applicantName}&lt;/strong&gt; isimli kullanıcı &lt;strong&gt;{restaurantName}&lt;/strong&gt; restoranınızda &lt;strong&gt;{jobTitle}&lt;/strong&gt; pozisyonuna başvuruda bulundu.&lt;/p&gt;&#13;&#10;                &lt;p&gt;Başvuruyu incelemek için lütfen dashboard'unuzu kontrol edin.&lt;/p&gt;&#13;&#10;                &lt;p&gt;İyi çalışmalar dileriz!&lt;/p&gt;&#13;&#10;            &lt;/body&gt;&#13;&#10;            &lt;/html&gt;&#13;&#10;        &quot;;&#13;&#10;&#13;&#10;        await SendEmailAsync(ownerEmail, subject, body);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task SendPasswordResetAsync(string to, string userName, string resetLink)&#13;&#10;    {&#13;&#10;        var subject = &quot;Şifre Sıfırlama Talimatları - Restaurant Management&quot;;&#13;&#10;        var body = $@&quot;&#13;&#10;&lt;!DOCTYPE html&gt;&#13;&#10;&lt;html&gt;&#13;&#10;&lt;head&gt;&#13;&#10;    &lt;meta charset='utf-8'&gt;&#13;&#10;    &lt;meta name='viewport' content='width=device-width, initial-scale=1.0'&gt;&#13;&#10;    &lt;style&gt;&#13;&#10;        body {{ font-family: Arial, sans-serif; background: #f8fafc; color: #222; }}&#13;&#10;        .container {{ max-width: 500px; margin: 0 auto; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px #0001; padding: 32px; }}&#13;&#10;        .btn {{ display: inline-block; background: #2563eb; color: #fff; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: bold; margin-top: 16px; }}&#13;&#10;        .footer {{ margin-top: 32px; font-size: 12px; color: #888; }}&#13;&#10;    &lt;/style&gt;&#13;&#10;&lt;/head&gt;&#13;&#10;&lt;body&gt;&#13;&#10;    &lt;div class='container'&gt;&#13;&#10;        &lt;h2&gt;Merhaba {userName},&lt;/h2&gt;&#13;&#10;        &lt;p&gt;Şifrenizi sıfırlamak için aşağıdaki butona tıklayın:&lt;/p&gt;&#13;&#10;        &lt;a href='{resetLink}' class='btn'&gt;Şifre Sıfırla&lt;/a&gt;&#13;&#10;        &lt;p style='margin-top:24px;'&gt;Eğer bu isteği siz yapmadıysanız, bu e-postayı görmezden gelebilirsiniz.&lt;/p&gt;&#13;&#10;        &lt;div class='footer'&gt;Restaurant Management ekibi&lt;/div&gt;&#13;&#10;    &lt;/div&gt;&#13;&#10;&lt;/body&gt;&#13;&#10;&lt;/html&gt;&#13;&#10;&quot;;&#13;&#10;&#13;&#10;        await SendEmailAsync(to, subject, body);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task SendDeleteAccountConfirmationAsync(string to, string userName, string confirmationLink, string deleteType)&#13;&#10;    {&#13;&#10;        var subject = &quot;Hesap Silme Onayı - Restaurant Management&quot;;&#13;&#10;        var deleteTypeText = deleteType.ToLower() == &quot;soft&quot; &#13;&#10;            ? &quot;geçici olarak devre dışı bırakılacak&quot; &#13;&#10;            : &quot;kalıcı olarak silinecek&quot;;&#13;&#10;        var warningText = deleteType.ToLower() == &quot;soft&quot;&#13;&#10;            ? &quot;Hesabınız geçici olarak devre dışı bırakılacak ve istediğiniz zaman tekrar aktif edebileceksiniz.&quot;&#13;&#10;            : &quot;⚠️ DİKKAT: Bu işlem geri alınamaz! Tüm verileriniz kalıcı olarak silinecektir.&quot;;&#13;&#10;        &#13;&#10;        var body = $@&quot;&#13;&#10;&lt;!DOCTYPE html&gt;&#13;&#10;&lt;html&gt;&#13;&#10;&lt;head&gt;&#13;&#10;    &lt;meta charset='utf-8'&gt;&#13;&#10;    &lt;style&gt;&#13;&#10;        body {{ font-family: Arial, sans-serif; background: #f8fafc; color: #222; }}&#13;&#10;        .container {{ max-width: 500px; margin: 0 auto; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px #0001; padding: 32px; }}&#13;&#10;        .warning {{ background: #fef2f2; border-left: 4px solid #dc2626; padding: 16px; margin: 20px 0; border-radius: 4px; }}&#13;&#10;        .btn {{ display: inline-block; background: #dc2626; color: #fff; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: bold; margin-top: 16px; }}&#13;&#10;        .footer {{ margin-top: 32px; font-size: 12px; color: #888; }}&#13;&#10;    &lt;/style&gt;&#13;&#10;&lt;/head&gt;&#13;&#10;&lt;body&gt;&#13;&#10;    &lt;div class='container'&gt;&#13;&#10;        &lt;h2&gt;Merhaba {userName},&lt;/h2&gt;&#13;&#10;        &lt;p&gt;Hesabınızın {deleteTypeText} için bir talepte bulundunuz.&lt;/p&gt;&#13;&#10;        &lt;div class='warning'&gt;&#13;&#10;            &lt;strong&gt;{warningText}&lt;/strong&gt;&#13;&#10;        &lt;/div&gt;&#13;&#10;        &lt;p&gt;Bu işlemi onaylamak için aşağıdaki butona tıklayın:&lt;/p&gt;&#13;&#10;        &lt;a href='{confirmationLink}' class='btn'&gt;Hesap Silmeyi Onayla&lt;/a&gt;&#13;&#10;        &lt;p style='margin-top:24px;'&gt;Eğer bu isteği siz yapmadıysanız, bu e-postayı görmezden gelebilirsiniz ve hesabınız güvende olacaktır.&lt;/p&gt;&#13;&#10;        &lt;div class='footer'&gt;Restaurant Management ekibi&lt;/div&gt;&#13;&#10;    &lt;/div&gt;&#13;&#10;&lt;/body&gt;&#13;&#10;&lt;/html&gt;&#13;&#10;&quot;;&#13;&#10;&#13;&#10;        await SendEmailAsync(to, subject, body);&#13;&#10;    }&#13;&#10;&#13;&#10;    public async Task SendAccountReactivationAsync(string to, string userName, string reactivationLink)&#13;&#10;    {&#13;&#10;        var subject = &quot;Hesabınızı Tekrar Aktif Edin - Restaurant Management&quot;;&#13;&#10;        var body = $@&quot;&#13;&#10;&lt;!DOCTYPE html&gt;&#13;&#10;&lt;html&gt;&#13;&#10;&lt;head&gt;&#13;&#10;    &lt;meta charset='utf-8'&gt;&#13;&#10;    &lt;style&gt;&#13;&#10;        body {{ font-family: Arial, sans-serif; background: #f8fafc; color: #222; }}&#13;&#10;        .container {{ max-width: 500px; margin: 0 auto; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px #0001; padding: 32px; }}&#13;&#10;        .btn {{ display: inline-block; background: #16a34a; color: #fff; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: bold; margin-top: 16px; }}&#13;&#10;        .footer {{ margin-top: 32px; font-size: 12px; color: #888; }}&#13;&#10;    &lt;/style&gt;&#13;&#10;&lt;/head&gt;&#13;&#10;&lt;body&gt;&#13;&#10;    &lt;div class='container'&gt;&#13;&#10;        &lt;h2&gt;Tekrar Hoş Geldiniz {userName}! &lt;/h2&gt;&#13;&#10;        &lt;p&gt;Hesabınız geçici olarak devre dışı bırakılmıştı. Hesabınızı tekrar aktif etmek ve Restaurant Management sistemini kullanmaya devam etmek isterseniz, aşağıdaki butona tıklayın:&lt;/p&gt;&#13;&#10;        &lt;a href='{reactivationLink}' class='btn'&gt;Hesabımı Tekrar Aktif Et&lt;/a&gt;&#13;&#10;        &lt;p style='margin-top:24px;'&gt;Bu linki kullanarak hesabınız tekrar aktif hale gelecek ve tüm verilerinize erişebileceksiniz.&lt;/p&gt;&#13;&#10;        &lt;div class='footer'&gt;Restaurant Management ekibi&lt;/div&gt;&#13;&#10;    &lt;/div&gt;&#13;&#10;&lt;/body&gt;&#13;&#10;&lt;/html&gt;&#13;&#10;&quot;;&#13;&#10;&#13;&#10;        await SendEmailAsync(to, subject, body);&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.Metadata.Builders;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Persistance.Configurations;&#10;&#10;public class JobPostingConfiguration : IEntityTypeConfiguration&lt;JobPosting&gt;&#10;{&#10;    public void Configure(EntityTypeBuilder&lt;JobPosting&gt; builder)&#10;    {&#10;        builder.HasKey(j =&gt; j.Id);&#10;&#10;        builder.Property(j =&gt; j.Title)&#10;            .IsRequired()&#10;            .HasMaxLength(200);&#10;&#10;        builder.Property(j =&gt; j.Description)&#10;            .IsRequired()&#10;            .HasMaxLength(2000);&#10;&#10;        builder.Property(j =&gt; j.Requirements)&#10;            .IsRequired()&#10;            .HasMaxLength(1000);&#10;&#10;        builder.Property(j =&gt; j.Position)&#10;            .IsRequired()&#10;            .HasMaxLength(100);&#10;&#10;        builder.Property(j =&gt; j.EmploymentType)&#10;            .IsRequired()&#10;            .HasMaxLength(50);&#10;&#10;        // Relationships&#10;        builder.HasOne(j =&gt; j.Restaurant)&#10;            .WithMany(r =&gt; r.JobPostings)&#10;            .HasForeignKey(j =&gt; j.RestaurantId)&#10;            .OnDelete(DeleteBehavior.Cascade);&#10;&#10;        // Indexes&#10;        builder.HasIndex(j =&gt; j.RestaurantId);&#10;        builder.HasIndex(j =&gt; j.IsActive);&#10;&#10;        // Soft Delete Query Filter&#10;        builder.HasQueryFilter(j =&gt; !j.IsDeleted);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/AccountController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/AccountController.cs" />
              <option name="originalContent" value="using AutoMapper;&#10;using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Identity;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers&#10;{&#10;    [Route(&quot;api/[controller]&quot;)]&#10;    [ApiController]&#10;    public class AccountController(&#10;        UserManager&lt;AppUser&gt; userManager,&#10;        SignInManager&lt;AppUser&gt; signInManager,&#10;        IMapper mapper,&#10;        IEmailService emailService,&#10;        IJwtTokenService jwtTokenService) : Controller&#10;    {&#10;        [HttpPost(&quot;register&quot;)]&#10;        public async Task&lt;IActionResult&gt; Register(UserRegisterDto userRegisterDto)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            // Username kontrolü&#10;            var existingUserByUsername = await userManager.FindByNameAsync(userRegisterDto.Username);&#10;            if (existingUserByUsername != null)&#10;            {&#10;                ModelState.AddModelError(&quot;Username&quot;, &quot;Bu kullanıcı adı zaten kullanılıyor&quot;);&#10;                return BadRequest(ModelState);&#10;            }&#10;&#10;            // Email kontrolü&#10;            var existingUserByEmail = await userManager.FindByEmailAsync(userRegisterDto.Email);&#10;            if (existingUserByEmail != null)&#10;            {&#10;                ModelState.AddModelError(&quot;Email&quot;, &quot;Bu e-posta adresi zaten kullanılıyor&quot;);&#10;                return BadRequest(ModelState);&#10;            }&#10;&#10;            var user = mapper.Map&lt;AppUser&gt;(userRegisterDto);&#10;&#10;            var result = await userManager.CreateAsync(user, userRegisterDto.Password);&#10;            if (!result.Succeeded)&#10;            {&#10;                foreach (var error in result.Errors)&#10;                {&#10;                    ModelState.AddModelError(error.Code, error.Description);&#10;                }&#10;&#10;                return BadRequest(ModelState);&#10;            }&#10;&#10;            await userManager.AddToRoleAsync(user, &quot;Customer&quot;);&#10;&#10;            // E-posta doğrulama token'ı oluştur&#10;            var emailToken = await userManager.GenerateEmailConfirmationTokenAsync(user);&#10;&#10;            // Doğrulama linki oluştur&#10;            var verificationLink =&#10;                $&quot;{Request.Scheme}://{Request.Host}/api/Account/verify-email?userId={user.Id}&amp;token={Uri.EscapeDataString(emailToken)}&quot;;&#10;&#10;            // E-posta gönder&#10;            try&#10;            {&#10;                await emailService.SendEmailVerificationAsync(user.Email!, user.UserName!, verificationLink);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                // E-posta gönderilemezse kullanıcıyı bilgilendir ama hesap oluşturuldu&#10;                return Ok(new&#10;                {&#10;                    Message = &quot;Kayıt başarılı ancak doğrulama e-postası gönderilemedi. Lütfen tekrar deneyin.&quot;,&#10;                    UserId = user.Id,&#10;                    EmailSendError = ex.Message&#10;                });&#10;            }&#10;&#10;            return Ok(new&#10;            {&#10;                Message = &quot;Kayıt başarılı! Lütfen e-posta adresinizi kontrol edin ve hesabınızı doğrulayın.&quot;,&#10;                UserId = user.Id,&#10;                Email = user.Email&#10;            });&#10;        }&#10;&#10;        [HttpGet(&quot;verify-email&quot;)]&#10;        public async Task&lt;IActionResult&gt; VerifyEmail([FromQuery] string userId, [FromQuery] string token)&#10;        {&#10;            if (string.IsNullOrEmpty(userId) || string.IsNullOrEmpty(token))&#10;            {&#10;                return BadRequest(new { Message = &quot;Geçersiz doğrulama linki&quot; });&#10;            }&#10;&#10;            var user = await userManager.FindByIdAsync(userId);&#10;            if (user == null)&#10;            {&#10;                return NotFound(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            if (user.EmailConfirmed)&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/email-verified?status=already-verified&quot;);&#10;            }&#10;&#10;            var result = await userManager.ConfirmEmailAsync(user, token);&#10;            if (result.Succeeded)&#10;            {&#10;              &#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/email-verified?status=success&quot;);&#10;            }&#10;            else&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/email-verified?status=failed&quot;);&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;resend-verification&quot;)]&#10;        public async Task&lt;IActionResult&gt; ResendVerificationEmail([FromBody] ResendVerificationDto dto)&#10;        {&#10;            var user = await userManager.FindByEmailAsync(dto.Email);&#10;            if (user == null)&#10;            {&#10;                return NotFound(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            if (user.EmailConfirmed)&#10;            {&#10;                return BadRequest(new { Message = &quot;E-posta adresi zaten doğrulanmış&quot; });&#10;            }&#10;&#10;            var emailToken = await userManager.GenerateEmailConfirmationTokenAsync(user);&#10;            var verificationLink =&#10;                $&quot;{Request.Scheme}://{Request.Host}/api/Account/verify-email?userId={user.Id}&amp;token={Uri.EscapeDataString(emailToken)}&quot;;&#10;&#10;            try&#10;            {&#10;                await emailService.SendEmailVerificationAsync(user.Email!, user.UserName!, verificationLink);&#10;                return Ok(new { Message = &quot;Doğrulama e-postası tekrar gönderildi&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { Message = &quot;E-posta gönderilemedi&quot;, Error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;login&quot;)]&#10;        public async Task&lt;IActionResult&gt; Login(UserLoginDto userLoginDto)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            var user = await userManager.FindByEmailAsync(userLoginDto.Email);&#10;            if (user == null)&#10;            {&#10;                return Unauthorized(new { Message = &quot;Geçersiz e-posta veya şifre&quot; });&#10;            }&#10;            &#10;&#10;          &#10;            if (!user.EmailConfirmed)&#10;            {&#10;                return Unauthorized(new&#10;                {&#10;                    Message = &quot;Lütfen önce e-posta adresinizi doğrulayın&quot;,&#10;                    RequiresEmailVerification = true,&#10;                    Email = user.Email&#10;                });&#10;            }&#10;&#10;            var result = await signInManager.CheckPasswordSignInAsync(user, userLoginDto.Password, false);&#10;            if (!result.Succeeded)&#10;            {&#10;                return Unauthorized(new { Message = &quot;Geçersiz e-posta veya şifre&quot; });&#10;            }&#10;&#10;            var token = await jwtTokenService.GenerateTokenAsync(user);&#10;            var roles = await userManager.GetRolesAsync(user);&#10;&#10;            return Ok(new&#10;            {&#10;                Message = &quot;Giriş başarılı&quot;,&#10;                Token = token,&#10;                User = new&#10;                {&#10;                    user.Id,&#10;                    user.UserName,&#10;                    user.Email,&#10;                    Roles = roles&#10;                }&#10;            });&#10;        }&#10;&#10;        [HttpPost(&quot;ForgotPassword&quot;)]&#10;        public async Task&lt;IActionResult&gt; ForgotPassword(ForgotPasswordDto forgotPasswordDto)&#10;        {&#10;            var user = await userManager.FindByEmailAsync(forgotPasswordDto.Email);&#10;            if (user == null || !(await userManager.IsEmailConfirmedAsync(user)))&#10;            {&#10;                return Ok(new&#10;                {&#10;                    Message =&#10;                        &quot;Eğer bu e-posta adresine kayıtlı bir hesap varsa, şifre sıfırlama talimatları gönderildi.&quot;&#10;                });&#10;            }&#10;&#10;            var resetToken = await userManager.GeneratePasswordResetTokenAsync(user);&#10;&#10;            // Frontend URL'ini kullan&#10;            var frontendUrl = &quot;http://localhost:3000&quot;;&#10;            var resetLink = $&quot;{frontendUrl}/reset-password?userId={user.Id}&amp;token={Uri.EscapeDataString(resetToken)}&quot;;&#10;&#10;            try&#10;            {&#10;                await emailService.SendPasswordResetAsync(user.Email!, user.UserName!, resetLink);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                // Log the exception for troubleshooting; do not fail the request&#10;                Console.WriteLine($&quot;Failed to send password reset email: {ex}&quot;);&#10;            }&#10;&#10;            return Ok(new&#10;            {&#10;                Message =&#10;                    &quot;Eğer bu e-posta adresine kayıtlı bir hesap varsa, şifre sıfırlama talimatları gönderildi.&quot;&#10;            });&#10;        }&#10;&#10;        [HttpPost(&quot;reset-password&quot;)]&#10;        public async Task&lt;IActionResult&gt; ResetPassword([FromBody] ResetPasswordDto resetPasswordDto)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            var user = await userManager.FindByIdAsync(resetPasswordDto.UserId);&#10;            if (user == null)&#10;            {&#10;                return BadRequest(new { Message = &quot;Geçersiz kullanıcı&quot; });&#10;            }&#10;&#10;            var isSamePassword = await userManager.CheckPasswordAsync(user, resetPasswordDto.Password);&#10;            if (isSamePassword)&#10;            {&#10;                return BadRequest(new { Message = &quot;Yeni şifre eskisiyle aynı olamaz.&quot; });&#10;            }&#10;&#10;            var result = await userManager.ResetPasswordAsync(user, resetPasswordDto.Token, resetPasswordDto.Password);&#10;            if (result.Succeeded)&#10;            {&#10;                return Ok(new { Message = &quot;Şifreniz başarıyla sıfırlandı&quot; });&#10;            }&#10;&#10;            return BadRequest(new { Message = &quot;Şifre sıfırlama başarısız. Linkin süresi dolmuş olabilir.&quot; });&#10;        }&#10;&#10;        [HttpPost(&quot;change-password&quot;)]&#10;        [Authorize]&#10;        public async Task&lt;IActionResult&gt; ChangePassword([FromBody] ChangePasswordDto changePasswordDto)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            var currentUser = await userManager.GetUserAsync(User);&#10;            if (currentUser == null)&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/login&quot;);&#10;            }&#10;&#10;       &#10;            var isCurrentPasswordCorrect = await userManager.CheckPasswordAsync(currentUser, changePasswordDto.CurrentPassword);&#10;            if (!isCurrentPasswordCorrect)&#10;            {&#10;                return BadRequest(new { Message = &quot;Mevcut şifreniz yanlış&quot; });&#10;            }&#10;&#10;        &#10;            var isSamePassword = await userManager.CheckPasswordAsync(currentUser, changePasswordDto.NewPassword);&#10;            if (isSamePassword)&#10;            {&#10;                return BadRequest(new { Message = &quot;Yeni şifre mevcut şifrenizle aynı olamaz&quot; });&#10;            }&#10;&#10;            // Şifreyi değiştir&#10;            var result = await userManager.ChangePasswordAsync(currentUser, changePasswordDto.CurrentPassword, changePasswordDto.NewPassword);&#10;            if (result.Succeeded)&#10;            {&#10;                return Ok(new { Message = &quot;Şifreniz başarıyla değiştirildi&quot; });&#10;            }&#10;&#10;            foreach (var error in result.Errors)&#10;            {&#10;                ModelState.AddModelError(error.Code, error.Description);&#10;            }&#10;&#10;            return BadRequest(ModelState);&#10;        }&#10;&#10;        [HttpGet(&quot;profile&quot;)]&#10;        [Authorize]&#10;        public async Task&lt;IActionResult&gt; GetUserProfile()&#10;        {&#10;            var currentUser = await userManager.GetUserAsync(User);&#10;            if (currentUser == null)&#10;            {&#10;                return Unauthorized(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            var roles = await userManager.GetRolesAsync(currentUser);&#10;&#10;            return Ok(new&#10;            {&#10;                currentUser.Id,&#10;                currentUser.FirstName,&#10;                currentUser.LastName,&#10;                currentUser.FullName,&#10;                currentUser.UserName,&#10;                currentUser.Email,&#10;                currentUser.EmailConfirmed,&#10;                currentUser.Phone,&#10;                currentUser.Address,&#10;                Roles = roles&#10;            });&#10;        }&#10;&#10;        [HttpPost(&quot;profile&quot;)]&#10;        [Authorize]&#10;        public async Task&lt;IActionResult&gt; UpdateUserProfile(UserProfileDto userProfileDto)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            var currentUser = await userManager.GetUserAsync(User);&#10;            if (currentUser == null)&#10;            {&#10;                return Unauthorized(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            bool emailChanged = false;&#10;&#10;            // İsim / soyisim güncelle&#10;            if (!string.IsNullOrWhiteSpace(userProfileDto.FirstName))&#10;            {&#10;                currentUser.FirstName = userProfileDto.FirstName.Trim();&#10;            }&#10;&#10;            if (!string.IsNullOrWhiteSpace(userProfileDto.LastName))&#10;            {&#10;                currentUser.LastName = userProfileDto.LastName.Trim();&#10;            }&#10;&#10;            // FullName'i sunucu tarafında birleştir&#10;            currentUser.FullName = $&quot;{currentUser.FirstName} {currentUser.LastName}&quot;.Trim();&#10;&#10;            // Username değişikliği ve benzersizlik kontrolü&#10;            if (!string.IsNullOrWhiteSpace(userProfileDto.UserName) &amp;&amp;&#10;                !string.Equals(currentUser.UserName, userProfileDto.UserName, StringComparison.OrdinalIgnoreCase))&#10;            {&#10;                var existingByUsername = await userManager.FindByNameAsync(userProfileDto.UserName);&#10;                if (existingByUsername != null &amp;&amp; existingByUsername.Id != currentUser.Id)&#10;                {&#10;                    ModelState.AddModelError(&quot;UserName&quot;, &quot;Bu kullanıcı adı zaten kullanılıyor&quot;);&#10;                    return BadRequest(ModelState);&#10;                }&#10;&#10;                currentUser.UserName = userProfileDto.UserName;&#10;            }&#10;&#10;            // Email değişikliği ve benzersizlik kontrolü&#10;            if (!string.IsNullOrWhiteSpace(userProfileDto.Email) &amp;&amp;&#10;                !string.Equals(currentUser.Email, userProfileDto.Email, StringComparison.OrdinalIgnoreCase))&#10;            {&#10;                var existingByEmail = await userManager.FindByEmailAsync(userProfileDto.Email);&#10;                if (existingByEmail != null &amp;&amp; existingByEmail.Id != currentUser.Id)&#10;                {&#10;                    ModelState.AddModelError(&quot;Email&quot;, &quot;Bu e-posta adresi zaten kullanılıyor&quot;);&#10;                    return BadRequest(ModelState);&#10;                }&#10;&#10;                currentUser.Email = userProfileDto.Email;&#10;                // E-posta değişince yeniden doğrulama gereksinimi&#10;                currentUser.EmailConfirmed = false;&#10;                emailChanged = true;&#10;            }&#10;&#10;            // Telefon ve adres güncelle&#10;            currentUser.Phone = userProfileDto.Phone ?? currentUser.Phone;&#10;            currentUser.Address = userProfileDto.Address ?? currentUser.Address;&#10;&#10;            var updateResult = await userManager.UpdateAsync(currentUser);&#10;            if (!updateResult.Succeeded)&#10;            {&#10;                foreach (var error in updateResult.Errors)&#10;                {&#10;                    ModelState.AddModelError(error.Code, error.Description);&#10;                }&#10;&#10;                return BadRequest(ModelState);&#10;            }&#10;&#10;            // Eğer e-posta değiştiyse doğrulama e-posta&#10;            if (emailChanged)&#10;            {&#10;                try&#10;                {&#10;                    var emailToken = await userManager.GenerateEmailConfirmationTokenAsync(currentUser);&#10;                    var verificationLink =&#10;                        $&quot;{Request.Scheme}://{Request.Host}/api/Account/verify-email?userId={currentUser.Id}&amp;token={Uri.EscapeDataString(emailToken)}&quot;;&#10;                    await emailService.SendEmailVerificationAsync(currentUser.Email!, currentUser.UserName!,&#10;                        verificationLink);&#10;                }&#10;                catch (Exception ex)&#10;                {&#10;                    return Ok(new&#10;                    {&#10;                        Message = &quot;Profil güncellendi ancak doğrulama e-postası gönderilemedi.&quot;,&#10;                        Error = ex.Message&#10;                    });&#10;                }&#10;&#10;                return Ok(new { Message = &quot;Profil güncellendi. Yeni e-posta adresinizi doğrulayın.&quot; });&#10;            }&#10;&#10;            return Ok(new { Message = &quot;Profil güncellendi.&quot; });&#10;        }&#10;&#10;        [HttpPost(&quot;delete-account&quot;)]&#10;        [Authorize]&#10;        public async Task&lt;IActionResult&gt; DeleteAccount()&#10;        {&#10;            var currentUser = await userManager.GetUserAsync(User);&#10;            if (currentUser == null)&#10;            {&#10;                return Unauthorized(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            var result = await userManager.DeleteAsync(currentUser);&#10;            if (result.Succeeded)&#10;            {&#10;                return Ok(new { Message = &quot;Hesabınız başarıyla silindi&quot; });&#10;            }&#10;&#10;            foreach (var error in result.Errors)&#10;            {&#10;                ModelState.AddModelError(error.Code, error.Description);&#10;            }&#10;&#10;            return BadRequest(ModelState);&#10;        }&#10;    }&#10;}&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="using AutoMapper;&#10;using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Identity;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers&#10;{&#10;    [Route(&quot;api/[controller]&quot;)]&#10;    [ApiController]&#10;    public class AccountController(&#10;        UserManager&lt;AppUser&gt; userManager,&#10;        SignInManager&lt;AppUser&gt; signInManager,&#10;        IMapper mapper,&#10;        IEmailService emailService,&#10;        IJwtTokenService jwtTokenService) : Controller&#10;    {&#10;        [HttpPost(&quot;register&quot;)]&#10;        public async Task&lt;IActionResult&gt; Register(UserRegisterDto userRegisterDto)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            // Username kontrolü&#10;            var existingUserByUsername = await userManager.FindByNameAsync(userRegisterDto.Username);&#10;            if (existingUserByUsername != null)&#10;            {&#10;                ModelState.AddModelError(&quot;Username&quot;, &quot;Bu kullanıcı adı zaten kullanılıyor&quot;);&#10;                return BadRequest(ModelState);&#10;            }&#10;&#10;            // Email kontrolü&#10;            var existingUserByEmail = await userManager.FindByEmailAsync(userRegisterDto.Email);&#10;            if (existingUserByEmail != null)&#10;            {&#10;                ModelState.AddModelError(&quot;Email&quot;, &quot;Bu e-posta adresi zaten kullanılıyor&quot;);&#10;                return BadRequest(ModelState);&#10;            }&#10;&#10;            var user = mapper.Map&lt;AppUser&gt;(userRegisterDto);&#10;&#10;            var result = await userManager.CreateAsync(user, userRegisterDto.Password);&#10;            if (!result.Succeeded)&#10;            {&#10;                foreach (var error in result.Errors)&#10;                {&#10;                    ModelState.AddModelError(error.Code, error.Description);&#10;                }&#10;&#10;                return BadRequest(ModelState);&#10;            }&#10;&#10;            await userManager.AddToRoleAsync(user, &quot;Customer&quot;);&#10;&#10;            // E-posta doğrulama token'ı oluştur&#10;            var emailToken = await userManager.GenerateEmailConfirmationTokenAsync(user);&#10;&#10;            // Doğrulama linki oluştur&#10;            var verificationLink =&#10;                $&quot;{Request.Scheme}://{Request.Host}/api/Account/verify-email?userId={user.Id}&amp;token={Uri.EscapeDataString(emailToken)}&quot;;&#10;&#10;            // E-posta gönder&#10;            try&#10;            {&#10;                await emailService.SendEmailVerificationAsync(user.Email!, user.UserName!, verificationLink);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                // E-posta gönderilemezse kullanıcıyı bilgilendir ama hesap oluşturuldu&#10;                return Ok(new&#10;                {&#10;                    Message = &quot;Kayıt başarılı ancak doğrulama e-postası gönderilemedi. Lütfen tekrar deneyin.&quot;,&#10;                    UserId = user.Id,&#10;                    EmailSendError = ex.Message&#10;                });&#10;            }&#10;&#10;            return Ok(new&#10;            {&#10;                Message = &quot;Kayıt başarılı! Lütfen e-posta adresinizi kontrol edin ve hesabınızı doğrulayın.&quot;,&#10;                UserId = user.Id,&#10;                Email = user.Email&#10;            });&#10;        }&#10;&#10;        [HttpGet(&quot;verify-email&quot;)]&#10;        public async Task&lt;IActionResult&gt; VerifyEmail([FromQuery] string userId, [FromQuery] string token)&#10;        {&#10;            if (string.IsNullOrEmpty(userId) || string.IsNullOrEmpty(token))&#10;            {&#10;                return BadRequest(new { Message = &quot;Geçersiz doğrulama linki&quot; });&#10;            }&#10;&#10;            var user = await userManager.FindByIdAsync(userId);&#10;            if (user == null)&#10;            {&#10;                return NotFound(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            if (user.EmailConfirmed)&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/email-verified?status=already-verified&quot;);&#10;            }&#10;&#10;            var result = await userManager.ConfirmEmailAsync(user, token);&#10;            if (result.Succeeded)&#10;            {&#10;              &#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/email-verified?status=success&quot;);&#10;            }&#10;            else&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/email-verified?status=failed&quot;);&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;resend-verification&quot;)]&#10;        public async Task&lt;IActionResult&gt; ResendVerificationEmail([FromBody] ResendVerificationDto dto)&#10;        {&#10;            var user = await userManager.FindByEmailAsync(dto.Email);&#10;            if (user == null)&#10;            {&#10;                return NotFound(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            if (user.EmailConfirmed)&#10;            {&#10;                return BadRequest(new { Message = &quot;E-posta adresi zaten doğrulanmış&quot; });&#10;            }&#10;&#10;            var emailToken = await userManager.GenerateEmailConfirmationTokenAsync(user);&#10;            var verificationLink =&#10;                $&quot;{Request.Scheme}://{Request.Host}/api/Account/verify-email?userId={user.Id}&amp;token={Uri.EscapeDataString(emailToken)}&quot;;&#10;&#10;            try&#10;            {&#10;                await emailService.SendEmailVerificationAsync(user.Email!, user.UserName!, verificationLink);&#10;                return Ok(new { Message = &quot;Doğrulama e-postası tekrar gönderildi&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { Message = &quot;E-posta gönderilemedi&quot;, Error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;login&quot;)]&#10;        public async Task&lt;IActionResult&gt; Login(UserLoginDto userLoginDto)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            var user = await userManager.FindByEmailAsync(userLoginDto.Email);&#10;            if (user == null)&#10;            {&#10;                return Unauthorized(new { Message = &quot;Geçersiz e-posta veya şifre&quot; });&#10;            }&#10;            &#10;            // Soft delete kontrolü&#10;            if (user.IsDeleted)&#10;            {&#10;                // Tekrar aktif etme token'ı oluştur&#10;                var reactivationToken = await userManager.GeneratePasswordResetTokenAsync(user);&#10;                var reactivationLink = $&quot;{Request.Scheme}://{Request.Host}/api/Account/reactivate-account?userId={user.Id}&amp;token={Uri.EscapeDataString(reactivationToken)}&quot;;&#10;                &#10;                // Tekrar aktif etme e-postası gönder&#10;                try&#10;                {&#10;                    await emailService.SendAccountReactivationAsync(user.Email!, user.UserName!, reactivationLink);&#10;                }&#10;                catch (Exception)&#10;                {&#10;                    // E-posta gönderilemezse yine de mesaj ver&#10;                }&#10;                &#10;                return Unauthorized(new&#10;                {&#10;                    Message = &quot;Hesabınız devre dışı bırakılmış. Hesabınızı tekrar aktif etmek için e-postanıza gönderilen linke tıklayın.&quot;,&#10;                    IsDeleted = true,&#10;                    Email = user.Email&#10;                });&#10;            }&#10;          &#10;            if (!user.EmailConfirmed)&#10;            {&#10;                return Unauthorized(new&#10;                {&#10;                    Message = &quot;Lütfen önce e-posta adresinizi doğrulayın&quot;,&#10;                    RequiresEmailVerification = true,&#10;                    Email = user.Email&#10;                });&#10;            }&#10;&#10;            var result = await signInManager.CheckPasswordSignInAsync(user, userLoginDto.Password, false);&#10;            if (!result.Succeeded)&#10;            {&#10;                return Unauthorized(new { Message = &quot;Geçersiz e-posta veya şifre&quot; });&#10;            }&#10;&#10;            var token = await jwtTokenService.GenerateTokenAsync(user);&#10;            var roles = await userManager.GetRolesAsync(user);&#10;&#10;            return Ok(new&#10;            {&#10;                Message = &quot;Giriş başarılı&quot;,&#10;                Token = token,&#10;                User = new&#10;                {&#10;                    user.Id,&#10;                    user.UserName,&#10;                    user.Email,&#10;                    Roles = roles&#10;                }&#10;            });&#10;        }&#10;&#10;        [HttpPost(&quot;ForgotPassword&quot;)]&#10;        public async Task&lt;IActionResult&gt; ForgotPassword(ForgotPasswordDto forgotPasswordDto)&#10;        {&#10;            var user = await userManager.FindByEmailAsync(forgotPasswordDto.Email);&#10;            if (user == null || !(await userManager.IsEmailConfirmedAsync(user)))&#10;            {&#10;                return Ok(new&#10;                {&#10;                    Message =&#10;                        &quot;Eğer bu e-posta adresine kayıtlı bir hesap varsa, şifre sıfırlama talimatları gönderildi.&quot;&#10;                });&#10;            }&#10;&#10;            var resetToken = await userManager.GeneratePasswordResetTokenAsync(user);&#10;&#10;            // Frontend URL'ini kullan&#10;            var frontendUrl = &quot;http://localhost:3000&quot;;&#10;            var resetLink = $&quot;{frontendUrl}/reset-password?userId={user.Id}&amp;token={Uri.EscapeDataString(resetToken)}&quot;;&#10;&#10;            try&#10;            {&#10;                await emailService.SendPasswordResetAsync(user.Email!, user.UserName!, resetLink);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                // Log the exception for troubleshooting; do not fail the request&#10;                Console.WriteLine($&quot;Failed to send password reset email: {ex}&quot;);&#10;            }&#10;&#10;            return Ok(new&#10;            {&#10;                Message =&#10;                    &quot;Eğer bu e-posta adresine kayıtlı bir hesap varsa, şifre sıfırlama talimatları gönderildi.&quot;&#10;            });&#10;        }&#10;&#10;        [HttpPost(&quot;reset-password&quot;)]&#10;        public async Task&lt;IActionResult&gt; ResetPassword([FromBody] ResetPasswordDto resetPasswordDto)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            var user = await userManager.FindByIdAsync(resetPasswordDto.UserId);&#10;            if (user == null)&#10;            {&#10;                return BadRequest(new { Message = &quot;Geçersiz kullanıcı&quot; });&#10;            }&#10;&#10;            var isSamePassword = await userManager.CheckPasswordAsync(user, resetPasswordDto.Password);&#10;            if (isSamePassword)&#10;            {&#10;                return BadRequest(new { Message = &quot;Yeni şifre eskisiyle aynı olamaz.&quot; });&#10;            }&#10;&#10;            var result = await userManager.ResetPasswordAsync(user, resetPasswordDto.Token, resetPasswordDto.Password);&#10;            if (result.Succeeded)&#10;            {&#10;                return Ok(new { Message = &quot;Şifreniz başarıyla sıfırlandı&quot; });&#10;            }&#10;&#10;            return BadRequest(new { Message = &quot;Şifre sıfırlama başarısız. Linkin süresi dolmuş olabilir.&quot; });&#10;        }&#10;&#10;        [HttpPost(&quot;change-password&quot;)]&#10;        [Authorize]&#10;        public async Task&lt;IActionResult&gt; ChangePassword([FromBody] ChangePasswordDto changePasswordDto)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            var currentUser = await userManager.GetUserAsync(User);&#10;            if (currentUser == null)&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/login&quot;);&#10;            }&#10;&#10;       &#10;            var isCurrentPasswordCorrect = await userManager.CheckPasswordAsync(currentUser, changePasswordDto.CurrentPassword);&#10;            if (!isCurrentPasswordCorrect)&#10;            {&#10;                return BadRequest(new { Message = &quot;Mevcut şifreniz yanlış&quot; });&#10;            }&#10;&#10;        &#10;            var isSamePassword = await userManager.CheckPasswordAsync(currentUser, changePasswordDto.NewPassword);&#10;            if (isSamePassword)&#10;            {&#10;                return BadRequest(new { Message = &quot;Yeni şifre mevcut şifrenizle aynı olamaz&quot; });&#10;            }&#10;&#10;            // Şifreyi değiştir&#10;            var result = await userManager.ChangePasswordAsync(currentUser, changePasswordDto.CurrentPassword, changePasswordDto.NewPassword);&#10;            if (result.Succeeded)&#10;            {&#10;                return Ok(new { Message = &quot;Şifreniz başarıyla değiştirildi&quot; });&#10;            }&#10;&#10;            foreach (var error in result.Errors)&#10;            {&#10;                ModelState.AddModelError(error.Code, error.Description);&#10;            }&#10;&#10;            return BadRequest(ModelState);&#10;        }&#10;&#10;        [HttpGet(&quot;profile&quot;)]&#10;        [Authorize]&#10;        public async Task&lt;IActionResult&gt; GetUserProfile()&#10;        {&#10;            var currentUser = await userManager.GetUserAsync(User);&#10;            if (currentUser == null)&#10;            {&#10;                return Unauthorized(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            var roles = await userManager.GetRolesAsync(currentUser);&#10;&#10;            return Ok(new&#10;            {&#10;                currentUser.Id,&#10;                currentUser.FirstName,&#10;                currentUser.LastName,&#10;                currentUser.FullName,&#10;                currentUser.UserName,&#10;                currentUser.Email,&#10;                currentUser.EmailConfirmed,&#10;                currentUser.Phone,&#10;                currentUser.Address,&#10;                Roles = roles&#10;            });&#10;        }&#10;&#10;        [HttpPost(&quot;profile&quot;)]&#10;        [Authorize]&#10;        public async Task&lt;IActionResult&gt; UpdateUserProfile(UserProfileDto userProfileDto)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            var currentUser = await userManager.GetUserAsync(User);&#10;            if (currentUser == null)&#10;            {&#10;                return Unauthorized(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            bool emailChanged = false;&#10;&#10;            // İsim / soyisim güncelle&#10;            if (!string.IsNullOrWhiteSpace(userProfileDto.FirstName))&#10;            {&#10;                currentUser.FirstName = userProfileDto.FirstName.Trim();&#10;            }&#10;&#10;            if (!string.IsNullOrWhiteSpace(userProfileDto.LastName))&#10;            {&#10;                currentUser.LastName = userProfileDto.LastName.Trim();&#10;            }&#10;&#10;            // FullName'i sunucu tarafında birleştir&#10;            currentUser.FullName = $&quot;{currentUser.FirstName} {currentUser.LastName}&quot;.Trim();&#10;&#10;            // Username değişikliği ve benzersizlik kontrolü&#10;            if (!string.IsNullOrWhiteSpace(userProfileDto.UserName) &amp;&amp;&#10;                !string.Equals(currentUser.UserName, userProfileDto.UserName, StringComparison.OrdinalIgnoreCase))&#10;            {&#10;                var existingByUsername = await userManager.FindByNameAsync(userProfileDto.UserName);&#10;                if (existingByUsername != null &amp;&amp; existingByUsername.Id != currentUser.Id)&#10;                {&#10;                    ModelState.AddModelError(&quot;UserName&quot;, &quot;Bu kullanıcı adı zaten kullanılıyor&quot;);&#10;                    return BadRequest(ModelState);&#10;                }&#10;&#10;                currentUser.UserName = userProfileDto.UserName;&#10;            }&#10;&#10;            // Email değişikliği ve benzersizlik kontrolü&#10;            if (!string.IsNullOrWhiteSpace(userProfileDto.Email) &amp;&amp;&#10;                !string.Equals(currentUser.Email, userProfileDto.Email, StringComparison.OrdinalIgnoreCase))&#10;            {&#10;                var existingByEmail = await userManager.FindByEmailAsync(userProfileDto.Email);&#10;                if (existingByEmail != null &amp;&amp; existingByEmail.Id != currentUser.Id)&#10;                {&#10;                    ModelState.AddModelError(&quot;Email&quot;, &quot;Bu e-posta adresi zaten kullanılıyor&quot;);&#10;                    return BadRequest(ModelState);&#10;                }&#10;&#10;                currentUser.Email = userProfileDto.Email;&#10;                // E-posta değişince yeniden doğrulama gereksinimi&#10;                currentUser.EmailConfirmed = false;&#10;                emailChanged = true;&#10;            }&#10;&#10;            // Telefon ve adres güncelle&#10;            currentUser.Phone = userProfileDto.Phone ?? currentUser.Phone;&#10;            currentUser.Address = userProfileDto.Address ?? currentUser.Address;&#10;&#10;            var updateResult = await userManager.UpdateAsync(currentUser);&#10;            if (!updateResult.Succeeded)&#10;            {&#10;                foreach (var error in updateResult.Errors)&#10;                {&#10;                    ModelState.AddModelError(error.Code, error.Description);&#10;                }&#10;&#10;                return BadRequest(ModelState);&#10;            }&#10;&#10;            // Eğer e-posta değiştiyse doğrulama e-posta&#10;            if (emailChanged)&#10;            {&#10;                try&#10;                {&#10;                    var emailToken = await userManager.GenerateEmailConfirmationTokenAsync(currentUser);&#10;                    var verificationLink =&#10;                        $&quot;{Request.Scheme}://{Request.Host}/api/Account/verify-email?userId={currentUser.Id}&amp;token={Uri.EscapeDataString(emailToken)}&quot;;&#10;                    await emailService.SendEmailVerificationAsync(currentUser.Email!, currentUser.UserName!,&#10;                        verificationLink);&#10;                }&#10;                catch (Exception ex)&#10;                {&#10;                    return Ok(new&#10;                    {&#10;                        Message = &quot;Profil güncellendi ancak doğrulama e-postası gönderilemedi.&quot;,&#10;                        Error = ex.Message&#10;                    });&#10;                }&#10;&#10;                return Ok(new { Message = &quot;Profil güncellendi. Yeni e-posta adresinizi doğrulayın.&quot; });&#10;            }&#10;&#10;            return Ok(new { Message = &quot;Profil güncellendi.&quot; });&#10;        }&#10;&#10;        [HttpPost(&quot;delete-account&quot;)]&#10;        [Authorize]&#10;        public async Task&lt;IActionResult&gt; DeleteAccount([FromBody] DeleteAccountRequestDto deleteAccountRequest)&#10;        {&#10;            if (!ModelState.IsValid)&#10;                return BadRequest(ModelState);&#10;&#10;            var currentUser = await userManager.GetUserAsync(User);&#10;            if (currentUser == null)&#10;            {&#10;                return Unauthorized(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            // Silme türünü kontrol et&#10;            if (deleteAccountRequest.DeleteType.ToLower() != &quot;soft&quot; &amp;&amp; deleteAccountRequest.DeleteType.ToLower() != &quot;hard&quot;)&#10;            {&#10;                return BadRequest(new { Message = &quot;Geçersiz silme türü. 'soft' veya 'hard' olmalıdır.&quot; });&#10;            }&#10;&#10;            // Token oluştur (şifre sıfırlama token'ını kullanıyoruz)&#10;            var deleteToken = await userManager.GeneratePasswordResetTokenAsync(currentUser);&#10;&#10;            // Onay linki oluştur&#10;            var confirmationLink = $&quot;{Request.Scheme}://{Request.Host}/api/Account/confirm-delete?userId={currentUser.Id}&amp;token={Uri.EscapeDataString(deleteToken)}&amp;deleteType={deleteAccountRequest.DeleteType.ToLower()}&quot;;&#10;&#10;            try&#10;            {&#10;                await emailService.SendDeleteAccountConfirmationAsync(&#10;                    currentUser.Email!,&#10;                    currentUser.UserName!,&#10;                    confirmationLink,&#10;                    deleteAccountRequest.DeleteType.ToLower()&#10;                );&#10;&#10;                return Ok(new { Message = &quot;Hesap silme onayı e-postanıza gönderildi. Lütfen e-postanızı kontrol edin.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { Message = &quot;E-posta gönderilemedi&quot;, Error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;confirm-delete&quot;)]&#10;        public async Task&lt;IActionResult&gt; ConfirmDeleteAccount([FromQuery] string userId, [FromQuery] string token, [FromQuery] string deleteType)&#10;        {&#10;            if (string.IsNullOrEmpty(userId) || string.IsNullOrEmpty(token) || string.IsNullOrEmpty(deleteType))&#10;            {&#10;                return BadRequest(new { Message = &quot;Geçersiz onay linki&quot; });&#10;            }&#10;&#10;            var user = await userManager.FindByIdAsync(userId);&#10;            if (user == null)&#10;            {&#10;                return NotFound(new { Message = &quot;Kullanıcı bulunamadı&quot; });&#10;            }&#10;&#10;            // Token'ı doğrula&#10;            var isValidToken = await userManager.VerifyUserTokenAsync(&#10;                user,&#10;                userManager.Options.Tokens.PasswordResetTokenProvider,&#10;                &quot;ResetPassword&quot;,&#10;                token&#10;            );&#10;&#10;            if (!isValidToken)&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/account-deleted?status=invalid-token&quot;);&#10;            }&#10;&#10;            if (deleteType.ToLower() == &quot;soft&quot;)&#10;            {&#10;                // Soft Delete: Hesabı devre dışı bırak&#10;                user.IsDeleted = true;&#10;                user.DeletedAt = DateTime.UtcNow;&#10;                user.DeletedBy = user.Id;&#10;                user.LockoutEnabled = true;&#10;                user.LockoutEnd = DateTimeOffset.MaxValue; // Süresiz kilitle&#10;&#10;                var updateResult = await userManager.UpdateAsync(user);&#10;                if (updateResult.Succeeded)&#10;                {&#10;                    // Tekrar aktif etme linki gönder&#10;                    try&#10;                    {&#10;                        var reactivationToken = await userManager.GeneratePasswordResetTokenAsync(user);&#10;                        var reactivationLink = $&quot;{Request.Scheme}://{Request.Host}/api/Account/reactivate-account?userId={user.Id}&amp;token={Uri.EscapeDataString(reactivationToken)}&quot;;&#10;                        &#10;                        await emailService.SendAccountReactivationAsync(user.Email!, user.UserName!, reactivationLink);&#10;                    }&#10;                    catch (Exception)&#10;                    {&#10;                        // E-posta gönderilemezse yine de işleme devam et&#10;                    }&#10;&#10;                    return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/account-deleted?status=soft-success&quot;);&#10;                }&#10;                else&#10;                {&#10;                    return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/account-deleted?status=failed&quot;);&#10;                }&#10;            }&#10;            else if (deleteType.ToLower() == &quot;hard&quot;)&#10;            {&#10;                // Hard Delete: Kullanıcıyı tamamen sil&#10;                var deleteResult = await userManager.DeleteAsync(user);&#10;                if (deleteResult.Succeeded)&#10;                {&#10;                    return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/login?deleteStatus=hard-success&quot;);&#10;                }&#10;                else&#10;                {&#10;                    return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/account-deleted?status=failed&quot;);&#10;                }&#10;            }&#10;&#10;            return BadRequest(new { Message = &quot;Geçersiz silme türü&quot; });&#10;        }&#10;&#10;        [HttpGet(&quot;reactivate-account&quot;)]&#10;        public async Task&lt;IActionResult&gt; ReactivateAccount([FromQuery] string userId, [FromQuery] string token)&#10;        {&#10;            if (string.IsNullOrEmpty(userId) || string.IsNullOrEmpty(token))&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/account-reactivated?status=invalid-token&quot;);&#10;            }&#10;&#10;            // Kullanıcıyı bul - soft delete edilmiş kullanıcılar dahil&#10;            var user = await userManager.FindByIdAsync(userId);&#10;            if (user == null)&#10;            {&#10;                // Log için userId bilgisi ekleyelim&#10;                Console.WriteLine($&quot;Reactivation attempt failed: User not found with ID: {userId}&quot;);&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/account-reactivated?status=user-not-found&quot;);&#10;            }&#10;&#10;            // Eğer kullanıcı silinmemişse&#10;            if (!user.IsDeleted)&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/account-reactivated?status=already-active&quot;);&#10;            }&#10;&#10;            // Token'ı doğrula&#10;            var isValidToken = await userManager.VerifyUserTokenAsync(&#10;                user,&#10;                userManager.Options.Tokens.PasswordResetTokenProvider,&#10;                &quot;ResetPassword&quot;,&#10;                token&#10;            );&#10;&#10;            if (!isValidToken)&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/account-reactivated?status=invalid-token&quot;);&#10;            }&#10;&#10;            // Hesabı tekrar aktif et&#10;            user.IsDeleted = false;&#10;            user.DeletedAt = null;&#10;            user.DeletedBy = null;&#10;            user.LockoutEnabled = false;&#10;            user.LockoutEnd = null;&#10;&#10;            var updateResult = await userManager.UpdateAsync(user);&#10;            if (updateResult.Succeeded)&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/account-reactivated?status=success&quot;);&#10;            }&#10;            else&#10;            {&#10;                return Redirect($&quot;{Request.Scheme}://{Request.Host.Host}:3000/account-reactivated?status=failed&quot;);&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>