<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Domain.Models.Common;&#10;&#10;public class TopSellingItemDto&#10;{&#10;    public string MenuItemId { get; set; } = string.Empty;&#10;    public string MenuItemName { get; set; } = string.Empty;&#10;    public int QuantitySold { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs" />
              <option name="originalContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.Metadata.Builders;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Persistance.Configurations;&#10;&#10;public class JobPostingConfiguration : IEntityTypeConfiguration&lt;JobPosting&gt;&#10;{&#10;    public void Configure(EntityTypeBuilder&lt;JobPosting&gt; builder)&#10;    {&#10;        builder.HasKey(j =&gt; j.Id);&#10;&#10;        builder.Property(j =&gt; j.Title)&#10;            .IsRequired()&#10;            .HasMaxLength(200);&#10;&#10;        builder.Property(j =&gt; j.Description)&#10;            .IsRequired()&#10;            .HasMaxLength(2000);&#10;&#10;        builder.Property(j =&gt; j.Requirements)&#10;            .IsRequired()&#10;            .HasMaxLength(1000);&#10;&#10;        builder.Property(j =&gt; j.Position)&#10;            .IsRequired()&#10;            .HasMaxLength(100);&#10;&#10;        builder.Property(j =&gt; j.EmploymentType)&#10;            .IsRequired()&#10;            .HasMaxLength(50);&#10;&#10;        // Relationships&#10;        builder.HasOne(j =&gt; j.Restaurant)&#10;            .WithMany(r =&gt; r.JobPostings)&#10;            .HasForeignKey(j =&gt; j.RestaurantId)&#10;            .OnDelete(DeleteBehavior.Cascade);&#10;&#10;        // Indexes&#10;        builder.HasIndex(j =&gt; j.RestaurantId);&#10;        builder.HasIndex(j =&gt; j.IsActive);&#10;&#10;        // Soft Delete Query Filter&#10;        builder.HasQueryFilter(j =&gt; !j.IsDeleted);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.AspNetCore.Identity;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.WebAPI;&#10;&#10;public static class OwnerIdFixer&#10;{&#10;    public static async Task FixRestaurantOwnerIds(IServiceProvider services)&#10;    {&#10;        using var scope = services.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var logger = scope.ServiceProvider.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();&#10;        &#10;        try&#10;        {&#10;            // Owner kullanıcısını bul&#10;            var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;            if (owner == null)&#10;            {&#10;                logger.LogWarning(&quot;owner@gmail.com kullanıcısı bulunamadı!&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;Owner bulundu: {owner.Email} (ID: {owner.Id})&quot;);&#10;            &#10;            // Tüm aktif restoranları bul&#10;            var restaurants = await context.Restaurants&#10;                .Where(r =&gt; !r.IsDeleted)&#10;                .ToListAsync();&#10;            &#10;            if (restaurants.Count == 0)&#10;            {&#10;                logger.LogInformation(&quot;Veritabanında restoran bulunamadı.&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;{restaurants.Count} restoran bulundu, owner ID'leri güncelleniyor...&quot;);&#10;            &#10;            // Her restoranın owner ID'sini güncelle&#10;            foreach (var restaurant in restaurants)&#10;            {&#10;                restaurant.OwnerId = owner.Id;&#10;                logger.LogInformation($&quot;✓ {restaurant.Name} -&gt; Owner ID güncellendi&quot;);&#10;            }&#10;            &#10;            await context.SaveChangesAsync();&#10;            logger.LogInformation($&quot;✅ {restaurants.Count} restoranın owner ID'si başarıyla güncellendi!&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            logger.LogError(ex, &quot;Owner ID güncellenirken hata oluştu!&quot;);&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>