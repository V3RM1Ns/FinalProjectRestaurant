<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/applications/[id]/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/applications/[id]/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useParams, useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Badge } from '@/components/ui/badge'&#10;import { Label } from '@/components/ui/label'&#10;import { Textarea } from '@/components/ui/textarea'&#10;import { ArrowLeft, CheckCircle, XCircle, User, Building, MapPin, Phone, Mail, Calendar } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;&#10;interface Application {&#10;  id: string&#10;  userId: string&#10;  businessName: string&#10;  businessDescription: string&#10;  businessAddress: string&#10;  businessPhone: string&#10;  businessEmail: string&#10;  category: string&#10;  additionalNotes?: string&#10;  status: string&#10;  applicationDate: string&#10;  reviewedBy?: string&#10;  reviewedAt?: string&#10;  rejectionReason?: string&#10;  user: {&#10;    firstName: string&#10;    lastName: string&#10;  }&#10;}&#10;&#10;export default function ApplicationDetailPage() {&#10;  const params = useParams()&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [application, setApplication] = useState&lt;Application | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [actionLoading, setActionLoading] = useState(false)&#10;  const [rejectDialogOpen, setRejectDialogOpen] = useState(false)&#10;  const [rejectionReason, setRejectionReason] = useState('')&#10;&#10;  useEffect(() =&gt; {&#10;    fetchApplication()&#10;  }, [params.id])&#10;&#10;  const fetchApplication = async () =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;Application&gt;(`/admin/applications/${params.id}`)&#10;      setApplication(data)&#10;    } catch (error: any) {&#10;      console.error('Error fetching application:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load application',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleApprove = async () =&gt; {&#10;    if (!confirm('Are you sure you want to approve this application? This will create a restaurant and grant the user Restaurant Owner role.')) return&#10;&#10;    setActionLoading(true)&#10;    try {&#10;      await api.post(`/admin/applications/${params.id}/approve`, {})&#10;      toast({&#10;        title: 'Success',&#10;        description: 'Application approved successfully',&#10;      })&#10;      router.push('/admin/applications')&#10;    } catch (error: any) {&#10;      console.error('Error approving application:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to approve application',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setActionLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleReject = async () =&gt; {&#10;    if (!rejectionReason.trim()) {&#10;      toast({&#10;        title: 'Error',&#10;        description: 'Please provide a rejection reason',&#10;        variant: 'destructive',&#10;      })&#10;      return&#10;    }&#10;&#10;    setActionLoading(true)&#10;    try {&#10;      await api.post(`/admin/applications/${params.id}/reject`, { reason: rejectionReason })&#10;      toast({&#10;        title: 'Success',&#10;        description: 'Application rejected successfully',&#10;      })&#10;      setRejectDialogOpen(false)&#10;      router.push('/admin/applications')&#10;    } catch (error: any) {&#10;      console.error('Error rejecting application:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to reject application',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setActionLoading(false)&#10;    }&#10;  }&#10;&#10;  const getStatusBadge = (status: string) =&gt; {&#10;    switch (status.toLowerCase()) {&#10;      case 'pending':&#10;        return &lt;Badge variant=&quot;outline&quot; className=&quot;bg-yellow-100&quot;&gt;Pending&lt;/Badge&gt;&#10;      case 'approved':&#10;        return &lt;Badge variant=&quot;default&quot; className=&quot;bg-green-600&quot;&gt;Approved&lt;/Badge&gt;&#10;      case 'rejected':&#10;        return &lt;Badge variant=&quot;destructive&quot;&gt;Rejected&lt;/Badge&gt;&#10;      default:&#10;        return &lt;Badge variant=&quot;outline&quot;&gt;{status}&lt;/Badge&gt;&#10;    }&#10;  }&#10;&#10;  if (loading) {&#10;    return (&#10;      &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;        &lt;div className=&quot;text-center py-8&quot;&gt;Loading application details...&lt;/div&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (!application) {&#10;    return (&#10;      &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle&gt;Application Not Found&lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-4xl&quot;&gt;&#10;      &lt;Button&#10;        variant=&quot;ghost&quot;&#10;        onClick={() =&gt; router.push('/admin/applications')}&#10;        className=&quot;mb-4&quot;&#10;      &gt;&#10;        &lt;ArrowLeft className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;        Back to Applications&#10;      &lt;/Button&gt;&#10;&#10;      &lt;div className=&quot;space-y-6&quot;&gt;&#10;        {/* Header Card */}&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;CardTitle className=&quot;text-2xl&quot;&gt;Restaurant Ownership Application&lt;/CardTitle&gt;&#10;                &lt;CardDescription&gt;Application ID: {application.id}&lt;/CardDescription&gt;&#10;              &lt;/div&gt;&#10;              {getStatusBadge(application.status)}&#10;            &lt;/div&gt;&#10;          &lt;/CardHeader&gt;&#10;        &lt;/Card&gt;&#10;&#10;        {/* Applicant Information */}&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;              &lt;User className=&quot;w-5 h-5&quot; /&gt;&#10;              Applicant Information&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-3&quot;&gt;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground&quot;&gt;Name&lt;/Label&gt;&#10;                &lt;p className=&quot;font-medium&quot;&gt;{application.user.firstName} {application.user.lastName}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground&quot;&gt;Application Date&lt;/Label&gt;&#10;                &lt;p className=&quot;font-medium flex items-center gap-1&quot;&gt;&#10;                  &lt;Calendar className=&quot;w-4 h-4&quot; /&gt;&#10;                  {new Date(application.applicationDate).toLocaleDateString()}&#10;                &lt;/p&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;&#10;        {/* Business Information */}&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;              &lt;Building className=&quot;w-5 h-5&quot; /&gt;&#10;              Business Information&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;Label className=&quot;text-muted-foreground&quot;&gt;Business Name&lt;/Label&gt;&#10;              &lt;p className=&quot;font-medium text-lg&quot;&gt;{application.businessName}&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;Label className=&quot;text-muted-foreground&quot;&gt;Category&lt;/Label&gt;&#10;              &lt;div className=&quot;mt-1&quot;&gt;&#10;                &lt;Badge variant=&quot;outline&quot;&gt;{application.category}&lt;/Badge&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;Label className=&quot;text-muted-foreground&quot;&gt;Description&lt;/Label&gt;&#10;              &lt;p className=&quot;text-sm&quot;&gt;{application.businessDescription}&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground flex items-center gap-1&quot;&gt;&#10;                  &lt;MapPin className=&quot;w-4 h-4&quot; /&gt;&#10;                  Address&#10;                &lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.businessAddress}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground flex items-center gap-1&quot;&gt;&#10;                  &lt;Phone className=&quot;w-4 h-4&quot; /&gt;&#10;                  Phone&#10;                &lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.businessPhone}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            {application.businessEmail &amp;&amp; (&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground flex items-center gap-1&quot;&gt;&#10;                  &lt;Mail className=&quot;w-4 h-4&quot; /&gt;&#10;                  Email&#10;                &lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.businessEmail}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;            )}&#10;            {application.additionalNotes &amp;&amp; (&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground&quot;&gt;Additional Notes&lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.additionalNotes}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;            )}&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;&#10;        {/* Review Information */}&#10;        {(application.reviewedAt || application.rejectionReason) &amp;&amp; (&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Review Information&lt;/CardTitle&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent className=&quot;space-y-3&quot;&gt;&#10;              {application.reviewedAt &amp;&amp; (&#10;                &lt;div&gt;&#10;                  &lt;Label className=&quot;text-muted-foreground&quot;&gt;Reviewed At&lt;/Label&gt;&#10;                  &lt;p className=&quot;text-sm&quot;&gt;{new Date(application.reviewedAt).toLocaleString()}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;              {application.rejectionReason &amp;&amp; (&#10;                &lt;div&gt;&#10;                  &lt;Label className=&quot;text-muted-foreground&quot;&gt;Rejection Reason&lt;/Label&gt;&#10;                  &lt;p className=&quot;text-sm&quot;&gt;{application.rejectionReason}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        )}&#10;&#10;        {/* Actions */}&#10;        {application.status.toLowerCase() === 'pending' &amp;&amp; (&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Actions&lt;/CardTitle&gt;&#10;              &lt;CardDescription&gt;Review and make a decision on this application&lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;div className=&quot;flex gap-4&quot;&gt;&#10;                &lt;Button&#10;                  onClick={handleApprove}&#10;                  disabled={actionLoading}&#10;                  className=&quot;flex-1&quot;&#10;                &gt;&#10;                  &lt;CheckCircle className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;                  Approve Application&#10;                &lt;/Button&gt;&#10;                &lt;Button&#10;                  variant=&quot;destructive&quot;&#10;                  onClick={() =&gt; setRejectDialogOpen(true)}&#10;                  disabled={actionLoading}&#10;                  className=&quot;flex-1&quot;&#10;                &gt;&#10;                  &lt;XCircle className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;                  Reject Application&#10;                &lt;/Button&gt;&#10;              &lt;/div&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        )}&#10;      &lt;/div&gt;&#10;&#10;      {/* Reject Dialog */}&#10;      &lt;Dialog open={rejectDialogOpen} onOpenChange={setRejectDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Reject Application&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Please provide a reason for rejecting this application. This will be visible to the applicant.&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          &lt;div className=&quot;py-4&quot;&gt;&#10;            &lt;Textarea&#10;              placeholder=&quot;Enter rejection reason...&quot;&#10;              value={rejectionReason}&#10;              onChange={(e) =&gt; setRejectionReason(e.target.value)}&#10;              rows={4}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button&#10;              variant=&quot;outline&quot;&#10;              onClick={() =&gt; setRejectDialogOpen(false)}&#10;              disabled={actionLoading}&#10;            &gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button&#10;              variant=&quot;destructive&quot;&#10;              onClick={handleReject}&#10;              disabled={actionLoading || !rejectionReason.trim()}&#10;            &gt;&#10;              {actionLoading ? 'Rejecting...' : 'Reject Application'}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/loyalty/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/loyalty/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Input } from '@/components/ui/input'&#10;import { Label } from '@/components/ui/label'&#10;import { Textarea } from '@/components/ui/textarea'&#10;import { Badge } from '@/components/ui/badge'&#10;import { useToast } from '@/hooks/use-toast'&#10;import { loyaltyApi } from '@/lib/api'&#10;import { Gift, Copy, CheckCircle, XCircle } from 'lucide-react'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;&#10;interface LoyaltyCode {&#10;  id: string&#10;  code: string&#10;  pointValue: number&#10;  description?: string&#10;  isActive: boolean&#10;  maxUses?: number&#10;  currentUses: number&#10;  createdAt: string&#10;  expiryDate?: string&#10;  isUsed: boolean&#10;}&#10;&#10;const POINT_PRESETS = [200, 500, 1000, 2000, 5000]&#10;&#10;export default function AdminLoyaltyPage() {&#10;  const { toast } = useToast()&#10;  const [codes, setCodes] = useState&lt;LoyaltyCode[]&gt;([])&#10;  const [loading, setLoading] = useState(false)&#10;  const [dialogOpen, setDialogOpen] = useState(false)&#10;  const [generatedCode, setGeneratedCode] = useState&lt;any&gt;(null)&#10;  &#10;  const [formData, setFormData] = useState({&#10;    pointValue: 500,&#10;    description: '',&#10;    maxUses: 1,&#10;    expiryDate: '',&#10;  })&#10;&#10;  useEffect(() =&gt; {&#10;    fetchCodes()&#10;  }, [])&#10;&#10;  const fetchCodes = async () =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await loyaltyApi.admin.getAllCodes()&#10;      setCodes(data)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleGenerateCode = async () =&gt; {&#10;    if (!formData.pointValue || formData.pointValue &lt; 1) {&#10;      toast({&#10;        title: 'Error',&#10;        description: 'Please enter a valid point value',&#10;        variant: 'destructive',&#10;      })&#10;      return&#10;    }&#10;&#10;    setLoading(true)&#10;    try {&#10;      const result = await loyaltyApi.admin.generateCode({&#10;        pointValue: formData.pointValue,&#10;        description: formData.description || undefined,&#10;        maxUses: formData.maxUses || undefined,&#10;        expiryDate: formData.expiryDate || undefined,&#10;      })&#10;      &#10;      setGeneratedCode(result)&#10;      setDialogOpen(true)&#10;      fetchCodes()&#10;      &#10;      // Reset form&#10;      setFormData({&#10;        pointValue: 500,&#10;        description: '',&#10;        maxUses: 1,&#10;        expiryDate: '',&#10;      })&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleDeactivate = async (codeId: string) =&gt; {&#10;    if (!confirm('Are you sure you want to deactivate this code?')) return&#10;&#10;    try {&#10;      await loyaltyApi.admin.deactivateCode(codeId)&#10;      toast({&#10;        title: 'Success',&#10;        description: 'Code deactivated successfully',&#10;      })&#10;      fetchCodes()&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    }&#10;  }&#10;&#10;  const copyToClipboard = (text: string) =&gt; {&#10;    navigator.clipboard.writeText(text)&#10;    toast({&#10;      title: 'Copied!',&#10;      description: 'Code copied to clipboard',&#10;    })&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-6xl&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Loyalty Point Management&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Generate and manage loyalty point codes&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Generate Code Form */}&#10;      &lt;Card className=&quot;mb-6&quot;&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;            &lt;Gift className=&quot;w-5 h-5&quot; /&gt;&#10;            Generate New Loyalty Code&#10;          &lt;/CardTitle&gt;&#10;          &lt;CardDescription&gt;Create a new code that customers can redeem for loyalty points&lt;/CardDescription&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          &lt;div className=&quot;space-y-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Point Value&lt;/Label&gt;&#10;              &lt;div className=&quot;flex gap-2 mt-2&quot;&gt;&#10;                {POINT_PRESETS.map((preset) =&gt; (&#10;                  &lt;Button&#10;                    key={preset}&#10;                    variant={formData.pointValue === preset ? 'default' : 'outline'}&#10;                    onClick={() =&gt; setFormData({ ...formData, pointValue: preset })}&#10;                  &gt;&#10;                    {preset}&#10;                  &lt;/Button&gt;&#10;                ))}&#10;              &lt;/div&gt;&#10;              &lt;Input&#10;                type=&quot;number&quot;&#10;                value={formData.pointValue}&#10;                onChange={(e) =&gt; setFormData({ ...formData, pointValue: parseInt(e.target.value) || 0 })}&#10;                className=&quot;mt-2&quot;&#10;                placeholder=&quot;Or enter custom value&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Description (Optional)&lt;/Label&gt;&#10;              &lt;Textarea&#10;                value={formData.description}&#10;                onChange={(e) =&gt; setFormData({ ...formData, description: e.target.value })}&#10;                placeholder=&quot;e.g., New Year Special, Summer Bonus&quot;&#10;                rows={2}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;Max Uses (Optional)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;number&quot;&#10;                  value={formData.maxUses}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, maxUses: parseInt(e.target.value) || undefined })}&#10;                  placeholder=&quot;Leave empty for unlimited&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;Expiry Date (Optional)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;datetime-local&quot;&#10;                  value={formData.expiryDate}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, expiryDate: e.target.value })}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;Button onClick={handleGenerateCode} disabled={loading} className=&quot;w-full&quot;&gt;&#10;              {loading ? 'Generating...' : 'Generate Code'}&#10;            &lt;/Button&gt;&#10;          &lt;/div&gt;&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {/* Codes List */}&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;Generated Codes&lt;/CardTitle&gt;&#10;          &lt;CardDescription&gt;All loyalty codes created by admin&lt;/CardDescription&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading &amp;&amp; codes.length === 0 ? (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;Loading...&lt;/div&gt;&#10;          ) : codes.length === 0 ? (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;No codes generated yet&lt;/div&gt;&#10;          ) : (&#10;            &lt;div className=&quot;space-y-3&quot;&gt;&#10;              {codes.map((code) =&gt; (&#10;                &lt;div key={code.id} className=&quot;border rounded-lg p-4&quot;&gt;&#10;                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                    &lt;div className=&quot;flex-1&quot;&gt;&#10;                      &lt;div className=&quot;flex items-center gap-3 mb-2&quot;&gt;&#10;                        &lt;code className=&quot;text-lg font-mono font-bold bg-muted px-3 py-1 rounded&quot;&gt;&#10;                          {code.code}&#10;                        &lt;/code&gt;&#10;                        &lt;Button&#10;                          variant=&quot;ghost&quot;&#10;                          size=&quot;sm&quot;&#10;                          onClick={() =&gt; copyToClipboard(code.code)}&#10;                        &gt;&#10;                          &lt;Copy className=&quot;w-4 h-4&quot; /&gt;&#10;                        &lt;/Button&gt;&#10;                        &lt;Badge variant={code.isActive ? 'default' : 'secondary'}&gt;&#10;                          {code.isActive ? 'Active' : 'Inactive'}&#10;                        &lt;/Badge&gt;&#10;                        &lt;Badge variant=&quot;outline&quot;&gt;{code.pointValue} Points&lt;/Badge&gt;&#10;                      &lt;/div&gt;&#10;                      {code.description &amp;&amp; (&#10;                        &lt;p className=&quot;text-sm text-muted-foreground mb-2&quot;&gt;{code.description}&lt;/p&gt;&#10;                      )}&#10;                      &lt;div className=&quot;flex gap-4 text-sm text-muted-foreground&quot;&gt;&#10;                        &lt;span&gt;Uses: {code.currentUses}{code.maxUses ? `/${code.maxUses}` : ''}&lt;/span&gt;&#10;                        &lt;span&gt;Created: {new Date(code.createdAt).toLocaleDateString()}&lt;/span&gt;&#10;                        {code.expiryDate &amp;&amp; (&#10;                          &lt;span&gt;Expires: {new Date(code.expiryDate).toLocaleDateString()}&lt;/span&gt;&#10;                        )}&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    {code.isActive &amp;&amp; (&#10;                      &lt;Button&#10;                        variant=&quot;destructive&quot;&#10;                        size=&quot;sm&quot;&#10;                        onClick={() =&gt; handleDeactivate(code.id)}&#10;                      &gt;&#10;                        &lt;XCircle className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;                        Deactivate&#10;                      &lt;/Button&gt;&#10;                    )}&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              ))}&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {/* Success Dialog */}&#10;      &lt;Dialog open={dialogOpen} onOpenChange={setDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;              &lt;CheckCircle className=&quot;w-5 h-5 text-green-600&quot; /&gt;&#10;              Code Generated Successfully!&#10;            &lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Share this code with customers to let them redeem loyalty points&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          {generatedCode &amp;&amp; (&#10;            &lt;div className=&quot;py-4&quot;&gt;&#10;              &lt;div className=&quot;bg-muted p-4 rounded-lg text-center&quot;&gt;&#10;                &lt;code className=&quot;text-2xl font-mono font-bold&quot;&gt;{generatedCode.code}&lt;/code&gt;&#10;                &lt;Button&#10;                  variant=&quot;ghost&quot;&#10;                  size=&quot;sm&quot;&#10;                  onClick={() =&gt; copyToClipboard(generatedCode.code)}&#10;                  className=&quot;ml-2&quot;&#10;                &gt;&#10;                  &lt;Copy className=&quot;w-4 h-4&quot; /&gt;&#10;                &lt;/Button&gt;&#10;              &lt;/div&gt;&#10;              &lt;div className=&quot;mt-4 space-y-2 text-sm&quot;&gt;&#10;                &lt;p&gt;&lt;strong&gt;Point Value:&lt;/strong&gt; {generatedCode.pointValue}&lt;/p&gt;&#10;                {generatedCode.description &amp;&amp; (&#10;                  &lt;p&gt;&lt;strong&gt;Description:&lt;/strong&gt; {generatedCode.description}&lt;/p&gt;&#10;                )}&#10;                {generatedCode.expiryDate &amp;&amp; (&#10;                  &lt;p&gt;&lt;strong&gt;Expires:&lt;/strong&gt; {new Date(generatedCode.expiryDate).toLocaleDateString()}&lt;/p&gt;&#10;                )}&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          )}&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button onClick={() =&gt; setDialogOpen(false)}&gt;Close&lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/customer/loyalty/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/customer/loyalty/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Input } from '@/components/ui/input'&#10;import { Badge } from '@/components/ui/badge'&#10;import { useToast } from '@/hooks/use-toast'&#10;import { loyaltyApi } from '@/lib/api'&#10;import { Gift, Award, Ticket, TrendingUp } from 'lucide-react'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'&#10;&#10;interface LoyaltyBalance {&#10;  customerId: string&#10;  restaurantId: string&#10;  restaurantName: string&#10;  totalPoints: number&#10;  availablePoints: number&#10;  redeemedPoints: number&#10;  recentTransactions: any[]&#10;}&#10;&#10;interface Redemption {&#10;  id: string&#10;  rewardName: string&#10;  restaurantName: string&#10;  pointsSpent: number&#10;  couponCode?: string&#10;  redeemedAt: string&#10;  isUsed: boolean&#10;  usedAt?: string&#10;  expiryDate?: string&#10;}&#10;&#10;export default function CustomerLoyaltyPage() {&#10;  const { toast } = useToast()&#10;  const [balances, setBalances] = useState&lt;LoyaltyBalance[]&gt;([])&#10;  const [redemptions, setRedemptions] = useState&lt;Redemption[]&gt;([])&#10;  const [loading, setLoading] = useState(false)&#10;  const [codeDialogOpen, setCodeDialogOpen] = useState(false)&#10;  const [redeemCode, setRedeemCode] = useState('')&#10;&#10;  useEffect(() =&gt; {&#10;    fetchBalances()&#10;    fetchRedemptions()&#10;  }, [])&#10;&#10;  const fetchBalances = async () =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await loyaltyApi.customer.getBalance()&#10;      setBalances(data)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const fetchRedemptions = async () =&gt; {&#10;    try {&#10;      const data = await loyaltyApi.customer.getRedemptions()&#10;      setRedemptions(data)&#10;    } catch (error: any) {&#10;      console.error(error)&#10;    }&#10;  }&#10;&#10;  const handleRedeemCode = async () =&gt; {&#10;    if (!redeemCode.trim()) {&#10;      toast({&#10;        title: 'Error',&#10;        description: 'Please enter a code',&#10;        variant: 'destructive',&#10;      })&#10;      return&#10;    }&#10;&#10;    setLoading(true)&#10;    try {&#10;      const result = await loyaltyApi.customer.redeemCode(redeemCode)&#10;      toast({&#10;        title: 'Success!',&#10;        description: `You earned ${result.points} points!`,&#10;      })&#10;      setCodeDialogOpen(false)&#10;      setRedeemCode('')&#10;      fetchBalances()&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const totalAvailablePoints = balances.reduce((sum, b) =&gt; sum + b.availablePoints, 0)&#10;  const totalEarnedPoints = balances.reduce((sum, b) =&gt; sum + b.totalPoints, 0)&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-6xl&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;My Loyalty Points&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Redeem codes and use your points for rewards&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Overview Cards */}&#10;      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-4 mb-6&quot;&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-3&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium flex items-center gap-2&quot;&gt;&#10;              &lt;Award className=&quot;w-4 h-4&quot; /&gt;&#10;              Available Points&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-3xl font-bold&quot;&gt;{totalAvailablePoints}&lt;/div&gt;&#10;            &lt;p className=&quot;text-xs text-muted-foreground mt-1&quot;&gt;Ready to use&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-3&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium flex items-center gap-2&quot;&gt;&#10;              &lt;TrendingUp className=&quot;w-4 h-4&quot; /&gt;&#10;              Total Earned&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-3xl font-bold&quot;&gt;{totalEarnedPoints}&lt;/div&gt;&#10;            &lt;p className=&quot;text-xs text-muted-foreground mt-1&quot;&gt;All time&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader className=&quot;pb-3&quot;&gt;&#10;            &lt;CardTitle className=&quot;text-sm font-medium flex items-center gap-2&quot;&gt;&#10;              &lt;Ticket className=&quot;w-4 h-4&quot; /&gt;&#10;              Active Coupons&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            &lt;div className=&quot;text-3xl font-bold&quot;&gt;&#10;              {redemptions.filter(r =&gt; !r.isUsed &amp;&amp; (!r.expiryDate || new Date(r.expiryDate) &gt; new Date())).length}&#10;            &lt;/div&gt;&#10;            &lt;p className=&quot;text-xs text-muted-foreground mt-1&quot;&gt;Unused rewards&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Redeem Code Button */}&#10;      &lt;Card className=&quot;mb-6&quot;&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;            &lt;Gift className=&quot;w-5 h-5&quot; /&gt;&#10;            Have a Code?&#10;          &lt;/CardTitle&gt;&#10;          &lt;CardDescription&gt;Redeem a loyalty code to earn points&lt;/CardDescription&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          &lt;Button onClick={() =&gt; setCodeDialogOpen(true)} size=&quot;lg&quot; className=&quot;w-full&quot;&gt;&#10;            Redeem Code&#10;          &lt;/Button&gt;&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {/* Tabs */}&#10;      &lt;Tabs defaultValue=&quot;balance&quot; className=&quot;space-y-4&quot;&gt;&#10;        &lt;TabsList className=&quot;grid w-full grid-cols-2&quot;&gt;&#10;          &lt;TabsTrigger value=&quot;balance&quot;&gt;Points Balance&lt;/TabsTrigger&gt;&#10;          &lt;TabsTrigger value=&quot;coupons&quot;&gt;My Coupons&lt;/TabsTrigger&gt;&#10;        &lt;/TabsList&gt;&#10;&#10;        &lt;TabsContent value=&quot;balance&quot; className=&quot;space-y-4&quot;&gt;&#10;          {loading &amp;&amp; balances.length === 0 ? (&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;py-8 text-center text-muted-foreground&quot;&gt;&#10;                Loading...&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          ) : balances.length === 0 ? (&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;py-8 text-center text-muted-foreground&quot;&gt;&#10;                No loyalty points yet. Redeem a code to get started!&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          ) : (&#10;            balances.map((balance) =&gt; (&#10;              &lt;Card key={balance.restaurantId}&gt;&#10;                &lt;CardHeader&gt;&#10;                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                    &lt;CardTitle&gt;{balance.restaurantName}&lt;/CardTitle&gt;&#10;                    &lt;Badge className=&quot;text-lg px-4 py-1&quot;&gt;&#10;                      {balance.availablePoints} pts&#10;                    &lt;/Badge&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/CardHeader&gt;&#10;                &lt;CardContent&gt;&#10;                  &lt;div className=&quot;grid grid-cols-3 gap-4 mb-4 text-sm&quot;&gt;&#10;                    &lt;div&gt;&#10;                      &lt;div className=&quot;text-muted-foreground&quot;&gt;Total Earned&lt;/div&gt;&#10;                      &lt;div className=&quot;font-semibold&quot;&gt;{balance.totalPoints}&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div&gt;&#10;                      &lt;div className=&quot;text-muted-foreground&quot;&gt;Available&lt;/div&gt;&#10;                      &lt;div className=&quot;font-semibold text-green-600&quot;&gt;{balance.availablePoints}&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div&gt;&#10;                      &lt;div className=&quot;text-muted-foreground&quot;&gt;Redeemed&lt;/div&gt;&#10;                      &lt;div className=&quot;font-semibold text-orange-600&quot;&gt;{balance.redeemedPoints}&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;&#10;                  {balance.recentTransactions.length &gt; 0 &amp;&amp; (&#10;                    &lt;div&gt;&#10;                      &lt;h4 className=&quot;text-sm font-semibold mb-2&quot;&gt;Recent Transactions&lt;/h4&gt;&#10;                      &lt;div className=&quot;space-y-2&quot;&gt;&#10;                        {balance.recentTransactions.map((tx) =&gt; (&#10;                          &lt;div key={tx.id} className=&quot;flex items-center justify-between text-sm border-l-2 border-primary pl-3 py-1&quot;&gt;&#10;                            &lt;div&gt;&#10;                              &lt;div className=&quot;font-medium&quot;&gt;{tx.description}&lt;/div&gt;&#10;                              &lt;div className=&quot;text-xs text-muted-foreground&quot;&gt;&#10;                                {new Date(tx.earnedAt).toLocaleDateString()}&#10;                              &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;Badge variant={tx.points &gt; 0 ? 'default' : 'secondary'}&gt;&#10;                              {tx.points &gt; 0 ? '+' : ''}{tx.points}&#10;                            &lt;/Badge&gt;&#10;                          &lt;/div&gt;&#10;                        ))}&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                  )}&#10;                &lt;/CardContent&gt;&#10;              &lt;/Card&gt;&#10;            ))&#10;          )}&#10;        &lt;/TabsContent&gt;&#10;&#10;        &lt;TabsContent value=&quot;coupons&quot; className=&quot;space-y-4&quot;&gt;&#10;          {redemptions.length === 0 ? (&#10;            &lt;Card&gt;&#10;              &lt;CardContent className=&quot;py-8 text-center text-muted-foreground&quot;&gt;&#10;                No coupons yet. Redeem points for rewards!&#10;              &lt;/CardContent&gt;&#10;            &lt;/Card&gt;&#10;          ) : (&#10;            redemptions.map((redemption) =&gt; {&#10;              const isExpired = redemption.expiryDate &amp;&amp; new Date(redemption.expiryDate) &lt; new Date()&#10;              const isActive = !redemption.isUsed &amp;&amp; !isExpired&#10;&#10;              return (&#10;                &lt;Card key={redemption.id} className={!isActive ? 'opacity-60' : ''}&gt;&#10;                  &lt;CardHeader&gt;&#10;                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                      &lt;div&gt;&#10;                        &lt;CardTitle className=&quot;text-lg&quot;&gt;{redemption.rewardName}&lt;/CardTitle&gt;&#10;                        &lt;CardDescription&gt;{redemption.restaurantName}&lt;/CardDescription&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;Badge variant={isActive ? 'default' : 'secondary'}&gt;&#10;                        {redemption.isUsed ? 'Used' : isExpired ? 'Expired' : 'Active'}&#10;                      &lt;/Badge&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/CardHeader&gt;&#10;                  &lt;CardContent&gt;&#10;                    {redemption.couponCode &amp;&amp; (&#10;                      &lt;div className=&quot;bg-muted p-4 rounded-lg mb-3&quot;&gt;&#10;                        &lt;div className=&quot;text-xs text-muted-foreground mb-1&quot;&gt;Coupon Code&lt;/div&gt;&#10;                        &lt;code className=&quot;text-xl font-mono font-bold&quot;&gt;{redemption.couponCode}&lt;/code&gt;&#10;                      &lt;/div&gt;&#10;                    )}&#10;                    &lt;div className=&quot;grid grid-cols-2 gap-4 text-sm&quot;&gt;&#10;                      &lt;div&gt;&#10;                        &lt;div className=&quot;text-muted-foreground&quot;&gt;Points Spent&lt;/div&gt;&#10;                        &lt;div className=&quot;font-semibold&quot;&gt;{redemption.pointsSpent}&lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                      &lt;div&gt;&#10;                        &lt;div className=&quot;text-muted-foreground&quot;&gt;Redeemed&lt;/div&gt;&#10;                        &lt;div className=&quot;font-semibold&quot;&gt;&#10;                          {new Date(redemption.redeemedAt).toLocaleDateString()}&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                      {redemption.expiryDate &amp;&amp; (&#10;                        &lt;div&gt;&#10;                          &lt;div className=&quot;text-muted-foreground&quot;&gt;Expires&lt;/div&gt;&#10;                          &lt;div className={`font-semibold ${isExpired ? 'text-red-600' : ''}`}&gt;&#10;                            {new Date(redemption.expiryDate).toLocaleDateString()}&#10;                          &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                      )}&#10;                      {redemption.usedAt &amp;&amp; (&#10;                        &lt;div&gt;&#10;                          &lt;div className=&quot;text-muted-foreground&quot;&gt;Used&lt;/div&gt;&#10;                          &lt;div className=&quot;font-semibold&quot;&gt;&#10;                            {new Date(redemption.usedAt).toLocaleDateString()}&#10;                          &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                      )}&#10;                    &lt;/div&gt;&#10;                  &lt;/CardContent&gt;&#10;                &lt;/Card&gt;&#10;              )&#10;            })&#10;          )}&#10;        &lt;/TabsContent&gt;&#10;      &lt;/Tabs&gt;&#10;&#10;      {/* Redeem Code Dialog */}&#10;      &lt;Dialog open={codeDialogOpen} onOpenChange={setCodeDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Redeem Loyalty Code&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Enter your loyalty code to earn points&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          &lt;div className=&quot;py-4&quot;&gt;&#10;            &lt;Input&#10;              value={redeemCode}&#10;              onChange={(e) =&gt; setRedeemCode(e.target.value.toUpperCase())}&#10;              placeholder=&quot;Enter code (e.g., LP-ABC12345)&quot;&#10;              className=&quot;text-center text-lg font-mono&quot;&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button&#10;              variant=&quot;outline&quot;&#10;              onClick={() =&gt; {&#10;                setCodeDialogOpen(false)&#10;                setRedeemCode('')&#10;              }}&#10;            &gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button onClick={handleRedeemCode} disabled={loading}&gt;&#10;              {loading ? 'Redeeming...' : 'Redeem'}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/owner/rewards/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/owner/rewards/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Input } from '@/components/ui/input'&#10;import { Label } from '@/components/ui/label'&#10;import { Textarea } from '@/components/ui/textarea'&#10;import { Badge } from '@/components/ui/badge'&#10;import { useToast } from '@/hooks/use-toast'&#10;import { loyaltyApi } from '@/lib/api'&#10;import { useAuth } from '@/contexts/auth-context'&#10;import { Gift, Plus, Edit, Trash2 } from 'lucide-react'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;import {&#10;  Select,&#10;  SelectContent,&#10;  SelectItem,&#10;  SelectTrigger,&#10;  SelectValue,&#10;} from '@/components/ui/select'&#10;&#10;interface Reward {&#10;  id: string&#10;  restaurantId: string&#10;  restaurantName: string&#10;  name: string&#10;  description: string&#10;  pointsRequired: number&#10;  discountAmount?: number&#10;  discountPercentage?: number&#10;  imageUrl?: string&#10;  isActive: boolean&#10;  startDate?: string&#10;  endDate?: string&#10;  maxRedemptions?: number&#10;  currentRedemptions: number&#10;}&#10;&#10;export default function OwnerRewardsPage() {&#10;  const { toast } = useToast()&#10;  const { user } = useAuth()&#10;  const [rewards, setRewards] = useState&lt;Reward[]&gt;([])&#10;  const [restaurants, setRestaurants] = useState&lt;any[]&gt;([])&#10;  const [loading, setLoading] = useState(false)&#10;  const [dialogOpen, setDialogOpen] = useState(false)&#10;  const [editingReward, setEditingReward] = useState&lt;Reward | null&gt;(null)&#10;  &#10;  const [formData, setFormData] = useState({&#10;    restaurantId: '',&#10;    name: '',&#10;    description: '',&#10;    pointsRequired: 1000,&#10;    discountAmount: '',&#10;    discountPercentage: '',&#10;    imageUrl: '',&#10;    startDate: '',&#10;    endDate: '',&#10;    maxRedemptions: '',&#10;  })&#10;&#10;  useEffect(() =&gt; {&#10;    fetchRestaurants()&#10;  }, [])&#10;&#10;  useEffect(() =&gt; {&#10;    if (formData.restaurantId) {&#10;      fetchRewards()&#10;    }&#10;  }, [formData.restaurantId])&#10;&#10;  const fetchRestaurants = async () =&gt; {&#10;    try {&#10;      const data = await loyaltyApi.admin.getAllCodes() // Use owner API in real implementation&#10;      // In real implementation, fetch owner's restaurants&#10;      // For now, we'll set a placeholder&#10;    } catch (error: any) {&#10;      console.error(error)&#10;    }&#10;  }&#10;&#10;  const fetchRewards = async () =&gt; {&#10;    if (!formData.restaurantId) return&#10;    &#10;    setLoading(true)&#10;    try {&#10;      const data = await loyaltyApi.getRestaurantRewards(formData.restaurantId)&#10;      setRewards(data)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleSubmit = async () =&gt; {&#10;    if (!formData.name || !formData.description || !formData.pointsRequired) {&#10;      toast({&#10;        title: 'Error',&#10;        description: 'Please fill in all required fields',&#10;        variant: 'destructive',&#10;      })&#10;      return&#10;    }&#10;&#10;    setLoading(true)&#10;    try {&#10;      const data = {&#10;        restaurantId: formData.restaurantId,&#10;        name: formData.name,&#10;        description: formData.description,&#10;        pointsRequired: formData.pointsRequired,&#10;        discountAmount: formData.discountAmount ? parseFloat(formData.discountAmount) : undefined,&#10;        discountPercentage: formData.discountPercentage ? parseInt(formData.discountPercentage) : undefined,&#10;        imageUrl: formData.imageUrl || undefined,&#10;        startDate: formData.startDate || undefined,&#10;        endDate: formData.endDate || undefined,&#10;        maxRedemptions: formData.maxRedemptions ? parseInt(formData.maxRedemptions) : undefined,&#10;      }&#10;&#10;      if (editingReward) {&#10;        await loyaltyApi.owner.updateReward(editingReward.id, { ...data, isActive: editingReward.isActive })&#10;        toast({&#10;          title: 'Success',&#10;          description: 'Reward updated successfully',&#10;        })&#10;      } else {&#10;        await loyaltyApi.owner.createReward(data)&#10;        toast({&#10;          title: 'Success',&#10;          description: 'Reward created successfully',&#10;        })&#10;      }&#10;&#10;      setDialogOpen(false)&#10;      resetForm()&#10;      fetchRewards()&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleDelete = async (rewardId: string) =&gt; {&#10;    if (!confirm('Are you sure you want to delete this reward?')) return&#10;&#10;    try {&#10;      await loyaltyApi.owner.deleteReward(rewardId)&#10;      toast({&#10;        title: 'Success',&#10;        description: 'Reward deleted successfully',&#10;      })&#10;      fetchRewards()&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    }&#10;  }&#10;&#10;  const handleEdit = (reward: Reward) =&gt; {&#10;    setEditingReward(reward)&#10;    setFormData({&#10;      restaurantId: reward.restaurantId,&#10;      name: reward.name,&#10;      description: reward.description,&#10;      pointsRequired: reward.pointsRequired,&#10;      discountAmount: reward.discountAmount?.toString() || '',&#10;      discountPercentage: reward.discountPercentage?.toString() || '',&#10;      imageUrl: reward.imageUrl || '',&#10;      startDate: reward.startDate ? new Date(reward.startDate).toISOString().slice(0, 16) : '',&#10;      endDate: reward.endDate ? new Date(reward.endDate).toISOString().slice(0, 16) : '',&#10;      maxRedemptions: reward.maxRedemptions?.toString() || '',&#10;    })&#10;    setDialogOpen(true)&#10;  }&#10;&#10;  const resetForm = () =&gt; {&#10;    setEditingReward(null)&#10;    setFormData({&#10;      ...formData,&#10;      name: '',&#10;      description: '',&#10;      pointsRequired: 1000,&#10;      discountAmount: '',&#10;      discountPercentage: '',&#10;      imageUrl: '',&#10;      startDate: '',&#10;      endDate: '',&#10;      maxRedemptions: '',&#10;    })&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-6xl&quot;&gt;&#10;      &lt;div className=&quot;flex items-center justify-between mb-6&quot;&gt;&#10;        &lt;div&gt;&#10;          &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Rewards Management&lt;/h1&gt;&#10;          &lt;p className=&quot;text-muted-foreground&quot;&gt;Create and manage loyalty rewards for your customers&lt;/p&gt;&#10;        &lt;/div&gt;&#10;        &lt;Button onClick={() =&gt; setDialogOpen(true)}&gt;&#10;          &lt;Plus className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;          Create Reward&#10;        &lt;/Button&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Restaurant Selector */}&#10;      &lt;Card className=&quot;mb-6&quot;&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;Select Restaurant&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          &lt;Input&#10;            placeholder=&quot;Enter Restaurant ID&quot;&#10;            value={formData.restaurantId}&#10;            onChange={(e) =&gt; setFormData({ ...formData, restaurantId: e.target.value })}&#10;          /&gt;&#10;          &lt;p className=&quot;text-sm text-muted-foreground mt-2&quot;&gt;&#10;            Enter your restaurant ID to manage its rewards&#10;          &lt;/p&gt;&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {/* Rewards List */}&#10;      {formData.restaurantId &amp;&amp; (&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle&gt;Rewards&lt;/CardTitle&gt;&#10;            &lt;CardDescription&gt;Manage your restaurant's loyalty rewards&lt;/CardDescription&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent&gt;&#10;            {loading ? (&#10;              &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;Loading...&lt;/div&gt;&#10;            ) : rewards.length === 0 ? (&#10;              &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;&#10;                No rewards created yet. Create your first reward!&#10;              &lt;/div&gt;&#10;            ) : (&#10;              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-4&quot;&gt;&#10;                {rewards.map((reward) =&gt; (&#10;                  &lt;Card key={reward.id}&gt;&#10;                    &lt;CardHeader&gt;&#10;                      &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                        &lt;div className=&quot;flex-1&quot;&gt;&#10;                          &lt;CardTitle className=&quot;text-lg&quot;&gt;{reward.name}&lt;/CardTitle&gt;&#10;                          &lt;div className=&quot;flex gap-2 mt-2&quot;&gt;&#10;                            &lt;Badge variant={reward.isActive ? 'default' : 'secondary'}&gt;&#10;                              {reward.isActive ? 'Active' : 'Inactive'}&#10;                            &lt;/Badge&gt;&#10;                            &lt;Badge variant=&quot;outline&quot;&gt;{reward.pointsRequired} pts&lt;/Badge&gt;&#10;                          &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                          &lt;Button variant=&quot;ghost&quot; size=&quot;sm&quot; onClick={() =&gt; handleEdit(reward)}&gt;&#10;                            &lt;Edit className=&quot;w-4 h-4&quot; /&gt;&#10;                          &lt;/Button&gt;&#10;                          &lt;Button variant=&quot;ghost&quot; size=&quot;sm&quot; onClick={() =&gt; handleDelete(reward.id)}&gt;&#10;                            &lt;Trash2 className=&quot;w-4 h-4&quot; /&gt;&#10;                          &lt;/Button&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    &lt;/CardHeader&gt;&#10;                    &lt;CardContent&gt;&#10;                      &lt;p className=&quot;text-sm text-muted-foreground mb-3&quot;&gt;{reward.description}&lt;/p&gt;&#10;                      {(reward.discountAmount || reward.discountPercentage) &amp;&amp; (&#10;                        &lt;div className=&quot;text-sm mb-2&quot;&gt;&#10;                          &lt;strong&gt;Discount: &lt;/strong&gt;&#10;                          {reward.discountAmount &amp;&amp; `$${reward.discountAmount}`}&#10;                          {reward.discountPercentage &amp;&amp; `${reward.discountPercentage}%`}&#10;                        &lt;/div&gt;&#10;                      )}&#10;                      &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                        Redeemed: {reward.currentRedemptions}&#10;                        {reward.maxRedemptions &amp;&amp; `/${reward.maxRedemptions}`}&#10;                      &lt;/div&gt;&#10;                    &lt;/CardContent&gt;&#10;                  &lt;/Card&gt;&#10;                ))}&#10;              &lt;/div&gt;&#10;            )}&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      )}&#10;&#10;      {/* Create/Edit Dialog */}&#10;      &lt;Dialog open={dialogOpen} onOpenChange={(open) =&gt; {&#10;        setDialogOpen(open)&#10;        if (!open) resetForm()&#10;      }}&gt;&#10;        &lt;DialogContent className=&quot;max-w-2xl max-h-[90vh] overflow-y-auto&quot;&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;&#10;              {editingReward ? 'Edit Reward' : 'Create New Reward'}&#10;            &lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Configure the reward details and requirements&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          &lt;div className=&quot;space-y-4 py-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Reward Name *&lt;/Label&gt;&#10;              &lt;Input&#10;                value={formData.name}&#10;                onChange={(e) =&gt; setFormData({ ...formData, name: e.target.value })}&#10;                placeholder=&quot;e.g., Free Appetizer, 20% Off&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Description *&lt;/Label&gt;&#10;              &lt;Textarea&#10;                value={formData.description}&#10;                onChange={(e) =&gt; setFormData({ ...formData, description: e.target.value })}&#10;                placeholder=&quot;Describe what the customer gets&quot;&#10;                rows={3}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Points Required *&lt;/Label&gt;&#10;              &lt;Input&#10;                type=&quot;number&quot;&#10;                value={formData.pointsRequired}&#10;                onChange={(e) =&gt; setFormData({ ...formData, pointsRequired: parseInt(e.target.value) || 0 })}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;Discount Amount ($)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;number&quot;&#10;                  step=&quot;0.01&quot;&#10;                  value={formData.discountAmount}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, discountAmount: e.target.value })}&#10;                  placeholder=&quot;10.00&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;Discount Percentage (%)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;number&quot;&#10;                  value={formData.discountPercentage}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, discountPercentage: e.target.value })}&#10;                  placeholder=&quot;20&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Image URL (Optional)&lt;/Label&gt;&#10;              &lt;Input&#10;                value={formData.imageUrl}&#10;                onChange={(e) =&gt; setFormData({ ...formData, imageUrl: e.target.value })}&#10;                placeholder=&quot;https://...&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;Start Date (Optional)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;datetime-local&quot;&#10;                  value={formData.startDate}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, startDate: e.target.value })}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label&gt;End Date (Optional)&lt;/Label&gt;&#10;                &lt;Input&#10;                  type=&quot;datetime-local&quot;&#10;                  value={formData.endDate}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, endDate: e.target.value })}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label&gt;Max Redemptions (Optional)&lt;/Label&gt;&#10;              &lt;Input&#10;                type=&quot;number&quot;&#10;                value={formData.maxRedemptions}&#10;                onChange={(e) =&gt; setFormData({ ...formData, maxRedemptions: e.target.value })}&#10;                placeholder=&quot;Leave empty for unlimited&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button variant=&quot;outline&quot; onClick={() =&gt; {&#10;              setDialogOpen(false)&#10;              resetForm()&#10;            }}&gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button onClick={handleSubmit} disabled={loading}&gt;&#10;              {loading ? 'Saving...' : (editingReward ? 'Update' : 'Create')}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/restaurants/[id]/rewards/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/restaurants/[id]/rewards/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useParams, useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Badge } from '@/components/ui/badge'&#10;import { useToast } from '@/hooks/use-toast'&#10;import { loyaltyApi } from '@/lib/api'&#10;import { ArrowLeft, Gift, Star, Clock, Users } from 'lucide-react'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;&#10;interface Reward {&#10;  id: string&#10;  restaurantId: string&#10;  restaurantName: string&#10;  name: string&#10;  description: string&#10;  pointsRequired: number&#10;  discountAmount?: number&#10;  discountPercentage?: number&#10;  imageUrl?: string&#10;  isActive: boolean&#10;  startDate?: string&#10;  endDate?: string&#10;  maxRedemptions?: number&#10;  currentRedemptions: number&#10;  canRedeem: boolean&#10;}&#10;&#10;export default function RestaurantRewardsPage() {&#10;  const params = useParams()&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [rewards, setRewards] = useState&lt;Reward[]&gt;([])&#10;  const [loading, setLoading] = useState(false)&#10;  const [selectedReward, setSelectedReward] = useState&lt;Reward | null&gt;(null)&#10;  const [confirmDialogOpen, setConfirmDialogOpen] = useState(false)&#10;  const [userPoints, setUserPoints] = useState(0)&#10;  &#10;  const restaurantId = params.id as string&#10;&#10;  useEffect(() =&gt; {&#10;    fetchRewards()&#10;    fetchUserPoints()&#10;  }, [restaurantId])&#10;&#10;  const fetchRewards = async () =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await loyaltyApi.getRestaurantRewards(restaurantId)&#10;      setRewards(data)&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const fetchUserPoints = async () =&gt; {&#10;    try {&#10;      const balances = await loyaltyApi.customer.getBalance()&#10;      const balance = balances.find((b: any) =&gt; b.restaurantId === restaurantId)&#10;      setUserPoints(balance?.availablePoints || 0)&#10;    } catch (error: any) {&#10;      console.error(error)&#10;    }&#10;  }&#10;&#10;  const handleRedeemClick = (reward: Reward) =&gt; {&#10;    setSelectedReward(reward)&#10;    setConfirmDialogOpen(true)&#10;  }&#10;&#10;  const handleConfirmRedeem = async () =&gt; {&#10;    if (!selectedReward) return&#10;&#10;    setLoading(true)&#10;    try {&#10;      const redemption = await loyaltyApi.customer.redeemReward(selectedReward.id)&#10;      toast({&#10;        title: 'Success!',&#10;        description: `Reward redeemed! Your coupon code: ${redemption.couponCode}`,&#10;      })&#10;      setConfirmDialogOpen(false)&#10;      fetchRewards()&#10;      fetchUserPoints()&#10;    } catch (error: any) {&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message,&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-6xl&quot;&gt;&#10;      &lt;Button variant=&quot;ghost&quot; onClick={() =&gt; router.back()} className=&quot;mb-4&quot;&gt;&#10;        &lt;ArrowLeft className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;        Back&#10;      &lt;/Button&gt;&#10;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Loyalty Rewards&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Redeem your points for exclusive rewards&lt;/p&gt;&#10;        &lt;div className=&quot;mt-2&quot;&gt;&#10;          &lt;Badge variant=&quot;outline&quot; className=&quot;text-lg px-4 py-2&quot;&gt;&#10;            &lt;Star className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;            Your Points: {userPoints}&#10;          &lt;/Badge&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      {loading &amp;&amp; rewards.length === 0 ? (&#10;        &lt;div className=&quot;text-center py-12 text-muted-foreground&quot;&gt;Loading rewards...&lt;/div&gt;&#10;      ) : rewards.length === 0 ? (&#10;        &lt;Card&gt;&#10;          &lt;CardContent className=&quot;py-12 text-center text-muted-foreground&quot;&gt;&#10;            &lt;Gift className=&quot;w-16 h-16 mx-auto mb-4 opacity-20&quot; /&gt;&#10;            &lt;p&gt;No rewards available at this restaurant yet.&lt;/p&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;      ) : (&#10;        &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;&#10;          {rewards.map((reward) =&gt; {&#10;            const isAvailable = reward.isActive &amp;&amp; &#10;                               (!reward.maxRedemptions || reward.currentRedemptions &lt; reward.maxRedemptions) &amp;&amp;&#10;                               (!reward.endDate || new Date(reward.endDate) &gt; new Date())&#10;            const hasEnoughPoints = userPoints &gt;= reward.pointsRequired&#10;&#10;            return (&#10;              &lt;Card key={reward.id} className={!isAvailable ? 'opacity-60' : ''}&gt;&#10;                {reward.imageUrl &amp;&amp; (&#10;                  &lt;div className=&quot;aspect-video w-full overflow-hidden rounded-t-lg&quot;&gt;&#10;                    &lt;img &#10;                      src={reward.imageUrl} &#10;                      alt={reward.name}&#10;                      className=&quot;w-full h-full object-cover&quot;&#10;                    /&gt;&#10;                  &lt;/div&gt;&#10;                )}&#10;                &lt;CardHeader&gt;&#10;                  &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                    &lt;CardTitle className=&quot;text-lg&quot;&gt;{reward.name}&lt;/CardTitle&gt;&#10;                    {!isAvailable &amp;&amp; (&#10;                      &lt;Badge variant=&quot;secondary&quot;&gt;Unavailable&lt;/Badge&gt;&#10;                    )}&#10;                  &lt;/div&gt;&#10;                  &lt;CardDescription className=&quot;mt-2&quot;&gt;{reward.description}&lt;/CardDescription&gt;&#10;                &lt;/CardHeader&gt;&#10;                &lt;CardContent&gt;&#10;                  &lt;div className=&quot;space-y-3&quot;&gt;&#10;                    {/* Discount Info */}&#10;                    {(reward.discountAmount || reward.discountPercentage) &amp;&amp; (&#10;                      &lt;div className=&quot;bg-primary/10 p-3 rounded-lg text-center&quot;&gt;&#10;                        &lt;div className=&quot;text-2xl font-bold text-primary&quot;&gt;&#10;                          {reward.discountAmount &amp;&amp; `$${reward.discountAmount} OFF`}&#10;                          {reward.discountPercentage &amp;&amp; `${reward.discountPercentage}% OFF`}&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    )}&#10;&#10;                    {/* Points Required */}&#10;                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                      &lt;span className=&quot;text-sm text-muted-foreground&quot;&gt;Points Required&lt;/span&gt;&#10;                      &lt;Badge variant={hasEnoughPoints ? 'default' : 'secondary'} className=&quot;text-base px-3 py-1&quot;&gt;&#10;                        &lt;Star className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                        {reward.pointsRequired}&#10;                      &lt;/Badge&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    {/* Additional Info */}&#10;                    &lt;div className=&quot;space-y-1 text-xs text-muted-foreground&quot;&gt;&#10;                      {reward.maxRedemptions &amp;&amp; (&#10;                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                          &lt;Users className=&quot;w-3 h-3&quot; /&gt;&#10;                          &lt;span&gt;&#10;                            {reward.currentRedemptions}/{reward.maxRedemptions} redeemed&#10;                          &lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      )}&#10;                      {reward.endDate &amp;&amp; (&#10;                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                          &lt;Clock className=&quot;w-3 h-3&quot; /&gt;&#10;                          &lt;span&gt;&#10;                            Valid until {new Date(reward.endDate).toLocaleDateString()}&#10;                          &lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                      )}&#10;                    &lt;/div&gt;&#10;&#10;                    {/* Redeem Button */}&#10;                    &lt;Button&#10;                      onClick={() =&gt; handleRedeemClick(reward)}&#10;                      disabled={!isAvailable || !hasEnoughPoints}&#10;                      className=&quot;w-full&quot;&#10;                    &gt;&#10;                      {!hasEnoughPoints &#10;                        ? `Need ${reward.pointsRequired - userPoints} more points`&#10;                        : 'Redeem Now'&#10;                      }&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/CardContent&gt;&#10;              &lt;/Card&gt;&#10;            )&#10;          })}&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {/* Confirm Redemption Dialog */}&#10;      &lt;Dialog open={confirmDialogOpen} onOpenChange={setConfirmDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Confirm Redemption&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Are you sure you want to redeem this reward?&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          {selectedReward &amp;&amp; (&#10;            &lt;div className=&quot;py-4&quot;&gt;&#10;              &lt;div className=&quot;space-y-3&quot;&gt;&#10;                &lt;div&gt;&#10;                  &lt;h4 className=&quot;font-semibold&quot;&gt;{selectedReward.name}&lt;/h4&gt;&#10;                  &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{selectedReward.description}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;bg-muted p-3 rounded-lg&quot;&gt;&#10;                  &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;&#10;                    &lt;span className=&quot;text-sm&quot;&gt;Points to Spend&lt;/span&gt;&#10;                    &lt;span className=&quot;font-bold&quot;&gt;-{selectedReward.pointsRequired}&lt;/span&gt;&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                    &lt;span className=&quot;text-sm&quot;&gt;Remaining Balance&lt;/span&gt;&#10;                    &lt;span className=&quot;font-bold&quot;&gt;{userPoints - selectedReward.pointsRequired}&lt;/span&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;p className=&quot;text-xs text-muted-foreground&quot;&gt;&#10;                  You'll receive a coupon code that can be used at this restaurant.&#10;                &lt;/p&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          )}&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button&#10;              variant=&quot;outline&quot;&#10;              onClick={() =&gt; {&#10;                setConfirmDialogOpen(false)&#10;                setSelectedReward(null)&#10;              }}&#10;            &gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button onClick={handleConfirmRedeem} disabled={loading}&gt;&#10;              {loading ? 'Redeeming...' : 'Confirm Redeem'}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/lib/api.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/lib/api.ts" />
              <option name="originalContent" value="import { AuthService } from &quot;./auth&quot;&#10;&#10;const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || &quot;http://localhost:5000/api&quot;&#10;&#10;export class ApiClient {&#10;  private static getHeaders(): HeadersInit {&#10;    const token = AuthService.getToken()&#10;    return {&#10;      &quot;Content-Type&quot;: &quot;application/json&quot;,&#10;      ...(token &amp;&amp; { Authorization: `Bearer ${token}` }),&#10;    }&#10;  }&#10;&#10;  private static async handleResponse&lt;T&gt;(response: Response): Promise&lt;T&gt; {&#10;    if (!response.ok) {&#10;      const errorData = await response.json().catch(() =&gt; ({ message: response.statusText }))&#10;&#10;      // Backend ModelState hatalarn handle et&#10;      if (errorData.errors) {&#10;        const errorMessages = Object.entries(errorData.errors)&#10;          .map(([field, messages]: [string, any]) =&gt; {&#10;            const msgArray = Array.isArray(messages) ? messages : [messages]&#10;            return `${field}: ${msgArray.join(&quot;, &quot;)}`&#10;          })&#10;          .join(&quot;\n&quot;)&#10;        throw new Error(errorMessages)&#10;      }&#10;&#10;      throw new Error(errorData.message || errorData.Message || `API Error: ${response.statusText}`)&#10;    }&#10;&#10;    // 204 No Content durumu iin bo obje dndr&#10;    if (response.status === 204) {&#10;      return {} as T&#10;    }&#10;&#10;    return response.json()&#10;  }&#10;&#10;  static async get&lt;T&gt;(endpoint: string): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;GET&quot;,&#10;      headers: this.getHeaders(),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async post&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;POST&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async put&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;PUT&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async patch&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;PATCH&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async delete&lt;T&gt;(endpoint: string): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;DELETE&quot;,&#10;      headers: this.getHeaders(),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;}&#10;&#10;// Restaurant API&#10;export const restaurantApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Restaurant&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Restaurant/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Restaurant&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Restaurant/${id}`, data),&#10;  delete: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Restaurant/${id}`),&#10;}&#10;&#10;// Menu API&#10;export const menuApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Menu/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Menu/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Menu&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Menu/${id}`, data),&#10;  delete: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Menu/${id}`),&#10;}&#10;&#10;// Order API&#10;export const orderApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Order&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Order/${id}`),&#10;  getByCustomer: (customerId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Order/customer/${customerId}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Order&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Order/${id}`, data),&#10;  updateStatus: (id: string, status: string) =&gt; ApiClient.patch&lt;any&gt;(`/Order/${id}/status`, { status }),&#10;}&#10;&#10;// Reservation API&#10;export const reservationApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Reservation&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Reservation/${id}`),&#10;  getByCustomer: (customerId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Reservation/customer/${customerId}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Reservation&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Reservation/${id}`, data),&#10;  cancel: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Reservation/${id}`),&#10;}&#10;&#10;// Employee API&#10;export const employeeApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Restaurant/${restaurantId}/employees`),&#10;  create: (restaurantId: string, data: any) =&gt; ApiClient.post&lt;any&gt;(`/Restaurant/${restaurantId}/employees`, data),&#10;  update: (restaurantId: string, employeeId: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Restaurant/${restaurantId}/employees/${employeeId}`, data),&#10;  delete: (restaurantId: string, employeeId: string) =&gt; ApiClient.delete&lt;any&gt;(`/Restaurant/${restaurantId}/employees/${employeeId}`),&#10;}&#10;&#10;// Job Application API&#10;export const jobApplicationApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/JobApplication/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/JobApplication/${id}`),&#10;  accept: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/JobApplication/${id}/accept`, {}),&#10;  reject: (id: string, reason?: string) =&gt; ApiClient.patch&lt;any&gt;(`/JobApplication/${id}/reject`, { reason }),&#10;}&#10;&#10;// Review API&#10;export const reviewApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Review/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Review/${id}`),&#10;  approve: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/approve`, {}),&#10;  reject: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/reject`, {}),&#10;  respond: (id: string, response: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/respond`, { response }),&#10;}&#10;&#10;// Table API&#10;export const tableApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Table/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Table/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Table&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Table/${id}`, data),&#10;  delete: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Table/${id}`),&#10;}&#10;&#10;// Generic API client export for direct usage&#10;export const api = ApiClient&#10;" />
              <option name="updatedContent" value="import { AuthService } from &quot;./auth&quot;&#10;&#10;const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || &quot;http://localhost:5000/api&quot;&#10;&#10;export class ApiClient {&#10;  private static getHeaders(): HeadersInit {&#10;    const token = AuthService.getToken()&#10;    return {&#10;      &quot;Content-Type&quot;: &quot;application/json&quot;,&#10;      ...(token &amp;&amp; { Authorization: `Bearer ${token}` }),&#10;    }&#10;  }&#10;&#10;  private static async handleResponse&lt;T&gt;(response: Response): Promise&lt;T&gt; {&#10;    if (!response.ok) {&#10;      const errorData = await response.json().catch(() =&gt; ({ message: response.statusText }))&#10;&#10;      // Backend ModelState hatalarn handle et&#10;      if (errorData.errors) {&#10;        const errorMessages = Object.entries(errorData.errors)&#10;          .map(([field, messages]: [string, any]) =&gt; {&#10;            const msgArray = Array.isArray(messages) ? messages : [messages]&#10;            return `${field}: ${msgArray.join(&quot;, &quot;)}`&#10;          })&#10;          .join(&quot;\n&quot;)&#10;        throw new Error(errorMessages)&#10;      }&#10;&#10;      throw new Error(errorData.message || errorData.Message || `API Error: ${response.statusText}`)&#10;    }&#10;&#10;    // 204 No Content durumu iin bo obje dndr&#10;    if (response.status === 204) {&#10;      return {} as T&#10;    }&#10;&#10;    return response.json()&#10;  }&#10;&#10;  static async get&lt;T&gt;(endpoint: string): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;GET&quot;,&#10;      headers: this.getHeaders(),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async post&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;POST&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async put&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;PUT&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async patch&lt;T&gt;(endpoint: string, data: unknown): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;PATCH&quot;,&#10;      headers: this.getHeaders(),&#10;      body: JSON.stringify(data),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;&#10;  static async delete&lt;T&gt;(endpoint: string): Promise&lt;T&gt; {&#10;    const response = await fetch(`${API_BASE_URL}${endpoint}`, {&#10;      method: &quot;DELETE&quot;,&#10;      headers: this.getHeaders(),&#10;    })&#10;&#10;    return this.handleResponse&lt;T&gt;(response)&#10;  }&#10;}&#10;&#10;// Restaurant API&#10;export const restaurantApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Restaurant&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Restaurant/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Restaurant&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Restaurant/${id}`, data),&#10;  delete: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Restaurant/${id}`),&#10;}&#10;&#10;// Menu API&#10;export const menuApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Menu/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Menu/${id}`),&#10;}&#10;&#10;// Order API&#10;export const orderApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Order&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Order/${id}`),&#10;  getByCustomer: (customerId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Order/customer/${customerId}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Order&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Order/${id}`, data),&#10;  updateStatus: (id: string, status: string) =&gt; ApiClient.patch&lt;any&gt;(`/Order/${id}/status`, { status }),&#10;}&#10;&#10;// Reservation API&#10;export const reservationApi = {&#10;  getAll: () =&gt; ApiClient.get&lt;any[]&gt;(&quot;/Reservation&quot;),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Reservation/${id}`),&#10;  getByCustomer: (customerId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Reservation/customer/${customerId}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Reservation&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Reservation/${id}`, data),&#10;  cancel: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Reservation/${id}`),&#10;}&#10;&#10;// Employee API&#10;export const employeeApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Restaurant/${restaurantId}/employees`),&#10;  create: (restaurantId: string, data: any) =&gt; ApiClient.post&lt;any&gt;(`/Restaurant/${restaurantId}/employees`, data),&#10;  update: (restaurantId: string, employeeId: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Restaurant/${restaurantId}/employees/${employeeId}`, data),&#10;  delete: (restaurantId: string, employeeId: string) =&gt; ApiClient.delete&lt;any&gt;(`/Restaurant/${restaurantId}/employees/${employeeId}`),&#10;}&#10;&#10;// Job Application API&#10;export const jobApplicationApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/JobApplication/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/JobApplication/${id}`),&#10;  accept: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/JobApplication/${id}/accept`, {}),&#10;  reject: (id: string, reason?: string) =&gt; ApiClient.patch&lt;any&gt;(`/JobApplication/${id}/reject`, { reason }),&#10;}&#10;&#10;// Review API&#10;export const reviewApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Review/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Review/${id}`),&#10;  approve: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/approve`, {}),&#10;  reject: (id: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/reject`, {}),&#10;  respond: (id: string, response: string) =&gt; ApiClient.patch&lt;any&gt;(`/Review/${id}/respond`, { response }),&#10;}&#10;&#10;// Table API&#10;export const tableApi = {&#10;  getByRestaurant: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Table/restaurant/${restaurantId}`),&#10;  getById: (id: string) =&gt; ApiClient.get&lt;any&gt;(`/Table/${id}`),&#10;  create: (data: any) =&gt; ApiClient.post&lt;any&gt;(&quot;/Table&quot;, data),&#10;  update: (id: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Table/${id}`, data),&#10;  delete: (id: string) =&gt; ApiClient.delete&lt;any&gt;(`/Table/${id}`),&#10;}&#10;&#10;// Loyalty API&#10;export const loyaltyApi = {&#10;  // Admin endpoints&#10;  admin: {&#10;    generateCode: (data: { pointValue: number; description?: string; maxUses?: number; expiryDate?: string; restaurantId?: string }) =&gt;&#10;      ApiClient.post&lt;any&gt;('/Loyalty/admin/codes', data),&#10;    getAllCodes: () =&gt; ApiClient.get&lt;any[]&gt;('/Loyalty/admin/codes'),&#10;    getCodeById: (codeId: string) =&gt; ApiClient.get&lt;any&gt;(`/Loyalty/admin/codes/${codeId}`),&#10;    deactivateCode: (codeId: string) =&gt; ApiClient.patch&lt;any&gt;(`/Loyalty/admin/codes/${codeId}/deactivate`, {}),&#10;  },&#10;  // Customer endpoints&#10;  customer: {&#10;    redeemCode: (code: string) =&gt; ApiClient.post&lt;any&gt;('/Loyalty/customer/redeem-code', { code }),&#10;    getBalance: () =&gt; ApiClient.get&lt;any[]&gt;('/Loyalty/customer/balance'),&#10;    getHistory: (restaurantId?: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Loyalty/customer/history${restaurantId ? `?restaurantId=${restaurantId}` : ''}`),&#10;    redeemReward: (rewardId: string) =&gt; ApiClient.post&lt;any&gt;('/Loyalty/customer/redeem-reward', { rewardId }),&#10;    getRedemptions: () =&gt; ApiClient.get&lt;any[]&gt;('/Loyalty/customer/redemptions'),&#10;    getRedemptionById: (redemptionId: string) =&gt; ApiClient.get&lt;any&gt;(`/Loyalty/customer/redemptions/${redemptionId}`),&#10;  },&#10;  // Owner endpoints&#10;  owner: {&#10;    createReward: (data: any) =&gt; ApiClient.post&lt;any&gt;('/Loyalty/owner/rewards', data),&#10;    updateReward: (rewardId: string, data: any) =&gt; ApiClient.put&lt;any&gt;(`/Loyalty/owner/rewards/${rewardId}`, data),&#10;    deleteReward: (rewardId: string) =&gt; ApiClient.delete&lt;any&gt;(`/Loyalty/owner/rewards/${rewardId}`),&#10;  },&#10;  // Public endpoints&#10;  getRestaurantRewards: (restaurantId: string) =&gt; ApiClient.get&lt;any[]&gt;(`/Loyalty/restaurants/${restaurantId}/rewards`),&#10;  getRewardById: (rewardId: string) =&gt; ApiClient.get&lt;any&gt;(`/Loyalty/rewards/${rewardId}`),&#10;}&#10;&#10;// Generic API client export for direct usage&#10;export const api = ApiClient" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Loyalty/LoyaltyPointDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Loyalty/LoyaltyPointDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Application.Common.DTOs.Loyalty;&#10;&#10;public class LoyaltyPointDto&#10;{&#10;    public string Id { get; set; } = string.Empty;&#10;    public string CustomerId { get; set; } = string.Empty;&#10;    public string RestaurantId { get; set; } = string.Empty;&#10;    public string RestaurantName { get; set; } = string.Empty;&#10;    public int Points { get; set; }&#10;    public string? Description { get; set; }&#10;    public string Type { get; set; } = string.Empty;&#10;    public DateTime EarnedAt { get; set; }&#10;    public DateTime? ExpiryDate { get; set; }&#10;    public bool IsRedeemed { get; set; }&#10;}&#10;&#10;public class CustomerLoyaltyBalanceDto&#10;{&#10;    public string CustomerId { get; set; } = string.Empty;&#10;    public string RestaurantId { get; set; } = string.Empty;&#10;    public string RestaurantName { get; set; } = string.Empty;&#10;    public int TotalPoints { get; set; }&#10;    public int AvailablePoints { get; set; }&#10;    public int RedeemedPoints { get; set; }&#10;    public List&lt;LoyaltyPointDto&gt; RecentTransactions { get; set; } = new();&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Loyalty/RewardDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Loyalty/RewardDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Application.Common.DTOs.Loyalty;&#10;&#10;public class RewardDto&#10;{&#10;    public string Id { get; set; } = string.Empty;&#10;    public string RestaurantId { get; set; } = string.Empty;&#10;    public string RestaurantName { get; set; } = string.Empty;&#10;    public string Name { get; set; } = string.Empty;&#10;    public string Description { get; set; } = string.Empty;&#10;    public int PointsRequired { get; set; }&#10;    public decimal? DiscountAmount { get; set; }&#10;    public int? DiscountPercentage { get; set; }&#10;    public string? ImageUrl { get; set; }&#10;    public bool IsActive { get; set; }&#10;    public DateTime? StartDate { get; set; }&#10;    public DateTime? EndDate { get; set; }&#10;    public int? MaxRedemptions { get; set; }&#10;    public int CurrentRedemptions { get; set; }&#10;    public bool CanRedeem { get; set; }&#10;}&#10;&#10;public class CreateRewardDto&#10;{&#10;    public string RestaurantId { get; set; } = string.Empty;&#10;    public string Name { get; set; } = string.Empty;&#10;    public string Description { get; set; } = string.Empty;&#10;    public int PointsRequired { get; set; }&#10;    public decimal? DiscountAmount { get; set; }&#10;    public int? DiscountPercentage { get; set; }&#10;    public string? ImageUrl { get; set; }&#10;    public DateTime? StartDate { get; set; }&#10;    public DateTime? EndDate { get; set; }&#10;    public int? MaxRedemptions { get; set; }&#10;}&#10;&#10;public class UpdateRewardDto&#10;{&#10;    public string Name { get; set; } = string.Empty;&#10;    public string Description { get; set; } = string.Empty;&#10;    public int PointsRequired { get; set; }&#10;    public decimal? DiscountAmount { get; set; }&#10;    public int? DiscountPercentage { get; set; }&#10;    public string? ImageUrl { get; set; }&#10;    public bool IsActive { get; set; }&#10;    public DateTime? StartDate { get; set; }&#10;    public DateTime? EndDate { get; set; }&#10;    public int? MaxRedemptions { get; set; }&#10;}&#10;&#10;public class RedeemRewardDto&#10;{&#10;    public string RewardId { get; set; } = string.Empty;&#10;}&#10;&#10;public class RewardRedemptionDto&#10;{&#10;    public string Id { get; set; } = string.Empty;&#10;    public string RewardName { get; set; } = string.Empty;&#10;    public string RestaurantName { get; set; } = string.Empty;&#10;    public int PointsSpent { get; set; }&#10;    public string? CouponCode { get; set; }&#10;    public DateTime RedeemedAt { get; set; }&#10;    public bool IsUsed { get; set; }&#10;    public DateTime? UsedAt { get; set; }&#10;    public DateTime? ExpiryDate { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/IAppDbContext.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/IAppDbContext.cs" />
              <option name="originalContent" value="using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface IAppDbContext&#10;{&#10;    public new DbSet&lt;AppUser&gt; Users { get; set; }&#10;    public DbSet&lt;Restaurant&gt; Restaurants { get; set; }&#10;    public DbSet&lt;Menu&gt; Menus { get; set; }&#10;    public DbSet&lt;MenuItem&gt; MenuItems { get; set; }&#10;    public DbSet&lt;Table&gt; Tables { get; set; }&#10;    public DbSet&lt;Reservation&gt; Reservations { get; set; }&#10;    public DbSet&lt;Order&gt; Orders { get; set; }&#10;    public DbSet&lt;OrderItem&gt; OrderItems { get; set; }&#10;    public DbSet&lt;JobPosting&gt; JobPostings { get; set; }&#10;    public DbSet&lt;JobApplication&gt; JobApplications { get; set; }&#10;    public DbSet&lt;OwnershipApplication&gt; OwnershipApplications { get; set; }&#10;    public DbSet&lt;Review&gt; Reviews { get; set; }&#10;    public DbSet&lt;FavoriteRestaurant&gt; FavoriteRestaurants { get; set; }&#10;    public DbSet&lt;LoyaltyPoint&gt; LoyaltyPoints { get; set; }&#10;    public DbSet&lt;Reward&gt; Rewards { get; set; }&#10;    public DbSet&lt;RewardRedemption&gt; RewardRedemptions { get; set; }&#10;    &#10;    Task&lt;int&gt; SaveChangesAsync(CancellationToken cancellationToken = default);&#10;}" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface IAppDbContext&#10;{&#10;    public new DbSet&lt;AppUser&gt; Users { get; set; }&#10;    public DbSet&lt;Restaurant&gt; Restaurants { get; set; }&#10;    public DbSet&lt;Menu&gt; Menus { get; set; }&#10;    public DbSet&lt;MenuItem&gt; MenuItems { get; set; }&#10;    public DbSet&lt;Table&gt; Tables { get; set; }&#10;    public DbSet&lt;Reservation&gt; Reservations { get; set; }&#10;    public DbSet&lt;Order&gt; Orders { get; set; }&#10;    public DbSet&lt;OrderItem&gt; OrderItems { get; set; }&#10;    public DbSet&lt;JobPosting&gt; JobPostings { get; set; }&#10;    public DbSet&lt;JobApplication&gt; JobApplications { get; set; }&#10;    public DbSet&lt;OwnershipApplication&gt; OwnershipApplications { get; set; }&#10;    public DbSet&lt;Review&gt; Reviews { get; set; }&#10;    public DbSet&lt;FavoriteRestaurant&gt; FavoriteRestaurants { get; set; }&#10;    public DbSet&lt;LoyaltyPoint&gt; LoyaltyPoints { get; set; }&#10;    public DbSet&lt;Reward&gt; Rewards { get; set; }&#10;    public DbSet&lt;RewardRedemption&gt; RewardRedemptions { get; set; }&#10;    public DbSet&lt;LoyaltyCode&gt; LoyaltyCodes { get; set; }&#10;    &#10;    Task&lt;int&gt; SaveChangesAsync(CancellationToken cancellationToken = default);&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/ILoyaltyService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/ILoyaltyService.cs" />
              <option name="updatedContent" value="using RestaurantManagment.Application.Common.DTOs.Loyalty;&#10;&#10;namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface ILoyaltyService&#10;{&#10;    // Admin - Loyalty Code Management&#10;    Task&lt;LoyaltyCodeResponseDto&gt; GenerateLoyaltyCodeAsync(CreateLoyaltyCodeDto dto, string adminId);&#10;    Task&lt;List&lt;LoyaltyCodeDto&gt;&gt; GetAllLoyaltyCodesAsync();&#10;    Task&lt;LoyaltyCodeDto?&gt; GetLoyaltyCodeByIdAsync(string codeId);&#10;    Task&lt;bool&gt; DeactivateLoyaltyCodeAsync(string codeId);&#10;&#10;    // Customer - Redeem Loyalty Code&#10;    Task&lt;LoyaltyPointDto&gt; RedeemLoyaltyCodeAsync(string code, string customerId);&#10;    Task&lt;List&lt;CustomerLoyaltyBalanceDto&gt;&gt; GetCustomerLoyaltyBalanceAsync(string customerId);&#10;    Task&lt;List&lt;LoyaltyPointDto&gt;&gt; GetCustomerPointHistoryAsync(string customerId, string? restaurantId = null);&#10;&#10;    // Owner - Reward Management&#10;    Task&lt;RewardDto&gt; CreateRewardAsync(CreateRewardDto dto, string ownerId);&#10;    Task&lt;RewardDto&gt; UpdateRewardAsync(string rewardId, UpdateRewardDto dto, string ownerId);&#10;    Task&lt;bool&gt; DeleteRewardAsync(string rewardId, string ownerId);&#10;    Task&lt;List&lt;RewardDto&gt;&gt; GetRestaurantRewardsAsync(string restaurantId, string? customerId = null);&#10;    Task&lt;RewardDto?&gt; GetRewardByIdAsync(string rewardId, string? customerId = null);&#10;&#10;    // Customer - Reward Redemption&#10;    Task&lt;RewardRedemptionDto&gt; RedeemRewardAsync(string rewardId, string customerId);&#10;    Task&lt;List&lt;RewardRedemptionDto&gt;&gt; GetCustomerRedemptionsAsync(string customerId);&#10;    Task&lt;RewardRedemptionDto?&gt; GetRedemptionByIdAsync(string redemptionId, string customerId);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Domain.Models.Common;&#10;&#10;public class TopSellingItemDto&#10;{&#10;    public string MenuItemId { get; set; } = string.Empty;&#10;    public string MenuItemName { get; set; } = string.Empty;&#10;    public int QuantitySold { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/LoyaltyCode.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/LoyaltyCode.cs" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="using System.ComponentModel.DataAnnotations;&#10;using RestaurantManagment.Domain.Models.Common;&#10;&#10;namespace RestaurantManagment.Domain.Models;&#10;&#10;public class LoyaltyCode : BaseEntity&#10;{&#10;    [Required]&#10;    [MaxLength(50)]&#10;    public string Code { get; set; } = string.Empty;&#10;&#10;    [Required]&#10;    public int PointValue { get; set; }&#10;&#10;    [MaxLength(500)]&#10;    public string? Description { get; set; }&#10;&#10;    [Required]&#10;    public string CreatedByAdminId { get; set; } = string.Empty;&#10;    public AppUser CreatedByAdmin { get; set; } = null!;&#10;&#10;    public bool IsActive { get; set; } = true;&#10;&#10;    public int? MaxUses { get; set; }&#10;&#10;    public int CurrentUses { get; set; } = 0;&#10;&#10;    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;&#10;&#10;    public DateTime? ExpiryDate { get; set; }&#10;&#10;    public bool IsUsed { get; set; } = false;&#10;&#10;    public string? UsedByCustomerId { get; set; }&#10;    public AppUser? UsedByCustomer { get; set; }&#10;&#10;    public DateTime? UsedAt { get; set; }&#10;&#10;    public string? RestaurantId { get; set; }&#10;    public Restaurant? Restaurant { get; set; }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs" />
              <option name="originalContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        services.AddScoped&lt;ICustomerService, CustomerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.Extensions.DependencyInjection;&#13;&#10;using RestaurantManagment.Application.Common.Interfaces;&#13;&#10;using RestaurantManagment.Infrastructure.Services;&#13;&#10;&#13;&#10;namespace RestaurantManagment.Infrastructure;&#13;&#10;&#13;&#10;public static class DependencyInjection&#13;&#10;{&#13;&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#13;&#10;    {&#13;&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#13;&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#13;&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#13;&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#13;&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#13;&#10;        services.AddScoped&lt;ICustomerService, CustomerService&gt;();&#13;&#10;        services.AddScoped&lt;ILoyaltyService, LoyaltyService&gt;();&#13;&#10;        &#13;&#10;        return services;&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.Metadata.Builders;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Persistance.Configurations;&#10;&#10;public class JobPostingConfiguration : IEntityTypeConfiguration&lt;JobPosting&gt;&#10;{&#10;    public void Configure(EntityTypeBuilder&lt;JobPosting&gt; builder)&#10;    {&#10;        builder.HasKey(j =&gt; j.Id);&#10;&#10;        builder.Property(j =&gt; j.Title)&#10;            .IsRequired()&#10;            .HasMaxLength(200);&#10;&#10;        builder.Property(j =&gt; j.Description)&#10;            .IsRequired()&#10;            .HasMaxLength(2000);&#10;&#10;        builder.Property(j =&gt; j.Requirements)&#10;            .IsRequired()&#10;            .HasMaxLength(1000);&#10;&#10;        builder.Property(j =&gt; j.Position)&#10;            .IsRequired()&#10;            .HasMaxLength(100);&#10;&#10;        builder.Property(j =&gt; j.EmploymentType)&#10;            .IsRequired()&#10;            .HasMaxLength(50);&#10;&#10;        // Relationships&#10;        builder.HasOne(j =&gt; j.Restaurant)&#10;            .WithMany(r =&gt; r.JobPostings)&#10;            .HasForeignKey(j =&gt; j.RestaurantId)&#10;            .OnDelete(DeleteBehavior.Cascade);&#10;&#10;        // Indexes&#10;        builder.HasIndex(j =&gt; j.RestaurantId);&#10;        builder.HasIndex(j =&gt; j.IsActive);&#10;&#10;        // Soft Delete Query Filter&#10;        builder.HasQueryFilter(j =&gt; !j.IsDeleted);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Data/AppDbContext.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Data/AppDbContext.cs" />
              <option name="originalContent" value="using Microsoft.AspNetCore.Identity.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.ChangeTracking;&#10;using Microsoft.EntityFrameworkCore.Design;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Domain.Models.Common;&#10;&#10;namespace RestaurantManagment.Persistance.Data;&#10;&#10;public class AppDbContext(DbContextOptions&lt;AppDbContext&gt; options) : IdentityDbContext&lt;AppUser&gt;(options), IAppDbContext&#10;{&#10;    public new DbSet&lt;AppUser&gt; Users { get; set; }&#10;    public DbSet&lt;Restaurant&gt; Restaurants { get; set; }&#10;    public DbSet&lt;Menu&gt; Menus { get; set; }&#10;    public DbSet&lt;MenuItem&gt; MenuItems { get; set; }&#10;    public DbSet&lt;Table&gt; Tables { get; set; }&#10;    public DbSet&lt;Reservation&gt; Reservations { get; set; }&#10;    public DbSet&lt;Order&gt; Orders { get; set; }&#10;    public DbSet&lt;OrderItem&gt; OrderItems { get; set; }&#10;    public DbSet&lt;OwnershipApplication&gt; OwnershipApplications { get; set; }&#10;    public DbSet&lt;JobPosting&gt; JobPostings { get; set; }&#10;    public DbSet&lt;JobApplication&gt; JobApplications { get; set; }&#10;    public DbSet&lt;Review&gt; Reviews { get; set; }&#10;    public DbSet&lt;FavoriteRestaurant&gt; FavoriteRestaurants { get; set; }&#10;    public DbSet&lt;LoyaltyPoint&gt; LoyaltyPoints { get; set; }&#10;    public DbSet&lt;Reward&gt; Rewards { get; set; }&#10;    public DbSet&lt;RewardRedemption&gt; RewardRedemptions { get; set; }&#10;&#10;    protected override void OnModelCreating(ModelBuilder modelBuilder)&#10;    {&#10;        base.OnModelCreating(modelBuilder);&#10;&#10;     &#10;        modelBuilder.ApplyConfigurationsFromAssembly(typeof(AppDbContext).Assembly);&#10;        &#10;      &#10;        modelBuilder.Entity&lt;Restaurant&gt;()&#10;            .Property(r =&gt; r.Rate)&#10;            .HasPrecision(3, 2);&#10;            &#10;        modelBuilder.Entity&lt;JobPosting&gt;()&#10;            .Property(j =&gt; j.Salary)&#10;            .HasPrecision(18, 2);&#10;    }&#10;&#10;    public override int SaveChanges()&#10;    {&#10;        HandleAuditAndSoftDelete();&#10;        return base.SaveChanges();&#10;    }&#10;    public override async Task&lt;int&gt; SaveChangesAsync(CancellationToken cancellationToken = default)&#10;    {&#10;        HandleAuditAndSoftDelete();&#10;        return await base.SaveChangesAsync(cancellationToken);&#10;    }&#10;&#10;    private void HandleAuditAndSoftDelete()&#10;    {&#10;        foreach (var entry in ChangeTracker.Entries())&#10;        {&#10;            if (entry.Entity is IAuditableEntity baseEntity)&#10;            {&#10;                switch (entry.State)&#10;                {&#10;                    case EntityState.Added:&#10;                        baseEntity.CreatedAt = DateTime.UtcNow;&#10;                        baseEntity.UpdatedAt = null;&#10;                        break;&#10;                    case EntityState.Modified:&#10;                        baseEntity.UpdatedAt = DateTime.UtcNow;&#10;                        break;&#10;                    case EntityState.Deleted:&#10;                   &#10;                        entry.State = EntityState.Modified;&#10;                        baseEntity.IsDeleted = true;&#10;                        baseEntity.DeletedAt = DateTime.UtcNow;&#10;                        break;&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;public class AppDbContextFactory : IDesignTimeDbContextFactory&lt;AppDbContext&gt;&#10;{&#10;    public AppDbContext CreateDbContext(string[] args)&#10;    {&#10;        var optionsBuilder = new DbContextOptionsBuilder&lt;AppDbContext&gt;();&#10;        optionsBuilder.UseSqlServer(&quot;Server=localhost;Database=RestaurantManagment;User Id=sa;Password=Hebib123.;TrustServerCertificate=True;&quot;);&#10;        return new AppDbContext(optionsBuilder.Options);&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Identity.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.ChangeTracking;&#10;using Microsoft.EntityFrameworkCore.Design;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Domain.Models.Common;&#10;&#10;namespace RestaurantManagment.Persistance.Data;&#10;&#10;public class AppDbContext(DbContextOptions&lt;AppDbContext&gt; options) : IdentityDbContext&lt;AppUser&gt;(options), IAppDbContext&#10;{&#10;    public new DbSet&lt;AppUser&gt; Users { get; set; }&#10;    public DbSet&lt;Restaurant&gt; Restaurants { get; set; }&#10;    public DbSet&lt;Menu&gt; Menus { get; set; }&#10;    public DbSet&lt;MenuItem&gt; MenuItems { get; set; }&#10;    public DbSet&lt;Table&gt; Tables { get; set; }&#10;    public DbSet&lt;Reservation&gt; Reservations { get; set; }&#10;    public DbSet&lt;Order&gt; Orders { get; set; }&#10;    public DbSet&lt;OrderItem&gt; OrderItems { get; set; }&#10;    public DbSet&lt;OwnershipApplication&gt; OwnershipApplications { get; set; }&#10;    public DbSet&lt;JobPosting&gt; JobPostings { get; set; }&#10;    public DbSet&lt;JobApplication&gt; JobApplications { get; set; }&#10;    public DbSet&lt;Review&gt; Reviews { get; set; }&#10;    public DbSet&lt;FavoriteRestaurant&gt; FavoriteRestaurants { get; set; }&#10;    public DbSet&lt;LoyaltyPoint&gt; LoyaltyPoints { get; set; }&#10;    public DbSet&lt;Reward&gt; Rewards { get; set; }&#10;    public DbSet&lt;RewardRedemption&gt; RewardRedemptions { get; set; }&#10;    public DbSet&lt;LoyaltyCode&gt; LoyaltyCodes { get; set; }&#10;&#10;    protected override void OnModelCreating(ModelBuilder modelBuilder)&#10;    {&#10;        base.OnModelCreating(modelBuilder);&#10;&#10;     &#10;        modelBuilder.ApplyConfigurationsFromAssembly(typeof(AppDbContext).Assembly);&#10;        &#10;      &#10;        modelBuilder.Entity&lt;Restaurant&gt;()&#10;            .Property(r =&gt; r.Rate)&#10;            .HasPrecision(3, 2);&#10;            &#10;        modelBuilder.Entity&lt;JobPosting&gt;()&#10;            .Property(j =&gt; j.Salary)&#10;            .HasPrecision(18, 2);&#10;    }&#10;&#10;    public override int SaveChanges()&#10;    {&#10;        HandleAuditAndSoftDelete();&#10;        return base.SaveChanges();&#10;    }&#10;    public override async Task&lt;int&gt; SaveChangesAsync(CancellationToken cancellationToken = default)&#10;    {&#10;        HandleAuditAndSoftDelete();&#10;        return await base.SaveChangesAsync(cancellationToken);&#10;    }&#10;&#10;    private void HandleAuditAndSoftDelete()&#10;    {&#10;        foreach (var entry in ChangeTracker.Entries())&#10;        {&#10;            if (entry.Entity is IAuditableEntity baseEntity)&#10;            {&#10;                switch (entry.State)&#10;                {&#10;                    case EntityState.Added:&#10;                        baseEntity.CreatedAt = DateTime.UtcNow;&#10;                        baseEntity.UpdatedAt = null;&#10;                        break;&#10;                    case EntityState.Modified:&#10;                        baseEntity.UpdatedAt = DateTime.UtcNow;&#10;                        break;&#10;                    case EntityState.Deleted:&#10;                   &#10;                        entry.State = EntityState.Modified;&#10;                        baseEntity.IsDeleted = true;&#10;                        baseEntity.DeletedAt = DateTime.UtcNow;&#10;                        break;&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;public class AppDbContextFactory : IDesignTimeDbContextFactory&lt;AppDbContext&gt;&#10;{&#10;    public AppDbContext CreateDbContext(string[] args)&#10;    {&#10;        var optionsBuilder = new DbContextOptionsBuilder&lt;AppDbContext&gt;();&#10;        optionsBuilder.UseSqlServer(&quot;Server=localhost;Database=RestaurantManagment;User Id=sa;Password=Hebib123.;TrustServerCertificate=True;&quot;);&#10;        return new AppDbContext(optionsBuilder.Options);&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/LoyaltyController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/LoyaltyController.cs" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.DTOs.Loyalty;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using System.Security.Claims;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers;&#10;&#10;[Route(&quot;api/[controller]&quot;)]&#10;[ApiController]&#10;public class LoyaltyController : ControllerBase&#10;{&#10;    private readonly ILoyaltyService _loyaltyService;&#10;&#10;    public LoyaltyController(ILoyaltyService loyaltyService)&#10;    {&#10;        _loyaltyService = loyaltyService;&#10;    }&#10;&#10;    // ADMIN ENDPOINTS - Generate Loyalty Codes&#10;    [HttpPost(&quot;admin/codes&quot;)]&#10;    [Authorize(Roles = &quot;Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; GenerateLoyaltyCode([FromBody] CreateLoyaltyCodeDto dto)&#10;    {&#10;        try&#10;        {&#10;            var adminId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(adminId))&#10;                return Unauthorized();&#10;&#10;            var code = await _loyaltyService.GenerateLoyaltyCodeAsync(dto, adminId);&#10;            return Ok(code);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;admin/codes&quot;)]&#10;    [Authorize(Roles = &quot;Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetAllLoyaltyCodes()&#10;    {&#10;        try&#10;        {&#10;            var codes = await _loyaltyService.GetAllLoyaltyCodesAsync();&#10;            return Ok(codes);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;admin/codes/{codeId}&quot;)]&#10;    [Authorize(Roles = &quot;Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetLoyaltyCodeById(string codeId)&#10;    {&#10;        try&#10;        {&#10;            var code = await _loyaltyService.GetLoyaltyCodeByIdAsync(codeId);&#10;            if (code == null)&#10;                return NotFound(new { message = &quot;Code not found&quot; });&#10;&#10;            return Ok(code);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpPatch(&quot;admin/codes/{codeId}/deactivate&quot;)]&#10;    [Authorize(Roles = &quot;Admin&quot;)]&#10;    public async Task&lt;IActionResult&gt; DeactivateLoyaltyCode(string codeId)&#10;    {&#10;        try&#10;        {&#10;            var result = await _loyaltyService.DeactivateLoyaltyCodeAsync(codeId);&#10;            if (!result)&#10;                return NotFound(new { message = &quot;Code not found&quot; });&#10;&#10;            return Ok(new { message = &quot;Code deactivated successfully&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    // CUSTOMER ENDPOINTS - Redeem Codes and Points&#10;    [HttpPost(&quot;customer/redeem-code&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; RedeemLoyaltyCode([FromBody] RedeemLoyaltyCodeDto dto)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var point = await _loyaltyService.RedeemLoyaltyCodeAsync(dto.Code, customerId);&#10;            return Ok(point);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;customer/balance&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetCustomerLoyaltyBalance()&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var balance = await _loyaltyService.GetCustomerLoyaltyBalanceAsync(customerId);&#10;            return Ok(balance);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;customer/history&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetCustomerPointHistory([FromQuery] string? restaurantId = null)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var history = await _loyaltyService.GetCustomerPointHistoryAsync(customerId, restaurantId);&#10;            return Ok(history);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    // OWNER ENDPOINTS - Reward Management&#10;    [HttpPost(&quot;owner/rewards&quot;)]&#10;    [Authorize(Roles = &quot;RestaurantOwner&quot;)]&#10;    public async Task&lt;IActionResult&gt; CreateReward([FromBody] CreateRewardDto dto)&#10;    {&#10;        try&#10;        {&#10;            var ownerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(ownerId))&#10;                return Unauthorized();&#10;&#10;            var reward = await _loyaltyService.CreateRewardAsync(dto, ownerId);&#10;            return Ok(reward);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpPut(&quot;owner/rewards/{rewardId}&quot;)]&#10;    [Authorize(Roles = &quot;RestaurantOwner&quot;)]&#10;    public async Task&lt;IActionResult&gt; UpdateReward(string rewardId, [FromBody] UpdateRewardDto dto)&#10;    {&#10;        try&#10;        {&#10;            var ownerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(ownerId))&#10;                return Unauthorized();&#10;&#10;            var reward = await _loyaltyService.UpdateRewardAsync(rewardId, dto, ownerId);&#10;            return Ok(reward);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpDelete(&quot;owner/rewards/{rewardId}&quot;)]&#10;    [Authorize(Roles = &quot;RestaurantOwner&quot;)]&#10;    public async Task&lt;IActionResult&gt; DeleteReward(string rewardId)&#10;    {&#10;        try&#10;        {&#10;            var ownerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(ownerId))&#10;                return Unauthorized();&#10;&#10;            var result = await _loyaltyService.DeleteRewardAsync(rewardId, ownerId);&#10;            if (!result)&#10;                return NotFound(new { message = &quot;Reward not found&quot; });&#10;&#10;            return Ok(new { message = &quot;Reward deleted successfully&quot; });&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    // PUBLIC/CUSTOMER ENDPOINTS - View Rewards&#10;    [HttpGet(&quot;restaurants/{restaurantId}/rewards&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetRestaurantRewards(string restaurantId)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            var rewards = await _loyaltyService.GetRestaurantRewardsAsync(restaurantId, customerId);&#10;            return Ok(rewards);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;rewards/{rewardId}&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetRewardById(string rewardId)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            var reward = await _loyaltyService.GetRewardByIdAsync(rewardId, customerId);&#10;            if (reward == null)&#10;                return NotFound(new { message = &quot;Reward not found&quot; });&#10;&#10;            return Ok(reward);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    // CUSTOMER ENDPOINTS - Redeem Rewards&#10;    [HttpPost(&quot;customer/redeem-reward&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; RedeemReward([FromBody] RedeemRewardDto dto)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var redemption = await _loyaltyService.RedeemRewardAsync(dto.RewardId, customerId);&#10;            return Ok(redemption);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return BadRequest(new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;customer/redemptions&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetCustomerRedemptions()&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var redemptions = await _loyaltyService.GetCustomerRedemptionsAsync(customerId);&#10;            return Ok(redemptions);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;&#10;    [HttpGet(&quot;customer/redemptions/{redemptionId}&quot;)]&#10;    [Authorize(Roles = &quot;Customer&quot;)]&#10;    public async Task&lt;IActionResult&gt; GetRedemptionById(string redemptionId)&#10;    {&#10;        try&#10;        {&#10;            var customerId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;&#10;            if (string.IsNullOrEmpty(customerId))&#10;                return Unauthorized();&#10;&#10;            var redemption = await _loyaltyService.GetRedemptionByIdAsync(redemptionId, customerId);&#10;            if (redemption == null)&#10;                return NotFound(new { message = &quot;Redemption not found&quot; });&#10;&#10;            return Ok(redemption);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            return StatusCode(500, new { message = ex.Message });&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.AspNetCore.Identity;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.WebAPI;&#10;&#10;public static class OwnerIdFixer&#10;{&#10;    public static async Task FixRestaurantOwnerIds(IServiceProvider services)&#10;    {&#10;        using var scope = services.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var logger = scope.ServiceProvider.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();&#10;        &#10;        try&#10;        {&#10;            // Owner kullancsn bul&#10;            var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;            if (owner == null)&#10;            {&#10;                logger.LogWarning(&quot;owner@gmail.com kullancs bulunamad!&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;Owner bulundu: {owner.Email} (ID: {owner.Id})&quot;);&#10;            &#10;            // Tm aktif restoranlar bul&#10;            var restaurants = await context.Restaurants&#10;                .Where(r =&gt; !r.IsDeleted)&#10;                .ToListAsync();&#10;            &#10;            if (restaurants.Count == 0)&#10;            {&#10;                logger.LogInformation(&quot;Veritabannda restoran bulunamad.&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;{restaurants.Count} restoran bulundu, owner ID'leri gncelleniyor...&quot;);&#10;            &#10;            // Her restorann owner ID'sini gncelle&#10;            foreach (var restaurant in restaurants)&#10;            {&#10;                restaurant.OwnerId = owner.Id;&#10;                logger.LogInformation($&quot; {restaurant.Name} -&gt; Owner ID gncellendi&quot;);&#10;            }&#10;            &#10;            await context.SaveChangesAsync();&#10;            logger.LogInformation($&quot; {restaurants.Count} restorann owner ID'si baaryla gncellendi!&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            logger.LogError(ex, &quot;Owner ID gncellenirken hata olutu!&quot;);&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>