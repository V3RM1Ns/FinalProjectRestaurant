<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/applications/[id]/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/applications/[id]/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useParams, useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'&#10;import { Badge } from '@/components/ui/badge'&#10;import { Label } from '@/components/ui/label'&#10;import { Textarea } from '@/components/ui/textarea'&#10;import { ArrowLeft, CheckCircle, XCircle, User, Building, MapPin, Phone, Mail, Calendar } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;&#10;interface Application {&#10;  id: string&#10;  userId: string&#10;  businessName: string&#10;  businessDescription: string&#10;  businessAddress: string&#10;  businessPhone: string&#10;  businessEmail: string&#10;  category: string&#10;  additionalNotes?: string&#10;  status: string&#10;  applicationDate: string&#10;  reviewedBy?: string&#10;  reviewedAt?: string&#10;  rejectionReason?: string&#10;  user: {&#10;    firstName: string&#10;    lastName: string&#10;  }&#10;}&#10;&#10;export default function ApplicationDetailPage() {&#10;  const params = useParams()&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [application, setApplication] = useState&lt;Application | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [actionLoading, setActionLoading] = useState(false)&#10;  const [rejectDialogOpen, setRejectDialogOpen] = useState(false)&#10;  const [rejectionReason, setRejectionReason] = useState('')&#10;&#10;  useEffect(() =&gt; {&#10;    fetchApplication()&#10;  }, [params.id])&#10;&#10;  const fetchApplication = async () =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;Application&gt;(`/admin/applications/${params.id}`)&#10;      setApplication(data)&#10;    } catch (error: any) {&#10;      console.error('Error fetching application:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load application',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleApprove = async () =&gt; {&#10;    if (!confirm('Are you sure you want to approve this application? This will create a restaurant and grant the user Restaurant Owner role.')) return&#10;&#10;    setActionLoading(true)&#10;    try {&#10;      await api.post(`/admin/applications/${params.id}/approve`, {})&#10;      toast({&#10;        title: 'Success',&#10;        description: 'Application approved successfully',&#10;      })&#10;      router.push('/admin/applications')&#10;    } catch (error: any) {&#10;      console.error('Error approving application:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to approve application',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setActionLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleReject = async () =&gt; {&#10;    if (!rejectionReason.trim()) {&#10;      toast({&#10;        title: 'Error',&#10;        description: 'Please provide a rejection reason',&#10;        variant: 'destructive',&#10;      })&#10;      return&#10;    }&#10;&#10;    setActionLoading(true)&#10;    try {&#10;      await api.post(`/admin/applications/${params.id}/reject`, { reason: rejectionReason })&#10;      toast({&#10;        title: 'Success',&#10;        description: 'Application rejected successfully',&#10;      })&#10;      setRejectDialogOpen(false)&#10;      router.push('/admin/applications')&#10;    } catch (error: any) {&#10;      console.error('Error rejecting application:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to reject application',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setActionLoading(false)&#10;    }&#10;  }&#10;&#10;  const getStatusBadge = (status: string) =&gt; {&#10;    switch (status.toLowerCase()) {&#10;      case 'pending':&#10;        return &lt;Badge variant=&quot;outline&quot; className=&quot;bg-yellow-100&quot;&gt;Pending&lt;/Badge&gt;&#10;      case 'approved':&#10;        return &lt;Badge variant=&quot;default&quot; className=&quot;bg-green-600&quot;&gt;Approved&lt;/Badge&gt;&#10;      case 'rejected':&#10;        return &lt;Badge variant=&quot;destructive&quot;&gt;Rejected&lt;/Badge&gt;&#10;      default:&#10;        return &lt;Badge variant=&quot;outline&quot;&gt;{status}&lt;/Badge&gt;&#10;    }&#10;  }&#10;&#10;  if (loading) {&#10;    return (&#10;      &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;        &lt;div className=&quot;text-center py-8&quot;&gt;Loading application details...&lt;/div&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  if (!application) {&#10;    return (&#10;      &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle&gt;Application Not Found&lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;        &lt;/Card&gt;&#10;      &lt;/div&gt;&#10;    )&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-4xl&quot;&gt;&#10;      &lt;Button&#10;        variant=&quot;ghost&quot;&#10;        onClick={() =&gt; router.push('/admin/applications')}&#10;        className=&quot;mb-4&quot;&#10;      &gt;&#10;        &lt;ArrowLeft className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;        Back to Applications&#10;      &lt;/Button&gt;&#10;&#10;      &lt;div className=&quot;space-y-6&quot;&gt;&#10;        {/* Header Card */}&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;CardTitle className=&quot;text-2xl&quot;&gt;Restaurant Ownership Application&lt;/CardTitle&gt;&#10;                &lt;CardDescription&gt;Application ID: {application.id}&lt;/CardDescription&gt;&#10;              &lt;/div&gt;&#10;              {getStatusBadge(application.status)}&#10;            &lt;/div&gt;&#10;          &lt;/CardHeader&gt;&#10;        &lt;/Card&gt;&#10;&#10;        {/* Applicant Information */}&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;              &lt;User className=&quot;w-5 h-5&quot; /&gt;&#10;              Applicant Information&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-3&quot;&gt;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground&quot;&gt;Name&lt;/Label&gt;&#10;                &lt;p className=&quot;font-medium&quot;&gt;{application.user.firstName} {application.user.lastName}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground&quot;&gt;Application Date&lt;/Label&gt;&#10;                &lt;p className=&quot;font-medium flex items-center gap-1&quot;&gt;&#10;                  &lt;Calendar className=&quot;w-4 h-4&quot; /&gt;&#10;                  {new Date(application.applicationDate).toLocaleDateString()}&#10;                &lt;/p&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;&#10;        {/* Business Information */}&#10;        &lt;Card&gt;&#10;          &lt;CardHeader&gt;&#10;            &lt;CardTitle className=&quot;flex items-center gap-2&quot;&gt;&#10;              &lt;Building className=&quot;w-5 h-5&quot; /&gt;&#10;              Business Information&#10;            &lt;/CardTitle&gt;&#10;          &lt;/CardHeader&gt;&#10;          &lt;CardContent className=&quot;space-y-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;Label className=&quot;text-muted-foreground&quot;&gt;Business Name&lt;/Label&gt;&#10;              &lt;p className=&quot;font-medium text-lg&quot;&gt;{application.businessName}&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;Label className=&quot;text-muted-foreground&quot;&gt;Category&lt;/Label&gt;&#10;              &lt;div className=&quot;mt-1&quot;&gt;&#10;                &lt;Badge variant=&quot;outline&quot;&gt;{application.category}&lt;/Badge&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;Label className=&quot;text-muted-foreground&quot;&gt;Description&lt;/Label&gt;&#10;              &lt;p className=&quot;text-sm&quot;&gt;{application.businessDescription}&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground flex items-center gap-1&quot;&gt;&#10;                  &lt;MapPin className=&quot;w-4 h-4&quot; /&gt;&#10;                  Address&#10;                &lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.businessAddress}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground flex items-center gap-1&quot;&gt;&#10;                  &lt;Phone className=&quot;w-4 h-4&quot; /&gt;&#10;                  Phone&#10;                &lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.businessPhone}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            {application.businessEmail &amp;&amp; (&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground flex items-center gap-1&quot;&gt;&#10;                  &lt;Mail className=&quot;w-4 h-4&quot; /&gt;&#10;                  Email&#10;                &lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.businessEmail}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;            )}&#10;            {application.additionalNotes &amp;&amp; (&#10;              &lt;div&gt;&#10;                &lt;Label className=&quot;text-muted-foreground&quot;&gt;Additional Notes&lt;/Label&gt;&#10;                &lt;p className=&quot;text-sm&quot;&gt;{application.additionalNotes}&lt;/p&gt;&#10;              &lt;/div&gt;&#10;            )}&#10;          &lt;/CardContent&gt;&#10;        &lt;/Card&gt;&#10;&#10;        {/* Review Information */}&#10;        {(application.reviewedAt || application.rejectionReason) &amp;&amp; (&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Review Information&lt;/CardTitle&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent className=&quot;space-y-3&quot;&gt;&#10;              {application.reviewedAt &amp;&amp; (&#10;                &lt;div&gt;&#10;                  &lt;Label className=&quot;text-muted-foreground&quot;&gt;Reviewed At&lt;/Label&gt;&#10;                  &lt;p className=&quot;text-sm&quot;&gt;{new Date(application.reviewedAt).toLocaleString()}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;              {application.rejectionReason &amp;&amp; (&#10;                &lt;div&gt;&#10;                  &lt;Label className=&quot;text-muted-foreground&quot;&gt;Rejection Reason&lt;/Label&gt;&#10;                  &lt;p className=&quot;text-sm&quot;&gt;{application.rejectionReason}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        )}&#10;&#10;        {/* Actions */}&#10;        {application.status.toLowerCase() === 'pending' &amp;&amp; (&#10;          &lt;Card&gt;&#10;            &lt;CardHeader&gt;&#10;              &lt;CardTitle&gt;Actions&lt;/CardTitle&gt;&#10;              &lt;CardDescription&gt;Review and make a decision on this application&lt;/CardDescription&gt;&#10;            &lt;/CardHeader&gt;&#10;            &lt;CardContent&gt;&#10;              &lt;div className=&quot;flex gap-4&quot;&gt;&#10;                &lt;Button&#10;                  onClick={handleApprove}&#10;                  disabled={actionLoading}&#10;                  className=&quot;flex-1&quot;&#10;                &gt;&#10;                  &lt;CheckCircle className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;                  Approve Application&#10;                &lt;/Button&gt;&#10;                &lt;Button&#10;                  variant=&quot;destructive&quot;&#10;                  onClick={() =&gt; setRejectDialogOpen(true)}&#10;                  disabled={actionLoading}&#10;                  className=&quot;flex-1&quot;&#10;                &gt;&#10;                  &lt;XCircle className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;                  Reject Application&#10;                &lt;/Button&gt;&#10;              &lt;/div&gt;&#10;            &lt;/CardContent&gt;&#10;          &lt;/Card&gt;&#10;        )}&#10;      &lt;/div&gt;&#10;&#10;      {/* Reject Dialog */}&#10;      &lt;Dialog open={rejectDialogOpen} onOpenChange={setRejectDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Reject Application&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Please provide a reason for rejecting this application. This will be visible to the applicant.&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          &lt;div className=&quot;py-4&quot;&gt;&#10;            &lt;Textarea&#10;              placeholder=&quot;Enter rejection reason...&quot;&#10;              value={rejectionReason}&#10;              onChange={(e) =&gt; setRejectionReason(e.target.value)}&#10;              rows={4}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button&#10;              variant=&quot;outline&quot;&#10;              onClick={() =&gt; setRejectDialogOpen(false)}&#10;              disabled={actionLoading}&#10;            &gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button&#10;              variant=&quot;destructive&quot;&#10;              onClick={handleReject}&#10;              disabled={actionLoading || !rejectionReason.trim()}&#10;            &gt;&#10;              {actionLoading ? 'Rejecting...' : 'Reject Application'}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/users/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/users/page.tsx" />
              <option name="originalContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'&#10;import { Badge } from '@/components/ui/badge'&#10;import { ChevronLeft, ChevronRight, UserX, UserCheck } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;&#10;interface User {&#10;  id: string&#10;  userName: string&#10;  email: string&#10;  isActive: boolean&#10;  role: string&#10;}&#10;&#10;interface PaginatedResult {&#10;  items: User[]&#10;  totalCount: number&#10;  pageNumber: number&#10;  pageSize: number&#10;}&#10;&#10;export default function AdminUsersPage() {&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [users, setUsers] = useState&lt;PaginatedResult | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [currentPage, setCurrentPage] = useState(1)&#10;  const pageSize = 10&#10;&#10;  useEffect(() =&gt; {&#10;    fetchUsers(currentPage)&#10;  }, [currentPage])&#10;&#10;  const fetchUsers = async (page: number) =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;PaginatedResult&gt;(`/admin/users?pageNumber=${page}&amp;pageSize=${pageSize}`)&#10;      console.log('Users data:', data)&#10;      setUsers(data)&#10;    } catch (error: any) {&#10;      console.error('Error fetching users:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load users',&#10;        variant: 'destructive',&#10;      })&#10;      if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {&#10;        router.push('/login')&#10;      }&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const totalPages = users ? Math.ceil(users.totalCount / pageSize) : 0&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;User Management&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Manage all users in the system&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;All Users ({users?.totalCount || 0})&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading ? (&#10;            &lt;div className=&quot;text-center py-8&quot;&gt;Loading...&lt;/div&gt;&#10;          ) : users &amp;&amp; users.items.length &gt; 0 ? (&#10;            &lt;&gt;&#10;              &lt;Table&gt;&#10;                &lt;TableHeader&gt;&#10;                  &lt;TableRow&gt;&#10;                    &lt;TableHead&gt;Username&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Email&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Role&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Status&lt;/TableHead&gt;&#10;                  &lt;/TableRow&gt;&#10;                &lt;/TableHeader&gt;&#10;                &lt;TableBody&gt;&#10;                  {users.items.map((user) =&gt; (&#10;                    &lt;TableRow key={user.id}&gt;&#10;                      &lt;TableCell className=&quot;font-medium&quot;&gt;{user.userName}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;{user.email}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Badge variant=&quot;outline&quot;&gt;{user.role}&lt;/Badge&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        {user.isActive ? (&#10;                          &lt;Badge variant=&quot;default&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;UserCheck className=&quot;w-3 h-3&quot; /&gt;&#10;                            Active&#10;                          &lt;/Badge&gt;&#10;                        ) : (&#10;                          &lt;Badge variant=&quot;destructive&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;UserX className=&quot;w-3 h-3&quot; /&gt;&#10;                            Inactive&#10;                          &lt;/Badge&gt;&#10;                        )}&#10;                      &lt;/TableCell&gt;&#10;                    &lt;/TableRow&gt;&#10;                  ))}&#10;                &lt;/TableBody&gt;&#10;              &lt;/Table&gt;&#10;&#10;              {totalPages &gt; 1 &amp;&amp; (&#10;                &lt;div className=&quot;flex items-center justify-between mt-4&quot;&gt;&#10;                  &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                    Page {currentPage} of {totalPages}&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.max(1, prev - 1))}&#10;                      disabled={currentPage === 1}&#10;                    &gt;&#10;                      &lt;ChevronLeft className=&quot;w-4 h-4&quot; /&gt;&#10;                      Previous&#10;                    &lt;/Button&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.min(totalPages, prev + 1))}&#10;                      disabled={currentPage === totalPages}&#10;                    &gt;&#10;                      Next&#10;                      &lt;ChevronRight className=&quot;w-4 h-4&quot; /&gt;&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/&gt;&#10;          ) : (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;No users found&lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'&#10;import { Badge } from '@/components/ui/badge'&#10;import { ChevronLeft, ChevronRight, UserX, UserCheck, Shield, Plus, X } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;import {&#10;  Select,&#10;  SelectContent,&#10;  SelectItem,&#10;  SelectTrigger,&#10;  SelectValue,&#10;} from '@/components/ui/select'&#10;&#10;interface User {&#10;  id: string&#10;  userName: string&#10;  email: string&#10;  isActive: boolean&#10;  role: string&#10;  roles?: string[]&#10;}&#10;&#10;interface PaginatedResult {&#10;  items: User[]&#10;  totalCount: number&#10;  pageNumber: number&#10;  pageSize: number&#10;}&#10;&#10;export default function AdminUsersPage() {&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [users, setUsers] = useState&lt;PaginatedResult | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [currentPage, setCurrentPage] = useState(1)&#10;  const [toggleLoading, setToggleLoading] = useState&lt;string | null&gt;(null)&#10;  const [allRoles, setAllRoles] = useState&lt;string[]&gt;([])&#10;  const [roleDialogOpen, setRoleDialogOpen] = useState(false)&#10;  const [selectedUser, setSelectedUser] = useState&lt;User | null&gt;(null)&#10;  const [selectedRole, setSelectedRole] = useState&lt;string&gt;('')&#10;  const [roleActionLoading, setRoleActionLoading] = useState(false)&#10;  const pageSize = 10&#10;&#10;  useEffect(() =&gt; {&#10;    fetchUsers(currentPage)&#10;    fetchAllRoles()&#10;  }, [currentPage])&#10;&#10;  const fetchAllRoles = async () =&gt; {&#10;    try {&#10;      const data = await api.get&lt;{ roles: string[] }&gt;('/admin/roles')&#10;      setAllRoles(data.roles)&#10;    } catch (error: any) {&#10;      console.error('Error fetching roles:', error)&#10;    }&#10;  }&#10;&#10;  const fetchUsers = async (page: number) =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;PaginatedResult&gt;(`/admin/users?pageNumber=${page}&amp;pageSize=${pageSize}`)&#10;      console.log('Users data:', data)&#10;      &#10;      // Her kullanıcı için rolleri getir&#10;      const usersWithRoles = await Promise.all(&#10;        data.items.map(async (user) =&gt; {&#10;          try {&#10;            const rolesData = await api.get&lt;{ roles: string[] }&gt;(`/admin/users/${user.id}/roles`)&#10;            return { ...user, roles: rolesData.roles }&#10;          } catch (error) {&#10;            console.error(`Error fetching roles for user ${user.id}:`, error)&#10;            return { ...user, roles: [user.role] }&#10;          }&#10;        })&#10;      )&#10;      &#10;      setUsers({ ...data, items: usersWithRoles })&#10;    } catch (error: any) {&#10;      console.error('Error fetching users:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load users',&#10;        variant: 'destructive',&#10;      })&#10;      if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {&#10;        router.push('/login')&#10;      }&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleToggleUserStatus = async (userId: string, currentStatus: boolean) =&gt; {&#10;    setToggleLoading(userId)&#10;    try {&#10;      await api.post(`/admin/users/${userId}/toggle-status`, {})&#10;      &#10;      toast({&#10;        title: 'Success',&#10;        description: `User ${currentStatus ? 'deactivated' : 'activated'} successfully`,&#10;      })&#10;      &#10;      // Sayfayı yenile&#10;      await fetchUsers(currentPage)&#10;    } catch (error: any) {&#10;      console.error('Error toggling user status:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to update user status',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setToggleLoading(null)&#10;    }&#10;  }&#10;&#10;  const openRoleDialog = (user: User) =&gt; {&#10;    setSelectedUser(user)&#10;    setSelectedRole('')&#10;    setRoleDialogOpen(true)&#10;  }&#10;&#10;  const handleAddRole = async () =&gt; {&#10;    if (!selectedUser || !selectedRole) return&#10;    &#10;    setRoleActionLoading(true)&#10;    try {&#10;      await api.post(`/admin/users/${selectedUser.id}/roles`, { role: selectedRole })&#10;      &#10;      toast({&#10;        title: 'Success',&#10;        description: `Role '${selectedRole}' added successfully`,&#10;      })&#10;      &#10;      setRoleDialogOpen(false)&#10;      await fetchUsers(currentPage)&#10;    } catch (error: any) {&#10;      console.error('Error adding role:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to add role',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setRoleActionLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleRemoveRole = async (userId: string, role: string) =&gt; {&#10;    if (!confirm(`Are you sure you want to remove the '${role}' role?`)) return&#10;    &#10;    try {&#10;      await api.delete(`/admin/users/${userId}/roles/${role}`)&#10;      &#10;      toast({&#10;        title: 'Success',&#10;        description: `Role '${role}' removed successfully`,&#10;      })&#10;      &#10;      await fetchUsers(currentPage)&#10;    } catch (error: any) {&#10;      console.error('Error removing role:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to remove role',&#10;        variant: 'destructive',&#10;      })&#10;    }&#10;  }&#10;&#10;  const totalPages = users ? Math.ceil(users.totalCount / pageSize) : 0&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;User Management&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Manage all users in the system&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;All Users ({users?.totalCount || 0})&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading ? (&#10;            &lt;div className=&quot;text-center py-8&quot;&gt;Loading...&lt;/div&gt;&#10;          ) : users &amp;&amp; users.items.length &gt; 0 ? (&#10;            &lt;&gt;&#10;              &lt;Table&gt;&#10;                &lt;TableHeader&gt;&#10;                  &lt;TableRow&gt;&#10;                    &lt;TableHead&gt;Username&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Email&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Roles&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Status&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Actions&lt;/TableHead&gt;&#10;                  &lt;/TableRow&gt;&#10;                &lt;/TableHeader&gt;&#10;                &lt;TableBody&gt;&#10;                  {users.items.map((user) =&gt; (&#10;                    &lt;TableRow key={user.id}&gt;&#10;                      &lt;TableCell className=&quot;font-medium&quot;&gt;{user.userName}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;{user.email}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;flex gap-1 flex-wrap items-center&quot;&gt;&#10;                          {user.roles &amp;&amp; user.roles.length &gt; 0 ? (&#10;                            user.roles.map((role, index) =&gt; (&#10;                              &lt;Badge key={index} variant=&quot;outline&quot; className=&quot;gap-1&quot;&gt;&#10;                                &lt;Shield className=&quot;w-3 h-3&quot; /&gt;&#10;                                {role}&#10;                                &lt;button&#10;                                  onClick={() =&gt; handleRemoveRole(user.id, role)}&#10;                                  className=&quot;ml-1 hover:text-destructive&quot;&#10;                                &gt;&#10;                                  &lt;X className=&quot;w-3 h-3&quot; /&gt;&#10;                                &lt;/button&gt;&#10;                              &lt;/Badge&gt;&#10;                            ))&#10;                          ) : (&#10;                            &lt;Badge variant=&quot;outline&quot;&gt;No roles&lt;/Badge&gt;&#10;                          )}&#10;                          &lt;Button&#10;                            variant=&quot;ghost&quot;&#10;                            size=&quot;sm&quot;&#10;                            onClick={() =&gt; openRoleDialog(user)}&#10;                            className=&quot;h-6 px-2&quot;&#10;                          &gt;&#10;                            &lt;Plus className=&quot;w-3 h-3&quot; /&gt;&#10;                          &lt;/Button&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        {user.isActive ? (&#10;                          &lt;Badge variant=&quot;default&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;UserCheck className=&quot;w-3 h-3&quot; /&gt;&#10;                            Active&#10;                          &lt;/Badge&gt;&#10;                        ) : (&#10;                          &lt;Badge variant=&quot;destructive&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;UserX className=&quot;w-3 h-3&quot; /&gt;&#10;                            Inactive&#10;                          &lt;/Badge&gt;&#10;                        )}&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Button&#10;                          variant={user.isActive ? &quot;destructive&quot; : &quot;default&quot;}&#10;                          size=&quot;sm&quot;&#10;                          onClick={() =&gt; handleToggleUserStatus(user.id, user.isActive)}&#10;                          disabled={toggleLoading === user.id}&#10;                        &gt;&#10;                          {toggleLoading === user.id ? (&#10;                            'Loading...'&#10;                          ) : user.isActive ? (&#10;                            &lt;&gt;&#10;                              &lt;UserX className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                              Deactivate&#10;                            &lt;/&gt;&#10;                          ) : (&#10;                            &lt;&gt;&#10;                              &lt;UserCheck className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                              Activate&#10;                            &lt;/&gt;&#10;                          )}&#10;                        &lt;/Button&gt;&#10;                      &lt;/TableCell&gt;&#10;                    &lt;/TableRow&gt;&#10;                  ))}&#10;                &lt;/TableBody&gt;&#10;              &lt;/Table&gt;&#10;&#10;              {totalPages &gt; 1 &amp;&amp; (&#10;                &lt;div className=&quot;flex items-center justify-between mt-4&quot;&gt;&#10;                  &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                    Page {currentPage} of {totalPages}&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.max(1, prev - 1))}&#10;                      disabled={currentPage === 1}&#10;                    &gt;&#10;                      &lt;ChevronLeft className=&quot;w-4 h-4&quot; /&gt;&#10;                      Previous&#10;                    &lt;/Button&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.min(totalPages, prev + 1))}&#10;                      disabled={currentPage === totalPages}&#10;                    &gt;&#10;                      Next&#10;                      &lt;ChevronRight className=&quot;w-4 h-4&quot; /&gt;&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/&gt;&#10;          ) : (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;No users found&lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {/* Role Management Dialog */}&#10;      &lt;Dialog open={roleDialogOpen} onOpenChange={setRoleDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Add Role to {selectedUser?.userName}&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Select a role to add to this user&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          &lt;div className=&quot;py-4&quot;&gt;&#10;            &lt;Select value={selectedRole} onValueChange={setSelectedRole}&gt;&#10;              &lt;SelectTrigger&gt;&#10;                &lt;SelectValue placeholder=&quot;Select a role&quot; /&gt;&#10;              &lt;/SelectTrigger&gt;&#10;              &lt;SelectContent&gt;&#10;                {allRoles&#10;                  .filter(role =&gt; !selectedUser?.roles?.includes(role))&#10;                  .map((role) =&gt; (&#10;                    &lt;SelectItem key={role} value={role}&gt;&#10;                      {role}&#10;                    &lt;/SelectItem&gt;&#10;                  ))}&#10;              &lt;/SelectContent&gt;&#10;            &lt;/Select&gt;&#10;          &lt;/div&gt;&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button&#10;              variant=&quot;outline&quot;&#10;              onClick={() =&gt; setRoleDialogOpen(false)}&#10;              disabled={roleActionLoading}&#10;            &gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button&#10;              onClick={handleAddRole}&#10;              disabled={!selectedRole || roleActionLoading}&#10;            &gt;&#10;              {roleActionLoading ? 'Adding...' : 'Add Role'}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/owner/restaurants/new/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/owner/restaurants/new/page.tsx" />
              <option name="originalContent" value="'use client'&#10;&#10;import { useState } from 'react'&#10;import { useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Input } from '@/components/ui/input'&#10;import { Label } from '@/components/ui/label'&#10;import { Textarea } from '@/components/ui/textarea'&#10;import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'&#10;import { ArrowLeft } from 'lucide-react'&#10;import { useToast } from '@/hooks/use-toast'&#10;&#10;export default function NewRestaurantPage() {&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [loading, setLoading] = useState(false)&#10;  const [formData, setFormData] = useState({&#10;    name: '',&#10;    description: '',&#10;    address: '',&#10;    phone: '',&#10;    email: '',&#10;    category: '',&#10;    openingTime: '',&#10;    closingTime: '',&#10;  })&#10;&#10;  const handleSubmit = async (e: React.FormEvent) =&gt; {&#10;    e.preventDefault()&#10;    setLoading(true)&#10;&#10;    try {&#10;      const token = localStorage.getItem('token')&#10;      const response = await fetch(&#10;        `${process.env.NEXT_PUBLIC_API_URL}/api/Owner/restaurants`,&#10;        {&#10;          method: 'POST',&#10;          headers: {&#10;            'Content-Type': 'application/json',&#10;            Authorization: `Bearer ${token}`,&#10;          },&#10;          body: JSON.stringify(formData),&#10;        }&#10;      )&#10;&#10;      if (response.ok) {&#10;        const data = await response.json()&#10;        toast({&#10;          title: 'Success',&#10;          description: 'Restaurant created successfully',&#10;        })&#10;        router.push(`/owner/restaurants/${data.id}/dashboard`)&#10;      } else {&#10;        const error = await response.json()&#10;        toast({&#10;          title: 'Error',&#10;          description: error.message || 'Failed to create restaurant',&#10;          variant: 'destructive',&#10;        })&#10;      }&#10;    } catch (error) {&#10;      toast({&#10;        title: 'Error',&#10;        description: 'An error occurred while creating the restaurant',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-2xl&quot;&gt;&#10;      &lt;Button&#10;        variant=&quot;ghost&quot;&#10;        className=&quot;mb-4&quot;&#10;        onClick={() =&gt; router.push('/owner/restaurants')}&#10;      &gt;&#10;        &lt;ArrowLeft className=&quot;w-4 h-4 mr-2&quot; /&gt;&#10;        Back to Restaurants&#10;      &lt;/Button&gt;&#10;&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;Add New Restaurant&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          &lt;form onSubmit={handleSubmit} className=&quot;space-y-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;Label htmlFor=&quot;name&quot;&gt;Restaurant Name *&lt;/Label&gt;&#10;              &lt;Input&#10;                id=&quot;name&quot;&#10;                required&#10;                value={formData.name}&#10;                onChange={(e) =&gt; setFormData({ ...formData, name: e.target.value })}&#10;                placeholder=&quot;Enter restaurant name&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label htmlFor=&quot;description&quot;&gt;Description *&lt;/Label&gt;&#10;              &lt;Textarea&#10;                id=&quot;description&quot;&#10;                required&#10;                value={formData.description}&#10;                onChange={(e) =&gt; setFormData({ ...formData, description: e.target.value })}&#10;                placeholder=&quot;Describe your restaurant&quot;&#10;                rows={4}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label htmlFor=&quot;category&quot;&gt;Category *&lt;/Label&gt;&#10;              &lt;Select&#10;                value={formData.category}&#10;                onValueChange={(value) =&gt; setFormData({ ...formData, category: value })}&#10;              &gt;&#10;                &lt;SelectTrigger&gt;&#10;                  &lt;SelectValue placeholder=&quot;Select category&quot; /&gt;&#10;                &lt;/SelectTrigger&gt;&#10;                &lt;SelectContent&gt;&#10;                  &lt;SelectItem value=&quot;Turkish&quot;&gt;Turkish&lt;/SelectItem&gt;&#10;                  &lt;SelectItem value=&quot;Italian&quot;&gt;Italian&lt;/SelectItem&gt;&#10;                  &lt;SelectItem value=&quot;Japanese&quot;&gt;Japanese&lt;/SelectItem&gt;&#10;                  &lt;SelectItem value=&quot;Chinese&quot;&gt;Chinese&lt;/SelectItem&gt;&#10;                  &lt;SelectItem value=&quot;American&quot;&gt;American&lt;/SelectItem&gt;&#10;                  &lt;SelectItem value=&quot;Mexican&quot;&gt;Mexican&lt;/SelectItem&gt;&#10;                  &lt;SelectItem value=&quot;Indian&quot;&gt;Indian&lt;/SelectItem&gt;&#10;                  &lt;SelectItem value=&quot;Mediterranean&quot;&gt;Mediterranean&lt;/SelectItem&gt;&#10;                  &lt;SelectItem value=&quot;Fast Food&quot;&gt;Fast Food&lt;/SelectItem&gt;&#10;                  &lt;SelectItem value=&quot;Other&quot;&gt;Other&lt;/SelectItem&gt;&#10;                &lt;/SelectContent&gt;&#10;              &lt;/Select&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div&gt;&#10;              &lt;Label htmlFor=&quot;address&quot;&gt;Address *&lt;/Label&gt;&#10;              &lt;Input&#10;                id=&quot;address&quot;&#10;                required&#10;                value={formData.address}&#10;                onChange={(e) =&gt; setFormData({ ...formData, address: e.target.value })}&#10;                placeholder=&quot;Street address, city, postal code&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label htmlFor=&quot;phone&quot;&gt;Phone *&lt;/Label&gt;&#10;                &lt;Input&#10;                  id=&quot;phone&quot;&#10;                  required&#10;                  type=&quot;tel&quot;&#10;                  value={formData.phone}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, phone: e.target.value })}&#10;                  placeholder=&quot;+90 XXX XXX XX XX&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label htmlFor=&quot;email&quot;&gt;Email&lt;/Label&gt;&#10;                &lt;Input&#10;                  id=&quot;email&quot;&#10;                  type=&quot;email&quot;&#10;                  value={formData.email}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, email: e.target.value })}&#10;                  placeholder=&quot;restaurant@example.com&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;Label htmlFor=&quot;openingTime&quot;&gt;Opening Time *&lt;/Label&gt;&#10;                &lt;Input&#10;                  id=&quot;openingTime&quot;&#10;                  required&#10;                  type=&quot;time&quot;&#10;                  value={formData.openingTime}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, openingTime: e.target.value })}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;              &lt;div&gt;&#10;                &lt;Label htmlFor=&quot;closingTime&quot;&gt;Closing Time *&lt;/Label&gt;&#10;                &lt;Input&#10;                  id=&quot;closingTime&quot;&#10;                  required&#10;                  type=&quot;time&quot;&#10;                  value={formData.closingTime}&#10;                  onChange={(e) =&gt; setFormData({ ...formData, closingTime: e.target.value })}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div className=&quot;flex gap-4 pt-4&quot;&gt;&#10;              &lt;Button&#10;                type=&quot;button&quot;&#10;                variant=&quot;outline&quot;&#10;                onClick={() =&gt; router.push('/owner/restaurants')}&#10;                className=&quot;flex-1&quot;&#10;              &gt;&#10;                Cancel&#10;              &lt;/Button&gt;&#10;              &lt;Button type=&quot;submit&quot; disabled={loading} className=&quot;flex-1&quot;&gt;&#10;                {loading ? 'Creating...' : 'Create Restaurant'}&#10;              &lt;/Button&gt;&#10;            &lt;/div&gt;&#10;          &lt;/form&gt;&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;&#10;" />
              <option name="updatedContent" value="'use client'&#13;&#10;&#13;&#10;import { useState } from 'react'&#13;&#10;import { useRouter } from 'next/navigation'&#13;&#10;import { Button } from '@/components/ui/button'&#13;&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#13;&#10;import { Input } from '@/components/ui/input'&#13;&#10;import { Label } from '@/components/ui/label'&#13;&#10;import { Textarea } from '@/components/ui/textarea'&#13;&#10;import { ArrowLeft } from 'lucide-react'&#13;&#10;import { useToast } from '@/hooks/use-toast'&#13;&#10;&#13;&#10;export default function NewRestaurantPage() {&#13;&#10;  const router = useRouter()&#13;&#10;  const { toast } = useToast()&#13;&#10;  const [loading, setLoading] = useState(false)&#13;&#10;  const [formData, setFormData] = useState({&#13;&#10;    name: '',&#13;&#10;    description: '',&#13;&#10;    address: '',&#13;&#10;    phoneNumber: '',&#13;&#10;    email: '',&#13;&#10;    website: '',&#13;&#10;  })&#13;&#10;&#13;&#10;  const handleSubmit = async (e: React.FormEvent) =&gt; {&#13;&#10;    e.preventDefault()&#13;&#10;    setLoading(true)&#13;&#10;&#13;&#10;    try {&#13;&#10;      const token = localStorage.getItem('token')&#13;&#10;      const response = await fetch(&#13;&#10;        `${process.env.NEXT_PUBLIC_API_URL}/api/Owner/restaurants`,&#13;&#10;        {&#13;&#10;          method: 'POST',&#13;&#10;          headers: {&#13;&#10;            'Content-Type': 'application/json',&#13;&#10;            Authorization: `Bearer ${token}`,&#13;&#10;          },&#13;&#10;          body: JSON.stringify(formData),&#13;&#10;        }&#13;&#10;      )&#13;&#10;&#13;&#10;      if (response.ok) {&#13;&#10;        const data = await response.json()&#13;&#10;        toast({&#13;&#10;          title: 'Success',&#13;&#10;          description: 'Restaurant created successfully',&#13;&#10;        })&#13;&#10;        router.push(`/owner/restaurants`)&#13;&#10;        router.refresh()&#13;&#10;      } else {&#13;&#10;        const error = await response.json()&#13;&#10;        toast({&#13;&#10;          title: 'Error',&#13;&#10;          description: error.message || 'Failed to create restaurant',&#13;&#10;          variant: 'destructive',&#13;&#10;        })&#13;&#10;      }&#13;&#10;    } catch (error) {&#13;&#10;      toast({&#13;&#10;        title: 'Error',&#13;&#10;        description: 'An error occurred while creating the restaurant',&#13;&#10;        variant: 'destructive',&#13;&#10;      })&#13;&#10;    } finally {&#13;&#10;      setLoading(false)&#13;&#10;    }&#13;&#10;  }&#13;&#10;&#13;&#10;  return (&#13;&#10;    &lt;div className=&quot;container mx-auto p-6 max-w-2xl&quot;&gt;&#13;&#10;      &lt;Button&#13;&#10;        variant=&quot;ghost&quot;&#13;&#10;        className=&quot;mb-4&quot;&#13;&#10;        onClick={() =&gt; router.push('/owner/restaurants')}&#13;&#10;      &gt;&#13;&#10;        &lt;ArrowLeft className=&quot;w-4 h-4 mr-2&quot; /&gt;&#13;&#10;        Back to Restaurants&#13;&#10;      &lt;/Button&gt;&#13;&#10;&#13;&#10;      &lt;Card&gt;&#13;&#10;        &lt;CardHeader&gt;&#13;&#10;          &lt;CardTitle&gt;Add New Restaurant&lt;/CardTitle&gt;&#13;&#10;        &lt;/CardHeader&gt;&#13;&#10;        &lt;CardContent&gt;&#13;&#10;          &lt;form onSubmit={handleSubmit} className=&quot;space-y-4&quot;&gt;&#13;&#10;            &lt;div&gt;&#13;&#10;              &lt;Label htmlFor=&quot;name&quot;&gt;Restaurant Name *&lt;/Label&gt;&#13;&#10;              &lt;Input&#13;&#10;                id=&quot;name&quot;&#13;&#10;                required&#13;&#10;                value={formData.name}&#13;&#10;                onChange={(e) =&gt; setFormData({ ...formData, name: e.target.value })}&#13;&#10;                placeholder=&quot;Enter restaurant name&quot;&#13;&#10;              /&gt;&#13;&#10;            &lt;/div&gt;&#13;&#10;&#13;&#10;            &lt;div&gt;&#13;&#10;              &lt;Label htmlFor=&quot;description&quot;&gt;Description *&lt;/Label&gt;&#13;&#10;              &lt;Textarea&#13;&#10;                id=&quot;description&quot;&#13;&#10;                required&#13;&#10;                value={formData.description}&#13;&#10;                onChange={(e) =&gt; setFormData({ ...formData, description: e.target.value })}&#13;&#10;                placeholder=&quot;Describe your restaurant&quot;&#13;&#10;                rows={4}&#13;&#10;              /&gt;&#13;&#10;            &lt;/div&gt;&#13;&#10;&#13;&#10;            &lt;div&gt;&#13;&#10;              &lt;Label htmlFor=&quot;address&quot;&gt;Address *&lt;/Label&gt;&#13;&#10;              &lt;Input&#13;&#10;                id=&quot;address&quot;&#13;&#10;                required&#13;&#10;                value={formData.address}&#13;&#10;                onChange={(e) =&gt; setFormData({ ...formData, address: e.target.value })}&#13;&#10;                placeholder=&quot;Street address, city, postal code&quot;&#13;&#10;              /&gt;&#13;&#10;            &lt;/div&gt;&#13;&#10;&#13;&#10;            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;&#13;&#10;              &lt;div&gt;&#13;&#10;                &lt;Label htmlFor=&quot;phoneNumber&quot;&gt;Phone *&lt;/Label&gt;&#13;&#10;                &lt;Input&#13;&#10;                  id=&quot;phoneNumber&quot;&#13;&#10;                  required&#13;&#10;                  type=&quot;tel&quot;&#13;&#10;                  value={formData.phoneNumber}&#13;&#10;                  onChange={(e) =&gt; setFormData({ ...formData, phoneNumber: e.target.value })}&#13;&#10;                  placeholder=&quot;+90 XXX XXX XX XX&quot;&#13;&#10;                /&gt;&#13;&#10;              &lt;/div&gt;&#13;&#10;              &lt;div&gt;&#13;&#10;                &lt;Label htmlFor=&quot;email&quot;&gt;Email&lt;/Label&gt;&#13;&#10;                &lt;Input&#13;&#10;                  id=&quot;email&quot;&#13;&#10;                  type=&quot;email&quot;&#13;&#10;                  value={formData.email}&#13;&#10;                  onChange={(e) =&gt; setFormData({ ...formData, email: e.target.value })}&#13;&#10;                  placeholder=&quot;restaurant@example.com&quot;&#13;&#10;                /&gt;&#13;&#10;              &lt;/div&gt;&#13;&#10;            &lt;/div&gt;&#13;&#10;&#13;&#10;            &lt;div&gt;&#13;&#10;              &lt;Label htmlFor=&quot;website&quot;&gt;Website (Optional)&lt;/Label&gt;&#13;&#10;              &lt;Input&#13;&#10;                id=&quot;website&quot;&#13;&#10;                type=&quot;url&quot;&#13;&#10;                value={formData.website}&#13;&#10;                onChange={(e) =&gt; setFormData({ ...formData, website: e.target.value })}&#13;&#10;                placeholder=&quot;https://www.example.com&quot;&#13;&#10;              /&gt;&#13;&#10;            &lt;/div&gt;&#13;&#10;&#13;&#10;            &lt;div className=&quot;flex gap-4 pt-4&quot;&gt;&#13;&#10;              &lt;Button&#13;&#10;                type=&quot;button&quot;&#13;&#10;                variant=&quot;outline&quot;&#13;&#10;                onClick={() =&gt; router.push('/owner/restaurants')}&#13;&#10;                className=&quot;flex-1&quot;&#13;&#10;              &gt;&#13;&#10;                Cancel&#13;&#10;              &lt;/Button&gt;&#13;&#10;              &lt;Button type=&quot;submit&quot; disabled={loading} className=&quot;flex-1&quot;&gt;&#13;&#10;                {loading ? 'Creating...' : 'Create Restaurant'}&#13;&#10;              &lt;/Button&gt;&#13;&#10;            &lt;/div&gt;&#13;&#10;          &lt;/form&gt;&#13;&#10;        &lt;/CardContent&gt;&#13;&#10;      &lt;/Card&gt;&#13;&#10;    &lt;/div&gt;&#13;&#10;  )&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Restaurant/RestaurantAdminListDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Restaurant/RestaurantAdminListDto.cs" />
              <option name="originalContent" value="namespace RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;&#10;public class RestaurantAdminListDto&#10;{&#10;    public string Id { get; set; } = string.Empty;&#10;    public string Name { get; set; } = string.Empty;&#10;    public string Address { get; set; } = string.Empty;&#10;    public string PhoneNumber { get; set; } = string.Empty;&#10;    public string OwnerName { get; set; } = string.Empty;&#10;    public string OwnerEmail { get; set; } = string.Empty;&#10;    public decimal Rate { get; set; }&#10;    public DateTime CreatedAt { get; set; }&#10;}&#10;" />
              <option name="updatedContent" value="namespace RestaurantManagment.Application.Common.DTOs.Restaurant;&#13;&#10;&#13;&#10;public class RestaurantAdminListDto&#13;&#10;{&#13;&#10;    public string Id { get; set; } = string.Empty;&#13;&#10;    public string Name { get; set; } = string.Empty;&#13;&#10;    public string Address { get; set; } = string.Empty;&#13;&#10;    public string PhoneNumber { get; set; } = string.Empty;&#13;&#10;    public string Category { get; set; } = string.Empty;&#13;&#10;    public string OwnerName { get; set; } = string.Empty;&#13;&#10;    public string OwnerEmail { get; set; } = string.Empty;&#13;&#10;    public bool IsActive { get; set; }&#13;&#10;    public decimal Rate { get; set; }&#13;&#10;    public DateTime CreatedAt { get; set; }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Domain.Models.Common;&#10;&#10;public class TopSellingItemDto&#10;{&#10;    public string MenuItemId { get; set; } = string.Empty;&#10;    public string MenuItemName { get; set; } = string.Empty;&#10;    public int QuantitySold { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs" />
              <option name="originalContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.Metadata.Builders;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Persistance.Configurations;&#10;&#10;public class JobPostingConfiguration : IEntityTypeConfiguration&lt;JobPosting&gt;&#10;{&#10;    public void Configure(EntityTypeBuilder&lt;JobPosting&gt; builder)&#10;    {&#10;        builder.HasKey(j =&gt; j.Id);&#10;&#10;        builder.Property(j =&gt; j.Title)&#10;            .IsRequired()&#10;            .HasMaxLength(200);&#10;&#10;        builder.Property(j =&gt; j.Description)&#10;            .IsRequired()&#10;            .HasMaxLength(2000);&#10;&#10;        builder.Property(j =&gt; j.Requirements)&#10;            .IsRequired()&#10;            .HasMaxLength(1000);&#10;&#10;        builder.Property(j =&gt; j.Position)&#10;            .IsRequired()&#10;            .HasMaxLength(100);&#10;&#10;        builder.Property(j =&gt; j.EmploymentType)&#10;            .IsRequired()&#10;            .HasMaxLength(50);&#10;&#10;        // Relationships&#10;        builder.HasOne(j =&gt; j.Restaurant)&#10;            .WithMany(r =&gt; r.JobPostings)&#10;            .HasForeignKey(j =&gt; j.RestaurantId)&#10;            .OnDelete(DeleteBehavior.Cascade);&#10;&#10;        // Indexes&#10;        builder.HasIndex(j =&gt; j.RestaurantId);&#10;        builder.HasIndex(j =&gt; j.IsActive);&#10;&#10;        // Soft Delete Query Filter&#10;        builder.HasQueryFilter(j =&gt; !j.IsDeleted);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.AspNetCore.Identity;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.WebAPI;&#10;&#10;public static class OwnerIdFixer&#10;{&#10;    public static async Task FixRestaurantOwnerIds(IServiceProvider services)&#10;    {&#10;        using var scope = services.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var logger = scope.ServiceProvider.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();&#10;        &#10;        try&#10;        {&#10;            // Owner kullanıcısını bul&#10;            var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;            if (owner == null)&#10;            {&#10;                logger.LogWarning(&quot;owner@gmail.com kullanıcısı bulunamadı!&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;Owner bulundu: {owner.Email} (ID: {owner.Id})&quot;);&#10;            &#10;            // Tüm aktif restoranları bul&#10;            var restaurants = await context.Restaurants&#10;                .Where(r =&gt; !r.IsDeleted)&#10;                .ToListAsync();&#10;            &#10;            if (restaurants.Count == 0)&#10;            {&#10;                logger.LogInformation(&quot;Veritabanında restoran bulunamadı.&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;{restaurants.Count} restoran bulundu, owner ID'leri güncelleniyor...&quot;);&#10;            &#10;            // Her restoranın owner ID'sini güncelle&#10;            foreach (var restaurant in restaurants)&#10;            {&#10;                restaurant.OwnerId = owner.Id;&#10;                logger.LogInformation($&quot;✓ {restaurant.Name} -&gt; Owner ID güncellendi&quot;);&#10;            }&#10;            &#10;            await context.SaveChangesAsync();&#10;            logger.LogInformation($&quot;✅ {restaurants.Count} restoranın owner ID'si başarıyla güncellendi!&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            logger.LogError(ex, &quot;Owner ID güncellenirken hata oluştu!&quot;);&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>