<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/applications/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/applications/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'&#10;import { Badge } from '@/components/ui/badge'&#10;import { ChevronLeft, ChevronRight, Eye, FileText, Calendar, User } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;&#10;interface Application {&#10;  id: string&#10;  userId: string&#10;  userName: string&#10;  userEmail: string&#10;  businessName: string&#10;  businessAddress: string&#10;  category: string&#10;  status: string&#10;  applicationDate: string&#10;  reviewedAt?: string&#10;  rejectionReason?: string&#10;}&#10;&#10;interface PaginatedResult {&#10;  items: Application[]&#10;  totalCount: number&#10;  pageNumber: number&#10;  pageSize: number&#10;}&#10;&#10;export default function AdminApplicationsPage() {&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [applications, setApplications] = useState&lt;PaginatedResult | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [currentPage, setCurrentPage] = useState(1)&#10;  const pageSize = 10&#10;&#10;  useEffect(() =&gt; {&#10;    fetchApplications(currentPage)&#10;  }, [currentPage])&#10;&#10;  const fetchApplications = async (page: number) =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;PaginatedResult&gt;(`/admin/applications?pageNumber=${page}&amp;pageSize=${pageSize}`)&#10;      console.log('Applications data:', data)&#10;      setApplications(data)&#10;    } catch (error: any) {&#10;      console.error('Error fetching applications:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load applications',&#10;        variant: 'destructive',&#10;      })&#10;      if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {&#10;        router.push('/login')&#10;      }&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const getStatusBadge = (status: string) =&gt; {&#10;    switch (status.toLowerCase()) {&#10;      case 'pending':&#10;        return &lt;Badge variant=&quot;outline&quot; className=&quot;bg-yellow-100&quot;&gt;Pending&lt;/Badge&gt;&#10;      case 'approved':&#10;        return &lt;Badge variant=&quot;default&quot; className=&quot;bg-green-600&quot;&gt;Approved&lt;/Badge&gt;&#10;      case 'rejected':&#10;        return &lt;Badge variant=&quot;destructive&quot;&gt;Rejected&lt;/Badge&gt;&#10;      default:&#10;        return &lt;Badge variant=&quot;outline&quot;&gt;{status}&lt;/Badge&gt;&#10;    }&#10;  }&#10;&#10;  const totalPages = applications ? Math.ceil(applications.totalCount / pageSize) : 0&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Restaurant Ownership Applications&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Review and manage all ownership applications&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;All Applications ({applications?.totalCount || 0})&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading ? (&#10;            &lt;div className=&quot;text-center py-8&quot;&gt;Loading...&lt;/div&gt;&#10;          ) : applications &amp;&amp; applications.items.length &gt; 0 ? (&#10;            &lt;&gt;&#10;              &lt;Table&gt;&#10;                &lt;TableHeader&gt;&#10;                  &lt;TableRow&gt;&#10;                    &lt;TableHead&gt;Applicant&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Business Name&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Category&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Status&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Application Date&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Actions&lt;/TableHead&gt;&#10;                  &lt;/TableRow&gt;&#10;                &lt;/TableHeader&gt;&#10;                &lt;TableBody&gt;&#10;                  {applications.items.map((application) =&gt; (&#10;                    &lt;TableRow key={application.id}&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                          &lt;User className=&quot;w-4 h-4 text-muted-foreground&quot; /&gt;&#10;                          &lt;div&gt;&#10;                            &lt;div className=&quot;font-medium&quot;&gt;{application.userName}&lt;/div&gt;&#10;                            &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;{application.userEmail}&lt;/div&gt;&#10;                          &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;font-medium&quot;&gt;{application.businessName}&lt;/div&gt;&#10;                        &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;{application.businessAddress}&lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Badge variant=&quot;outline&quot;&gt;{application.category}&lt;/Badge&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;{getStatusBadge(application.status)}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;flex items-center gap-1 text-sm&quot;&gt;&#10;                          &lt;Calendar className=&quot;w-3 h-3&quot; /&gt;&#10;                          {new Date(application.applicationDate).toLocaleDateString()}&#10;                        &lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Button&#10;                          variant=&quot;outline&quot;&#10;                          size=&quot;sm&quot;&#10;                          onClick={() =&gt; router.push(`/admin/applications/${application.id}`)}&#10;                        &gt;&#10;                          &lt;Eye className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                          View Details&#10;                        &lt;/Button&gt;&#10;                      &lt;/TableCell&gt;&#10;                    &lt;/TableRow&gt;&#10;                  ))}&#10;                &lt;/TableBody&gt;&#10;              &lt;/Table&gt;&#10;&#10;              {totalPages &gt; 1 &amp;&amp; (&#10;                &lt;div className=&quot;flex items-center justify-between mt-4&quot;&gt;&#10;                  &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                    Page {currentPage} of {totalPages}&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.max(1, prev - 1))}&#10;                      disabled={currentPage === 1}&#10;                    &gt;&#10;                      &lt;ChevronLeft className=&quot;w-4 h-4&quot; /&gt;&#10;                      Previous&#10;                    &lt;/Button&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.min(totalPages, prev + 1))}&#10;                      disabled={currentPage === totalPages}&#10;                    &gt;&#10;                      Next&#10;                      &lt;ChevronRight className=&quot;w-4 h-4&quot; /&gt;&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/&gt;&#10;          ) : (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;No applications found&lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/restaurants/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/restaurants/page.tsx" />
              <option name="originalContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'&#10;import { Badge } from '@/components/ui/badge'&#10;import { ChevronLeft, ChevronRight, MapPin, User } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;&#10;interface Restaurant {&#10;  id: string&#10;  name: string&#10;  address: string&#10;  phone: string&#10;  category: string&#10;  ownerName: string&#10;  ownerEmail: string&#10;  isActive: boolean&#10;  createdAt: string&#10;}&#10;&#10;interface PaginatedResult {&#10;  items: Restaurant[]&#10;  totalCount: number&#10;  pageNumber: number&#10;  pageSize: number&#10;}&#10;&#10;export default function AdminRestaurantsPage() {&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [restaurants, setRestaurants] = useState&lt;PaginatedResult | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [currentPage, setCurrentPage] = useState(1)&#10;  const pageSize = 10&#10;&#10;  useEffect(() =&gt; {&#10;    fetchRestaurants(currentPage)&#10;  }, [currentPage])&#10;&#10;  const fetchRestaurants = async (page: number) =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;PaginatedResult&gt;(`/admin/restaurants?pageNumber=${page}&amp;pageSize=${pageSize}`)&#10;      console.log('Restaurants data:', data)&#10;      setRestaurants(data)&#10;    } catch (error: any) {&#10;      console.error('Error fetching restaurants:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load restaurants',&#10;        variant: 'destructive',&#10;      })&#10;      if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {&#10;        router.push('/login')&#10;      }&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const totalPages = restaurants ? Math.ceil(restaurants.totalCount / pageSize) : 0&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Restaurant Management&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Manage all restaurants in the system&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;All Restaurants ({restaurants?.totalCount || 0})&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading ? (&#10;            &lt;div className=&quot;text-center py-8&quot;&gt;Loading...&lt;/div&gt;&#10;          ) : restaurants &amp;&amp; restaurants.items.length &gt; 0 ? (&#10;            &lt;&gt;&#10;              &lt;Table&gt;&#10;                &lt;TableHeader&gt;&#10;                  &lt;TableRow&gt;&#10;                    &lt;TableHead&gt;Restaurant Name&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Category&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Owner&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Contact&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Status&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Created&lt;/TableHead&gt;&#10;                  &lt;/TableRow&gt;&#10;                &lt;/TableHeader&gt;&#10;                &lt;TableBody&gt;&#10;                  {restaurants.items.map((restaurant) =&gt; (&#10;                    &lt;TableRow key={restaurant.id}&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;font-medium&quot;&gt;{restaurant.name}&lt;/div&gt;&#10;                        &lt;div className=&quot;text-sm text-muted-foreground flex items-center gap-1 mt-1&quot;&gt;&#10;                          &lt;MapPin className=&quot;w-3 h-3&quot; /&gt;&#10;                          {restaurant.address}&#10;                        &lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Badge variant=&quot;outline&quot;&gt;{restaurant.category}&lt;/Badge&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                          &lt;User className=&quot;w-3 h-3&quot; /&gt;&#10;                          {restaurant.ownerName}&#10;                        &lt;/div&gt;&#10;                        &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;{restaurant.ownerEmail}&lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;{restaurant.phone}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        {restaurant.isActive ? (&#10;                          &lt;Badge variant=&quot;default&quot;&gt;Active&lt;/Badge&gt;&#10;                        ) : (&#10;                          &lt;Badge variant=&quot;destructive&quot;&gt;Inactive&lt;/Badge&gt;&#10;                        )}&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                        {new Date(restaurant.createdAt).toLocaleDateString()}&#10;                      &lt;/TableCell&gt;&#10;                    &lt;/TableRow&gt;&#10;                  ))}&#10;                &lt;/TableBody&gt;&#10;              &lt;/Table&gt;&#10;&#10;              {totalPages &gt; 1 &amp;&amp; (&#10;                &lt;div className=&quot;flex items-center justify-between mt-4&quot;&gt;&#10;                  &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                    Page {currentPage} of {totalPages}&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.max(1, prev - 1))}&#10;                      disabled={currentPage === 1}&#10;                    &gt;&#10;                      &lt;ChevronLeft className=&quot;w-4 h-4&quot; /&gt;&#10;                      Previous&#10;                    &lt;/Button&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.min(totalPages, prev + 1))}&#10;                      disabled={currentPage === totalPages}&#10;                    &gt;&#10;                      Next&#10;                      &lt;ChevronRight className=&quot;w-4 h-4&quot; /&gt;&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/&gt;&#10;          ) : (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;No restaurants found&lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'&#10;import { Badge } from '@/components/ui/badge'&#10;import { ChevronLeft, ChevronRight, MapPin, User, Store, StoreIcon } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;&#10;interface Restaurant {&#10;  id: string&#10;  name: string&#10;  address: string&#10;  phoneNumber: string&#10;  category: string&#10;  ownerName: string&#10;  ownerEmail: string&#10;  isActive: boolean&#10;  createdAt: string&#10;}&#10;&#10;interface PaginatedResult {&#10;  items: Restaurant[]&#10;  totalCount: number&#10;  pageNumber: number&#10;  pageSize: number&#10;}&#10;&#10;export default function AdminRestaurantsPage() {&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [restaurants, setRestaurants] = useState&lt;PaginatedResult | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [currentPage, setCurrentPage] = useState(1)&#10;  const [toggleLoading, setToggleLoading] = useState&lt;string | null&gt;(null)&#10;  const pageSize = 10&#10;&#10;  useEffect(() =&gt; {&#10;    fetchRestaurants(currentPage)&#10;  }, [currentPage])&#10;&#10;  const fetchRestaurants = async (page: number) =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;PaginatedResult&gt;(`/admin/restaurants?pageNumber=${page}&amp;pageSize=${pageSize}`)&#10;      console.log('Restaurants data:', data)&#10;      setRestaurants(data)&#10;    } catch (error: any) {&#10;      console.error('Error fetching restaurants:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load restaurants',&#10;        variant: 'destructive',&#10;      })&#10;      if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {&#10;        router.push('/login')&#10;      }&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleToggleRestaurantStatus = async (restaurantId: string, currentStatus: boolean) =&gt; {&#10;    setToggleLoading(restaurantId)&#10;    try {&#10;      await api.post(`/admin/restaurants/${restaurantId}/toggle-status`, {})&#10;&#10;      toast({&#10;        title: 'Success',&#10;        description: `Restaurant ${currentStatus ? 'deactivated' : 'activated'} successfully`,&#10;      })&#10;&#10;      // Sayfayı yenile&#10;      await fetchRestaurants(currentPage)&#10;    } catch (error: any) {&#10;      console.error('Error toggling restaurant status:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to update restaurant status',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setToggleLoading(null)&#10;    }&#10;  }&#10;&#10;  const totalPages = restaurants ? Math.ceil(restaurants.totalCount / pageSize) : 0&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;Restaurant Management&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Manage all restaurants in the system&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;All Restaurants ({restaurants?.totalCount || 0})&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading ? (&#10;            &lt;div className=&quot;text-center py-8&quot;&gt;Loading...&lt;/div&gt;&#10;          ) : restaurants &amp;&amp; restaurants.items.length &gt; 0 ? (&#10;            &lt;&gt;&#10;              &lt;Table&gt;&#10;                &lt;TableHeader&gt;&#10;                  &lt;TableRow&gt;&#10;                    &lt;TableHead&gt;Restaurant Name&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Category&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Owner&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Contact&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Status&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Created&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Actions&lt;/TableHead&gt;&#10;                  &lt;/TableRow&gt;&#10;                &lt;/TableHeader&gt;&#10;                &lt;TableBody&gt;&#10;                  {restaurants.items.map((restaurant) =&gt; (&#10;                    &lt;TableRow key={restaurant.id}&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;font-medium&quot;&gt;{restaurant.name}&lt;/div&gt;&#10;                        &lt;div className=&quot;text-sm text-muted-foreground flex items-center gap-1 mt-1&quot;&gt;&#10;                          &lt;MapPin className=&quot;w-3 h-3&quot; /&gt;&#10;                          {restaurant.address}&#10;                        &lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Badge variant=&quot;outline&quot;&gt;{restaurant.category}&lt;/Badge&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;flex items-center gap-1&quot;&gt;&#10;                          &lt;User className=&quot;w-3 h-3&quot; /&gt;&#10;                          {restaurant.ownerName}&#10;                        &lt;/div&gt;&#10;                        &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;{restaurant.ownerEmail}&lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;{restaurant.phoneNumber}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        {restaurant.isActive ? (&#10;                          &lt;Badge variant=&quot;default&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;Store className=&quot;w-3 h-3&quot; /&gt;&#10;                            Active&#10;                          &lt;/Badge&gt;&#10;                        ) : (&#10;                          &lt;Badge variant=&quot;destructive&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;StoreIcon className=&quot;w-3 h-3&quot; /&gt;&#10;                            Inactive&#10;                          &lt;/Badge&gt;&#10;                        )}&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                        {new Date(restaurant.createdAt).toLocaleDateString()}&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Button&#10;                          variant={restaurant.isActive ? 'destructive' : 'default'}&#10;                          size=&quot;sm&quot;&#10;                          onClick={() =&gt; handleToggleRestaurantStatus(restaurant.id, restaurant.isActive)}&#10;                          disabled={toggleLoading === restaurant.id}&#10;                        &gt;&#10;                          {toggleLoading === restaurant.id ? (&#10;                            'Loading...'&#10;                          ) : restaurant.isActive ? (&#10;                            &lt;&gt;&#10;                              &lt;StoreIcon className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                              Deactivate&#10;                            &lt;/&gt;&#10;                          ) : (&#10;                            &lt;&gt;&#10;                              &lt;Store className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                              Activate&#10;                            &lt;/&gt;&#10;                          )}&#10;                        &lt;/Button&gt;&#10;                      &lt;/TableCell&gt;&#10;                    &lt;/TableRow&gt;&#10;                  ))}&#10;                &lt;/TableBody&gt;&#10;              &lt;/Table&gt;&#10;&#10;              {totalPages &gt; 1 &amp;&amp; (&#10;                &lt;div className=&quot;flex items-center justify-between mt-4&quot;&gt;&#10;                  &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                    Page {currentPage} of {totalPages}&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.max(1, prev - 1))}&#10;                      disabled={currentPage === 1}&#10;                    &gt;&#10;                      &lt;ChevronLeft className=&quot;w-4 h-4&quot; /&gt;&#10;                      Previous&#10;                    &lt;/Button&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.min(totalPages, prev + 1))}&#10;                      disabled={currentPage === totalPages}&#10;                    &gt;&#10;                      Next&#10;                      &lt;ChevronRight className=&quot;w-4 h-4&quot; /&gt;&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/&gt;&#10;          ) : (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;No restaurants found&lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/users/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/FrontEnd/Restoran/app/admin/users/page.tsx" />
              <option name="originalContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'&#10;import { Badge } from '@/components/ui/badge'&#10;import { ChevronLeft, ChevronRight, UserX, UserCheck } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;&#10;interface User {&#10;  id: string&#10;  userName: string&#10;  email: string&#10;  isActive: boolean&#10;  role: string&#10;}&#10;&#10;interface PaginatedResult {&#10;  items: User[]&#10;  totalCount: number&#10;  pageNumber: number&#10;  pageSize: number&#10;}&#10;&#10;export default function AdminUsersPage() {&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [users, setUsers] = useState&lt;PaginatedResult | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [currentPage, setCurrentPage] = useState(1)&#10;  const pageSize = 10&#10;&#10;  useEffect(() =&gt; {&#10;    fetchUsers(currentPage)&#10;  }, [currentPage])&#10;&#10;  const fetchUsers = async (page: number) =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;PaginatedResult&gt;(`/admin/users?pageNumber=${page}&amp;pageSize=${pageSize}`)&#10;      console.log('Users data:', data)&#10;      setUsers(data)&#10;    } catch (error: any) {&#10;      console.error('Error fetching users:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load users',&#10;        variant: 'destructive',&#10;      })&#10;      if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {&#10;        router.push('/login')&#10;      }&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const totalPages = users ? Math.ceil(users.totalCount / pageSize) : 0&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;User Management&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Manage all users in the system&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;All Users ({users?.totalCount || 0})&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading ? (&#10;            &lt;div className=&quot;text-center py-8&quot;&gt;Loading...&lt;/div&gt;&#10;          ) : users &amp;&amp; users.items.length &gt; 0 ? (&#10;            &lt;&gt;&#10;              &lt;Table&gt;&#10;                &lt;TableHeader&gt;&#10;                  &lt;TableRow&gt;&#10;                    &lt;TableHead&gt;Username&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Email&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Role&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Status&lt;/TableHead&gt;&#10;                  &lt;/TableRow&gt;&#10;                &lt;/TableHeader&gt;&#10;                &lt;TableBody&gt;&#10;                  {users.items.map((user) =&gt; (&#10;                    &lt;TableRow key={user.id}&gt;&#10;                      &lt;TableCell className=&quot;font-medium&quot;&gt;{user.userName}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;{user.email}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Badge variant=&quot;outline&quot;&gt;{user.role}&lt;/Badge&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        {user.isActive ? (&#10;                          &lt;Badge variant=&quot;default&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;UserCheck className=&quot;w-3 h-3&quot; /&gt;&#10;                            Active&#10;                          &lt;/Badge&gt;&#10;                        ) : (&#10;                          &lt;Badge variant=&quot;destructive&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;UserX className=&quot;w-3 h-3&quot; /&gt;&#10;                            Inactive&#10;                          &lt;/Badge&gt;&#10;                        )}&#10;                      &lt;/TableCell&gt;&#10;                    &lt;/TableRow&gt;&#10;                  ))}&#10;                &lt;/TableBody&gt;&#10;              &lt;/Table&gt;&#10;&#10;              {totalPages &gt; 1 &amp;&amp; (&#10;                &lt;div className=&quot;flex items-center justify-between mt-4&quot;&gt;&#10;                  &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                    Page {currentPage} of {totalPages}&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.max(1, prev - 1))}&#10;                      disabled={currentPage === 1}&#10;                    &gt;&#10;                      &lt;ChevronLeft className=&quot;w-4 h-4&quot; /&gt;&#10;                      Previous&#10;                    &lt;/Button&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.min(totalPages, prev + 1))}&#10;                      disabled={currentPage === totalPages}&#10;                    &gt;&#10;                      Next&#10;                      &lt;ChevronRight className=&quot;w-4 h-4&quot; /&gt;&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/&gt;&#10;          ) : (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;No users found&lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useEffect, useState } from 'react'&#10;import { useRouter } from 'next/navigation'&#10;import { Button } from '@/components/ui/button'&#10;import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'&#10;import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'&#10;import { Badge } from '@/components/ui/badge'&#10;import { ChevronLeft, ChevronRight, UserX, UserCheck, Shield, Plus, X } from 'lucide-react'&#10;import { api } from '@/lib/api'&#10;import { useToast } from '@/hooks/use-toast'&#10;import {&#10;  Dialog,&#10;  DialogContent,&#10;  DialogDescription,&#10;  DialogFooter,&#10;  DialogHeader,&#10;  DialogTitle,&#10;} from '@/components/ui/dialog'&#10;import {&#10;  Select,&#10;  SelectContent,&#10;  SelectItem,&#10;  SelectTrigger,&#10;  SelectValue,&#10;} from '@/components/ui/select'&#10;&#10;interface User {&#10;  id: string&#10;  userName: string&#10;  email: string&#10;  isActive: boolean&#10;  role: string&#10;  roles?: string[]&#10;}&#10;&#10;interface PaginatedResult {&#10;  items: User[]&#10;  totalCount: number&#10;  pageNumber: number&#10;  pageSize: number&#10;}&#10;&#10;export default function AdminUsersPage() {&#10;  const router = useRouter()&#10;  const { toast } = useToast()&#10;  const [users, setUsers] = useState&lt;PaginatedResult | null&gt;(null)&#10;  const [loading, setLoading] = useState(true)&#10;  const [currentPage, setCurrentPage] = useState(1)&#10;  const [toggleLoading, setToggleLoading] = useState&lt;string | null&gt;(null)&#10;  const [allRoles, setAllRoles] = useState&lt;string[]&gt;([])&#10;  const [roleDialogOpen, setRoleDialogOpen] = useState(false)&#10;  const [selectedUser, setSelectedUser] = useState&lt;User | null&gt;(null)&#10;  const [selectedRole, setSelectedRole] = useState&lt;string&gt;('')&#10;  const [roleActionLoading, setRoleActionLoading] = useState(false)&#10;  const pageSize = 10&#10;&#10;  useEffect(() =&gt; {&#10;    fetchUsers(currentPage)&#10;    fetchAllRoles()&#10;  }, [currentPage])&#10;&#10;  const fetchAllRoles = async () =&gt; {&#10;    try {&#10;      const data = await api.get&lt;{ roles: string[] }&gt;('/admin/roles')&#10;      setAllRoles(data.roles)&#10;    } catch (error: any) {&#10;      console.error('Error fetching roles:', error)&#10;    }&#10;  }&#10;&#10;  const fetchUsers = async (page: number) =&gt; {&#10;    setLoading(true)&#10;    try {&#10;      const data = await api.get&lt;PaginatedResult&gt;(`/admin/users?pageNumber=${page}&amp;pageSize=${pageSize}`)&#10;      console.log('Users data:', data)&#10;      &#10;      // Her kullanıcı için rolleri getir&#10;      const usersWithRoles = await Promise.all(&#10;        data.items.map(async (user) =&gt; {&#10;          try {&#10;            const rolesData = await api.get&lt;{ roles: string[] }&gt;(`/admin/users/${user.id}/roles`)&#10;            return { ...user, roles: rolesData.roles }&#10;          } catch (error) {&#10;            console.error(`Error fetching roles for user ${user.id}:`, error)&#10;            return { ...user, roles: [user.role] }&#10;          }&#10;        })&#10;      )&#10;      &#10;      setUsers({ ...data, items: usersWithRoles })&#10;    } catch (error: any) {&#10;      console.error('Error fetching users:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to load users',&#10;        variant: 'destructive',&#10;      })&#10;      if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {&#10;        router.push('/login')&#10;      }&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleToggleUserStatus = async (userId: string, currentStatus: boolean) =&gt; {&#10;    setToggleLoading(userId)&#10;    try {&#10;      await api.post(`/admin/users/${userId}/toggle-status`, {})&#10;      &#10;      toast({&#10;        title: 'Success',&#10;        description: `User ${currentStatus ? 'deactivated' : 'activated'} successfully`,&#10;      })&#10;      &#10;      // Sayfayı yenile&#10;      await fetchUsers(currentPage)&#10;    } catch (error: any) {&#10;      console.error('Error toggling user status:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to update user status',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setToggleLoading(null)&#10;    }&#10;  }&#10;&#10;  const openRoleDialog = (user: User) =&gt; {&#10;    setSelectedUser(user)&#10;    setSelectedRole('')&#10;    setRoleDialogOpen(true)&#10;  }&#10;&#10;  const handleAddRole = async () =&gt; {&#10;    if (!selectedUser || !selectedRole) return&#10;    &#10;    setRoleActionLoading(true)&#10;    try {&#10;      await api.post(`/admin/users/${selectedUser.id}/roles`, { role: selectedRole })&#10;      &#10;      toast({&#10;        title: 'Success',&#10;        description: `Role '${selectedRole}' added successfully`,&#10;      })&#10;      &#10;      setRoleDialogOpen(false)&#10;      await fetchUsers(currentPage)&#10;    } catch (error: any) {&#10;      console.error('Error adding role:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to add role',&#10;        variant: 'destructive',&#10;      })&#10;    } finally {&#10;      setRoleActionLoading(false)&#10;    }&#10;  }&#10;&#10;  const handleRemoveRole = async (userId: string, role: string) =&gt; {&#10;    if (!confirm(`Are you sure you want to remove the '${role}' role?`)) return&#10;    &#10;    try {&#10;      await api.delete(`/admin/users/${userId}/roles/${role}`)&#10;      &#10;      toast({&#10;        title: 'Success',&#10;        description: `Role '${role}' removed successfully`,&#10;      })&#10;      &#10;      await fetchUsers(currentPage)&#10;    } catch (error: any) {&#10;      console.error('Error removing role:', error)&#10;      toast({&#10;        title: 'Error',&#10;        description: error.message || 'Failed to remove role',&#10;        variant: 'destructive',&#10;      })&#10;    }&#10;  }&#10;&#10;  const totalPages = users ? Math.ceil(users.totalCount / pageSize) : 0&#10;&#10;  return (&#10;    &lt;div className=&quot;container mx-auto p-6&quot;&gt;&#10;      &lt;div className=&quot;mb-6&quot;&gt;&#10;        &lt;h1 className=&quot;text-3xl font-bold&quot;&gt;User Management&lt;/h1&gt;&#10;        &lt;p className=&quot;text-muted-foreground&quot;&gt;Manage all users in the system&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;Card&gt;&#10;        &lt;CardHeader&gt;&#10;          &lt;CardTitle&gt;All Users ({users?.totalCount || 0})&lt;/CardTitle&gt;&#10;        &lt;/CardHeader&gt;&#10;        &lt;CardContent&gt;&#10;          {loading ? (&#10;            &lt;div className=&quot;text-center py-8&quot;&gt;Loading...&lt;/div&gt;&#10;          ) : users &amp;&amp; users.items.length &gt; 0 ? (&#10;            &lt;&gt;&#10;              &lt;Table&gt;&#10;                &lt;TableHeader&gt;&#10;                  &lt;TableRow&gt;&#10;                    &lt;TableHead&gt;Username&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Email&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Roles&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Status&lt;/TableHead&gt;&#10;                    &lt;TableHead&gt;Actions&lt;/TableHead&gt;&#10;                  &lt;/TableRow&gt;&#10;                &lt;/TableHeader&gt;&#10;                &lt;TableBody&gt;&#10;                  {users.items.map((user) =&gt; (&#10;                    &lt;TableRow key={user.id}&gt;&#10;                      &lt;TableCell className=&quot;font-medium&quot;&gt;{user.userName}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;{user.email}&lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;div className=&quot;flex gap-1 flex-wrap items-center&quot;&gt;&#10;                          {user.roles &amp;&amp; user.roles.length &gt; 0 ? (&#10;                            user.roles.map((role, index) =&gt; (&#10;                              &lt;Badge key={index} variant=&quot;outline&quot; className=&quot;gap-1&quot;&gt;&#10;                                &lt;Shield className=&quot;w-3 h-3&quot; /&gt;&#10;                                {role}&#10;                                &lt;button&#10;                                  onClick={() =&gt; handleRemoveRole(user.id, role)}&#10;                                  className=&quot;ml-1 hover:text-destructive&quot;&#10;                                &gt;&#10;                                  &lt;X className=&quot;w-3 h-3&quot; /&gt;&#10;                                &lt;/button&gt;&#10;                              &lt;/Badge&gt;&#10;                            ))&#10;                          ) : (&#10;                            &lt;Badge variant=&quot;outline&quot;&gt;No roles&lt;/Badge&gt;&#10;                          )}&#10;                          &lt;Button&#10;                            variant=&quot;ghost&quot;&#10;                            size=&quot;sm&quot;&#10;                            onClick={() =&gt; openRoleDialog(user)}&#10;                            className=&quot;h-6 px-2&quot;&#10;                          &gt;&#10;                            &lt;Plus className=&quot;w-3 h-3&quot; /&gt;&#10;                          &lt;/Button&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        {user.isActive ? (&#10;                          &lt;Badge variant=&quot;default&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;UserCheck className=&quot;w-3 h-3&quot; /&gt;&#10;                            Active&#10;                          &lt;/Badge&gt;&#10;                        ) : (&#10;                          &lt;Badge variant=&quot;destructive&quot; className=&quot;gap-1&quot;&gt;&#10;                            &lt;UserX className=&quot;w-3 h-3&quot; /&gt;&#10;                            Inactive&#10;                          &lt;/Badge&gt;&#10;                        )}&#10;                      &lt;/TableCell&gt;&#10;                      &lt;TableCell&gt;&#10;                        &lt;Button&#10;                          variant={user.isActive ? &quot;destructive&quot; : &quot;default&quot;}&#10;                          size=&quot;sm&quot;&#10;                          onClick={() =&gt; handleToggleUserStatus(user.id, user.isActive)}&#10;                          disabled={toggleLoading === user.id}&#10;                        &gt;&#10;                          {toggleLoading === user.id ? (&#10;                            'Loading...'&#10;                          ) : user.isActive ? (&#10;                            &lt;&gt;&#10;                              &lt;UserX className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                              Deactivate&#10;                            &lt;/&gt;&#10;                          ) : (&#10;                            &lt;&gt;&#10;                              &lt;UserCheck className=&quot;w-4 h-4 mr-1&quot; /&gt;&#10;                              Activate&#10;                            &lt;/&gt;&#10;                          )}&#10;                        &lt;/Button&gt;&#10;                      &lt;/TableCell&gt;&#10;                    &lt;/TableRow&gt;&#10;                  ))}&#10;                &lt;/TableBody&gt;&#10;              &lt;/Table&gt;&#10;&#10;              {totalPages &gt; 1 &amp;&amp; (&#10;                &lt;div className=&quot;flex items-center justify-between mt-4&quot;&gt;&#10;                  &lt;div className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                    Page {currentPage} of {totalPages}&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.max(1, prev - 1))}&#10;                      disabled={currentPage === 1}&#10;                    &gt;&#10;                      &lt;ChevronLeft className=&quot;w-4 h-4&quot; /&gt;&#10;                      Previous&#10;                    &lt;/Button&gt;&#10;                    &lt;Button&#10;                      variant=&quot;outline&quot;&#10;                      size=&quot;sm&quot;&#10;                      onClick={() =&gt; setCurrentPage((prev) =&gt; Math.min(totalPages, prev + 1))}&#10;                      disabled={currentPage === totalPages}&#10;                    &gt;&#10;                      Next&#10;                      &lt;ChevronRight className=&quot;w-4 h-4&quot; /&gt;&#10;                    &lt;/Button&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/&gt;&#10;          ) : (&#10;            &lt;div className=&quot;text-center py-8 text-muted-foreground&quot;&gt;No users found&lt;/div&gt;&#10;          )}&#10;        &lt;/CardContent&gt;&#10;      &lt;/Card&gt;&#10;&#10;      {/* Role Management Dialog */}&#10;      &lt;Dialog open={roleDialogOpen} onOpenChange={setRoleDialogOpen}&gt;&#10;        &lt;DialogContent&gt;&#10;          &lt;DialogHeader&gt;&#10;            &lt;DialogTitle&gt;Add Role to {selectedUser?.userName}&lt;/DialogTitle&gt;&#10;            &lt;DialogDescription&gt;&#10;              Select a role to add to this user&#10;            &lt;/DialogDescription&gt;&#10;          &lt;/DialogHeader&gt;&#10;          &lt;div className=&quot;py-4&quot;&gt;&#10;            &lt;Select value={selectedRole} onValueChange={setSelectedRole}&gt;&#10;              &lt;SelectTrigger&gt;&#10;                &lt;SelectValue placeholder=&quot;Select a role&quot; /&gt;&#10;              &lt;/SelectTrigger&gt;&#10;              &lt;SelectContent&gt;&#10;                {allRoles&#10;                  .filter(role =&gt; !selectedUser?.roles?.includes(role))&#10;                  .map((role) =&gt; (&#10;                    &lt;SelectItem key={role} value={role}&gt;&#10;                      {role}&#10;                    &lt;/SelectItem&gt;&#10;                  ))}&#10;              &lt;/SelectContent&gt;&#10;            &lt;/Select&gt;&#10;          &lt;/div&gt;&#10;          &lt;DialogFooter&gt;&#10;            &lt;Button&#10;              variant=&quot;outline&quot;&#10;              onClick={() =&gt; setRoleDialogOpen(false)}&#10;              disabled={roleActionLoading}&#10;            &gt;&#10;              Cancel&#10;            &lt;/Button&gt;&#10;            &lt;Button&#10;              onClick={handleAddRole}&#10;              disabled={!selectedRole || roleActionLoading}&#10;            &gt;&#10;              {roleActionLoading ? 'Adding...' : 'Add Role'}&#10;            &lt;/Button&gt;&#10;          &lt;/DialogFooter&gt;&#10;        &lt;/DialogContent&gt;&#10;      &lt;/Dialog&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Restaurant/RestaurantAdminListDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/DTOs/Restaurant/RestaurantAdminListDto.cs" />
              <option name="originalContent" value="namespace RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;&#10;public class RestaurantAdminListDto&#10;{&#10;    public string Id { get; set; } = string.Empty;&#10;    public string Name { get; set; } = string.Empty;&#10;    public string Address { get; set; } = string.Empty;&#10;    public string PhoneNumber { get; set; } = string.Empty;&#10;    public string OwnerName { get; set; } = string.Empty;&#10;    public string OwnerEmail { get; set; } = string.Empty;&#10;    public decimal Rate { get; set; }&#10;    public DateTime CreatedAt { get; set; }&#10;}&#10;" />
              <option name="updatedContent" value="namespace RestaurantManagment.Application.Common.DTOs.Restaurant;&#13;&#10;&#13;&#10;public class RestaurantAdminListDto&#13;&#10;{&#13;&#10;    public string Id { get; set; } = string.Empty;&#13;&#10;    public string Name { get; set; } = string.Empty;&#13;&#10;    public string Address { get; set; } = string.Empty;&#13;&#10;    public string PhoneNumber { get; set; } = string.Empty;&#13;&#10;    public string Category { get; set; } = string.Empty;&#13;&#10;    public string OwnerName { get; set; } = string.Empty;&#13;&#10;    public string OwnerEmail { get; set; } = string.Empty;&#13;&#10;    public bool IsActive { get; set; }&#13;&#10;    public decimal Rate { get; set; }&#13;&#10;    public DateTime CreatedAt { get; set; }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/IAdminService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Common/Interfaces/IAdminService.cs" />
              <option name="originalContent" value="using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface IAdminService&#10;{&#10;    Task&lt;OwnershipApplicationResponseDto?&gt; GetApplicationByIdAsync(string id);&#10;    Task&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt; GetPendingApplicationsAsync();&#10;    Task&lt;IEnumerable&lt;OwnershipApplication&gt;&gt; GetApplicationsByUserIdAsync(string userId);&#10;    Task ApproveApplicationAsync(string applicationId, string reviewerId);&#10;    Task RejectApplicationAsync(string applicationId, string reviewerId, string reason);&#10;   &#10;    Task&lt;AdminDashboardDto&gt; GetAdminDashboardDataAsync();&#10;    &#10;    Task&lt;PaginatedResult&lt;UserAdminShowDto&gt;&gt; GetUsersAsync(int pageNumber = 1, int pageSize = 5);&#10;    Task&lt;PaginatedResult&lt;RestaurantAdminListDto&gt;&gt; GetRestaurantsAsync(int pageNumber = 1, int pageSize = 5);&#10;    Task&lt;PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&gt; GetOwnershipApplicationsAsync(int pageNumber = 1, int pageSize = 5);&#10;    &#10;    // User management methods&#10;&#10;" />
              <option name="updatedContent" value="using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Application.Common.Interfaces;&#10;&#10;public interface IAdminService&#10;{&#10;    Task&lt;OwnershipApplicationResponseDto?&gt; GetApplicationByIdAsync(string id);&#10;    Task&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt; GetPendingApplicationsAsync();&#10;    Task&lt;IEnumerable&lt;OwnershipApplication&gt;&gt; GetApplicationsByUserIdAsync(string userId);&#10;    Task ApproveApplicationAsync(string applicationId, string reviewerId);&#10;    Task RejectApplicationAsync(string applicationId, string reviewerId, string reason);&#10;   &#10;    Task&lt;AdminDashboardDto&gt; GetAdminDashboardDataAsync();&#10;    &#10;    Task&lt;PaginatedResult&lt;UserAdminShowDto&gt;&gt; GetUsersAsync(int pageNumber = 1, int pageSize = 5);&#10;    Task&lt;PaginatedResult&lt;RestaurantAdminListDto&gt;&gt; GetRestaurantsAsync(int pageNumber = 1, int pageSize = 5);&#10;    Task&lt;PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&gt; GetOwnershipApplicationsAsync(int pageNumber = 1, int pageSize = 5);&#10;    &#10;    // User management methods&#10;    Task ToggleUserActiveStatusAsync(string userId);&#10;    Task&lt;List&lt;string&gt;&gt; GetUserRolesAsync(string userId);&#10;    Task AddRoleToUserAsync(string userId, string role);&#10;    Task RemoveRoleFromUserAsync(string userId, string role);&#10;    Task&lt;List&lt;string&gt;&gt; GetAllRolesAsync();&#10;    &#10;    // Restaurant management methods&#10;    Task ToggleRestaurantActiveStatusAsync(string restaurantId);&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Mappings/MappingProfile.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Application/Mappings/MappingProfile.cs" />
              <option name="originalContent" value="using AutoMapper;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Employee;&#10;using RestaurantManagment.Application.Common.DTOs.JobApplication;&#10;using RestaurantManagment.Application.Common.DTOs.MenuItem;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Order;&#10;using RestaurantManagment.Application.Common.DTOs.Owner;&#10;using RestaurantManagment.Application.Common.DTOs.Review;&#10;using RestaurantManagment.Application.Common.DTOs.Menu;&#10;using RestaurantManagment.Application.DTOs.MenuItem;&#10;using RestaurantManagment.Application.DTOs.Order;&#10;using RestaurantManagment.Application.DTOs.Reservation;&#10;using RestaurantManagment.Domain.Models;&#10;using CreateOrderDto = RestaurantManagment.Application.DTOs.Order.CreateOrderDto;&#10;using CreateOrderItemDto = RestaurantManagment.Application.DTOs.Order.CreateOrderItemDto;&#10;using CreateRestaurantDto = RestaurantManagment.Application.Common.DTOs.Restaurant.CreateRestaurantDto;&#10;using UpdateRestaurantDto = RestaurantManagment.Application.Common.DTOs.Restaurant.UpdateRestaurantDto;&#10;using RestaurantResponseDto = RestaurantManagment.Application.DTOs.Restaurant.RestaurantResponseDto;&#10;using UpdateOrderDto = RestaurantManagment.Application.DTOs.Order.UpdateOrderDto;&#10;using MenuResponseDto = RestaurantManagment.Application.DTOs.Menu.MenuResponseDto;&#10;using CreateMenuDtoOld = RestaurantManagment.Application.DTOs.Menu.CreateMenuDto;&#10;using UpdateMenuDtoOld = RestaurantManagment.Application.DTOs.Menu.UpdateMenuDto;&#10;&#10;namespace RestaurantManagment.Application.Mappings;&#10;&#10;public class MappingProfile : Profile&#10;{&#10;    public MappingProfile()&#10;    {&#10;      &#10;        CreateMap&lt;Restaurant, RestaurantResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.OwnerName, opt =&gt; opt.MapFrom(src =&gt; src.Owner.FullName));&#10;        CreateMap&lt;Restaurant, RestaurantAdminListDto&gt;()&#10;            .ForMember(dest =&gt; dest.OwnerName, opt =&gt; opt.MapFrom(src =&gt; src.Owner.FullName))&#10;            .ForMember(dest =&gt; dest.OwnerEmail, opt =&gt; opt.MapFrom(src =&gt; src.Owner.Email ?? string.Empty));&#10;        CreateMap&lt;CreateRestaurantDto, Restaurant&gt;();&#10;        CreateMap&lt;UpdateRestaurantDto, Restaurant&gt;();&#10;&#10;     &#10;        // Menu mappings&#10;        CreateMap&lt;Menu, MenuResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name));&#10;        &#10;        CreateMap&lt;Menu, MenuDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.MenuItems, opt =&gt; opt.MapFrom(src =&gt; src.MenuItems));&#10;        &#10;        CreateMap&lt;CreateMenuDtoOld, Menu&gt;();&#10;        CreateMap&lt;RestaurantManagment.Application.Common.DTOs.Menu.CreateMenuDto, Menu&gt;();&#10;        &#10;        CreateMap&lt;UpdateMenuDtoOld, Menu&gt;();&#10;        CreateMap&lt;RestaurantManagment.Application.Common.DTOs.Menu.UpdateMenuDto, Menu&gt;();&#10;&#10;  &#10;        CreateMap&lt;MenuItem, MenuItemResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuName, opt =&gt; opt.MapFrom(src =&gt; src.Menu.Name));&#10;        CreateMap&lt;MenuItem, RestaurantManagment.Application.Common.DTOs.MenuItem.MenuItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuName, opt =&gt; opt.MapFrom(src =&gt; src.Menu.Name));&#10;        &#10;        CreateMap&lt;CreateMenuItemDto, MenuItem&gt;();&#10;        CreateMap&lt;UpdateMenuItemDto, MenuItem&gt;();&#10;&#10;    &#10;        CreateMap&lt;Order, OrderResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table != null ? src.Table.TableNumber : (int?)null))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : null))&#10;            .ForMember(dest =&gt; dest.DeliveryPersonName, opt =&gt; opt.MapFrom(src =&gt; src.DeliveryPerson != null ? src.DeliveryPerson.FullName : null))&#10;            .ForMember(dest =&gt; dest.Items, opt =&gt; opt.MapFrom(src =&gt; src.OrderItems));&#10;        &#10;        CreateMap&lt;CreateOrderDto, Order&gt;()&#10;            .ForMember(dest =&gt; dest.OrderItems, opt =&gt; opt.Ignore());&#10;        &#10;        CreateMap&lt;UpdateOrderDto, Order&gt;()&#10;            .ForAllMembers(opts =&gt; opts.Condition((src, dest, srcMember) =&gt; srcMember != null));&#10;&#10;        CreateMap&lt;OrderItem, OrderItemResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.MenuItem.Name));&#10;        &#10;        CreateMap&lt;CreateOrderItemDto, OrderItem&gt;();&#10;&#10;   &#10;        CreateMap&lt;Reservation, ReservationResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table.TableNumber));&#10;        &#10;        CreateMap&lt;Reservation, RestaurantManagment.Application.Common.DTOs.Reservation.ReservationDto&gt;()&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table.TableNumber));&#10;        &#10;        CreateMap&lt;CreateReservationDto, Reservation&gt;();&#10;        CreateMap&lt;UpdateReservationDto, Reservation&gt;()&#10;            .ForAllMembers(opts =&gt; opts.Condition((src, dest, srcMember) =&gt; srcMember != null));&#10;        &#10;       &#10;        CreateMap&lt;UserRegisterDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Username))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.MapFrom(src =&gt; src.FirstName))&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.MapFrom(src =&gt; src.LastName))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FirstName + &quot; &quot; + src.LastName))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email));&#10;        CreateMap&lt;UserLoginDto, AppUser&gt;();&#10;        &#10;&#10;        CreateMap&lt;OwnershipApplication, OwnershipApplicationAdminDto&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.User.UserName ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.UserEmail, opt =&gt; opt.MapFrom(src =&gt; src.User.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()));&#10;&#10;        // OwnershipApplication to Response DTO with limited User info&#10;        CreateMap&lt;OwnershipApplication, OwnershipApplicationResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.User, opt =&gt; opt.MapFrom(src =&gt; src.User));&#10;&#10;        CreateMap&lt;AppUser, UserBasicInfoDto&gt;()&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.MapFrom(src =&gt; src.FirstName))&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.MapFrom(src =&gt; src.LastName));&#10;&#10;      &#10;        CreateMap&lt;AppUser, EmployeeDto&gt;()&#10;            .ForMember(dest =&gt; dest.EmployerRestaurantId, opt =&gt; opt.MapFrom(src =&gt; src.EmployerRestaurantId))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; &#10;                src.EmployerRestaurant != null ? src.EmployerRestaurant.Name : null))&#10;            .ForMember(dest =&gt; dest.Phone, opt =&gt; opt.MapFrom(src =&gt; src.PhoneNumber))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.IsActive, opt =&gt; opt.MapFrom(src =&gt; !src.IsDeleted));&#10;&#10;        CreateMap&lt;CreateEmployeeDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FullName))&#10;            .ForMember(dest =&gt; dest.PhoneNumber, opt =&gt; opt.MapFrom(src =&gt; src.Phone))&#10;            .ForMember(dest =&gt; dest.Address, opt =&gt; opt.MapFrom(src =&gt; src.Address))&#10;            .ForMember(dest =&gt; dest.EmailConfirmed, opt =&gt; opt.MapFrom(src =&gt; true))&#10;            .ForMember(dest =&gt; dest.IsDeleted, opt =&gt; opt.MapFrom(src =&gt; false))&#10;            .ForMember(dest =&gt; dest.CreatedAt, opt =&gt; opt.MapFrom(src =&gt; DateTime.UtcNow))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.Ignore());&#10;&#10;        CreateMap&lt;UpdateEmployeeDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FullName))&#10;            .ForMember(dest =&gt; dest.PhoneNumber, opt =&gt; opt.MapFrom(src =&gt; src.Phone))&#10;            .ForMember(dest =&gt; dest.Address, opt =&gt; opt.MapFrom(src =&gt; src.Address))&#10;            .ForMember(dest =&gt; dest.UpdatedAt, opt =&gt; opt.MapFrom(src =&gt; DateTime.UtcNow))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.Ignore())&#10;            .ForAllMembers(opts =&gt; opts.Condition((_, _, srcMember) =&gt; srcMember != null));&#10;&#10;   &#10;        CreateMap&lt;JobApplication, JobApplicationDto&gt;()&#10;            .ForMember(dest =&gt; dest.JobTitle, opt =&gt; opt.MapFrom(src =&gt; src.JobPosting.Title))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.JobPosting.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.ApplicantName, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.FullName))&#10;            .ForMember(dest =&gt; dest.ApplicantEmail, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.ApplicantPhone, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.PhoneNumber ?? string.Empty));&#10;&#10;  &#10;        CreateMap&lt;Review, ReviewDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer.FullName))&#10;            .ForMember(dest =&gt; dest.CustomerEmail, opt =&gt; opt.MapFrom(src =&gt; src.Customer.Email));&#10;&#10;        &#10;        CreateMap&lt;Order, OrderDto&gt;()&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.Type, opt =&gt; opt.MapFrom(src =&gt; src.Type.ToString()))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : null))&#10;            .ForMember(dest =&gt; dest.OrderItems, opt =&gt; opt.MapFrom(src =&gt; src.OrderItems));&#10;&#10;        CreateMap&lt;OrderItem, OrderItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.MenuItem.Name))&#10;            .ForMember(dest =&gt; dest.Subtotal, opt =&gt; opt.MapFrom(src =&gt; src.UnitPrice * src.Quantity));&#10;&#10;      &#10;        CreateMap&lt;Table, TableDto&gt;()&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()));&#10;        &#10;        CreateMap&lt;CreateTableDto, Table&gt;();&#10;        CreateMap&lt;UpdateTableDto, Table&gt;();&#10;        &#10;        CreateMap&lt;Order, RecentOrderDto&gt;()&#10;            .ForMember(dest =&gt; dest.OrderId, opt =&gt; opt.MapFrom(src =&gt; src.Id))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : &quot;Guest&quot;))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.OrderType, opt =&gt; opt.MapFrom(src =&gt; src.Type.ToString()));&#10;&#10;      &#10;        CreateMap&lt;MenuItem, TopSellingItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuItemId, opt =&gt; opt.MapFrom(src =&gt; src.Id))&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.Name))&#10;            .ForMember(dest =&gt; dest.QuantitySold, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.TotalRevenue, opt =&gt; opt.Ignore());&#10;&#10;  &#10;        CreateMap&lt;(DateTime Date, decimal Revenue, int OrderCount), DailyRevenueDto&gt;()&#10;            .ForMember(dest =&gt; dest.Date, opt =&gt; opt.MapFrom(src =&gt; src.Date))&#10;            .ForMember(dest =&gt; dest.Revenue, opt =&gt; opt.MapFrom(src =&gt; src.Revenue))&#10;            .ForMember(dest =&gt; dest.OrderCount, opt =&gt; opt.MapFrom(src =&gt; src.OrderCount));&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using AutoMapper;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Employee;&#10;using RestaurantManagment.Application.Common.DTOs.JobApplication;&#10;using RestaurantManagment.Application.Common.DTOs.MenuItem;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Order;&#10;using RestaurantManagment.Application.Common.DTOs.Owner;&#10;using RestaurantManagment.Application.Common.DTOs.Review;&#10;using RestaurantManagment.Application.Common.DTOs.Menu;&#10;using RestaurantManagment.Application.DTOs.MenuItem;&#10;using RestaurantManagment.Application.DTOs.Order;&#10;using RestaurantManagment.Application.DTOs.Reservation;&#10;using RestaurantManagment.Domain.Models;&#10;using CreateOrderDto = RestaurantManagment.Application.DTOs.Order.CreateOrderDto;&#10;using CreateOrderItemDto = RestaurantManagment.Application.DTOs.Order.CreateOrderItemDto;&#10;using CreateRestaurantDto = RestaurantManagment.Application.Common.DTOs.Restaurant.CreateRestaurantDto;&#10;using UpdateRestaurantDto = RestaurantManagment.Application.Common.DTOs.Restaurant.UpdateRestaurantDto;&#10;using RestaurantResponseDto = RestaurantManagment.Application.DTOs.Restaurant.RestaurantResponseDto;&#10;using UpdateOrderDto = RestaurantManagment.Application.DTOs.Order.UpdateOrderDto;&#10;using MenuResponseDto = RestaurantManagment.Application.DTOs.Menu.MenuResponseDto;&#10;using CreateMenuDtoOld = RestaurantManagment.Application.DTOs.Menu.CreateMenuDto;&#10;using UpdateMenuDtoOld = RestaurantManagment.Application.DTOs.Menu.UpdateMenuDto;&#10;&#10;namespace RestaurantManagment.Application.Mappings;&#10;&#10;public class MappingProfile : Profile&#10;{&#10;    public MappingProfile()&#10;    {&#10;      &#10;        CreateMap&lt;Restaurant, RestaurantResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.OwnerName, opt =&gt; opt.MapFrom(src =&gt; src.Owner.FullName));&#10;        CreateMap&lt;Restaurant, RestaurantAdminListDto&gt;()&#10;            .ForMember(dest =&gt; dest.OwnerName, opt =&gt; opt.MapFrom(src =&gt; src.Owner.FullName))&#10;            .ForMember(dest =&gt; dest.OwnerEmail, opt =&gt; opt.MapFrom(src =&gt; src.Owner.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.IsActive, opt =&gt; opt.MapFrom(src =&gt; !src.IsDeleted))&#10;            .ForMember(dest =&gt; dest.Category, opt =&gt; opt.MapFrom(src =&gt; &quot;General&quot;));&#10;        CreateMap&lt;CreateRestaurantDto, Restaurant&gt;();&#10;        CreateMap&lt;UpdateRestaurantDto, Restaurant&gt;();&#10;&#10;     &#10;        // Menu mappings&#10;        CreateMap&lt;Menu, MenuResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name));&#10;        &#10;        CreateMap&lt;Menu, MenuDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.MenuItems, opt =&gt; opt.MapFrom(src =&gt; src.MenuItems));&#10;        &#10;        CreateMap&lt;CreateMenuDtoOld, Menu&gt;();&#10;        CreateMap&lt;RestaurantManagment.Application.Common.DTOs.Menu.CreateMenuDto, Menu&gt;();&#10;        &#10;        CreateMap&lt;UpdateMenuDtoOld, Menu&gt;();&#10;        CreateMap&lt;RestaurantManagment.Application.Common.DTOs.Menu.UpdateMenuDto, Menu&gt;();&#10;&#10;  &#10;        CreateMap&lt;MenuItem, MenuItemResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuName, opt =&gt; opt.MapFrom(src =&gt; src.Menu.Name));&#10;        CreateMap&lt;MenuItem, RestaurantManagment.Application.Common.DTOs.MenuItem.MenuItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuName, opt =&gt; opt.MapFrom(src =&gt; src.Menu.Name));&#10;        &#10;        CreateMap&lt;CreateMenuItemDto, MenuItem&gt;();&#10;        CreateMap&lt;UpdateMenuItemDto, MenuItem&gt;();&#10;&#10;    &#10;        CreateMap&lt;Order, OrderResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table != null ? src.Table.TableNumber : (int?)null))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : null))&#10;            .ForMember(dest =&gt; dest.DeliveryPersonName, opt =&gt; opt.MapFrom(src =&gt; src.DeliveryPerson != null ? src.DeliveryPerson.FullName : null))&#10;            .ForMember(dest =&gt; dest.Items, opt =&gt; opt.MapFrom(src =&gt; src.OrderItems));&#10;        &#10;        CreateMap&lt;CreateOrderDto, Order&gt;()&#10;            .ForMember(dest =&gt; dest.OrderItems, opt =&gt; opt.Ignore());&#10;        &#10;        CreateMap&lt;UpdateOrderDto, Order&gt;()&#10;            .ForAllMembers(opts =&gt; opts.Condition((src, dest, srcMember) =&gt; srcMember != null));&#10;&#10;        CreateMap&lt;OrderItem, OrderItemResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.MenuItem.Name));&#10;        &#10;        CreateMap&lt;CreateOrderItemDto, OrderItem&gt;();&#10;&#10;   &#10;        CreateMap&lt;Reservation, ReservationResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table.TableNumber));&#10;        &#10;        CreateMap&lt;Reservation, RestaurantManagment.Application.Common.DTOs.Reservation.ReservationDto&gt;()&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.TableNumber, opt =&gt; opt.MapFrom(src =&gt; src.Table.TableNumber));&#10;        &#10;        CreateMap&lt;CreateReservationDto, Reservation&gt;();&#10;        CreateMap&lt;UpdateReservationDto, Reservation&gt;()&#10;            .ForAllMembers(opts =&gt; opts.Condition((src, dest, srcMember) =&gt; srcMember != null));&#10;        &#10;       &#10;        CreateMap&lt;UserRegisterDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Username))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.MapFrom(src =&gt; src.FirstName))&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.MapFrom(src =&gt; src.LastName))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FirstName + &quot; &quot; + src.LastName))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email));&#10;        CreateMap&lt;UserLoginDto, AppUser&gt;();&#10;        &#10;&#10;        CreateMap&lt;OwnershipApplication, OwnershipApplicationAdminDto&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.User.UserName ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.UserEmail, opt =&gt; opt.MapFrom(src =&gt; src.User.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()));&#10;&#10;        // OwnershipApplication to Response DTO with limited User info&#10;        CreateMap&lt;OwnershipApplication, OwnershipApplicationResponseDto&gt;()&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.User, opt =&gt; opt.MapFrom(src =&gt; new UserBasicInfoDto&#10;            {&#10;                FirstName = src.User.FirstName,&#10;                LastName = src.User.LastName&#10;            }));&#10;&#10;        CreateMap&lt;AppUser, UserBasicInfoDto&gt;()&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.MapFrom(src =&gt; src.FirstName))&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.MapFrom(src =&gt; src.LastName));&#10;&#10;      &#10;        CreateMap&lt;AppUser, EmployeeDto&gt;()&#10;            .ForMember(dest =&gt; dest.EmployerRestaurantId, opt =&gt; opt.MapFrom(src =&gt; src.EmployerRestaurantId))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; &#10;                src.EmployerRestaurant != null ? src.EmployerRestaurant.Name : null))&#10;            .ForMember(dest =&gt; dest.Phone, opt =&gt; opt.MapFrom(src =&gt; src.PhoneNumber))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.IsActive, opt =&gt; opt.MapFrom(src =&gt; !src.IsDeleted));&#10;&#10;        CreateMap&lt;CreateEmployeeDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FullName))&#10;            .ForMember(dest =&gt; dest.PhoneNumber, opt =&gt; opt.MapFrom(src =&gt; src.Phone))&#10;            .ForMember(dest =&gt; dest.Address, opt =&gt; opt.MapFrom(src =&gt; src.Address))&#10;            .ForMember(dest =&gt; dest.EmailConfirmed, opt =&gt; opt.MapFrom(src =&gt; true))&#10;            .ForMember(dest =&gt; dest.IsDeleted, opt =&gt; opt.MapFrom(src =&gt; false))&#10;            .ForMember(dest =&gt; dest.CreatedAt, opt =&gt; opt.MapFrom(src =&gt; DateTime.UtcNow))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.Ignore());&#10;&#10;        CreateMap&lt;UpdateEmployeeDto, AppUser&gt;()&#10;            .ForMember(dest =&gt; dest.UserName, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.Email, opt =&gt; opt.MapFrom(src =&gt; src.Email))&#10;            .ForMember(dest =&gt; dest.FullName, opt =&gt; opt.MapFrom(src =&gt; src.FullName))&#10;            .ForMember(dest =&gt; dest.PhoneNumber, opt =&gt; opt.MapFrom(src =&gt; src.Phone))&#10;            .ForMember(dest =&gt; dest.Address, opt =&gt; opt.MapFrom(src =&gt; src.Address))&#10;            .ForMember(dest =&gt; dest.UpdatedAt, opt =&gt; opt.MapFrom(src =&gt; DateTime.UtcNow))&#10;            .ForMember(dest =&gt; dest.FirstName, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.LastName, opt =&gt; opt.Ignore())&#10;            .ForAllMembers(opts =&gt; opts.Condition((_, _, srcMember) =&gt; srcMember != null));&#10;&#10;   &#10;        CreateMap&lt;JobApplication, JobApplicationDto&gt;()&#10;            .ForMember(dest =&gt; dest.JobTitle, opt =&gt; opt.MapFrom(src =&gt; src.JobPosting.Title))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.JobPosting.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.ApplicantName, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.FullName))&#10;            .ForMember(dest =&gt; dest.ApplicantEmail, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.Email ?? string.Empty))&#10;            .ForMember(dest =&gt; dest.ApplicantPhone, opt =&gt; opt.MapFrom(src =&gt; src.Applicant.PhoneNumber ?? string.Empty));&#10;&#10;  &#10;        CreateMap&lt;Review, ReviewDto&gt;()&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer.FullName))&#10;            .ForMember(dest =&gt; dest.CustomerEmail, opt =&gt; opt.MapFrom(src =&gt; src.Customer.Email));&#10;&#10;        &#10;        CreateMap&lt;Order, OrderDto&gt;()&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.Type, opt =&gt; opt.MapFrom(src =&gt; src.Type.ToString()))&#10;            .ForMember(dest =&gt; dest.RestaurantName, opt =&gt; opt.MapFrom(src =&gt; src.Restaurant.Name))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : null))&#10;            .ForMember(dest =&gt; dest.OrderItems, opt =&gt; opt.MapFrom(src =&gt; src.OrderItems));&#10;&#10;        CreateMap&lt;OrderItem, OrderItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.MenuItem.Name))&#10;            .ForMember(dest =&gt; dest.Subtotal, opt =&gt; opt.MapFrom(src =&gt; src.UnitPrice * src.Quantity));&#10;&#10;      &#10;        CreateMap&lt;Table, TableDto&gt;()&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()));&#10;        &#10;        CreateMap&lt;CreateTableDto, Table&gt;();&#10;        CreateMap&lt;UpdateTableDto, Table&gt;();&#10;        &#10;        CreateMap&lt;Order, RecentOrderDto&gt;()&#10;            .ForMember(dest =&gt; dest.OrderId, opt =&gt; opt.MapFrom(src =&gt; src.Id))&#10;            .ForMember(dest =&gt; dest.CustomerName, opt =&gt; opt.MapFrom(src =&gt; src.Customer != null ? src.Customer.FullName : &quot;Guest&quot;))&#10;            .ForMember(dest =&gt; dest.Status, opt =&gt; opt.MapFrom(src =&gt; src.Status.ToString()))&#10;            .ForMember(dest =&gt; dest.OrderType, opt =&gt; opt.MapFrom(src =&gt; src.Type.ToString()));&#10;&#10;      &#10;        CreateMap&lt;MenuItem, TopSellingItemDto&gt;()&#10;            .ForMember(dest =&gt; dest.MenuItemId, opt =&gt; opt.MapFrom(src =&gt; src.Id))&#10;            .ForMember(dest =&gt; dest.MenuItemName, opt =&gt; opt.MapFrom(src =&gt; src.Name))&#10;            .ForMember(dest =&gt; dest.QuantitySold, opt =&gt; opt.Ignore())&#10;            .ForMember(dest =&gt; dest.TotalRevenue, opt =&gt; opt.Ignore());&#10;&#10;  &#10;        CreateMap&lt;(DateTime Date, decimal Revenue, int OrderCount), DailyRevenueDto&gt;()&#10;            .ForMember(dest =&gt; dest.Date, opt =&gt; opt.MapFrom(src =&gt; src.Date))&#10;            .ForMember(dest =&gt; dest.Revenue, opt =&gt; opt.MapFrom(src =&gt; src.Revenue))&#10;            .ForMember(dest =&gt; dest.OrderCount, opt =&gt; opt.MapFrom(src =&gt; src.OrderCount));&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Core/RestaurantManagment.Domain/Models/Common/TopSellingItemDto.cs" />
              <option name="updatedContent" value="namespace RestaurantManagment.Domain.Models.Common;&#10;&#10;public class TopSellingItemDto&#10;{&#10;    public string MenuItemId { get; set; } = string.Empty;&#10;    public string MenuItemName { get; set; } = string.Empty;&#10;    public int QuantitySold { get; set; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/DependencyInjection.cs" />
              <option name="originalContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.Extensions.DependencyInjection;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Infrastructure.Services;&#10;&#10;namespace RestaurantManagment.Infrastructure;&#10;&#10;public static class DependencyInjection&#10;{&#10;    public static IServiceCollection AddInfrastructure(this IServiceCollection services)&#10;    {&#10;        services.AddScoped&lt;IEmailService, EmailService&gt;();&#10;        services.AddScoped&lt;IJwtTokenService, JwtTokenService&gt;();&#10;        services.AddScoped&lt;IAccountService, AccountService&gt;();&#10;        services.AddScoped&lt;IAdminService, AdminService&gt;();&#10;        services.AddScoped&lt;IOwnerService, OwnerService&gt;();&#10;        &#10;        return services;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/AdminService.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Infrastructure/Services/AdminService.cs" />
              <option name="originalContent" value="using Microsoft.AspNetCore.Identity;&#10;using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using AutoMapper;&#10;using AutoMapper.QueryableExtensions;&#10;&#10;namespace RestaurantManagment.Infrastructure.Services;&#10;&#10;public class AdminService(IAppDbContext _context,UserManager&lt;AppUser&gt; _userManager, IMapper _mapper) : IAdminService&#10;{&#10;    &#10;    public async Task&lt;OwnershipApplicationResponseDto?&gt; GetApplicationByIdAsync(string id)&#10;    {&#10;        return await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; a.Id == id &amp;&amp; !a.IsDeleted)&#10;            .ProjectTo&lt;OwnershipApplicationResponseDto&gt;(_mapper.ConfigurationProvider)&#10;            .FirstOrDefaultAsync();&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt; GetPendingApplicationsAsync()&#10;    {&#10;        var applications = await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .OrderBy(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;&#10;        return _mapper.Map&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt;(applications);&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplication&gt;&gt; GetApplicationsByUserIdAsync(string userId)&#10;    {&#10;        return await _context.OwnershipApplications&#10;            .Where(a =&gt; a.UserId == userId &amp;&amp; !a.IsDeleted)&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;    }&#10;&#10;    public async Task ApproveApplicationAsync(string applicationId, string reviewerId)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == applicationId &amp;&amp; !a.IsDeleted);&#10;        &#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Approved;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectApplicationAsync(string applicationId, string reviewerId, string reason)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == applicationId &amp;&amp; !a.IsDeleted);&#10;        &#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Rejected;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;        application.RejectionReason = reason;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;AdminDashboardDto&gt; GetAdminDashboardDataAsync()&#10;    {&#10;        var dashboard = new AdminDashboardDto();&#10;&#10;     &#10;        dashboard.TotalUsers = await _userManager.Users&#10;            .Where(u =&gt; !u.IsDeleted)&#10;            .CountAsync();&#10;&#10;        &#10;        dashboard.TotalRestaurants = await _context.Restaurants&#10;            .Where(r =&gt; !r.IsDeleted)&#10;            .CountAsync();&#10;&#10;         &#10;        var restaurantOwnerRole = &quot;RestaurantOwner&quot;;&#10;        var ownersQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allOwners = await ownersQuery.ToListAsync();&#10;        var owners = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allOwners)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(restaurantOwnerRole))&#10;            {&#10;                owners.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalRestaurantOwners = owners.Count;&#10;&#10;        var employeeRole = &quot;Employee&quot;;&#10;        var employeesQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allEmployees = await employeesQuery.ToListAsync();&#10;        var employees = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allEmployees)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(employeeRole))&#10;            {&#10;                employees.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalEmployees = employees.Count;&#10;&#10;        dashboard.TotalPendingApplications = await _context.OwnershipApplications&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .CountAsync();&#10;&#10;        return dashboard;&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;UserAdminShowDto&gt;&gt; GetUsersAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var users = await query&#10;            .OrderByDescending(u =&gt; u.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var userDtos = new List&lt;UserAdminShowDto&gt;();&#10;        foreach (var user in users)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            userDtos.Add(new UserAdminShowDto&#10;            {&#10;                Id = user.Id,&#10;                UserName = user.UserName ?? string.Empty,&#10;                Email = user.Email ?? string.Empty,&#10;                IsActive = !user.IsDeleted,&#10;                Role = roles.FirstOrDefault() ?? &quot;User&quot;&#10;            });&#10;        }&#10;&#10;        return new PaginatedResult&lt;UserAdminShowDto&gt;&#10;        {&#10;            Items = userDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;RestaurantAdminListDto&gt;&gt; GetRestaurantsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.Restaurants&#10;            .Include(r =&gt; r.Owner)&#10;            .Where(r =&gt; !r.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var restaurants = await query&#10;            .OrderByDescending(r =&gt; r.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var restaurantDtos = _mapper.Map&lt;List&lt;RestaurantAdminListDto&gt;&gt;(restaurants);&#10;&#10;        return new PaginatedResult&lt;RestaurantAdminListDto&gt;&#10;        {&#10;            Items = restaurantDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&gt; GetOwnershipApplicationsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; !a.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var applications = await query&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var applicationDtos = _mapper.Map&lt;List&lt;OwnershipApplicationAdminDto&gt;&gt;(applications);&#10;&#10;        return new PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&#10;        {&#10;            Items = applicationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;}" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Identity;&#10;using Microsoft.EntityFrameworkCore;&#10;using RestaurantManagment.Application.Common.DTOs.Account;&#10;using RestaurantManagment.Application.Common.DTOs.Admin;&#10;using RestaurantManagment.Application.Common.DTOs.Common;&#10;using RestaurantManagment.Application.Common.DTOs.Restaurant;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;using RestaurantManagment.Domain.Models;&#10;using AutoMapper;&#10;using AutoMapper.QueryableExtensions;&#10;&#10;namespace RestaurantManagment.Infrastructure.Services;&#10;&#10;public class AdminService(IAppDbContext _context,UserManager&lt;AppUser&gt; _userManager, RoleManager&lt;IdentityRole&gt; _roleManager, IMapper _mapper) : IAdminService&#10;{&#10;    &#10;    public async Task&lt;OwnershipApplicationResponseDto?&gt; GetApplicationByIdAsync(string id)&#10;    {&#10;        return await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; a.Id == id &amp;&amp; !a.IsDeleted)&#10;            .ProjectTo&lt;OwnershipApplicationResponseDto&gt;(_mapper.ConfigurationProvider)&#10;            .FirstOrDefaultAsync();&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt; GetPendingApplicationsAsync()&#10;    {&#10;        var applications = await _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .OrderBy(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;&#10;        return _mapper.Map&lt;IEnumerable&lt;OwnershipApplicationResponseDto&gt;&gt;(applications);&#10;    }&#10;&#10;    public async Task&lt;IEnumerable&lt;OwnershipApplication&gt;&gt; GetApplicationsByUserIdAsync(string userId)&#10;    {&#10;        return await _context.OwnershipApplications&#10;            .Where(a =&gt; a.UserId == userId &amp;&amp; !a.IsDeleted)&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .ToListAsync();&#10;    }&#10;&#10;    public async Task ApproveApplicationAsync(string applicationId, string reviewerId)&#10;    {&#10;        // Önce application'ı bul&#10;        var application = await _context.OwnershipApplications&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == applicationId &amp;&amp; !a.IsDeleted);&#10;        &#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        // Application'ı approved yap&#10;        application.Status = ApplicationStatus.Approved;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;&#10;        // Kullanıcıyı database'den çek&#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == application.UserId);&#10;        &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        // Önce Customer rolünü kaldır&#10;        var isCustomer = await _userManager.IsInRoleAsync(user, &quot;Customer&quot;);&#10;        if (isCustomer)&#10;        {&#10;            var removeResult = await _userManager.RemoveFromRoleAsync(user, &quot;Customer&quot;);&#10;            if (!removeResult.Succeeded)&#10;            {&#10;                var errors = string.Join(&quot;, &quot;, removeResult.Errors.Select(e =&gt; e.Description));&#10;                throw new Exception($&quot;Failed to remove Customer role: {errors}&quot;);&#10;            }&#10;        }&#10;&#10;        // Kullanıcının zaten RestaurantOwner rolü var mı kontrol et&#10;        var isInRole = await _userManager.IsInRoleAsync(user, &quot;RestaurantOwner&quot;);&#10;        if (!isInRole)&#10;        {&#10;            var result = await _userManager.AddToRoleAsync(user, &quot;RestaurantOwner&quot;);&#10;            if (!result.Succeeded)&#10;            {&#10;                var errors = string.Join(&quot;, &quot;, result.Errors.Select(e =&gt; e.Description));&#10;                throw new Exception($&quot;Failed to add RestaurantOwner role: {errors}&quot;);&#10;            }&#10;        }&#10;&#10;        // Application değişikliklerini kaydet&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task RejectApplicationAsync(string applicationId, string reviewerId, string reason)&#10;    {&#10;        var application = await _context.OwnershipApplications&#10;            .FirstOrDefaultAsync(a =&gt; a.Id == applicationId &amp;&amp; !a.IsDeleted);&#10;        &#10;        if (application == null)&#10;            throw new Exception(&quot;Application not found&quot;);&#10;&#10;        application.Status = ApplicationStatus.Rejected;&#10;        application.ReviewedBy = reviewerId;&#10;        application.ReviewedAt = DateTime.UtcNow;&#10;        application.RejectionReason = reason;&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;&#10;    public async Task&lt;AdminDashboardDto&gt; GetAdminDashboardDataAsync()&#10;    {&#10;        var dashboard = new AdminDashboardDto();&#10;&#10;     &#10;        dashboard.TotalUsers = await _userManager.Users&#10;            .Where(u =&gt; !u.IsDeleted)&#10;            .CountAsync();&#10;&#10;        &#10;        dashboard.TotalRestaurants = await _context.Restaurants&#10;            .Where(r =&gt; !r.IsDeleted)&#10;            .CountAsync();&#10;&#10;         &#10;        var restaurantOwnerRole = &quot;RestaurantOwner&quot;;&#10;        var ownersQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allOwners = await ownersQuery.ToListAsync();&#10;        var owners = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allOwners)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(restaurantOwnerRole))&#10;            {&#10;                owners.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalRestaurantOwners = owners.Count;&#10;&#10;        var employeeRole = &quot;Employee&quot;;&#10;        var employeesQuery = _userManager.Users.Where(u =&gt; !u.IsDeleted);&#10;        var allEmployees = await employeesQuery.ToListAsync();&#10;        var employees = new List&lt;AppUser&gt;();&#10;        &#10;        foreach (var user in allEmployees)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            if (roles.Contains(employeeRole))&#10;            {&#10;                employees.Add(user);&#10;            }&#10;        }&#10;        dashboard.TotalEmployees = employees.Count;&#10;&#10;        dashboard.TotalPendingApplications = await _context.OwnershipApplications&#10;            .Where(a =&gt; a.Status == ApplicationStatus.Pending &amp;&amp; !a.IsDeleted)&#10;            .CountAsync();&#10;&#10;        return dashboard;&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;UserAdminShowDto&gt;&gt; GetUsersAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        // Tüm kullanıcıları getir (IgnoreQueryFilters ile IsDeleted filter'ını bypass et)&#10;        var query = _context.Users.IgnoreQueryFilters().AsQueryable();&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var users = await query&#10;            .OrderByDescending(u =&gt; u.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var userDtos = new List&lt;UserAdminShowDto&gt;();&#10;        foreach (var user in users)&#10;        {&#10;            var roles = await _userManager.GetRolesAsync(user);&#10;            userDtos.Add(new UserAdminShowDto&#10;            {&#10;                Id = user.Id,&#10;                UserName = user.UserName ?? string.Empty,&#10;                Email = user.Email ?? string.Empty,&#10;                IsActive = !user.IsDeleted,&#10;                Role = roles.FirstOrDefault() ?? &quot;User&quot;&#10;            });&#10;        }&#10;&#10;        return new PaginatedResult&lt;UserAdminShowDto&gt;&#10;        {&#10;            Items = userDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;RestaurantAdminListDto&gt;&gt; GetRestaurantsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        // Tüm restoranları getir (IgnoreQueryFilters ile IsDeleted filter'ını bypass et)&#10;        var query = _context.Restaurants&#10;            .IgnoreQueryFilters()&#10;            .Include(r =&gt; r.Owner);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var restaurants = await query&#10;            .OrderByDescending(r =&gt; r.CreatedAt)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var restaurantDtos = _mapper.Map&lt;List&lt;RestaurantAdminListDto&gt;&gt;(restaurants);&#10;&#10;        return new PaginatedResult&lt;RestaurantAdminListDto&gt;&#10;        {&#10;            Items = restaurantDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task&lt;PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&gt; GetOwnershipApplicationsAsync(int pageNumber = 1, int pageSize = 5)&#10;    {&#10;        var query = _context.OwnershipApplications&#10;            .Include(a =&gt; a.User)&#10;            .Where(a =&gt; !a.IsDeleted);&#10;&#10;        var totalCount = await query.CountAsync();&#10;&#10;        var applications = await query&#10;            .OrderByDescending(a =&gt; a.ApplicationDate)&#10;            .Skip((pageNumber - 1) * pageSize)&#10;            .Take(pageSize)&#10;            .ToListAsync();&#10;&#10;        var applicationDtos = _mapper.Map&lt;List&lt;OwnershipApplicationAdminDto&gt;&gt;(applications);&#10;&#10;        return new PaginatedResult&lt;OwnershipApplicationAdminDto&gt;&#10;        {&#10;            Items = applicationDtos,&#10;            TotalCount = totalCount,&#10;            PageNumber = pageNumber,&#10;            PageSize = pageSize&#10;        };&#10;    }&#10;&#10;    public async Task ToggleUserActiveStatusAsync(string userId)&#10;    {&#10;        // IgnoreQueryFilters kullanarak deleted kullanıcıları da bulabilelim&#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        // IsDeleted field'ini tersine çevir (true ise false, false ise true)&#10;        user.IsDeleted = !user.IsDeleted;&#10;        &#10;        if (user.IsDeleted)&#10;        {&#10;            user.DeletedAt = DateTime.UtcNow;&#10;        }&#10;        else&#10;        {&#10;            user.DeletedAt = null;&#10;        }&#10;&#10;        await _userManager.UpdateAsync(user);&#10;    }&#10;&#10;    public async Task&lt;List&lt;string&gt;&gt; GetUserRolesAsync(string userId)&#10;    {&#10;        // IgnoreQueryFilters kullanarak deleted kullanıcıları da bulabilelim&#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        var roles = await _userManager.GetRolesAsync(user);&#10;        return roles.ToList();&#10;    }&#10;&#10;    public async Task AddRoleToUserAsync(string userId, string role)&#10;    {&#10;        // IgnoreQueryFilters kullanarak deleted kullanıcıları da bulabilelim&#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        var roleExists = await _roleManager.RoleExistsAsync(role);&#10;        if (!roleExists)&#10;            throw new Exception($&quot;Role '{role}' does not exist&quot;);&#10;&#10;        var isInRole = await _userManager.IsInRoleAsync(user, role);&#10;        if (isInRole)&#10;            throw new Exception($&quot;User already has the '{role}' role&quot;);&#10;&#10;        var result = await _userManager.AddToRoleAsync(user, role);&#10;        if (!result.Succeeded)&#10;            throw new Exception($&quot;Failed to add role: {string.Join(&quot;, &quot;, result.Errors.Select(e =&gt; e.Description))}&quot;);&#10;    }&#10;&#10;    public async Task RemoveRoleFromUserAsync(string userId, string role)&#10;    {&#10;        // IgnoreQueryFilters kullanarak deleted kullanıcıları da bulabilelim&#10;        var user = await _context.Users.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(u =&gt; u.Id == userId);&#10;            &#10;        if (user == null)&#10;            throw new Exception(&quot;User not found&quot;);&#10;&#10;        var isInRole = await _userManager.IsInRoleAsync(user, role);&#10;        if (!isInRole)&#10;            throw new Exception($&quot;User does not have the '{role}' role&quot;);&#10;&#10;        var result = await _userManager.RemoveFromRoleAsync(user, role);&#10;        if (!result.Succeeded)&#10;            throw new Exception($&quot;Failed to remove role: {string.Join(&quot;, &quot;, result.Errors.Select(e =&gt; e.Description))}&quot;);&#10;    }&#10;&#10;    public async Task&lt;List&lt;string&gt;&gt; GetAllRolesAsync()&#10;    {&#10;        var roles = await _roleManager.Roles.Select(r =&gt; r.Name).ToListAsync();&#10;        return roles.Where(r =&gt; r != null).Cast&lt;string&gt;().ToList();&#10;    }&#10;&#10;    public async Task ToggleRestaurantActiveStatusAsync(string restaurantId)&#10;    {&#10;        // IgnoreQueryFilters kullanarak deleted restoranları da bulabilelim&#10;        var restaurant = await _context.Restaurants.IgnoreQueryFilters()&#10;            .FirstOrDefaultAsync(r =&gt; r.Id == restaurantId);&#10;            &#10;        if (restaurant == null)&#10;            throw new Exception(&quot;Restaurant not found&quot;);&#10;&#10;        // IsDeleted field'ini tersine çevir (true ise false, false ise true)&#10;        restaurant.IsDeleted = !restaurant.IsDeleted;&#10;        &#10;        if (restaurant.IsDeleted)&#10;        {&#10;            restaurant.DeletedAt = DateTime.UtcNow;&#10;        }&#10;        else&#10;        {&#10;            restaurant.DeletedAt = null;&#10;        }&#10;&#10;        await _context.SaveChangesAsync();&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Infrastructure/RestaurantManagment.Persistance/Configurations/JobPostingConfiguration.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.EntityFrameworkCore.Metadata.Builders;&#10;using RestaurantManagment.Domain.Models;&#10;&#10;namespace RestaurantManagment.Persistance.Configurations;&#10;&#10;public class JobPostingConfiguration : IEntityTypeConfiguration&lt;JobPosting&gt;&#10;{&#10;    public void Configure(EntityTypeBuilder&lt;JobPosting&gt; builder)&#10;    {&#10;        builder.HasKey(j =&gt; j.Id);&#10;&#10;        builder.Property(j =&gt; j.Title)&#10;            .IsRequired()&#10;            .HasMaxLength(200);&#10;&#10;        builder.Property(j =&gt; j.Description)&#10;            .IsRequired()&#10;            .HasMaxLength(2000);&#10;&#10;        builder.Property(j =&gt; j.Requirements)&#10;            .IsRequired()&#10;            .HasMaxLength(1000);&#10;&#10;        builder.Property(j =&gt; j.Position)&#10;            .IsRequired()&#10;            .HasMaxLength(100);&#10;&#10;        builder.Property(j =&gt; j.EmploymentType)&#10;            .IsRequired()&#10;            .HasMaxLength(50);&#10;&#10;        // Relationships&#10;        builder.HasOne(j =&gt; j.Restaurant)&#10;            .WithMany(r =&gt; r.JobPostings)&#10;            .HasForeignKey(j =&gt; j.RestaurantId)&#10;            .OnDelete(DeleteBehavior.Cascade);&#10;&#10;        // Indexes&#10;        builder.HasIndex(j =&gt; j.RestaurantId);&#10;        builder.HasIndex(j =&gt; j.IsActive);&#10;&#10;        // Soft Delete Query Filter&#10;        builder.HasQueryFilter(j =&gt; !j.IsDeleted);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/AdminController.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/Controllers/AdminController.cs" />
              <option name="originalContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers&#10;{&#10;    [Route(&quot;api/[controller]&quot;)]&#10;    [ApiController]&#10;    [Authorize(Roles = &quot;Admin&quot;)] &#10;    public class AdminController : ControllerBase&#10;    {&#10;        private readonly IAdminService _adminService;&#10;&#10;        public AdminController(IAdminService adminService)&#10;        {&#10;            _adminService = adminService;&#10;        }&#10;&#10;       &#10;        [HttpGet(&quot;dashboard&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetDashboard()&#10;        {&#10;            try&#10;            {&#10;                var dashboardData = await _adminService.GetAdminDashboardDataAsync();&#10;                return Ok(dashboardData);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the dashboard data.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;users&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetUsers([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetUsersAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the users.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;restaurants&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetRestaurants([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetRestaurantsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the restaurants.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplications([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetOwnershipApplicationsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications/pending&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetPendingApplications()&#10;        {&#10;            try&#10;            {&#10;                var applications = await _adminService.GetPendingApplicationsAsync();&#10;                return Ok(applications);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }  &#10;        }&#10;&#10;     &#10;        [HttpGet(&quot;applications/{id}&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplication(string id)&#10;        {&#10;            try&#10;            {&#10;                var application = await _adminService.GetApplicationByIdAsync(id);&#10;                if (application == null)&#10;                    return NotFound(new { message = &quot;Application not found.&quot; });&#10;&#10;                return Ok(application);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/approve&quot;)]&#10;        public async Task&lt;IActionResult&gt; ApproveApplication(int id)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                await _adminService.ApproveApplicationAsync(id, userId);&#10;                return Ok(new { message = &quot;Application approved.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while approving the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/reject&quot;)]&#10;        public async Task&lt;IActionResult&gt; RejectApplication(int id, [FromBody] RejectApplicationRequest request)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                if (string.IsNullOrEmpty(request.Reason))&#10;                    return BadRequest(new { message = &quot;Rejection reason must be specified.&quot; });&#10;&#10;                await _adminService.RejectApplicationAsync(id, userId, request.Reason);&#10;                return Ok(new { message = &quot;Application rejected.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while rejecting the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;    }&#10;&#10;    public class RejectApplicationRequest&#10;    {&#10;        public string Reason { get; set; } = string.Empty;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="using Microsoft.AspNetCore.Authorization;&#10;using Microsoft.AspNetCore.Mvc;&#10;using RestaurantManagment.Application.Common.Interfaces;&#10;&#10;namespace RestaurantManagment.WebAPI.Controllers&#10;{&#10;    [Route(&quot;api/[controller]&quot;)]&#10;    [ApiController]&#10;    [Authorize(Roles = &quot;Admin&quot;)] &#10;    public class AdminController : ControllerBase&#10;    {&#10;        private readonly IAdminService _adminService;&#10;&#10;        public AdminController(IAdminService adminService)&#10;        {&#10;            _adminService = adminService;&#10;        }&#10;&#10;       &#10;        [HttpGet(&quot;dashboard&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetDashboard()&#10;        {&#10;            try&#10;            {&#10;                var dashboardData = await _adminService.GetAdminDashboardDataAsync();&#10;                return Ok(dashboardData);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the dashboard data.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;users&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetUsers([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetUsersAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the users.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;restaurants&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetRestaurants([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetRestaurantsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the restaurants.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplications([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 5)&#10;        {&#10;            try&#10;            {&#10;                var result = await _adminService.GetOwnershipApplicationsAsync(pageNumber, pageSize);&#10;                return Ok(result);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;      &#10;        [HttpGet(&quot;applications/pending&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetPendingApplications()&#10;        {&#10;            try&#10;            {&#10;                var applications = await _adminService.GetPendingApplicationsAsync();&#10;                return Ok(applications);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the applications.&quot;, error = ex.Message });&#10;            }  &#10;        }&#10;&#10;     &#10;        [HttpGet(&quot;applications/{id}&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetApplication(string id)&#10;        {&#10;            try&#10;            {&#10;                var application = await _adminService.GetApplicationByIdAsync(id);&#10;                if (application == null)&#10;                    return NotFound(new { message = &quot;Application not found.&quot; });&#10;&#10;                return Ok(application);&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while loading the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/approve&quot;)]&#10;        public async Task&lt;IActionResult&gt; ApproveApplication(string id)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                await _adminService.ApproveApplicationAsync(id, userId);&#10;                return Ok(new { message = &quot;Application approved.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while approving the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;     &#10;        [HttpPost(&quot;applications/{id}/reject&quot;)]&#10;        public async Task&lt;IActionResult&gt; RejectApplication(string id, [FromBody] RejectApplicationRequest request)&#10;        {&#10;            try&#10;            {&#10;                var userId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;&#10;                if (string.IsNullOrEmpty(userId))&#10;                    return Unauthorized(new { message = &quot;User ID not found.&quot; });&#10;&#10;                if (string.IsNullOrEmpty(request.Reason))&#10;                    return BadRequest(new { message = &quot;Rejection reason must be specified.&quot; });&#10;&#10;                await _adminService.RejectApplicationAsync(id, userId, request.Reason);&#10;                return Ok(new { message = &quot;Application rejected.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while rejecting the application.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        // User management endpoints&#10;        [HttpPost(&quot;users/{userId}/toggle-status&quot;)]&#10;        public async Task&lt;IActionResult&gt; ToggleUserStatus(string userId)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.ToggleUserActiveStatusAsync(userId);&#10;                return Ok(new { message = &quot;User status updated successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while updating user status.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;users/{userId}/roles&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetUserRoles(string userId)&#10;        {&#10;            try&#10;            {&#10;                var roles = await _adminService.GetUserRolesAsync(userId);&#10;                return Ok(new { roles });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while fetching user roles.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpGet(&quot;roles&quot;)]&#10;        public async Task&lt;IActionResult&gt; GetAllRoles()&#10;        {&#10;            try&#10;            {&#10;                var roles = await _adminService.GetAllRolesAsync();&#10;                return Ok(new { roles });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while fetching roles.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpPost(&quot;users/{userId}/roles&quot;)]&#10;        public async Task&lt;IActionResult&gt; AddRoleToUser(string userId, [FromBody] RoleRequest request)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.AddRoleToUserAsync(userId, request.Role);&#10;                return Ok(new { message = $&quot;Role '{request.Role}' added successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while adding role.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        [HttpDelete(&quot;users/{userId}/roles/{role}&quot;)]&#10;        public async Task&lt;IActionResult&gt; RemoveRoleFromUser(string userId, string role)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.RemoveRoleFromUserAsync(userId, role);&#10;                return Ok(new { message = $&quot;Role '{role}' removed successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while removing role.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;&#10;        // Restaurant management endpoints&#10;        [HttpPost(&quot;restaurants/{restaurantId}/toggle-status&quot;)]&#10;        public async Task&lt;IActionResult&gt; ToggleRestaurantStatus(string restaurantId)&#10;        {&#10;            try&#10;            {&#10;                await _adminService.ToggleRestaurantActiveStatusAsync(restaurantId);&#10;                return Ok(new { message = &quot;Restaurant status updated successfully.&quot; });&#10;            }&#10;            catch (Exception ex)&#10;            {&#10;                return StatusCode(500, new { message = &quot;An error occurred while updating restaurant status.&quot;, error = ex.Message });&#10;            }&#10;        }&#10;    }&#10;&#10;    public class RejectApplicationRequest&#10;    {&#10;        public string Reason { get; set; } = string.Empty;&#10;    }&#10;&#10;    public class RoleRequest&#10;    {&#10;        public string Role { get; set; } = string.Empty;&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Src/Presentation/RestaurantManagment.WebAPI/OwnerIdFixer.cs" />
              <option name="updatedContent" value="using Microsoft.EntityFrameworkCore;&#10;using Microsoft.AspNetCore.Identity;&#10;using RestaurantManagment.Domain.Models;&#10;using RestaurantManagment.Persistance.Data;&#10;&#10;namespace RestaurantManagment.WebAPI;&#10;&#10;public static class OwnerIdFixer&#10;{&#10;    public static async Task FixRestaurantOwnerIds(IServiceProvider services)&#10;    {&#10;        using var scope = services.CreateScope();&#10;        var context = scope.ServiceProvider.GetRequiredService&lt;AppDbContext&gt;();&#10;        var userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&lt;AppUser&gt;&gt;();&#10;        var logger = scope.ServiceProvider.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();&#10;        &#10;        try&#10;        {&#10;            // Owner kullanıcısını bul&#10;            var owner = await userManager.FindByEmailAsync(&quot;owner@gmail.com&quot;);&#10;            if (owner == null)&#10;            {&#10;                logger.LogWarning(&quot;owner@gmail.com kullanıcısı bulunamadı!&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;Owner bulundu: {owner.Email} (ID: {owner.Id})&quot;);&#10;            &#10;            // Tüm aktif restoranları bul&#10;            var restaurants = await context.Restaurants&#10;                .Where(r =&gt; !r.IsDeleted)&#10;                .ToListAsync();&#10;            &#10;            if (restaurants.Count == 0)&#10;            {&#10;                logger.LogInformation(&quot;Veritabanında restoran bulunamadı.&quot;);&#10;                return;&#10;            }&#10;            &#10;            logger.LogInformation($&quot;{restaurants.Count} restoran bulundu, owner ID'leri güncelleniyor...&quot;);&#10;            &#10;            // Her restoranın owner ID'sini güncelle&#10;            foreach (var restaurant in restaurants)&#10;            {&#10;                restaurant.OwnerId = owner.Id;&#10;                logger.LogInformation($&quot;✓ {restaurant.Name} -&gt; Owner ID güncellendi&quot;);&#10;            }&#10;            &#10;            await context.SaveChangesAsync();&#10;            logger.LogInformation($&quot;✅ {restaurants.Count} restoranın owner ID'si başarıyla güncellendi!&quot;);&#10;        }&#10;        catch (Exception ex)&#10;        {&#10;            logger.LogError(ex, &quot;Owner ID güncellenirken hata oluştu!&quot;);&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>